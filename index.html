<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ€ ì‹¬í”Œ ì‚¬ì£¼ ë¡œë˜</title>
    <meta name="description" content="ê´‘ê³  ì—†ëŠ” ìˆœìˆ˜ ë¡œë˜ ëª…ë‹¹. ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ 100% ì œì™¸ ì•Œê³ ë¦¬ì¦˜.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Noto Serif KR', serif;
            background: #1a1a2e;
            min-height: 100vh;
            color: #fff;
            padding-bottom: 90px;
            line-height: 1.6;
        }
        
        /* í—¤ë” - ì „í†µ ë¶€ì  ìŠ¤íƒ€ì¼ */
        header {
            background: linear-gradient(135deg, #FDD835 0%, #F9A825 50%, #FF8F00 100%);
            padding: 25px 20px;
            text-align: center;
            position: relative;
            border-bottom: 4px solid #C62828;
            box-shadow: 0 4px 15px rgba(198,40,40,0.3);
        }
        
        header::before {
            content: 'ç¦ é‹ è²¡ å‰';
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            color: #C62828;
            letter-spacing: 15px;
            opacity: 0.4;
        }
        
        header::after {
            content: '';
            position: absolute;
            top: 5px; left: 5px; right: 5px; bottom: 5px;
            border: 1px dashed rgba(198,40,40,0.3);
            pointer-events: none;
        }
        
        header h1 {
            font-size: 26px;
            font-weight: 900;
            color: #C62828;
            text-shadow: 1px 1px 0 rgba(255,255,255,0.5);
            margin-top: 10px;
        }
        
        header p {
            font-size: 12px;
            color: #8B0000;
            margin-top: 8px;
            font-weight: 500;
        }
        
        /* ë„¤ë¹„ê²Œì´ì…˜ */
        nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(26,26,46,0.98);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            padding: 12px 0 25px;
            z-index: 100;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        nav button {
            background: none;
            border: none;
            color: #666;
            font-family: 'Noto Serif KR', serif;
            font-size: 11px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 5px 20px;
            transition: color 0.2s;
        }
        
        nav button.active { color: #FDD835; }
        nav button span { font-size: 24px; }
        
        /* íƒ­ ì½˜í…ì¸  */
        .tab-content {
            display: none;
            padding: 20px;
            animation: fadeIn 0.3s;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .tab-content.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ì¹´ë“œ */
        .card {
            background: linear-gradient(145deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .card h3 {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* ìƒíƒœë°” - ë¶€ì  ìŠ¤íƒ€ì¼ */
        .status {
            text-align: center;
            padding: 14px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 13px;
            font-weight: 700;
            background: linear-gradient(135deg, #FDD835, #F9A825);
            color: #8B0000;
            border: 2px solid #C62828;
            box-shadow: 0 2px 8px rgba(198,40,40,0.2);
        }
        
        /* ê³µ ìŠ¤íƒ€ì¼ */
        .ball {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 700;
            color: #fff;
            margin: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            position: relative;
        }
        
        .ball::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 12px;
            width: 8px;
            height: 8px;
            background: rgba(255,255,255,0.4);
            border-radius: 50%;
        }
        
        .ball.sm { width: 36px; height: 36px; font-size: 14px; }
        .ball.sm::before { width: 6px; height: 6px; top: 6px; left: 9px; }
        
        .ball.y { background: linear-gradient(135deg, #FFC107, #FF9800); }
        .ball.b { background: linear-gradient(135deg, #42A5F5, #1976D2); }
        .ball.r { background: linear-gradient(135deg, #EF5350, #C62828); }
        .ball.g { background: linear-gradient(135deg, #66BB6A, #2E7D32); }
        .ball.p { background: linear-gradient(135deg, #AB47BC, #6A1B9A); }
        
        .balls-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 6px;
            margin: 15px 0;
        }
        
        /* ë©”ì¸ ìƒì„± ì˜ì—­ */
        .main-generate {
            text-align: center;
            padding: 15px 0;
        }
        
        .main-generate .balls-container {
            padding: 25px;
            background: rgba(0,0,0,0.2);
            border-radius: 16px;
            margin: 15px 0;
        }
        
        /* ë²„íŠ¼ */
        .btn {
            background: linear-gradient(135deg, #C62828, #8B0000);
            color: #fff;
            border: none;
            padding: 16px 30px;
            font-family: 'Noto Serif KR', serif;
            font-size: 15px;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            width: 100%;
            margin: 6px 0;
            box-shadow: 0 4px 15px rgba(198,40,40,0.3);
            transition: transform 0.2s;
        }
        
        .btn:active { transform: scale(0.98); }
        
        .btn.secondary {
            background: linear-gradient(135deg, #1a1a2e, #2d2d44);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: none;
        }
        
        .btn.gold {
            background: linear-gradient(135deg, #FDD835, #F9A825);
            color: #8B0000;
        }
        
        .btn.outline {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.3);
            box-shadow: none;
        }
        
        .btn-row {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }
        
        .btn-row .btn { flex: 1; margin: 0; }
        
        /* ë±ƒì§€ */
        .feature-badge {
            display: inline-block;
            background: rgba(253,216,53,0.15);
            color: #FDD835;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 11px;
            margin-top: 15px;
            border: 1px solid rgba(253,216,53,0.3);
        }
        
        /* ì…ë ¥ */
        input[type="number"] {
            width: 70px;
            padding: 12px 8px;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            background: rgba(255,255,255,0.05);
            color: #fff;
            font-family: 'Noto Serif KR', serif;
            font-size: 16px;
            text-align: center;
        }
        
        input[type="number"]:focus {
            outline: none;
            border-color: #FDD835;
        }
        
        .birth-input-group {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 20px 0;
        }
        
        .birth-input-group label {
            font-size: 14px;
            color: #aaa;
        }
        
        /* ìš´ì„¸ ì¹´ë“œ */
        .fortune-card {
            background: linear-gradient(145deg, rgba(253,216,53,0.15), rgba(253,216,53,0.05));
            border: 1px solid rgba(253,216,53,0.3);
            text-align: center;
            padding: 30px 20px;
        }
        
        .fortune-card .emoji { font-size: 60px; margin-bottom: 15px; }
        .fortune-card h2 { color: #FDD835; margin-bottom: 15px; font-size: 20px; }
        .fortune-card p { color: #bbb; line-height: 1.8; font-size: 14px; }
        
        /* íˆìŠ¤í† ë¦¬ */
        .history-item {
            display: flex;
            justify-content: center;
            gap: 4px;
            padding: 12px;
            background: rgba(255,255,255,0.03);
            border-radius: 10px;
            margin: 6px 0;
        }
        
        /* í†µê³„ ë°” */
        .stat-bar {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        
        .stat-bar .num {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 12px;
            margin-right: 12px;
            color: #fff;
        }
        
        .stat-bar .bar-container {
            flex: 1;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .stat-bar .bar {
            height: 100%;
            border-radius: 4px;
        }
        
        .stat-bar .bar.hot { background: linear-gradient(90deg, #FDD835, #C62828); }
        .stat-bar .bar.cold { background: linear-gradient(90deg, #42A5F5, #1976D2); }
        .stat-bar .count { width: 45px; text-align: right; font-size: 12px; color: #888; margin-left: 10px; }
        
        /* ìµœì‹  ë‹¹ì²¨ë²ˆí˜¸ */
        .latest-winner {
            background: linear-gradient(145deg, rgba(253,216,53,0.1), rgba(253,216,53,0.03));
            border: 1px solid rgba(253,216,53,0.2);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        
        .latest-winner h4 {
            color: #FDD835;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .latest-winner .sub {
            font-size: 11px;
            color: #888;
            margin-bottom: 15px;
        }
        
        /* ì² í•™ ì„¹ì…˜ */
        .philosophy-section {
            margin-top: 30px;
            padding: 30px 20px;
            background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
            border-radius: 16px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .philosophy-section .quote {
            font-style: italic;
            color: #aaa;
            line-height: 2;
            font-size: 13px;
            margin-bottom: 25px;
        }
        
        .philosophy-section .quote strong {
            color: #FDD835;
        }
        
        /* í† ìŠ¤íŠ¸ */
        .toast {
            position: fixed;
            bottom: 110px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: #FDD835;
            color: #8B0000;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 700;
            opacity: 0;
            transition: all 0.3s;
            z-index: 200;
        }
        
        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
        
        /* ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 200;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal.active { display: flex; }
        
        .modal-content {
            background: #1a1a2e;
            border: 1px solid rgba(253,216,53,0.3);
            border-radius: 20px;
            padding: 25px;
            width: 100%;
            max-width: 350px;
            text-align: center;
        }
        
        .modal-content h3 {
            color: #FDD835;
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        .share-preview {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
        }
        
        /* ìº¡ì²˜ ì˜ì—­ */
        #capture-area {
            position: fixed;
            top: -9999px;
            left: -9999px;
            width: 380px;
            padding: 35px 25px;
            background: linear-gradient(145deg, #FDD835, #F9A825);
            text-align: center;
            font-family: 'Noto Serif KR', serif;
            border-radius: 20px;
            border: 4px solid #C62828;
        }
    </style>
</head>
<body>

    <!-- ìº¡ì²˜ìš© ì¹´ë“œ -->
    <div id="capture-area">
        <div style="color:#C62828;font-size:10px;letter-spacing:10px;margin-bottom:15px;opacity:0.5;">ç¦ é‹ è²¡ å‰</div>
        <h2 style="font-size:22px;color:#C62828;margin-bottom:5px;">ğŸ€ ì‹¬í”Œ ì‚¬ì£¼ ë¡œë˜</h2>
        <p style="font-size:11px;color:#8B0000;margin-bottom:20px;">ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ 100% ì œì™¸</p>
        <div style="background:rgba(139,0,0,0.1);border:2px dashed #C62828;border-radius:15px;padding:20px;margin-bottom:20px;">
            <p style="font-size:11px;color:#8B0000;margin-bottom:10px;" id="card-date"></p>
            <div id="card-numbers" style="display:flex;justify-content:center;gap:6px;flex-wrap:wrap;"></div>
        </div>
        <p style="font-size:14px;color:#C62828;font-weight:700;margin-bottom:5px;">"ëŒ€ë°•ë‚˜ì„¸ìš”! ğŸ€"</p>
        <p style="font-size:10px;color:#8B0000;opacity:0.6;">simplesajulotto.com</p>
    </div>

    <header>
        <h1>ğŸ€ ì‹¬í”Œ ì‚¬ì£¼ ë¡œë˜</h1>
        <p>ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ 100% ì œì™¸ Â· ì‚¬ì£¼ ê¸°ë°˜ í–‰ìš´ ë²ˆí˜¸</p>
    </header>
    
    <!-- íƒ­ 1: ë²ˆí˜¸ ìƒì„± -->
    <div id="tab-generate" class="tab-content active">
        <div class="card">
            <div class="status">âœ… ì—­ëŒ€ ëª¨ë“  ë‹¹ì²¨ë²ˆí˜¸ ë¶„ì„ ì™„ë£Œ</div>
            
            <div class="main-generate">
                <div class="balls-container" id="generatedNumbers">
                    <div class="ball y">?</div>
                    <div class="ball b">?</div>
                    <div class="ball r">?</div>
                    <div class="ball r">?</div>
                    <div class="ball g">?</div>
                    <div class="ball p">?</div>
                </div>
                
                <button class="btn" onclick="generateNumbers()">ğŸ² í–‰ìš´ì˜ ë²ˆí˜¸ ìƒì„±</button>
                
                <div class="btn-row">
                    <button class="btn secondary" onclick="openShareModal()">ğŸ“¤ ê³µìœ </button>
                    <button class="btn gold" onclick="saveImage()">ğŸ“¸ ì´ë¯¸ì§€ ì €ì¥</button>
                </div>
                
                <div class="feature-badge">âœ¨ ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ì™€ 100% ê²¹ì¹˜ì§€ ì•ŠëŠ” ì¡°í•©</div>
            </div>
        </div>
        
        <div class="card" id="historyCard" style="display:none;">
            <h3>ğŸ“‹ ì˜¤ëŠ˜ ìƒì„±í•œ ë²ˆí˜¸</h3>
            <div id="historyList"></div>
        </div>
        

        <div class="philosophy-section">
            <div class="quote">
                í–‰ìš´ì€ ìˆœìˆ˜í•œ íë¦„ ì†ì— ê¹ƒë“­ë‹ˆë‹¤.<br><br>
                ì´ê³³ì€ ì¼ì²´ì˜ ê´‘ê³ ë¥¼ ë°°ì œí•œ<br>
                <strong>ì²­ì • êµ¬ì—­</strong>ìœ¼ë¡œ ë‚¨ê²¨ë‘ì—ˆìŠµë‹ˆë‹¤.<br><br>
                ì„œë²„ì˜ ìœ ì§€ëŠ” ì˜¤ì§ ì‚¬ìš©ìì˜<br>
                ìë°œì ì¸ í›„ì›ìœ¼ë¡œë§Œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.
            </div>
            <button class="btn outline" onclick="copyAccount()">â˜• í›„ì›í•˜ê¸° (ê³„ì¢Œ ë³µì‚¬)</button>
        </div>
    </div>
    
    <!-- íƒ­ 2: ì‚¬ì£¼ ìš´ì„¸ -->
    <div id="tab-fortune" class="tab-content">
        <div class="card">
            <h3>ğŸ‚ ìƒë…„ì›”ì¼ë¡œ í–‰ìš´ ë²ˆí˜¸ ë°›ê¸°</h3>
            <p style="font-size:13px;color:#888;margin-bottom:10px;">
                ì‚¬ì£¼ ê¸°ë°˜ìœ¼ë¡œ ì˜¤ëŠ˜ì˜ í–‰ìš´ ë²ˆí˜¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.<br>
                ê°™ì€ ìƒë…„ì›”ì¼ì´ë©´ í•­ìƒ ê°™ì€ ë²ˆí˜¸ê°€ ë‚˜ì˜µë‹ˆë‹¤.
            </p>
            
            <div class="birth-input-group">
                <input type="number" id="birthYear" placeholder="1990" min="1900" max="2025">
                <label>ë…„</label>
                <input type="number" id="birthMonth" placeholder="1" min="1" max="12">
                <label>ì›”</label>
                <input type="number" id="birthDay" placeholder="1" min="1" max="31">
                <label>ì¼</label>
            </div>
            
            <button class="btn" onclick="getFortune()">ğŸ”® ì˜¤ëŠ˜ì˜ í–‰ìš´ ë²ˆí˜¸ ë°›ê¸°</button>
        </div>
        
        <div class="card fortune-card" id="fortuneResult" style="display:none;">
            <div class="emoji" id="fortuneEmoji">ğŸŒŸ</div>
            <h2 id="fortuneTitle"></h2>
            <p id="fortuneText"></p>
            <div class="balls-container" id="fortuneNumbers" style="margin-top:20px;"></div>
            <p style="color:#FDD835;font-size:13px;margin-top:15px;" id="fortuneTip"></p>
        </div>
    </div>
    
    <!-- íƒ­ 3: í†µê³„ -->
    <div id="tab-stats" class="tab-content">
        <div class="card">
            <h3>ğŸ”¥ ìµœê·¼ 50íšŒ ìì£¼ ë‚˜ì˜¨ ë²ˆí˜¸</h3>
            <div id="hotNumbers"></div>
        </div>
        <div class="card">
            <h3>â„ï¸ ìµœê·¼ 50íšŒ ì•ˆ ë‚˜ì˜¨ ë²ˆí˜¸</h3>
            <div id="coldNumbers"></div>
        </div>
    </div>
    
    <!-- ê³µìœ  ëª¨ë‹¬ -->
    <div class="modal" id="shareModal">
        <div class="modal-content">
            <h3>ğŸ“¤ ë²ˆí˜¸ ê³µìœ í•˜ê¸°</h3>
            <div class="share-preview">
                <p style="font-size:12px;color:#888;margin-bottom:10px;">ğŸ€ ì‹¬í”Œ ì‚¬ì£¼ ë¡œë˜</p>
                <div class="balls-container" id="shareNumbers"></div>
            </div>
            <button class="btn" onclick="shareNumbers()">ğŸ“¤ ê³µìœ í•˜ê¸°</button>
            <button class="btn secondary" onclick="copyNumbers()">ğŸ“‹ ë²ˆí˜¸ ë³µì‚¬</button>
            <button class="btn outline" onclick="closeShareModal()">ë‹«ê¸°</button>
        </div>
    </div>
    
    <div class="toast" id="toast"></div>
    
    <nav>
        <button class="active" onclick="switchTab('generate')"><span>ğŸ²</span>ë²ˆí˜¸ìƒì„±</button>
        <button onclick="switchTab('fortune')"><span>ğŸ”®</span>ì‚¬ì£¼ìš´ì„¸</button>
        <button onclick="switchTab('stats')"><span>ğŸ“Š</span>í†µê³„</button>
    </nav>

<script>
// ============================================
// ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ ë°ì´í„°
// ============================================
const PAST_WINNERS = [
    [1,4,16,23,31,41],
    [10,23,29,33,37,40],[9,13,21,25,32,42],[11,16,19,21,27,31],[14,27,30,31,40,42],[16,24,29,40,41,42],
    [14,15,26,27,40,42],[2,9,16,25,26,40],[8,19,25,34,37,39],[2,4,16,17,36,39],[9,25,30,33,41,44],
    [1,7,36,37,41,42],[2,11,21,25,39,45],[22,34,36,37,42,44],[2,6,12,19,33,44],[1,4,9,23,34,45],
    [6,13,27,35,40,41],[4,14,22,38,39,45],[6,8,14,21,23,38],[3,5,15,16,44,45],[8,13,14,26,28,43],
    [5,17,18,23,30,33],[4,5,7,9,24,42],[1,6,11,20,31,35],[7,16,34,37,38,43],[4,9,12,14,24,44],
    [2,10,12,13,23,29],[2,14,16,18,28,43],[3,6,7,8,27,35],[1,5,23,24,35,37],[9,14,20,23,33,34],
    [11,16,21,22,28,42],[8,18,21,27,29,45],[1,4,7,23,28,43],[3,13,24,29,34,40],[5,6,17,22,28,31],
    [3,4,14,15,22,26],[1,4,15,25,29,30],[4,6,14,16,24,40],[5,6,11,22,25,38],[12,19,24,26,38,43],
    [5,13,26,28,41,42],[4,16,17,21,31,45],[2,5,6,30,31,36],[1,9,16,19,21,25],[7,8,27,30,36,43],
    [4,10,14,27,29,41],[10,11,25,27,28,31],[4,9,12,30,39,43],[4,13,22,24,40,42],[3,12,17,34,36,40],
    [1,13,22,25,34,41],[3,6,10,13,27,42],[3,4,18,30,32,35],[6,9,11,17,18,25],[8,10,14,28,38,40],
    [2,8,16,21,27,44],[4,21,23,24,39,41],[2,3,5,8,18,29],[6,12,18,32,40,43],[10,12,14,33,37,44],
    [5,10,22,27,30,41],[8,10,15,29,40,45],[4,10,13,22,32,33],[3,7,20,27,35,42],[2,6,17,23,25,45],
    [10,18,23,26,28,40],[9,12,19,23,37,40],[6,10,17,19,34,43],[5,8,20,22,32,40],[3,4,7,26,32,37],
    [4,13,19,21,24,44],[2,10,16,27,34,45],[8,12,18,25,33,40],[1,6,8,10,29,35],[4,10,18,21,29,45],
    [13,14,15,29,34,42],[3,8,10,11,17,39],[7,15,18,22,23,27],[3,5,13,15,36,43],[6,15,16,22,24,27],
    [10,17,19,29,36,43],[5,6,10,21,23,36],[1,17,18,22,26,38],[1,4,14,23,25,40],[17,24,25,37,38,43],
    [16,25,28,32,40,41],[11,19,23,24,30,37],[7,15,16,21,29,44],[5,10,26,31,35,39],[4,7,8,15,26,38],
    [3,12,14,16,26,32],[8,15,16,19,37,45],[2,17,21,32,38,40],[4,13,14,32,40,42],[6,9,11,12,31,32],
    [5,7,11,21,22,29],[2,8,19,37,41,42],[1,13,27,29,44,45],[2,7,23,26,29,40],[8,9,15,17,37,43],
    [5,19,21,29,33,38],[17,30,32,33,39,40],[11,12,18,31,33,45],[4,14,27,28,42,45],[8,22,24,25,37,39],
    [3,10,11,12,14,36],[5,22,26,28,35,38],[7,10,14,18,25,43],[8,22,25,30,33,42],[4,9,22,30,36,45],
    [8,13,17,23,24,31],[1,5,6,31,38,41],[2,10,20,22,36,38],[7,8,19,31,35,36],[7,8,10,18,21,22],
    [1,3,23,24,27,40],[6,14,30,32,35,44],[7,22,25,28,33,43],[9,15,17,25,32,38],[2,5,9,16,38,40],
    [5,7,22,32,33,43],[1,3,11,14,30,37],[4,6,22,23,44,45],[7,11,32,37,39,44],[14,18,22,25,42,43],
    [5,14,17,27,34,35],[2,4,12,24,28,34],[6,8,9,24,37,39],[3,17,21,32,35,38],[3,11,12,24,32,44],
    [2,10,11,24,27,45],[1,2,9,24,26,44],[4,5,7,12,27,33],[10,12,24,26,27,30],[13,16,19,35,38,39],
    [3,8,16,23,25,28],[4,10,12,17,18,28],[4,7,9,18,26,42],[5,7,13,18,30,42],[3,18,25,26,33,34],
    [2,5,24,30,35,43],[4,23,30,32,34,35],[5,25,26,35,38,45],[9,11,18,19,25,27],[1,5,7,9,28,37],
    [14,22,24,38,42,45],[8,20,27,36,37,44],[15,17,19,25,39,44],[14,20,32,36,38,44],[14,26,28,30,31,35],
    [5,21,22,31,32,42],[13,17,26,28,29,43],[5,6,9,13,14,39],[2,6,11,15,38,39],[4,5,9,27,30,44],
    [5,12,18,22,27,43],[2,4,5,12,31,43],[5,14,26,28,33,37],[2,3,6,17,31,37],[8,10,29,30,36,43],
    [5,12,26,36,42,45],[1,4,5,10,28,36],[1,3,22,29,34,35],[12,17,32,33,37,40],[10,15,22,33,37,43],
    [1,5,18,35,37,41],[1,9,23,24,36,37],[1,8,12,17,36,45],[10,15,21,22,24,44],[5,19,20,33,43,45],
    [2,11,17,31,41,45],[9,18,23,32,35,43],[16,24,26,38,40,41],[5,8,10,26,31,45],[4,10,13,16,35,39],
    [1,6,17,18,23,38],[5,15,22,26,40,44],[2,3,4,14,21,27],[5,6,9,11,18,30],[7,14,29,33,42,44],
    [2,9,20,27,38,41],[8,9,26,30,36,45],[4,7,15,20,33,44],[1,5,23,29,35,44],[2,16,18,24,42,43],
    [4,14,18,34,38,44],[1,3,8,15,29,35],[7,14,23,28,34,35],[2,3,11,22,39,45],[2,3,15,18,28,33],
    [14,21,23,27,30,31],[1,5,6,30,31,38],[14,22,33,34,37,43],[13,15,16,17,21,37],[16,17,31,33,35,43],
    [2,3,6,24,37,42],[14,25,26,28,40,44],[2,12,14,21,25,43],[7,9,11,18,27,36],[2,20,22,25,29,31],
    [2,6,8,32,38,40],[3,18,22,26,32,45],[10,18,21,26,30,34],[3,4,5,13,28,45],[3,5,6,8,15,21],
    [10,11,18,25,33,40],[6,9,16,30,40,44],[5,12,14,19,36,43],[9,10,16,21,28,30],[3,12,19,23,27,35],
    [14,17,26,30,40,44],[5,7,15,35,39,44],[2,3,6,7,33,39],[4,13,17,27,34,45],[3,18,20,23,27,44],
    [5,6,14,36,37,40],[2,3,7,13,21,35],[1,4,8,15,33,40],[8,9,15,30,38,42],[9,19,30,31,34,44],
    [8,15,16,29,36,41],[3,6,11,13,34,42],[4,19,28,29,36,38],[2,7,20,32,35,37],[1,10,20,23,30,33],
    [7,8,24,29,36,39],[1,7,20,23,26,31],[1,7,28,29,33,38],[3,10,12,16,27,43],[1,10,13,14,26,45],
    [1,3,13,32,33,39],[2,8,11,34,35,38],[2,9,14,17,25,30],[7,14,20,36,38,43],[7,9,10,24,32,38],
    [2,12,17,36,39,44],[1,2,11,15,30,36],[8,9,19,25,43,45],[8,14,26,31,33,45],[3,13,15,35,38,45],
    [7,15,23,26,31,40],[9,17,19,39,42,44],[3,9,13,25,29,38],[3,10,22,29,32,34],[4,9,16,27,28,36],
    [12,18,22,25,41,44],[1,8,18,23,40,42],[4,5,7,9,35,37],[4,6,16,22,28,34],[3,11,15,31,38,44],
    [9,11,17,19,21,27],[1,3,5,11,19,24],[9,10,17,20,26,29],[1,3,20,26,29,30],[10,12,14,16,26,35],
    [7,10,24,25,26,45],[8,13,23,28,29,31],[5,15,16,17,33,34],[14,23,25,31,41,42],[1,2,5,14,18,45],
    [7,11,23,30,31,36],[9,10,15,18,34,45],[3,6,8,11,30,45],[8,11,13,29,30,43],[3,13,24,34,37,45],
    [2,11,19,26,36,38],[2,9,28,30,32,42],[3,5,21,33,37,44],[7,9,11,18,38,45],[5,9,14,28,34,44],
    [2,3,12,25,29,33],[5,6,10,14,16,29],[2,4,22,34,35,38],[1,4,5,6,24,35],[5,8,16,17,31,41],
    [4,13,19,22,35,42],[8,10,15,16,22,38],[13,20,21,27,40,43],[2,11,14,30,40,42],[6,7,12,24,30,34],
    [7,9,13,24,26,33],[8,11,15,30,33,41],[3,15,24,33,38,45],[3,6,7,19,25,35],[17,21,27,29,33,37],
    [4,7,9,10,20,30],[4,9,15,17,27,40],[8,10,11,12,18,30],[3,5,16,25,40,43],[2,7,11,13,29,45],
    [10,13,20,21,26,29],[2,3,8,14,38,44],[7,8,11,19,21,30],[3,14,22,26,34,42],[10,12,19,21,40,44],
    [9,11,13,19,38,45],[2,5,10,19,33,44],[3,4,10,23,28,35],[1,2,6,15,16,41],[4,6,20,24,29,31],
    [7,8,10,14,17,36],[11,28,37,38,42,44],[2,6,12,15,21,37],[3,7,16,26,34,45],[2,16,18,30,39,43],
    [3,4,7,29,33,40],[5,8,9,12,28,43],[3,12,16,19,23,38],[3,14,15,20,31,39],[8,15,16,17,33,36],
    [9,15,17,34,42,44],[2,4,17,22,25,31],[7,12,16,25,34,37],[2,9,18,24,25,34],[1,9,10,13,26,27],
    [8,12,14,21,23,26],[1,2,14,27,28,36],[1,3,14,22,24,43],[11,13,24,28,29,38],[11,20,21,28,35,37],
    [6,17,31,37,43,44],[2,19,20,33,39,43],[1,8,19,20,32,41],[8,18,24,27,29,36],[1,10,23,25,29,31],
    [3,5,23,25,28,32],[8,15,17,19,43,44],[10,12,13,18,37,42],[1,14,17,20,23,26],[9,15,25,26,29,42],
    [2,10,17,25,36,40],[5,6,14,17,24,40],[3,4,9,18,35,36],[2,8,17,25,26,28],[5,10,12,14,33,38],
    [9,15,22,26,28,30],[4,12,13,35,43,44],[9,11,19,20,27,44],[1,18,25,27,36,42],[6,9,14,30,38,40],
    [2,5,24,28,30,38],[5,6,17,21,26,39],[5,11,23,25,33,39],[2,3,6,14,32,42],[5,9,14,23,29,33],
    [9,11,13,15,41,43],[7,14,17,19,35,37],[2,7,14,20,23,43],[1,9,10,14,21,33],[5,8,13,19,24,42],
    [1,6,10,18,23,25],[4,19,20,28,37,39],[8,9,14,17,22,28],[1,14,17,24,33,39],[2,5,7,9,18,36],
    [6,7,14,28,38,39],[2,13,26,35,43,45],[2,5,21,23,34,38],[3,12,20,24,25,28],[10,22,23,29,38,43],
    [6,9,11,18,30,39],[6,7,11,21,39,45],[3,5,18,20,38,39],[6,9,10,11,26,34],[1,3,11,14,24,38],
    [7,9,17,26,38,43],[1,9,13,26,37,39],[1,2,6,14,29,36],[1,3,10,14,26,43],[6,14,26,30,33,39],
    [2,3,19,25,34,37],[12,13,27,31,35,36],[1,8,11,15,24,37],[5,10,22,24,25,45],[1,2,8,13,19,45],
    [1,11,14,21,28,44],[8,23,25,34,41,42],[1,3,11,20,38,44],[4,5,15,17,34,35],[13,16,19,24,33,37],
    [6,15,20,23,26,38],[3,6,7,18,23,32],[1,8,14,25,29,38],[4,6,8,18,34,43],[2,4,18,19,27,37],
    [2,15,19,24,40,45],[7,11,12,14,17,37],[7,8,14,15,21,38],[5,7,14,16,27,29],[3,6,9,17,19,24],
    [1,4,8,16,32,33],[5,16,25,28,30,40],[4,14,19,25,39,43],[10,17,27,29,31,43],[2,13,14,15,28,30],
    [8,10,21,35,39,45],[1,5,16,17,40,44],[3,4,7,16,27,45],[4,5,17,23,24,35],[7,10,13,26,29,44],
    [1,5,6,13,24,45],[2,3,4,17,25,38],[3,8,25,27,32,33],[5,14,25,32,35,38],[1,7,19,27,37,45],
    [2,4,12,20,27,30],[16,21,25,33,39,45],[2,5,15,17,31,41],[1,2,6,20,26,39],[1,5,13,14,15,37],
    [1,11,14,38,39,44],[2,4,10,15,17,35],[2,6,10,18,22,36],[1,4,16,29,40,42],[2,13,14,16,19,34],
    [3,4,12,20,24,40],[15,17,20,33,39,44],[4,5,8,13,32,39],[1,14,23,24,28,33],[5,18,19,21,40,43],
    [9,22,31,32,38,45],[7,8,13,15,31,44],[15,17,18,25,26,31],[7,17,21,33,39,43],[3,11,13,18,27,37],
    [1,2,6,23,27,37],[3,16,17,22,27,40],[3,7,18,23,29,42],[6,11,14,39,41,44],[7,15,22,24,30,32],
    [3,5,19,22,38,45],[8,12,16,26,28,45],[2,6,7,10,11,43],[8,10,17,21,22,45],[3,5,19,22,35,36],
    [10,17,27,36,37,40],[6,11,20,24,26,32],[2,13,18,25,27,37],[1,3,10,23,26,37],[2,6,21,35,38,44],
    [2,3,9,28,33,38],[6,8,10,16,19,34],[8,20,28,30,37,43],[1,10,18,20,39,45],[5,8,14,18,33,45],
    [6,12,14,20,28,37],[3,5,16,23,25,27],[5,7,25,34,35,39],[7,8,9,14,21,33],[2,7,14,19,24,44],
    [2,4,20,28,36,38],[1,2,6,14,21,44],[1,6,7,21,26,36],[2,8,14,16,22,31],[10,12,13,18,33,40],
    [3,5,6,25,27,33],[2,15,18,24,29,45],[14,22,26,28,31,40],[1,7,11,13,14,43],[5,18,19,27,34,39],
    [4,8,16,22,34,37],[3,6,10,11,22,33],[9,15,18,24,25,43],[2,3,14,17,26,45],[1,5,10,18,22,35],
    [4,16,17,32,36,39],[2,17,24,30,31,39],[8,13,22,24,29,31],[4,7,15,17,29,43],[2,7,14,18,24,44],
    [1,3,8,16,17,44],[2,6,17,19,33,37],[10,23,24,30,36,45],[14,15,17,26,34,38],[5,10,17,24,26,28],
    [6,16,23,24,26,28],[3,14,15,26,36,38],[8,13,20,26,28,44],[4,13,23,24,30,45],[9,10,22,27,29,38],
    [1,5,18,25,33,44],[3,6,14,22,35,38],[8,10,22,26,38,45],[8,19,21,25,34,37],[5,12,17,25,34,39],
    [9,17,23,25,34,38],[3,4,12,27,29,37],[3,13,22,28,32,45],[1,12,17,24,26,41],[2,6,13,14,24,28],
    [6,9,16,20,32,38],[11,14,27,30,39,45],[1,2,8,26,30,38],[5,7,10,22,26,32],[4,19,23,28,34,44],
    [1,3,20,25,29,45],[1,9,11,15,24,26],[1,5,9,16,17,40],[1,2,8,18,37,39],[3,6,9,27,34,40],
    [1,7,10,22,26,32],[9,14,21,25,36,43],[1,4,7,18,22,37],[15,19,20,24,25,30],[1,14,18,31,35,45],
    [8,9,13,19,26,43],[6,10,11,18,24,38],[5,7,8,16,27,34],[8,18,19,25,28,32],[4,21,27,29,31,36],
    [6,7,18,24,35,38],[7,10,15,18,36,45],[5,7,10,12,14,22],[18,26,33,37,40,44],[17,23,24,30,41,45],
    [9,12,13,19,32,45],[3,8,15,27,29,37],[2,8,13,18,22,45],[17,25,27,29,33,44],[5,6,9,10,28,33],
    [2,12,15,29,35,40],[5,8,23,24,38,42],[2,5,6,15,17,34],[11,19,24,26,44,45],[2,6,8,17,19,39],
    [2,11,12,17,26,33],[1,6,7,28,35,42],[8,18,21,28,29,31],[6,13,18,20,32,45],[4,7,8,14,31,45],
    [9,12,18,23,32,38],[14,17,19,20,37,45],[3,4,9,17,28,45],[11,16,19,21,22,34],[4,7,10,15,31,35],
    [2,6,15,28,29,45],[9,10,12,18,26,32],[6,8,11,31,39,42],[1,2,6,23,41,44],[3,9,10,11,19,30],
    [4,14,27,29,31,45],[3,14,21,27,29,30],[8,19,24,25,38,39],[6,9,21,22,24,35],[10,12,14,22,27,30],
    [7,18,19,20,31,45],[4,6,13,17,28,33],[6,7,8,16,24,27],[5,24,28,33,37,45],[2,15,22,24,34,38],
    [4,6,12,21,36,39],[5,21,22,34,41,44],[6,8,14,18,21,28],[6,9,11,24,25,30],[6,16,22,27,33,37],
    [7,18,22,30,40,43],[1,3,15,17,22,45],[5,6,10,16,28,29],[2,4,21,23,32,45],[4,6,12,26,28,41],
    [5,8,11,23,25,45],[7,13,18,36,40,45],[2,14,16,17,21,45],[3,7,14,28,35,37],[6,9,11,17,19,39],
    [3,4,12,19,23,34],[2,5,6,9,10,44],[3,6,13,14,18,30],[1,6,8,10,29,33],[7,8,10,17,20,26],
    [1,13,17,31,33,44],[12,16,17,25,27,30],[1,3,23,28,42,45],[2,3,5,7,35,43],[9,23,25,30,36,43],
    [3,11,13,18,27,38],[1,3,5,32,40,44],[1,6,7,15,36,41],[4,7,20,30,32,33],[4,5,6,12,18,30],
    [3,9,12,14,20,44],[5,8,18,21,23,37],[1,7,12,14,18,28],[2,16,19,24,37,45],[1,5,13,17,18,33],
    [4,9,12,21,24,32],[1,4,6,13,38,45],[3,15,26,27,30,45],[6,17,20,25,35,44],[7,14,16,21,33,42],
    [3,7,14,26,27,43],[3,11,12,18,29,45],[1,16,23,34,36,44],[1,9,14,21,23,43],[12,14,18,26,36,45]
];

const MY_ACCOUNT = "ì¼€ì´ë±…í¬ 100150462483 ê¹€ëŒ€ì¸";

// ============================================
// ì´ˆê¸°í™”
// ============================================
const pastSet = new Set(PAST_WINNERS.map(arr => [...arr].sort((a,b)=>a-b).join(',')));
let currentNumbers = [];
const history = [];

// í†µê³„ ê³„ì‚°
const numberStats = {};
for (let i = 1; i <= 45; i++) numberStats[i] = 0;
PAST_WINNERS.slice(0, 50).forEach(nums => nums.forEach(n => numberStats[n]++));

// ============================================
// ìœ í‹¸ë¦¬í‹°
// ============================================
function getBallColor(num) {
    if (num <= 10) return 'y';
    if (num <= 20) return 'b';
    if (num <= 30) return 'r';
    if (num <= 40) return 'g';
    return 'p';
}

function getGradient(num) {
    if (num <= 10) return 'linear-gradient(135deg, #FFC107, #FF9800)';
    if (num <= 20) return 'linear-gradient(135deg, #42A5F5, #1976D2)';
    if (num <= 30) return 'linear-gradient(135deg, #EF5350, #C62828)';
    if (num <= 40) return 'linear-gradient(135deg, #66BB6A, #2E7D32)';
    return 'linear-gradient(135deg, #AB47BC, #6A1B9A)';
}

function createBall(num, size = '') {
    return `<div class="ball ${size} ${getBallColor(num)}">${num}</div>`;
}

function showToast(msg) {
    const toast = document.getElementById('toast');
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 3000);
}

function switchTab(tabName) {
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    document.getElementById('tab-' + tabName).classList.add('active');
    event.currentTarget.classList.add('active');
    if (tabName === 'stats') updateStats();
}

// ============================================
// ë²ˆí˜¸ ìƒì„±
// ============================================
function generateNumbers() {
    const container = document.getElementById('generatedNumbers');
    const btn = document.querySelector('.main-generate .btn');
    
    btn.disabled = true;
    btn.innerHTML = 'ğŸ² ë²ˆí˜¸ ì¶”ì²¨ ì¤‘...';
    
    let counter = 0;
    const interval = setInterval(() => {
        const temp = Array.from({length: 6}, () => Math.floor(Math.random() * 45) + 1);
        container.innerHTML = temp.map(n => createBall(n)).join('');
        counter++;
        
        if (counter > 15) {
            clearInterval(interval);
            
            let numbers, attempts = 0;
            do {
                const pool = Array.from({length: 45}, (_, i) => i + 1);
                numbers = [];
                for (let i = 0; i < 6; i++) {
                    const idx = Math.floor(Math.random() * pool.length);
                    numbers.push(pool.splice(idx, 1)[0]);
                }
                numbers.sort((a, b) => a - b);
                attempts++;
            } while (pastSet.has(numbers.join(',')) && attempts < 1000);
            
            currentNumbers = numbers;
            container.innerHTML = numbers.map(n => createBall(n)).join('');
            
            history.unshift(numbers);
            if (history.length > 5) history.pop();
            
            document.getElementById('historyCard').style.display = 'block';
            document.getElementById('historyList').innerHTML = history.map(nums =>
                `<div class="history-item">${nums.map(n => createBall(n, 'sm')).join('')}</div>`
            ).join('');
            
            btn.disabled = false;
            btn.innerHTML = 'ğŸ² í–‰ìš´ì˜ ë²ˆí˜¸ ìƒì„±';
        }
    }, 50);
}

// ============================================
// ê³µìœ  ê¸°ëŠ¥
// ============================================
function openShareModal() {
    if (!currentNumbers.length) { showToast('ë¨¼ì € ë²ˆí˜¸ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”'); return; }
    document.getElementById('shareNumbers').innerHTML = currentNumbers.map(n => createBall(n, 'sm')).join('');
    document.getElementById('shareModal').classList.add('active');
}

function closeShareModal() {
    document.getElementById('shareModal').classList.remove('active');
}

function shareNumbers() {
    const text = `ğŸ€ ì‹¬í”Œ ì‚¬ì£¼ ë¡œë˜\n\n${currentNumbers.join(' - ')}\n\nâœ¨ ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ 100% ì œì™¸`;
    if (navigator.share) {
        navigator.share({ title: 'ì‹¬í”Œ ì‚¬ì£¼ ë¡œë˜', text }).catch(() => copyNumbers());
    } else {
        copyNumbers();
    }
}

function copyNumbers() {
    navigator.clipboard.writeText(`ğŸ€ ì‹¬í”Œ ì‚¬ì£¼ ë¡œë˜: ${currentNumbers.join(', ')}`).then(() => {
        showToast('ë²ˆí˜¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        closeShareModal();
    });
}

function copyAccount() {
    navigator.clipboard.writeText(MY_ACCOUNT).then(() => {
        showToast('ê³„ì¢Œë²ˆí˜¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
    });
}

// ============================================
// ì´ë¯¸ì§€ ì €ì¥
// ============================================
function saveImage() {
    if (!currentNumbers.length) { showToast('ë¨¼ì € ë²ˆí˜¸ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”'); return; }
    
    const today = new Date();
    document.getElementById('card-date').textContent = 
        `${today.getFullYear()}ë…„ ${today.getMonth()+1}ì›” ${today.getDate()}ì¼`;
    document.getElementById('card-numbers').innerHTML = 
        currentNumbers.map(n => `<div style="width:40px;height:40px;border-radius:50%;background:${getGradient(n)};display:inline-flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;color:#fff;margin:3px;">${n}</div>`).join('');
    
    showToast('ì´ë¯¸ì§€ ìƒì„± ì¤‘... ğŸ“¸');
    
    if (typeof html2canvas !== 'undefined') {
        html2canvas(document.getElementById('capture-area'), {
            backgroundColor: null,
            scale: 2
        }).then(canvas => {
            const imgData = canvas.toDataURL('image/png');
            document.getElementById('shareNumbers').innerHTML = `
                <p style="font-size:12px;color:#FDD835;margin-bottom:10px;">ğŸ‘‡ ì´ë¯¸ì§€ë¥¼ ê¾¹ ëˆŒëŸ¬ ì €ì¥í•˜ì„¸ìš”</p>
                <img src="${imgData}" style="width:100%;border-radius:12px;border:2px solid #C62828;">
            `;
            document.getElementById('shareModal').classList.add('active');
            showToast('ì´ë¯¸ì§€ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤! âœ¨');
        }).catch(() => {
            showToast('ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨. ìŠ¤í¬ë¦°ìƒ·ì„ ì´ìš©í•´ì£¼ì„¸ìš”.');
        });
    } else {
        showToast('ìŠ¤í¬ë¦°ìƒ·ìœ¼ë¡œ ì €ì¥í•´ì£¼ì„¸ìš” ğŸ“±');
    }
}

// ============================================
// ì‚¬ì£¼ ìš´ì„¸
// ============================================
const fortunes = [
    { emoji: 'ğŸŒŸ', title: 'ëŒ€ë°•ì˜ ê¸°ìš´!', text: 'ì˜¤ëŠ˜ì€ ì¬ë¬¼ìš´ì´ ìµœê³ ì¡°ì…ë‹ˆë‹¤. ì§ê°ì„ ë¯¿ê³  í–‰ë™í•˜ì„¸ìš”.' },
    { emoji: 'âœ¨', title: 'ìƒìŠ¹í•˜ëŠ” ìš´ì„¸', text: 'ì‘ì€ íˆ¬ìê°€ í° ê²°ì‹¤ì„ ë§ºì„ ìˆ˜ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤.' },
    { emoji: 'ğŸ€', title: 'í–‰ìš´ì´ í•¨ê»˜', text: 'ì£¼ë³€ ì‚¬ëŒë“¤ê³¼ í•¨ê»˜í•  ë•Œ ìš´ì´ ë”ìš± ì»¤ì§‘ë‹ˆë‹¤.' },
    { emoji: 'ğŸ’«', title: 'ì•ˆì •ì ì¸ í•˜ë£¨', text: 'ì°¨ë¶„í•˜ê²Œ ê¸°ë‹¤ë¦¬ë©´ ì¢‹ì€ ê¸°íšŒê°€ ì°¾ì•„ì˜µë‹ˆë‹¤.' },
    { emoji: 'ğŸŒ™', title: 'ì¶©ì „ì˜ ì‹œê°„', text: 'ì˜¤ëŠ˜ì€ ì—ë„ˆì§€ë¥¼ ëª¨ìœ¼ëŠ” ë‚ ì…ë‹ˆë‹¤. í° ê²°ì •ì€ ë¯¸ë£¨ì„¸ìš”.' }
];

const tips = [
    'ğŸ’¡ ë™ìª½ ë°©í–¥ì´ í–‰ìš´ì„ ê°€ì ¸ì˜µë‹ˆë‹¤',
    'ğŸ’¡ ë…¸ë€ìƒ‰ ë¬¼ê±´ì´ í–‰ìš´ì˜ ë¶€ì ì…ë‹ˆë‹¤',
    'ğŸ’¡ ì˜¤ì „ 11ì‹œê°€ ê°€ì¥ ì¢‹ì€ ì‹œê°„ì…ë‹ˆë‹¤',
    'ğŸ’¡ í™€ìˆ˜ ë²ˆí˜¸ì— ì§‘ì¤‘í•´ë³´ì„¸ìš”',
    'ğŸ’¡ 30ë²ˆëŒ€ ìˆ«ìê°€ í–‰ìš´ì„ í’ˆê³  ìˆìŠµë‹ˆë‹¤'
];

function seededRandom(seed) {
    const x = Math.sin(seed) * 10000;
    return x - Math.floor(x);
}

function getFortune() {
    const year = parseInt(document.getElementById('birthYear').value);
    const month = parseInt(document.getElementById('birthMonth').value);
    const day = parseInt(document.getElementById('birthDay').value);
    
    if (!year || !month || !day) {
        showToast('ìƒë…„ì›”ì¼ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”');
        return;
    }
    
    const today = new Date();
    const todaySeed = today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();
    const birthSeed = year * 10000 + month * 100 + day;
    const combinedSeed = todaySeed + birthSeed;
    
    const fortuneIndex = Math.floor(seededRandom(combinedSeed) * fortunes.length);
    const f = fortunes[fortuneIndex];
    
    let nums = [], pool = Array.from({length: 45}, (_, i) => i + 1);
    for (let i = 0; i < 6; i++) {
        const idx = Math.floor(seededRandom(combinedSeed + i * 1234) * pool.length);
        nums.push(pool.splice(idx, 1)[0]);
    }
    nums.sort((a, b) => a - b);
    
    // ì¤‘ë³µ ì²´í¬
    let offset = 0;
    while (pastSet.has(nums.join(',')) && offset < 100) {
        offset++;
        pool = Array.from({length: 45}, (_, i) => i + 1);
        nums = [];
        for (let i = 0; i < 6; i++) {
            const idx = Math.floor(seededRandom(combinedSeed + i * 5678 + offset * 999) * pool.length);
            nums.push(pool.splice(idx, 1)[0]);
        }
        nums.sort((a, b) => a - b);
    }
    
    document.getElementById('fortuneResult').style.display = 'block';
    document.getElementById('fortuneEmoji').textContent = f.emoji;
    document.getElementById('fortuneTitle').textContent = f.title;
    document.getElementById('fortuneText').textContent = f.text;
    document.getElementById('fortuneNumbers').innerHTML = nums.map(n => createBall(n)).join('');
    document.getElementById('fortuneTip').textContent = tips[Math.floor(seededRandom(combinedSeed + 9999) * tips.length)];
    document.getElementById('fortuneResult').scrollIntoView({ behavior: 'smooth' });
}

// ============================================
// í†µê³„
// ============================================
function updateStats() {
    const sorted = Object.entries(numberStats)
        .map(([n, c]) => ({ num: +n, count: c }))
        .sort((a, b) => b.count - a.count);
    const max = sorted[0].count || 1;
    
    document.getElementById('hotNumbers').innerHTML = sorted.slice(0, 10).map(i =>
        `<div class="stat-bar">
            <div class="num" style="background:${getGradient(i.num)}">${i.num}</div>
            <div class="bar-container"><div class="bar hot" style="width:${i.count/max*100}%"></div></div>
            <div class="count">${i.count}íšŒ</div>
        </div>`
    ).join('');
    
    document.getElementById('coldNumbers').innerHTML = sorted.slice(-10).reverse().map(i =>
        `<div class="stat-bar">
            <div class="num" style="background:${getGradient(i.num)}">${i.num}</div>
            <div class="bar-container"><div class="bar cold" style="width:${i.count/max*100}%"></div></div>
            <div class="count">${i.count}íšŒ</div>
        </div>`
    ).join('');
}

updateStats();
</script>

<footer style="text-align:center;padding:40px 20px;margin-top:20px;border-top:1px solid rgba(255,255,255,0.1);color:#666;font-size:11px;line-height:1.8;">
    <p style="margin-bottom:15px;">ğŸ”’ ê´‘ê³  ì—†ëŠ” ì²­ì • ì‚¬ì´íŠ¸</p>
    <p>ë¡œë˜ëŠ” ì˜¤ë½ì…ë‹ˆë‹¤. ê³¼ë„í•œ êµ¬ë§¤ëŠ” ì‚¼ê°€ì„¸ìš”.<br>
    ì´ ì‚¬ì´íŠ¸ëŠ” ë‹¹ì²¨ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
    <p style="margin-top:15px;opacity:0.5;">Â© 2026 ì‹¬í”Œ ì‚¬ì£¼ ë¡œë˜</p>
</footer>

</body>
</html>

