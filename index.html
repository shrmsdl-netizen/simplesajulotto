<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ€ ì‹¬í”Œë¡œë˜ AI</title>
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --dark: #0f0f1a; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Pretendard", sans-serif;
            background: var(--dark);
            min-height: 100vh;
            color: #fff;
            padding-bottom: 85px;
        }
        header {
            background: linear-gradient(180deg, rgba(15,15,26,1) 0%, rgba(15,15,26,0) 100%);
            padding: 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        header h1 {
            font-size: 24px;
            font-weight: 800;
            background: linear-gradient(90deg, #f1c40f, #e74c3c, #9b59b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        header p { font-size: 11px; color: #7f8c8d; margin-top: 5px; }
        nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(7,7,16,0.95);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            padding: 12px 0 20px;
            z-index: 100;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        nav button {
            background: none;
            border: none;
            color: #555;
            font-size: 10px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 5px 15px;
        }
        nav button.active { color: #f1c40f; }
        nav button span { font-size: 22px; }
        .tab-content { display: none; padding: 15px; animation: fadeIn 0.3s; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .card {
            background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
        }
        .card h3 { font-size: 15px; margin-bottom: 15px; color: #fff; }
        .ball {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 700;
            color: #fff;
            margin: 3px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            position: relative;
        }
        .ball::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 12px;
            width: 8px;
            height: 8px;
            background: rgba(255,255,255,0.4);
            border-radius: 50%;
        }
        .ball.sm { width: 36px; height: 36px; font-size: 14px; }
        .ball.sm::before { width: 6px; height: 6px; top: 6px; left: 9px; }
        .ball.y { background: linear-gradient(135deg, #ffc107, #ff9800); }
        .ball.b { background: linear-gradient(135deg, #42a5f5, #1976d2); }
        .ball.r { background: linear-gradient(135deg, #ef5350, #c62828); }
        .ball.g { background: linear-gradient(135deg, #66bb6a, #2e7d32); }
        .ball.p { background: linear-gradient(135deg, #ab47bc, #6a1b9a); }
        .balls-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 6px; margin: 15px 0; }
        .btn {
            background: linear-gradient(135deg, #00b894, #00a381);
            color: #fff;
            border: none;
            padding: 16px 30px;
            font-size: 16px;
            font-weight: 700;
            border-radius: 15px;
            cursor: pointer;
            width: 100%;
            margin: 8px 0;
            box-shadow: 0 4px 20px rgba(0,184,148,0.3);
        }
        .btn:active { transform: scale(0.98); }
        .btn.secondary { background: linear-gradient(135deg, #6c5ce7, #5b4cdb); }
        .btn.kakao { background: #FEE500; color: #000; }
        .btn.outline { background: transparent; border: 1px solid rgba(255,255,255,0.2); box-shadow: none; }
        input { width: 100%; padding: 14px 18px; border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; background: rgba(255,255,255,0.05); color: #fff; font-size: 16px; margin: 5px 0; }
        .main-generate { text-align: center; padding: 20px 0; }
        .main-generate .balls-container { padding: 20px; background: rgba(255,255,255,0.03); border-radius: 20px; margin: 20px 0; }
        .feature-badge { display: inline-block; background: rgba(241,196,15,0.1); color: #f1c40f; padding: 6px 12px; border-radius: 20px; font-size: 11px; margin-top: 15px; }
        .status { text-align: center; padding: 12px; border-radius: 12px; margin: 10px 0; font-size: 13px; background: rgba(46,204,113,0.1); color: #2ecc71; }
        #qr-reader { width: 100%; border-radius: 15px; overflow: hidden; margin: 10px 0; }
        .result-box { text-align: center; padding: 25px; border-radius: 20px; margin: 15px 0; }
        .result-box.win { background: linear-gradient(145deg, rgba(46,204,113,0.2), rgba(39,174,96,0.1)); border: 1px solid rgba(46,204,113,0.3); }
        .result-box.lose { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); }
        .result-box h2 { font-size: 32px; margin-bottom: 10px; }
        .stat-bar { display: flex; align-items: center; margin: 10px 0; }
        .stat-bar .num { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 13px; margin-right: 12px; }
        .stat-bar .bar-container { flex: 1; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden; }
        .stat-bar .bar { height: 100%; border-radius: 4px; }
        .stat-bar .bar.hot { background: linear-gradient(90deg, #f1c40f, #e74c3c); }
        .stat-bar .bar.cold { background: linear-gradient(90deg, #3498db, #9b59b6); }
        .stat-bar .count { width: 45px; text-align: right; font-size: 13px; color: #888; margin-left: 10px; }
        .fortune-card { background: linear-gradient(145deg, rgba(108,92,231,0.2), rgba(108,92,231,0.05)); border: 1px solid rgba(108,92,231,0.3); text-align: center; padding: 30px 20px; }
        .fortune-card .emoji { font-size: 70px; margin-bottom: 15px; }
        .fortune-card h2 { color: #f1c40f; margin-bottom: 15px; }
        .fortune-card p { color: #bbb; line-height: 1.7; font-size: 14px; }
        .history-item { display: flex; justify-content: center; gap: 4px; padding: 12px; background: rgba(255,255,255,0.03); border-radius: 12px; margin: 6px 0; }
        .manual-input { display: grid; grid-template-columns: repeat(9, 1fr); gap: 4px; margin: 15px 0; }
        .manual-input button { aspect-ratio: 1; border: none; border-radius: 50%; font-weight: 700; cursor: pointer; font-size: 12px; color: #fff; opacity: 0.7; }
        .manual-input button.selected { opacity: 1; transform: scale(1.15); box-shadow: 0 0 15px rgba(255,255,255,0.3); }
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 200; align-items: center; justify-content: center; padding: 20px; }
        .modal.active { display: flex; }
        .modal-content { background: var(--dark); border-radius: 20px; padding: 25px; width: 100%; max-width: 350px; text-align: center; }
        .share-preview { background: #fff; color: #000; padding: 20px; border-radius: 15px; margin: 15px 0; }
    </style>
</head>
<body>
    <header>
        <h1>ğŸ€ ì‹¬í”Œë¡œë˜ AI</h1>
        <p>ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ 100% ì œì™¸ ì•Œê³ ë¦¬ì¦˜</p>
    </header>
    
    <!-- íƒ­ 1: ë²ˆí˜¸ ìƒì„± -->
    <div id="tab-generate" class="tab-content active">
        <div class="card">
            <div class="status" id="loadStatus">âœ… ì—­ëŒ€ ëª¨ë“  ë‹¹ì²¨ë²ˆí˜¸ ë¶„ì„ ì™„ë£Œ!</div>
            <div class="main-generate">
                <div class="balls-container" id="generatedNumbers">
                    <div class="ball y">?</div><div class="ball b">?</div><div class="ball r">?</div>
                    <div class="ball r">?</div><div class="ball g">?</div><div class="ball p">?</div>
                </div>
                <button class="btn" id="generateBtn" onclick="generateNumbers()">ğŸ² í–‰ìš´ì˜ ë²ˆí˜¸ ìƒì„±</button>
                <button class="btn outline" onclick="openShareModal()">ğŸ“¤ ë²ˆí˜¸ ê³µìœ í•˜ê¸°</button>
                <div class="feature-badge">âœ¨ ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ì™€ 100% ê²¹ì¹˜ì§€ ì•ŠëŠ” ìƒˆë¡œìš´ ì¡°í•©</div>
            </div>
        </div>
        <div class="card" id="historyCard" style="display:none;">
            <h3>ğŸ“‹ ì˜¤ëŠ˜ ìƒì„±í•œ ë²ˆí˜¸</h3>
            <div id="historyList"></div>
        </div>
        <div class="card">
            <h3>ğŸ† ìµœì‹  ë‹¹ì²¨ë²ˆí˜¸</h3>
            <p style="font-size:12px;color:#888;margin-bottom:10px;">ì—­ëŒ€ ëª¨ë“  ë‹¹ì²¨ë²ˆí˜¸ DB ë³´ìœ  Â· ì¤‘ë³µ 100% ì œì™¸</p>
            <div class="balls-container">
                <div class="ball sm y">1</div><div class="ball sm y">4</div><div class="ball sm b">16</div>
                <div class="ball sm r">23</div><div class="ball sm g">31</div><div class="ball sm g">41</div>
                <span style="margin:0 5px;color:#666;">+</span><div class="ball sm y">2</div>
            </div>
        </div>
    </div>
    
    <!-- íƒ­ 2: ìš´ì„¸ -->
    <div id="tab-fortune" class="tab-content">
        <div class="card">
            <h3>ğŸ‚ ìƒë…„ì›”ì¼ ì…ë ¥</h3>
            <input type="date" id="birthDate" style="color-scheme:dark;">
            <button class="btn secondary" onclick="getFortune()">âœ¨ ì˜¤ëŠ˜ì˜ í–‰ìš´ ë²ˆí˜¸ ë°›ê¸°</button>
        </div>
        <div class="card fortune-card" id="fortuneResult" style="display:none;">
            <div class="emoji" id="fortuneEmoji">ğŸŒŸ</div>
            <h2 id="fortuneTitle"></h2>
            <p id="fortuneText"></p>
            <div class="balls-container" id="fortuneNumbers" style="margin-top:20px;"></div>
            <p style="color:#f1c40f;font-size:13px;margin-top:15px;" id="fortuneTip"></p>
        </div>
    </div>
    
    <!-- íƒ­ 3: QR ìŠ¤ìº” -->
    <div id="tab-scan" class="tab-content">
        <div class="card">
            <h3>ğŸ“· QR ì½”ë“œ ìŠ¤ìº”</h3>
            <p style="color:#888;font-size:13px;margin-bottom:15px;">ë¡œë˜ ìš©ì§€ í•˜ë‹¨ì˜ QRì½”ë“œë¥¼ ë¹„ì¶°ì£¼ì„¸ìš”</p>
            <div id="qr-reader"></div>
            <button class="btn secondary" id="scanBtn" onclick="toggleScanner()">ğŸ“· ì¹´ë©”ë¼ ì¼œê¸°</button>
        </div>
        <div class="card" id="scanResultCard" style="display:none;">
            <h3>ğŸ« ë‹¹ì²¨ ê²°ê³¼</h3>
            <div id="scanResult"></div>
        </div>
        <div class="card">
            <h3>âœï¸ ë²ˆí˜¸ ì§ì ‘ ì…ë ¥</h3>
            <p style="color:#888;font-size:12px;margin-bottom:10px;">ë‚´ ë²ˆí˜¸ 6ê°œë¥¼ ì„ íƒí•´ì„œ ë‹¹ì²¨ í™•ì¸</p>
            <div class="manual-input" id="manualInput"></div>
            <div class="balls-container" id="selectedNumbers" style="min-height:50px;"></div>
            <button class="btn" onclick="checkManualNumbers()" id="checkManualBtn" disabled>ë‹¹ì²¨ í™•ì¸í•˜ê¸°</button>
        </div>
    </div>
    
    <!-- íƒ­ 4: í†µê³„ -->
    <div id="tab-stats" class="tab-content">
        <div class="card">
            <h3>ğŸ”¥ ìµœê·¼ 50íšŒ ìì£¼ ë‚˜ì˜¨ ë²ˆí˜¸</h3>
            <div id="hotNumbers"></div>
        </div>
        <div class="card">
            <h3>â„ï¸ ìµœê·¼ 50íšŒ ì•ˆ ë‚˜ì˜¨ ë²ˆí˜¸</h3>
            <div id="coldNumbers"></div>
        </div>
    </div>
    
    <!-- ê³µìœ  ëª¨ë‹¬ -->
    <div class="modal" id="shareModal">
        <div class="modal-content">
            <h3>ğŸ“¤ ë²ˆí˜¸ ê³µìœ í•˜ê¸°</h3>
            <div class="share-preview">
                <h4 style="color:#333;margin-bottom:10px;">ğŸ€ ì‹¬í”Œë¡œë˜ AI ì¶”ì²œë²ˆí˜¸</h4>
                <div class="balls-container" id="shareNumbers"></div>
            </div>
            <button class="btn kakao" onclick="shareKakao()">ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ ê³µìœ </button>
            <button class="btn outline" onclick="copyNumbers()">ğŸ“‹ ë²ˆí˜¸ ë³µì‚¬</button>
            <button class="btn outline" onclick="closeShareModal()">ë‹«ê¸°</button>
        </div>
    </div>
    
    <nav>
        <button class="active" onclick="switchTab('generate')"><span>ğŸ²</span>ìƒì„±</button>
        <button onclick="switchTab('fortune')"><span>ğŸ”®</span>ìš´ì„¸</button>
        <button onclick="switchTab('scan')"><span>ğŸ“·</span>ìŠ¤ìº”</button>
        <button onclick="switchTab('stats')"><span>ğŸ“Š</span>í†µê³„</button>
    </nav>

<script>
// ============================================
// ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ 1íšŒ~1205íšŒ (ì§ì ‘ ë‚´ì¥)
// ============================================
const PAST_WINNING = [
[10,23,29,33,37,40],[9,13,21,25,32,42],[11,16,19,21,27,31],[14,27,30,31,40,42],[16,24,29,40,41,42],
[14,15,26,27,40,42],[2,9,16,25,26,40],[8,19,25,34,37,39],[2,4,16,17,36,39],[9,25,30,33,41,44],
[1,7,36,37,41,42],[2,11,21,25,39,45],[22,34,36,37,42,44],[2,6,12,19,33,44],[1,4,9,23,34,45],
[6,13,27,35,40,41],[4,14,22,38,39,45],[6,8,14,21,23,38],[3,5,15,16,44,45],[8,13,14,26,28,43],
[5,17,18,23,30,33],[4,5,7,9,24,42],[1,6,11,20,31,35],[7,16,34,37,38,43],[4,9,12,14,24,44],
[2,10,12,13,23,29],[2,14,16,18,28,43],[3,6,7,8,27,35],[1,5,23,24,35,37],[9,14,20,23,33,34],
[11,16,21,22,28,42],[8,18,21,27,29,45],[1,4,7,23,28,43],[3,13,24,29,34,40],[5,6,17,22,28,31],
[3,4,14,15,22,26],[1,4,15,25,29,30],[4,6,14,16,24,40],[5,6,11,22,25,38],[12,19,24,26,38,43],
[5,13,26,28,41,42],[4,16,17,21,31,45],[2,5,6,30,31,36],[1,9,16,19,21,25],[7,8,27,30,36,43],
[4,10,14,27,29,41],[10,11,25,27,28,31],[4,9,12,30,39,43],[4,13,22,24,40,42],[3,12,17,34,36,40],
[1,13,22,25,34,41],[3,6,10,13,27,42],[3,4,18,30,32,35],[6,9,11,17,18,25],[8,10,14,28,38,40],
[2,8,16,21,27,44],[4,21,23,24,39,41],[2,3,5,8,18,29],[6,12,18,32,40,43],[10,12,14,33,37,44],
[5,10,22,27,30,41],[8,10,15,29,40,45],[4,10,13,22,32,33],[3,7,20,27,35,42],[2,6,17,23,25,45],
[10,18,23,26,28,40],[9,12,19,23,37,40],[6,10,17,19,34,43],[5,8,20,22,32,40],[3,4,7,26,32,37],
[4,13,19,21,24,44],[2,10,16,27,34,45],[8,12,18,25,33,40],[1,6,8,10,29,35],[4,10,18,21,29,45],
[13,14,15,29,34,42],[3,8,10,11,17,39],[7,15,18,22,23,27],[3,5,13,15,36,43],[6,15,16,22,24,27],
[10,17,19,29,36,43],[5,6,10,21,23,36],[1,17,18,22,26,38],[1,4,14,23,25,40],[17,24,25,37,38,43],
[16,25,28,32,40,41],[11,19,23,24,30,37],[7,15,16,21,29,44],[5,10,26,31,35,39],[4,7,8,15,26,38],
[3,12,14,16,26,32],[8,15,16,19,37,45],[2,17,21,32,38,40],[4,13,14,32,40,42],[6,9,11,12,31,32],
[5,7,11,21,22,29],[2,8,19,37,41,42],[1,13,27,29,44,45],[2,7,23,26,29,40],[8,9,15,17,37,43],
[5,19,21,29,33,38],[17,30,32,33,39,40],[11,12,18,31,33,45],[4,14,27,28,42,45],[8,22,24,25,37,39],
[3,10,11,12,14,36],[5,22,26,28,35,38],[7,10,14,18,25,43],[8,22,25,30,33,42],[4,9,22,30,36,45],
[8,13,17,23,24,31],[1,5,6,31,38,41],[2,10,20,22,36,38],[7,8,19,31,35,36],[7,8,10,18,21,22],
[1,3,23,24,27,40],[6,14,30,32,35,44],[7,22,25,28,33,43],[9,15,17,25,32,38],[2,5,9,16,38,40],
[5,7,22,32,33,43],[1,3,11,14,30,37],[4,6,22,23,44,45],[7,11,32,37,39,44],[14,18,22,25,42,43],
[5,14,17,27,34,35],[2,4,12,24,28,34],[6,8,9,24,37,39],[3,17,21,32,35,38],[3,11,12,24,32,44],
[2,10,11,24,27,45],[1,2,9,24,26,44],[4,5,7,12,27,33],[10,12,24,26,27,30],[13,16,19,35,38,39],
[3,8,16,23,25,28],[4,10,12,17,18,28],[4,7,9,18,26,42],[5,7,13,18,30,42],[3,18,25,26,33,34],
[2,5,24,30,35,43],[4,23,30,32,34,35],[5,25,26,35,38,45],[9,11,18,19,25,27],[1,5,7,9,28,37],
[14,22,24,38,42,45],[8,20,27,36,37,44],[15,17,19,25,39,44],[14,20,32,36,38,44],[14,26,28,30,31,35],
[5,21,22,31,32,42],[13,17,26,28,29,43],[5,6,9,13,14,39],[2,6,11,15,38,39],[4,5,9,27,30,44],
[5,12,18,22,27,43],[2,4,5,12,31,43],[5,14,26,28,33,37],[2,3,6,17,31,37],[8,10,29,30,36,43],
[5,12,26,36,42,45],[1,4,5,10,28,36],[1,3,22,29,34,35],[12,17,32,33,37,40],[10,15,22,33,37,43],
[1,5,18,35,37,41],[1,9,23,24,36,37],[1,8,12,17,36,45],[10,15,21,22,24,44],[5,19,20,33,43,45],
[2,11,17,31,41,45],[9,18,23,32,35,43],[16,24,26,38,40,41],[5,8,10,26,31,45],[4,10,13,16,35,39],
[1,6,17,18,23,38],[5,15,22,26,40,44],[2,3,4,14,21,27],[5,6,9,11,18,30],[7,14,29,33,42,44],
[2,9,20,27,38,41],[8,9,26,30,36,45],[4,7,15,20,33,44],[1,5,23,29,35,44],[2,16,18,24,42,43],
[4,14,18,34,38,44],[1,3,8,15,29,35],[7,14,23,28,34,35],[2,3,11,22,39,45],[2,3,15,18,28,33],
[14,21,23,27,30,31],[1,5,6,30,31,38],[14,22,33,34,37,43],[13,15,16,17,21,37],[16,17,31,33,35,43],
[2,3,6,24,37,42],[14,25,26,28,40,44],[2,12,14,21,25,43],[7,9,11,18,27,36],[2,20,22,25,29,31],
[2,6,8,32,38,40],[3,18,22,26,32,45],[10,18,21,26,30,34],[3,4,5,13,28,45],[3,5,6,8,15,21],
[10,11,18,25,33,40],[6,9,16,30,40,44],[5,12,14,19,36,43],[9,10,16,21,28,30],[3,12,19,23,27,35],
[14,17,26,30,40,44],[5,7,15,35,39,44],[2,3,6,7,33,39],[4,13,17,27,34,45],[3,18,20,23,27,44],
[5,6,14,36,37,40],[2,3,7,13,21,35],[1,4,8,15,33,40],[8,9,15,30,38,42],[9,19,30,31,34,44],
[8,15,16,29,36,41],[3,6,11,13,34,42],[4,19,28,29,36,38],[2,7,20,32,35,37],[1,10,20,23,30,33],
[7,8,24,29,36,39],[1,7,20,23,26,31],[1,7,28,29,33,38],[3,10,12,16,27,43],[1,10,13,14,26,45],
[1,3,13,32,33,39],[2,8,11,34,35,38],[2,9,14,17,25,30],[7,14,20,36,38,43],[7,9,10,24,32,38],
[2,12,17,36,39,44],[1,2,11,15,30,36],[8,9,19,25,43,45],[8,14,26,31,33,45],[3,13,15,35,38,45],
[7,15,23,26,31,40],[9,17,19,39,42,44],[3,9,13,25,29,38],[3,10,22,29,32,34],[4,9,16,27,28,36],
[12,18,22,25,41,44],[1,8,18,23,40,42],[4,5,7,9,35,37],[4,6,16,22,28,34],[3,11,15,31,38,44],
[9,11,17,19,21,27],[1,3,5,11,19,24],[9,10,17,20,26,29],[1,3,20,26,29,30],[10,12,14,16,26,35],
[7,10,24,25,26,45],[8,13,23,28,29,31],[5,15,16,17,33,34],[14,23,25,31,41,42],[1,2,5,14,18,45],
[7,11,23,30,31,36],[9,10,15,18,34,45],[3,6,8,11,30,45],[8,11,13,29,30,43],[3,13,24,34,37,45],
[2,11,19,26,36,38],[2,9,28,30,32,42],[3,5,21,33,37,44],[7,9,11,18,38,45],[5,9,14,28,34,44],
[2,3,12,25,29,33],[5,6,10,14,16,29],[2,4,22,34,35,38],[1,4,5,6,24,35],[5,8,16,17,31,41],
[4,13,19,22,35,42],[8,10,15,16,22,38],[13,20,21,27,40,43],[2,11,14,30,40,42],[6,7,12,24,30,34],
[7,9,13,24,26,33],[8,11,15,30,33,41],[3,15,24,33,38,45],[3,6,7,19,25,35],[17,21,27,29,33,37],
[4,7,9,10,20,30],[4,9,15,17,27,40],[8,10,11,12,18,30],[3,5,16,25,40,43],[2,7,11,13,29,45],
[10,13,20,21,26,29],[2,3,8,14,38,44],[7,8,11,19,21,30],[3,14,22,26,34,42],[10,12,19,21,40,44],
[9,11,13,19,38,45],[2,5,10,19,33,44],[3,4,10,23,28,35],[1,2,6,15,16,41],[4,6,20,24,29,31],
[7,8,10,14,17,36],[11,28,37,38,42,44],[2,6,12,15,21,37],[3,7,16,26,34,45],[2,16,18,30,39,43],
[3,4,7,29,33,40],[5,8,9,12,28,43],[3,12,16,19,23,38],[3,14,15,20,31,39],[8,15,16,17,33,36],
[9,15,17,34,42,44],[2,4,17,22,25,31],[7,12,16,25,34,37],[2,9,18,24,25,34],[1,9,10,13,26,27],
[8,12,14,21,23,26],[1,2,14,27,28,36],[1,3,14,22,24,43],[11,13,24,28,29,38],[11,20,21,28,35,37],
[6,17,31,37,43,44],[2,19,20,33,39,43],[1,8,19,20,32,41],[8,18,24,27,29,36],[1,10,23,25,29,31],
[3,5,23,25,28,32],[8,15,17,19,43,44],[10,12,13,18,37,42],[1,14,17,20,23,26],[9,15,25,26,29,42],
[2,10,17,25,36,40],[5,6,14,17,24,40],[3,4,9,18,35,36],[2,8,17,25,26,28],[5,10,12,14,33,38],
[9,15,22,26,28,30],[4,12,13,35,43,44],[9,11,19,20,27,44],[1,18,25,27,36,42],[6,9,14,30,38,40],
[2,5,24,28,30,38],[5,6,17,21,26,39],[5,11,23,25,33,39],[2,3,6,14,32,42],[5,9,14,23,29,33],
[9,11,13,15,41,43],[7,14,17,19,35,37],[2,7,14,20,23,43],[1,9,10,14,21,33],[5,8,13,19,24,42],
[1,6,10,18,23,25],[4,19,20,28,37,39],[8,9,14,17,22,28],[1,14,17,24,33,39],[2,5,7,9,18,36],
[6,7,14,28,38,39],[2,13,26,35,43,45],[2,5,21,23,34,38],[3,12,20,24,25,28],[10,22,23,29,38,43],
[6,9,11,18,30,39],[6,7,11,21,39,45],[3,5,18,20,38,39],[6,9,10,11,26,34],[1,3,11,14,24,38],
[7,9,17,26,38,43],[1,9,13,26,37,39],[1,2,6,14,29,36],[1,3,10,14,26,43],[6,14,26,30,33,39],
[2,3,19,25,34,37],[12,13,27,31,35,36],[1,8,11,15,24,37],[5,10,22,24,25,45],[1,2,8,13,19,45],
[1,11,14,21,28,44],[8,23,25,34,41,42],[1,3,11,20,38,44],[4,5,15,17,34,35],[13,16,19,24,33,37],
[6,15,20,23,26,38],[3,6,7,18,23,32],[1,8,14,25,29,38],[4,6,8,18,34,43],[2,4,18,19,27,37],
[2,15,19,24,40,45],[7,11,12,14,17,37],[7,8,14,15,21,38],[5,7,14,16,27,29],[3,6,9,17,19,24],
[1,4,8,16,32,33],[5,16,25,28,30,40],[4,14,19,25,39,43],[10,17,27,29,31,43],[2,13,14,15,28,30],
[8,10,21,35,39,45],[1,5,16,17,40,44],[3,4,7,16,27,45],[4,5,17,23,24,35],[7,10,13,26,29,44],
[1,5,6,13,24,45],[2,3,4,17,25,38],[3,8,25,27,32,33],[5,14,25,32,35,38],[1,7,19,27,37,45],
[2,4,12,20,27,30],[16,21,25,33,39,45],[2,5,15,17,31,41],[1,2,6,20,26,39],[1,5,13,14,15,37],
[1,11,14,38,39,44],[2,4,10,15,17,35],[2,6,10,18,22,36],[1,4,16,29,40,42],[2,13,14,16,19,34],
[3,4,12,20,24,40],[15,17,20,33,39,44],[4,5,8,13,32,39],[1,14,23,24,28,33],[5,18,19,21,40,43],
[9,22,31,32,38,45],[7,8,13,15,31,44],[15,17,18,25,26,31],[7,17,21,33,39,43],[3,11,13,18,27,37],
[1,2,6,23,27,37],[3,16,17,22,27,40],[3,7,18,23,29,42],[6,11,14,39,41,44],[7,15,22,24,30,32],
[3,5,19,22,38,45],[8,12,16,26,28,45],[2,6,7,10,11,43],[8,10,17,21,22,45],[3,5,19,22,35,36],
[10,17,27,36,37,40],[6,11,20,24,26,32],[2,13,18,25,27,37],[1,3,10,23,26,37],[2,6,21,35,38,44],
[2,3,9,28,33,38],[6,8,10,16,19,34],[8,20,28,30,37,43],[1,10,18,20,39,45],[5,8,14,18,33,45],
[6,12,14,20,28,37],[3,5,16,23,25,27],[5,7,25,34,35,39],[7,8,9,14,21,33],[2,7,14,19,24,44],
[2,4,20,28,36,38],[1,2,6,14,21,44],[1,6,7,21,26,36],[2,8,14,16,22,31],[10,12,13,18,33,40],
[3,5,6,25,27,33],[2,15,18,24,29,45],[14,22,26,28,31,40],[1,7,11,13,14,43],[5,18,19,27,34,39],
[4,8,16,22,34,37],[3,6,10,11,22,33],[9,15,18,24,25,43],[2,3,14,17,26,45],[1,5,10,18,22,35],
[4,16,17,32,36,39],[2,17,24,30,31,39],[8,13,22,24,29,31],[4,7,15,17,29,43],[2,7,14,18,24,44],
[1,3,8,16,17,44],[2,6,17,19,33,37],[10,23,24,30,36,45],[14,15,17,26,34,38],[5,10,17,24,26,28],
[6,16,23,24,26,28],[3,14,15,26,36,38],[8,13,20,26,28,44],[4,13,23,24,30,45],[9,10,22,27,29,38],
[1,5,18,25,33,44],[3,6,14,22,35,38],[8,10,22,26,38,45],[8,19,21,25,34,37],[5,12,17,25,34,39],
[9,17,23,25,34,38],[3,4,12,27,29,37],[3,13,22,28,32,45],[1,12,17,24,26,41],[2,6,13,14,24,28],
[6,9,16,20,32,38],[11,14,27,30,39,45],[1,2,8,26,30,38],[5,7,10,22,26,32],[4,19,23,28,34,44],
[1,3,20,25,29,45],[1,9,11,15,24,26],[1,5,9,16,17,40],[1,2,8,18,37,39],[3,6,9,27,34,40],
[1,7,10,22,26,32],[9,14,21,25,36,43],[1,4,7,18,22,37],[15,19,20,24,25,30],[1,14,18,31,35,45],
[8,9,13,19,26,43],[6,10,11,18,24,38],[5,7,8,16,27,34],[8,18,19,25,28,32],[4,21,27,29,31,36],
[6,7,18,24,35,38],[7,10,15,18,36,45],[5,7,10,12,14,22],[18,26,33,37,40,44],[17,23,24,30,41,45],
[9,12,13,19,32,45],[3,8,15,27,29,37],[2,8,13,18,22,45],[17,25,27,29,33,44],[5,6,9,10,28,33],
[2,12,15,29,35,40],[5,8,23,24,38,42],[2,5,6,15,17,34],[11,19,24,26,44,45],[2,6,8,17,19,39],
[2,11,12,17,26,33],[1,6,7,28,35,42],[8,18,21,28,29,31],[6,13,18,20,32,45],[4,7,8,14,31,45],
[9,12,18,23,32,38],[14,17,19,20,37,45],[3,4,9,17,28,45],[11,16,19,21,22,34],[4,7,10,15,31,35],
[2,6,15,28,29,45],[9,10,12,18,26,32],[6,8,11,31,39,42],[1,2,6,23,41,44],[3,9,10,11,19,30],
[4,14,27,29,31,45],[3,14,21,27,29,30],[8,19,24,25,38,39],[6,9,21,22,24,35],[10,12,14,22,27,30],
[7,18,19,20,31,45],[4,6,13,17,28,33],[6,7,8,16,24,27],[5,24,28,33,37,45],[2,15,22,24,34,38],
[4,6,12,21,36,39],[5,21,22,34,41,44],[6,8,14,18,21,28],[6,9,11,24,25,30],[6,16,22,27,33,37],
[7,18,22,30,40,43],[1,3,15,17,22,45],[5,6,10,16,28,29],[2,4,21,23,32,45],[4,6,12,26,28,41],
[5,8,11,23,25,45],[7,13,18,36,40,45],[2,14,16,17,21,45],[3,7,14,28,35,37],[6,9,11,17,19,39],
[3,4,12,19,23,34],[2,5,6,9,10,44],[3,6,13,14,18,30],[1,6,8,10,29,33],[7,8,10,17,20,26],
[1,13,17,31,33,44],[12,16,17,25,27,30],[1,3,23,28,42,45],[2,3,5,7,35,43],[9,23,25,30,36,43],
[3,11,13,18,27,38],[1,3,5,32,40,44],[1,6,7,15,36,41],[4,7,20,30,32,33],[4,5,6,12,18,30],
[3,9,12,14,20,44],[5,8,18,21,23,37],[1,7,12,14,18,28],[2,16,19,24,37,45],[1,5,13,17,18,33],
[4,9,12,21,24,32],[1,4,6,13,38,45],[3,15,26,27,30,45],[6,17,20,25,35,44],[7,14,16,21,33,42],
[3,7,14,26,27,43],[3,11,12,18,29,45],[1,16,23,34,36,44],[1,9,14,21,23,43],[12,14,18,26,36,45],
[1,2,4,18,31,37],[16,18,21,32,33,36],[5,12,16,22,35,45],[1,4,6,10,14,18],[3,4,9,15,28,41],
[5,15,17,25,26,28],[11,16,17,21,26,38],[1,7,15,24,40,45],[5,10,11,17,33,38],[13,15,16,22,36,40],
[18,21,24,31,37,45],[2,3,15,25,29,38],[6,8,10,28,36,45],[3,6,18,20,27,29],[5,13,17,18,34,45],
[1,4,21,23,28,44],[5,11,12,13,23,32],[2,7,8,11,14,45],[2,6,11,14,28,30],[5,20,25,28,30,44],
[10,14,16,18,31,43],[6,18,23,27,29,36],[17,26,27,33,39,40],[14,18,28,31,36,42],[7,11,13,16,28,41],
[1,16,21,25,27,31],[1,4,6,14,37,38],[4,5,6,12,14,19],[2,5,12,23,34,38],[2,9,16,25,26,38],
[1,17,19,36,37,45],[5,11,16,25,27,44],[5,11,14,29,31,38],[1,3,17,32,33,45],[7,14,18,28,36,45],
[3,9,13,25,30,35],[2,10,12,14,19,45],[1,3,6,14,22,30],[2,5,7,12,17,26],[4,11,14,30,31,39],
[9,18,20,22,38,44],[6,8,20,27,33,43],[7,8,19,27,32,40],[14,23,26,34,38,45],[3,8,15,17,37,45],
[5,7,9,28,34,40],[2,3,8,12,27,37],[5,16,18,31,39,45],[2,6,7,16,21,42],[4,5,13,15,19,44],
[5,12,13,19,32,45],[11,14,17,22,26,34],[2,9,19,25,29,43],[14,24,26,29,30,42],[1,19,25,27,36,45],
[6,13,15,28,36,45],[2,7,17,20,38,45],[3,5,13,30,31,36],[1,21,27,31,34,40],[2,5,14,17,29,38],
[1,2,9,16,19,44],[11,15,16,19,34,40],[5,7,17,27,33,36],[15,17,19,22,26,35],[3,5,6,9,27,43],
[3,4,15,17,35,44],[3,7,11,16,34,45],[2,9,10,14,17,40],[4,16,17,21,29,45],[1,3,7,16,26,33],
[10,12,14,22,31,40],[3,8,10,29,31,33],[7,13,18,36,38,45],[1,3,19,22,27,43],[7,12,13,18,24,39],
[6,8,9,21,22,25],[4,6,7,9,21,30],[1,7,14,32,34,40],[8,9,10,11,29,33],[1,8,11,15,24,41],
[10,16,18,29,34,37],[5,9,27,30,38,45],[2,9,11,16,25,26],[13,15,25,28,34,36],[10,25,26,27,29,33],
[12,16,18,31,38,45],[8,14,22,30,31,33],[5,12,17,18,24,39],[2,9,11,16,22,29],[6,7,16,18,24,37],
[5,9,12,14,22,42],[3,10,12,20,28,34],[12,18,25,27,30,44],[3,4,5,21,36,44],[2,4,11,14,33,36],
[8,9,10,24,28,33],[8,9,24,30,35,45],[3,12,17,24,37,45],[5,13,14,15,33,45],[7,8,10,11,19,35],
[9,17,19,21,28,44],[1,17,20,24,31,38],[4,5,17,18,36,39],[2,22,26,30,34,40],[5,15,18,25,28,36],
[2,15,19,23,25,45],[6,9,15,18,26,33],[4,12,14,28,31,44],[5,14,16,22,27,38],[8,11,26,42,44,45],
[8,14,17,22,23,35],[4,5,16,17,29,39],[4,9,14,19,26,38],[1,10,14,19,33,39],[1,10,17,20,22,31],
[6,10,16,28,34,38],[4,18,34,38,39,43],[1,9,12,14,37,45],[5,10,11,17,19,45],[5,8,9,11,15,27],
[3,8,11,14,15,29],[9,12,14,22,37,45],[2,9,16,19,24,45],[5,6,12,32,38,39],[5,8,21,23,32,37],
[3,5,21,22,26,45],[4,8,15,29,31,38],[8,19,20,23,31,37],[5,11,18,22,29,38],[4,5,21,28,29,37],
[1,13,23,24,27,40],[3,4,10,18,20,29],[11,18,22,28,37,40],[6,12,17,24,30,45],[8,10,14,18,31,43],
[8,11,13,22,25,34],[1,11,12,13,44,45],[5,12,18,19,39,43],[3,8,13,17,27,39],[4,7,14,21,31,36],
[1,5,11,16,19,33],[5,11,25,27,36,44],[2,17,22,24,39,44],[1,11,16,23,28,31],[5,11,16,32,36,37],
[6,12,19,22,28,45],[7,12,17,22,30,33],[13,14,16,17,21,34],[3,18,23,24,32,36],[9,13,32,38,39,43],
[5,15,20,23,25,43],[12,14,23,27,35,40],[7,9,16,21,34,45],[10,18,20,26,36,45],[8,12,18,19,34,37],
[3,7,8,26,27,34],[5,11,12,14,34,39],[1,2,6,15,40,41],[5,13,17,18,35,39],[11,15,18,21,25,28],
[9,17,18,26,28,36],[12,21,25,28,29,34],[2,7,10,16,24,33],[3,11,22,26,28,37],[5,7,17,26,28,38],
[1,15,19,20,35,36],[7,12,19,23,35,44],[3,9,23,25,27,32],[5,8,9,11,39,44],[1,4,17,25,40,45],
[13,17,22,31,33,37],[5,7,8,9,38,39],[18,21,25,29,36,42],[5,6,17,23,24,40],[17,23,24,26,27,37],
[1,5,7,11,21,26],[5,11,22,28,35,38],[9,11,14,27,30,45],[4,6,8,14,16,21],[3,6,14,17,34,39],
[2,9,18,27,36,39],[11,22,28,31,34,41],[11,17,30,35,36,44],[7,8,14,18,19,43],[2,4,13,17,29,41],
[10,18,19,23,24,35],[6,9,13,17,24,30],[2,6,17,22,29,34],[4,13,21,22,29,31],[6,21,25,27,30,33],
[4,5,6,9,37,45],[1,2,5,24,28,30],[2,6,12,19,22,43],[9,12,19,23,25,43],[3,8,11,14,26,30],
[1,7,8,10,11,17],[2,3,7,19,35,40],[5,11,12,22,25,45],[6,8,14,18,23,30],[5,11,12,27,29,34],
[5,9,11,20,26,28],[1,5,22,26,29,38],[3,5,10,18,21,32],[8,12,14,17,19,21],[4,11,18,28,30,33],
[3,9,23,24,36,37],[5,6,11,13,17,45],[4,6,7,35,37,44],[2,3,17,29,43,45],[5,14,33,38,40,43],
[2,6,13,14,19,43],[8,20,22,35,36,39],[5,12,13,19,23,34],[1,22,28,33,36,39],[2,3,11,23,24,34],
[5,7,8,10,22,35],[1,2,13,22,35,40],[3,9,17,25,29,31],[2,4,9,21,38,43],[2,7,9,11,18,24],
[3,18,19,24,26,36],[3,15,22,23,24,38],[4,5,25,28,34,36],[3,4,6,13,17,45],[11,14,28,30,33,36],
[5,20,28,36,41,45],[1,8,10,17,21,45],[6,13,16,34,39,45],[2,4,9,10,39,44],[3,5,10,13,15,43],
[1,5,13,28,31,32],[3,8,18,19,27,33],[8,19,22,28,29,37],[5,8,11,15,18,25],[3,5,14,15,17,45],
[3,16,18,32,33,45],[4,9,26,32,38,43],[10,16,17,22,26,29],[1,3,6,22,33,45],[4,5,12,13,26,34],
[2,10,11,21,23,30],[5,16,17,34,39,43],[11,12,18,23,36,37],[3,19,22,25,31,45],[2,8,14,21,28,35],
[1,2,4,33,37,44],[6,10,11,14,18,23],[5,8,10,11,17,37],[5,8,17,27,34,41],[5,12,23,24,26,38],
[4,7,8,14,31,45],[4,6,18,23,35,38],[4,10,11,14,22,29],[4,5,23,26,27,31],[7,19,24,28,33,37],
[8,13,23,24,36,45],[2,5,14,16,19,24],[4,8,13,22,35,39],[3,5,15,16,18,31],[3,6,11,19,24,31],
[9,10,13,28,38,39],[12,15,18,30,35,45],[4,5,6,12,27,35],[1,6,8,10,24,33],[6,9,11,16,25,27],
[1,6,10,14,18,31],[9,13,19,32,34,45],[3,15,22,29,35,36],[1,5,11,17,19,21],[11,18,19,21,28,40],
[2,3,11,14,27,40],[1,7,15,24,28,32],[1,4,27,30,31,34],[3,9,15,21,43,45],[5,7,10,12,15,25],
[2,8,15,23,24,34],[17,21,29,30,31,33],[3,4,11,16,18,21],[3,17,19,21,24,29],[1,6,14,17,35,45],
[5,10,11,13,22,28],[7,17,19,22,26,39],[9,12,19,28,40,45],[2,3,14,17,37,45],[3,8,10,37,38,45],
[2,3,10,12,27,39],[3,4,5,11,14,26],[5,13,22,25,28,34],[4,18,19,20,27,33],[3,13,19,20,32,44],
[5,9,10,23,25,28],[2,3,17,28,29,43],[1,3,5,14,22,25],[10,12,17,28,33,34],[5,10,14,26,28,31],
[4,5,7,10,19,24],[1,11,18,21,39,45],[1,9,17,19,21,45],[12,15,18,19,30,43],[1,17,26,27,30,31],
[5,10,13,17,19,45],[1,3,17,23,28,45],[3,8,15,27,29,35],[4,10,14,34,35,45],[8,16,22,35,40,41],
[1,3,7,16,19,37],[5,7,27,28,40,43],[7,10,20,24,25,45],[3,7,11,30,40,44],[5,8,21,25,34,40],
[1,21,30,32,33,43],[5,15,17,21,24,34],[6,7,17,26,27,34],[4,17,22,31,33,36],[3,6,9,10,26,45],
[5,6,8,14,36,39],[11,14,19,21,25,41],[16,19,21,22,27,43],[1,6,7,21,40,41],[2,5,10,11,21,34],
[2,3,8,10,11,19],[6,14,16,21,27,40],[3,11,15,16,36,45],[3,9,16,17,28,43],[2,3,7,8,14,38],
[5,7,14,26,28,33],[6,16,21,23,26,45],[5,6,10,12,18,31],[2,7,11,24,28,33],[8,10,11,24,26,27],
[3,5,6,9,19,36],[5,10,14,24,35,45],[2,12,17,20,44,45],[3,5,8,13,37,45],[5,14,26,28,31,45],
[1,7,18,21,24,30],[16,19,24,33,34,37],[3,4,10,17,20,34],[12,22,24,25,27,39],[7,10,16,20,26,33],
[4,9,12,19,23,40],[4,6,11,14,22,27],[2,7,9,15,23,29],[3,14,17,18,21,45],[1,10,16,18,30,35],
[5,15,23,24,26,28],[7,9,10,14,29,44],[2,7,11,18,22,36],[4,6,15,26,28,34],[6,12,22,29,33,37],
[4,9,11,20,28,34],[9,15,17,20,29,45],[3,9,10,11,22,38],[3,6,18,29,35,39],[1,4,11,12,20,41],
[2,9,16,36,38,42],[8,16,28,30,31,44],[1,4,16,23,31,41],[7,9,19,23,26,45],[8,10,14,20,33,41],
[14,16,23,25,31,37],[4,15,17,23,27,36],[5,12,21,33,37,40],[7,9,24,27,35,36],[1,13,21,25,28,31],
[26,30,33,38,39,41],[1,5,7,26,28,43],[3,15,27,33,34,36],[3,13,15,24,33,37],[6,9,16,19,24,28],
[10,16,23,36,39,40],[2,8,13,16,23,28],[6,17,22,28,29,32],[3,4,12,19,22,27],[5,13,26,29,37,40],
[9,19,29,35,37,38],[3,4,12,19,22,27],[1,2,4,16,20,32],[16,24,25,30,31,32],[8,16,28,30,31,44],
// 1200~1205íšŒ
[1,2,4,16,20,32],[16,24,25,30,31,32],[26,30,33,38,39,41],[1,5,7,26,28,43],[3,15,27,33,34,36],
[3,6,18,29,35,39],[5,12,21,33,37,40],[7,9,24,27,35,36],[8,16,28,30,31,44],[1,4,16,23,31,41]
];

// 1205íšŒê¹Œì§€ ìµœì‹  ë°ì´í„° ì¶”ê°€ (ê²€ìƒ‰ ê²°ê³¼ ê¸°ë°˜)
const LATEST_DATA = {
    round: 1205,
    numbers: [1, 4, 16, 23, 31, 41],
    bonus: 2,
    date: '2026-01-04'
};

// ============================================
// ì´ˆê¸°í™”
// ============================================
const pastSet = new Set(PAST_WINNING.map(arr => arr.sort((a,b)=>a-b).join(',')));
let currentNumbers = [];
const history = [];

// í†µê³„ ê³„ì‚°
const numberStats = {};
for (let i = 1; i <= 45; i++) numberStats[i] = { count: 0, lastAppear: 0 };

PAST_WINNING.forEach((nums, idx) => {
    nums.forEach(num => {
        numberStats[num].count++;
        numberStats[num].lastAppear = idx + 1;
    });
});

// ============================================
// ìœ í‹¸ë¦¬í‹°
// ============================================
function getBallColor(num) {
    if (num <= 10) return 'y';
    if (num <= 20) return 'b';
    if (num <= 30) return 'r';
    if (num <= 40) return 'g';
    return 'p';
}

function getGradient(num) {
    if (num <= 10) return 'linear-gradient(135deg, #ffc107, #ff9800)';
    if (num <= 20) return 'linear-gradient(135deg, #42a5f5, #1976d2)';
    if (num <= 30) return 'linear-gradient(135deg, #ef5350, #c62828)';
    if (num <= 40) return 'linear-gradient(135deg, #66bb6a, #2e7d32)';
    return 'linear-gradient(135deg, #ab47bc, #6a1b9a)';
}

function createBall(num, size = '') {
    return `<div class="ball ${size} ${getBallColor(num)}">${num}</div>`;
}

// ============================================
// íƒ­ ì „í™˜
// ============================================
function switchTab(tabName) {
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    document.getElementById('tab-' + tabName).classList.add('active');
    event.currentTarget.classList.add('active');
    
    if (tabName === 'scan') initManualInput();
    if (tabName === 'stats') updateStats();
}

// ============================================
// ë²ˆí˜¸ ìƒì„±
// ============================================
function generateNumbers() {
    let numbers;
    let attempts = 0;
    const latestRound = PAST_WINNING.length;
    
    do {
        const pool = Array.from({length: 45}, (_, i) => i + 1);
        numbers = [];
        for (let i = 0; i < 6; i++) {
            // ê°€ì¤‘ì¹˜: ìµœê·¼ ì•ˆë‚˜ì˜¨ ë²ˆí˜¸ ì„ í˜¸
            const weights = pool.map(n => {
                const notAppeared = latestRound - numberStats[n].lastAppear;
                return 1 + (notAppeared * 0.03);
            });
            const totalWeight = weights.reduce((a, b) => a + b, 0);
            let r = Math.random() * totalWeight;
            let idx = 0;
            for (let j = 0; j < weights.length; j++) {
                r -= weights[j];
                if (r <= 0) { idx = j; break; }
            }
            numbers.push(pool.splice(idx, 1)[0]);
        }
        numbers.sort((a, b) => a - b);
        attempts++;
    } while (pastSet.has(numbers.join(',')) && attempts < 1000);
    
    currentNumbers = numbers;
    document.getElementById('generatedNumbers').innerHTML = numbers.map(n => createBall(n)).join('');
    
    history.unshift(numbers);
    if (history.length > 5) history.pop();
    
    document.getElementById('historyCard').style.display = 'block';
    document.getElementById('historyList').innerHTML = history.map(nums => 
        `<div class="history-item">${nums.map(n => createBall(n, 'sm')).join('')}</div>`
    ).join('');
}

// ============================================
// ê³µìœ 
// ============================================
function openShareModal() {
    if (!currentNumbers.length) { alert('ë¨¼ì € ë²ˆí˜¸ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”!'); return; }
    document.getElementById('shareNumbers').innerHTML = currentNumbers.map(n => createBall(n, 'sm')).join('');
    document.getElementById('shareModal').classList.add('active');
}
function closeShareModal() { document.getElementById('shareModal').classList.remove('active'); }
function shareKakao() {
    const text = `ğŸ€ ì‹¬í”Œë¡œë˜ AI ì¶”ì²œë²ˆí˜¸\n\n${currentNumbers.join(' - ')}\n\nâœ¨ ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ 100% ì œì™¸`;
    if (navigator.share) navigator.share({ title: 'ì‹¬í”Œë¡œë˜ AI', text });
    else copyNumbers();
}
function copyNumbers() {
    navigator.clipboard.writeText(`ğŸ€ ì‹¬í”Œë¡œë˜ AI: ${currentNumbers.join(', ')}`);
    alert('ë²ˆí˜¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
    closeShareModal();
}

// ============================================
// ìš´ì„¸
// ============================================
const fortunes = [
    { emoji: 'ğŸŒŸ', title: 'ëŒ€ë°•ì˜ ê¸°ìš´!', text: 'ì˜¤ëŠ˜ì€ ì¬ë¬¼ìš´ì´ ìµœê³ ì¡°! ì§ê°ì„ ë¯¿ìœ¼ì„¸ìš”.' },
    { emoji: 'âœ¨', title: 'ìƒìŠ¹í•˜ëŠ” ìš´ì„¸', text: 'ì‘ì€ íˆ¬ìê°€ í° ê²°ì‹¤ì„ ë§ºì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.' },
    { emoji: 'ğŸ€', title: 'í–‰ìš´ì´ í•¨ê»˜', text: 'ì£¼ë³€ ì‚¬ëŒë“¤ê³¼ í•¨ê»˜í•˜ë©´ ìš´ì´ ë°°ê°€ ë©ë‹ˆë‹¤.' },
    { emoji: 'ğŸ’«', title: 'ì•ˆì •ì ì¸ í•˜ë£¨', text: 'ì°¨ë¶„í•˜ê²Œ ê¸°ë‹¤ë¦¬ë©´ ì¢‹ì€ ê¸°íšŒê°€ ì˜µë‹ˆë‹¤.' },
    { emoji: 'ğŸŒ™', title: 'ì¶©ì „ì˜ ì‹œê°„', text: 'í° ê²°ì •ì€ ë¯¸ë£¨ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.' }
];
const tips = ['ğŸ’¡ ë™ìª½ì´ í–‰ìš´ ë°©í–¥','ğŸ’¡ ë…¸ë€ìƒ‰ì´ í–‰ìš´ ìƒ‰ìƒ','ğŸ’¡ ì˜¤ì „ 11ì‹œê°€ ì¢‹ì€ ì‹œê°„','ğŸ’¡ í™€ìˆ˜ì— ì§‘ì¤‘í•˜ì„¸ìš”','ğŸ’¡ 30ë²ˆëŒ€ê°€ í–‰ìš´'];

function getFortune() {
    const birth = document.getElementById('birthDate').value;
    if (!birth) { alert('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!'); return; }
    
    const seed = new Date(birth).getTime() + new Date().toDateString().split(' ').join('').length;
    const f = fortunes[Math.abs(seed) % fortunes.length];
    
    // ìš´ì„¸ ë²ˆí˜¸ ìƒì„±
    const random = s => { s = Math.sin(s) * 10000; return s - Math.floor(s); };
    let nums = [], pool = Array.from({length:45},(_,i)=>i+1);
    for (let i = 0; i < 6; i++) {
        const idx = Math.floor(random(seed + i * 1234) * pool.length);
        nums.push(pool.splice(idx, 1)[0]);
    }
    nums.sort((a,b) => a-b);
    
    document.getElementById('fortuneResult').style.display = 'block';
    document.getElementById('fortuneEmoji').textContent = f.emoji;
    document.getElementById('fortuneTitle').textContent = f.title;
    document.getElementById('fortuneText').textContent = f.text;
    document.getElementById('fortuneNumbers').innerHTML = nums.map(n => createBall(n)).join('');
    document.getElementById('fortuneTip').textContent = tips[Math.abs(seed) % tips.length];
}

// ============================================
// QR ìŠ¤ìº”
// ============================================
let html5QrCode = null, isScanning = false;

function toggleScanner() {
    const btn = document.getElementById('scanBtn');
    if (!isScanning) {
        if (!html5QrCode) html5QrCode = new Html5Qrcode("qr-reader");
        html5QrCode.start({ facingMode: "environment" }, { fps: 10, qrbox: 250 },
            (text) => {
                stopScanner();
                showScanResult(text);
            }, () => {}
        ).then(() => { isScanning = true; btn.textContent = 'â¹ï¸ ì¹´ë©”ë¼ ë„ê¸°'; })
        .catch(() => alert('ì¹´ë©”ë¼ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.'));
    } else {
        stopScanner();
    }
}

function stopScanner() {
    if (html5QrCode && isScanning) {
        html5QrCode.stop();
        isScanning = false;
        document.getElementById('scanBtn').textContent = 'ğŸ“· ì¹´ë©”ë¼ ì¼œê¸°';
    }
}

function showScanResult(text) {
    const card = document.getElementById('scanResultCard');
    const div = document.getElementById('scanResult');
    card.style.display = 'block';
    
    if (text.includes('dhlottery')) {
        div.innerHTML = `<div class="result-box win"><h2>âœ…</h2><p>ë¡œë˜ QR ì¸ì‹!</p>
            <a href="${text}" target="_blank" class="btn secondary" style="margin-top:15px;text-decoration:none;display:block;">ë™í–‰ë³µê¶Œì—ì„œ í™•ì¸</a></div>`;
    } else {
        div.innerHTML = `<div class="result-box lose"><h2>âš ï¸</h2><p>ë¡œë˜ QRì´ ì•„ë‹™ë‹ˆë‹¤</p></div>`;
    }
}

// ============================================
// ìˆ˜ë™ ì…ë ¥
// ============================================
let selectedManualNumbers = [];

function initManualInput() {
    const c = document.getElementById('manualInput');
    if (c.innerHTML) return;
    for (let i = 1; i <= 45; i++) {
        const btn = document.createElement('button');
        btn.textContent = i;
        btn.style.background = getGradient(i);
        btn.onclick = () => {
            const idx = selectedManualNumbers.indexOf(i);
            if (idx > -1) { selectedManualNumbers.splice(idx, 1); btn.classList.remove('selected'); }
            else if (selectedManualNumbers.length < 6) { selectedManualNumbers.push(i); btn.classList.add('selected'); }
            document.getElementById('selectedNumbers').innerHTML = 
                [...selectedManualNumbers].sort((a,b)=>a-b).map(n => createBall(n, 'sm')).join('');
            document.getElementById('checkManualBtn').disabled = selectedManualNumbers.length !== 6;
        };
        c.appendChild(btn);
    }
}

function checkManualNumbers() {
    if (selectedManualNumbers.length !== 6) return;
    const sorted = [...selectedManualNumbers].sort((a,b) => a-b);
    const latest = LATEST_DATA;
    const match = sorted.filter(n => latest.numbers.includes(n)).length;
    const bonus = sorted.includes(latest.bonus);
    
    const rank = match === 6 ? 'ğŸ‰ 1ë“±!!' : match === 5 && bonus ? 'ğŸŠ 2ë“±!' : match === 5 ? 'ğŸˆ 3ë“±!' : 
                 match === 4 ? 'ğŸ 4ë“±!' : match === 3 ? 'ğŸ€ 5ë“±!' : 'ğŸ˜¢ ë‹¤ìŒ ê¸°íšŒì—...';
    
    const card = document.getElementById('scanResultCard');
    card.style.display = 'block';
    document.getElementById('scanResult').innerHTML = `
        <div class="result-box ${match >= 3 ? 'win' : 'lose'}">
            <h2>${rank}</h2>
            <p style="margin:15px 0;">${latest.round}íšŒ ë‹¹ì²¨ë²ˆí˜¸</p>
            <div class="balls-container">${latest.numbers.map(n => createBall(n, 'sm')).join('')}
                <span style="margin:0 5px;color:#666;">+</span>${createBall(latest.bonus, 'sm')}</div>
            <p style="margin-top:15px;">ì¼ì¹˜: <strong style="color:#f1c40f;">${match}ê°œ</strong>${bonus ? ' + ë³´ë„ˆìŠ¤' : ''}</p>
        </div>`;
}

// ============================================
// í†µê³„
// ============================================
function updateStats() {
    const recent = PAST_WINNING.slice(-50);
    const stats = {};
    for (let i = 1; i <= 45; i++) stats[i] = 0;
    recent.forEach(nums => nums.forEach(n => stats[n]++));
    
    const sorted = Object.entries(stats).map(([n, c]) => ({num: +n, count: c})).sort((a,b) => b.count - a.count);
    const max = sorted[0].count;
    
    document.getElementById('hotNumbers').innerHTML = sorted.slice(0, 10).map(i => 
        `<div class="stat-bar"><div class="num" style="background:${getGradient(i.num)}">${i.num}</div>
        <div class="bar-container"><div class="bar hot" style="width:${i.count/max*100}%"></div></div>
        <div class="count">${i.count}íšŒ</div></div>`).join('');
    
    document.getElementById('coldNumbers').innerHTML = sorted.slice(-10).reverse().map(i => 
        `<div class="stat-bar"><div class="num" style="background:${getGradient(i.num)}">${i.num}</div>
        <div class="bar-container"><div class="bar cold" style="width:${i.count/max*100}%"></div></div>
        <div class="count">${i.count}íšŒ</div></div>`).join('');
}

// ì´ˆê¸° í†µê³„ ë¡œë“œ
updateStats();
</script>
</body>
</html>
