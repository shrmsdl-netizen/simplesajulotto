<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8">
<!-- SECURITY: Anti-copy protection -->
<style>
*{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none;}
input,textarea,select{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}
</style>
<script>
(function(){
  document.addEventListener('contextmenu',function(e){e.preventDefault();return false;});
  document.addEventListener('keydown',function(e){
    if(e.key==='F12'){e.preventDefault();return false;}
    if(e.ctrlKey&&e.shiftKey&&['I','i','J','j','C','c'].includes(e.key)){e.preventDefault();return false;}
    if(e.ctrlKey&&(e.key==='u'||e.key==='U')){e.preventDefault();return false;}
    if(e.ctrlKey&&(e.key==='s'||e.key==='S')){e.preventDefault();return false;}
    if(e.ctrlKey&&(e.key==='p'||e.key==='P')){e.preventDefault();return false;}
  });
  document.addEventListener('dragstart',function(e){e.preventDefault();return false;});
  document.addEventListener('selectstart',function(e){if(e.target.tagName!=='INPUT'&&e.target.tagName!=='TEXTAREA'){e.preventDefault();return false;}});
  var devtools={open:false};
  setInterval(function(){
    var start=performance.now();
    debugger;
    if(performance.now()-start>100){
      if(!devtools.open){devtools.open=true;document.body.innerHTML='<div style="display:flex;align-items:center;justify-content:center;height:100vh;background:#1a1a2e;color:#D4AF37;font-size:2rem;font-family:serif;">ğŸ”’ ê°œë°œì ë„êµ¬ ê°ì§€ë¨</div>';}
    }
  },1000);
})();
</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9SYCKLSKD6"></script>
<script>

// ========================================
// [v34.7] K-MUDANG v4.23 ë™ê¸°í™”: ë¹„ì¦ˆë‹ˆìŠ¤ ê¸´ì¥ ëª¨ë“œ
// ========================================
const ILJU_IMAGE_KR = {
'ç”²å­': { name: 'ë°”ë‹¤ ì˜† í° ë‚˜ë¬´', emoji: 'ğŸŒ³ğŸŒŠ', desc: 'í’ìš” ì†ì— ë¿Œë¦¬ë‚´ë¦° ì•¼ë§' },
'ç”²å¯…': { name: 'ìˆ² ì†ì˜ í˜¸ë‘ì´', emoji: 'ğŸ…ğŸŒ²', desc: 'íƒ€ê³ ë‚œ ë¦¬ë”ì‹­ê³¼ ì¶”ì§„ë ¥' },
'ç”²è¾°': { name: 'ìš©ì„ íƒ„ ë‚˜ë¬´', emoji: 'ğŸ‰ğŸŒ³', desc: 'ì›ëŒ€í•œ ì•¼ë§ê³¼ ì‹ í™”ì  í–‰ìš´' },
'ç”²åˆ': { name: 'ë¶ˆíƒ€ëŠ” ë‚˜ë¬´', emoji: 'ğŸŒ³ğŸ”¥', desc: 'ì—´ì •ì  ì¶”ì§„ë ¥. ë²ˆì•„ì›ƒ ì£¼ì˜' },
'ç”²ç”³': { name: 'ë„ë¼ì™€ ë‚˜ë¬´', emoji: 'ğŸª“ğŸŒ²', desc: 'ì‹œë ¨ì„ í†µí•œ ìê¸° ì„±ì¥' },
'ç”²æˆŒ': { name: 'ê°€ì„ ìˆ²', emoji: 'ğŸ‚ğŸŒ³', desc: 'ì›ìˆ™í•œ ì§€í˜œì™€ ë³´í˜¸ ë³¸ëŠ¥' },
'ä¹™ä¸‘': { name: 'ê²¨ìš¸ í™”ì´ˆ', emoji: 'ğŸŒ±â„ï¸', desc: 'ì¸ë‚´ ëì— í”¼ëŠ” ëŠ¦ê½ƒ' },
'ä¹™å¯': { name: 'ë´„ì˜ ë©êµ´', emoji: 'ğŸŒ¿ğŸŒ¸', desc: 'ìœ ì—°í•œ ì ì‘ë ¥ê³¼ ì€ì€í•œ ë§¤ë ¥' },
'ä¹™å·³': { name: 'ë¶ˆ ì˜†ì˜ ê½ƒ', emoji: 'ğŸŒºğŸ”¥', desc: 'ì„¬ì„¸í•¨ ì† ë‚´ë©´ì˜ ì—´ì •' },
'ä¹™æœª': { name: 'ì •ì›ì˜ í’€', emoji: 'ğŸŒ¾ğŸ¡', desc: 'ê²¸ì†í•œ ì ì‘ë ¥ê³¼ ì–‘ìœ¡í•˜ëŠ” ë§ˆìŒ' },
'ä¹™é…‰': { name: 'ê¸ˆì† í™”ë³‘ì˜ ê½ƒ', emoji: 'ğŸ’âš™ï¸', desc: 'ì ˆì œë¡œ ë‹¤ë“¬ì–´ì§„ ì•„ë¦„ë‹¤ì›€' },
'ä¹™äº¥': { name: 'ë– ë‹¤ë‹ˆëŠ” ì—°ê½ƒ', emoji: 'ğŸª·ğŸ’§', desc: 'í˜¼íƒí•¨ì—ì„œ í”¼ì–´ë‚˜ëŠ” ìˆœìˆ˜í•¨' },
'ä¸™å­': { name: 'í˜¸ìˆ˜ ìœ„ì˜ íƒœì–‘', emoji: 'â˜€ï¸ğŸï¸', desc: 'ë°˜ì‚¬ë˜ì–´ ì¦í­ë˜ëŠ” ê´‘ì±„' },
'ä¸™å¯…': { name: 'ì‚° ìœ„ì˜ ì¼ì¶œ', emoji: 'ğŸŒ…ğŸ”ï¸', desc: 'ë†’ì€ ê³³ì—ì„œ ë¹›ë‚˜ëŠ” ì§€ë„ë ¥' },
'ä¸™è¾°': { name: 'ìš©ì˜ ë¶ˆê½ƒ', emoji: 'ğŸ‰ğŸ”¥', desc: 'ì‹ í™”ì  íŒŒì›Œì™€ ë³€í˜ì˜ ì—ë„ˆì§€' },
'ä¸™åˆ': { name: 'ì •ì˜¤ì˜ íƒœì–‘', emoji: 'â˜€ï¸ğŸ”¥', desc: 'ìµœê³ ì¡°ì˜ ê°•ë ¬í•¨. ê· í˜• í•„ìš”' },
'ä¸™ç”³': { name: 'í™©ê¸ˆë¹› ì„ì–‘', emoji: 'ğŸŒ…âš™ï¸', desc: 'ê²½í—˜ìœ¼ë¡œ ìµíŒ ë”°ëœ»í•œ ì§€í˜œ' },
'ä¸™æˆŒ': { name: 'ëª¨ë‹¥ë¶ˆ', emoji: 'ğŸ”¥ğŸ•ï¸', desc: 'ì‚¬ëŒì„ ëª¨ìœ¼ëŠ” ë”°ëœ»í•¨' },
'ä¸ä¸‘': { name: 'ëˆˆ ì†ì˜ ì´›ë¶ˆ', emoji: 'ğŸ•¯ï¸â„ï¸', desc: 'ì–´ë‘  ì†ì—ì„œë„ êº¼ì§€ì§€ ì•ŠëŠ” ë¹›' },
'ä¸å¯': { name: 'ì •ì›ì˜ ë“±ë¶ˆ', emoji: 'ğŸ®ğŸŒ¿', desc: 'ì„±ì¥ì„ ë•ëŠ” ë¶€ë“œëŸ¬ìš´ ì¡°ëª…' },
'ä¸å·³': { name: 'íšƒë¶ˆ ë“  ì', emoji: 'ğŸ”¦ğŸ', desc: 'ìˆ¨ê²¨ì§„ ê¸¸ì„ ë°íˆëŠ” ì§€í˜œ' },
'ä¸æœª': { name: 'ë‚œë¡œ ë¶ˆ', emoji: 'ğŸ”¥ğŸ ', desc: 'ê°€ì •ì˜ ë”°ëœ»í•¨ê³¼ ì•ˆë½í•¨' },
'ä¸é…‰': { name: 'ëŒ€ì¥ê°„ ë¶ˆê½ƒ', emoji: 'ğŸ”¥âš’ï¸', desc: 'ì •ë°€í•œ ì—´ë¡œ ë§Œë“œëŠ” ëª…í’ˆ' },
'ä¸äº¥': { name: 'ë¬¼ ìœ„ì˜ ë³„ë¹›', emoji: 'âœ¨ğŸ’§', desc: 'ì²œìƒì˜ ì•„ë¦„ë‹¤ì›€ê³¼ ëª½í™˜ì  ì§€í˜œ' },
'æˆŠå­': { name: 'ì‚°ì˜ ìƒ˜ë¬¼', emoji: 'â›°ï¸ğŸ’§', desc: 'ë‹¨ë‹¨í•œ ê¸°ë°˜ ì•„ë˜ ìˆ¨ê²¨ì§„ ê¹Šì´' },
'æˆŠå¯…': { name: 'í˜¸ë‘ì´ ì‚°', emoji: 'ğŸ…â›°ï¸', desc: 'ìœ„ì—„ ìˆëŠ” ì¡´ì¬ê°ê³¼ ë³´í˜¸ ë³¸ëŠ¥' },
'æˆŠè¾°': { name: 'ìš©ë´‰ìš°ë¦¬', emoji: 'ğŸ‰â›°ï¸', desc: 'ì „ì„¤ì  ì›…ì¥í•¨ê³¼ ìš°ì£¼ì  ê¶Œìœ„' },
'æˆŠåˆ': { name: 'í™”ì‚°', emoji: 'ğŸŒ‹ğŸ”¥', desc: 'í­ë°œì„ ê¸°ë‹¤ë¦¬ëŠ” ì ì¬ëœ í˜' },
'æˆŠç”³': { name: 'ì±„ì„ì¥ ë°”ìœ„', emoji: 'ğŸª¨âš™ï¸', desc: 'ë‹¤ë“¬ì–´ì§€ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì›ì„' },
'æˆŠæˆŒ': { name: 'ê³ ëŒ€ ì‚°', emoji: 'ğŸ”ï¸ğŸŒ™', desc: 'ì‹œëŒ€ë¥¼ ì´ˆì›”í•œ ì§€í˜œì™€ ì•ˆì •' },
'å·±ä¸‘': { name: 'ê²¨ìš¸ ë“¤íŒì˜ ì†Œ', emoji: 'ğŸ‚â„ï¸', desc: 'ê³ ë‚œ ì† ì¸ë‚´í•˜ëŠ” ê²½ì‘' },
'å·±å¯': { name: 'ë´„ ì •ì›', emoji: 'ğŸŒ·ğŸ¡', desc: 'ì„±ì¥ì„ í‚¤ì›Œë‚´ëŠ” ë¹„ì˜¥í•œ ë•…' },
'å·±å·³': { name: 'ë”°ëœ»í•œ í™', emoji: 'ğŸŒğŸ”¥', desc: 'ëª¨ë“  ë¿Œë¦¬ë¥¼ ìœ„í•œ ìì–‘ë¶„' },
'å·±æœª': { name: 'ì–‘ ëª©ì¥', emoji: 'ğŸ‘ğŸŒ¾', desc: 'ì˜¨í™”í•œ í’ìš”ì™€ ëª©ê°€ì  í‰í™”' },
'å·±é…‰': { name: 'ê³¼ìˆ˜ì› í™', emoji: 'ğŸğŸŒ', desc: 'ì—´ë§¤ ë§ºëŠ” ê²½ì‘ëœ ë•…' },
'å·±äº¥': { name: 'ê°•ë‘‘', emoji: 'ğŸï¸ğŸ’§', desc: 'ìš”ì†Œë“¤ ì‚¬ì´ì˜ ê²½ê³„. ìœ ì—°í•˜ì§€ë§Œ ë‹¨ë‹¨í•¨' },
'åºšå­': { name: 'ë¹—ì†ì˜ ê²€', emoji: 'âš”ï¸ğŸŒ§ï¸', desc: 'ì‹œë ¨ ì†ì—ì„œë„ ë‚ ì¹´ë¡œìš´ ê²°ë‹¨ë ¥' },
'åºšå¯…': { name: 'ìˆ² ì†ì˜ ë„ë¼', emoji: 'ğŸª“ğŸŒ²', desc: 'ë³€í˜ì„ ìœ„í•œ ê°•ë ¥í•œ ë„êµ¬' },
'åºšè¾°': { name: 'ìš©ë¦° ê°‘ì˜·', emoji: 'ğŸ‰âš™ï¸', desc: 'ì „ì„¤ì  ë³´í˜¸ì™€ í˜' },
'åºšåˆ': { name: 'ë¶ˆê½ƒ ì†ì˜ ì¹¼ë‚ ', emoji: 'âš”ï¸ğŸ”¥', desc: 'ê·¹í•œì˜ ì••ë ¥ìœ¼ë¡œ ë‹¨ë ¨ëœ ë‚ ' },
'åºšç”³': { name: 'ìŒê²€', emoji: 'âš”ï¸âš”ï¸', desc: 'ë°°ê°€ëœ í˜ê³¼ ì •ë°€í•¨' },
'åºšæˆŒ': { name: 'ê³ ëŒ€ ë¬´ê¸°', emoji: 'ğŸ—¡ï¸âŒ›', desc: 'ì„¸ì›”ì´ ì¦ëª…í•œ ê²€ì¦ëœ ë‚ ' },
'è¾›ä¸‘': { name: 'ê´‘ì„ ì†ì˜ ê¸ˆ', emoji: 'ğŸ’â›°ï¸', desc: 'ë°œê²¬ì„ ê¸°ë‹¤ë¦¬ëŠ” ìˆ¨ê²¨ì§„ ë³´ë¬¼' },
'è¾›å¯': { name: 'ì •ì›ì˜ ë³´ì„', emoji: 'ğŸ’ğŸŒ¿', desc: 'ìì—° ì† ì„¬ì„¸í•œ ì•„ë¦„ë‹¤ì›€' },
'è¾›å·³': { name: 'ë…¹ì€ ì€', emoji: 'ğŸª™ğŸ”¥', desc: 'ì—´ì„ í†µí•œ ë³€í˜•' },
'è¾›æœª': { name: 'ë•… ì†ì˜ ë³´ì„', emoji: 'ğŸ’ğŸŒ', desc: 'ì²œì²œíˆ ìë¼ë‚˜ëŠ” ì§€í•˜ì˜ ë³´ë¬¼' },
'è¾›é…‰': { name: 'ê±°ìš¸', emoji: 'ğŸªâœ¨', desc: 'ì™„ë²½í•œ ë°˜ì‚¬ì™€ ëª…ë£Œí•¨' },
'è¾›äº¥': { name: 'ì§„ì£¼', emoji: 'ğŸ¦ªğŸ’§', desc: 'ê³ í†µì—ì„œ íƒ„ìƒí•œ ì•„ë¦„ë‹¤ì›€' },
'å£¬å­': { name: 'ë°”ë‹¤ ì‹¬ì—°', emoji: 'ğŸŒŠğŸŒ‘', desc: 'ì¸¡ëŸ‰í•  ìˆ˜ ì—†ëŠ” ê¹Šì´ì™€ í˜' },
'å£¬å¯…': { name: 'í­í¬', emoji: 'ğŸ’§ğŸ”ï¸', desc: 'ë°”ìœ„ë„ ê¹ëŠ” ë©ˆì¶œ ìˆ˜ ì—†ëŠ” í˜' },
'å£¬è¾°': { name: 'ë¹„ë£¡', emoji: 'ğŸ‰ğŸŒ§ï¸', desc: 'ìƒëª…ì„ ê°€ì ¸ì˜¤ëŠ” ì‹ í™”ì˜ ì¡´ì¬' },
'å£¬åˆ': { name: 'ì¦ê¸°', emoji: 'ğŸ’¨â˜€ï¸', desc: 'ë¬¼ê³¼ ë¶ˆì´ ë§Œë‚˜ ìƒê¸´ ë™ë ¥' },
'å£¬ç”³': { name: 'ê°•ë¬¼ íë¦„', emoji: 'ğŸï¸ğŸ’¨', desc: 'ë©ˆì¶”ì§€ ì•ŠëŠ” ì „ì§„ì˜ ëª¨ë©˜í…€' },
'å£¬æˆŒ': { name: 'ê°€ì„ë¹„', emoji: 'ğŸ‚ğŸŒ§ï¸', desc: 'ìš°ìˆ˜ì— ì –ì€ ê¹Šì´ì™€ ì„±ì°°' },
'ç™¸ä¸‘': { name: 'ë“¤íŒì˜ ì„œë¦¬', emoji: 'â„ï¸ğŸŒ¾', desc: 'ì„¬ì„¸í•˜ì§€ë§Œ ë³€í˜ì ì¸ ì˜í–¥' },
'ç™¸å¯': { name: 'ì•„ì¹¨ ì´ìŠ¬', emoji: 'ğŸ’§ğŸŒ…', desc: 'ë§¤ì¼ ìƒˆë¡œìš´ ì‹œì‘' },
'ç™¸å·³': { name: 'ì•ˆê°œ', emoji: 'ğŸŒ«ï¸ğŸ', desc: 'í˜„ì‹¤ì„ ê°€ë¦¬ëŠ” ì‹ ë¹„ë¡œìš´ ë² ì¼' },
'ç™¸æœª': { name: 'ë‹¨ë¹„', emoji: 'ğŸŒ§ï¸ğŸŒ±', desc: 'ìƒëª…ì„ ì£¼ëŠ” ì ë‹¹í•œ ìˆ˜ë¶„' },
'ç™¸é…‰': { name: 'ì¹¼ë‚  ìœ„ì˜ ì´ìŠ¬', emoji: 'ğŸ’§ğŸ—¡ï¸', desc: 'ê·¹ë„ì˜ ì˜ˆë¯¼í•¨ê³¼ ì •ë°€í•¨' },
'ç™¸äº¥': { name: 'ê¹Šì€ ìƒ˜', emoji: 'ğŸ’§ğŸ•³ï¸', desc: 'ì–´ë‘ ì—ì„œ ì†Ÿì•„ë‚˜ëŠ” ë¬´í•œí•œ ì›ì²œ' }
};

const INTERACTION_METAPHOR_KR = {
'wood_fire': { name: 'ì¥ì‘ê³¼ ë¶ˆ', emoji: 'ğŸªµâ†’ğŸ”¥', type: 'generate', desc: 'ë‚´ê°€ ìƒëŒ€ì˜ ì—´ì •ì— ë¶ˆì„ ì§€í•€ë‹¤', advice: 'ë²ˆì•„ì›ƒë˜ì§€ ì•Šê²Œ ì—ë„ˆì§€ ê´€ë¦¬' },
'fire_earth': { name: 'ì¬ê°€ ë˜ì–´ ê¸°ë¦„ì§„ ë•…', emoji: 'ğŸ”¥â†’ğŸŒ', type: 'generate', desc: 'ë‚˜ì˜ ì—´ì •ì´ ìƒëŒ€ì˜ ì•ˆì •ì„ í’ìš”ë¡­ê²Œ', advice: 'ì£¼ëŠ” ê²ƒê³¼ ì§€í‚¤ëŠ” ê²ƒì˜ ê· í˜•' },
'earth_metal': { name: 'ê´‘ë§¥ì˜ ë°œê²¬', emoji: 'â›°ï¸â†’âš™ï¸', type: 'generate', desc: 'ë‚˜ì˜ ì§€ì§€ê°€ ìƒëŒ€ì˜ ê°€ì¹˜ë¥¼ ë“œëŸ¬ë‚¸ë‹¤', advice: 'ì¸ë‚´ì‹¬ ìˆëŠ” íˆ¬ìê°€ ê·€í•œ ê²°ì‹¤ì„ ë§ºëŠ”ë‹¤' },
'metal_water': { name: 'ì°¨ê°€ìš´ ê¸ˆì†ì˜ ì´ìŠ¬', emoji: 'ğŸª™â†’ğŸ’§', type: 'generate', desc: 'ë‚˜ì˜ êµ¬ì¡°ê°€ ìƒëŒ€ì˜ íë¦„ì„ ì¸ë„', advice: 'íë¦„ì„ ë§‰ì§€ ì•Šìœ¼ë©´ì„œ ë°©í–¥ ì œì‹œ' },
'water_wood': { name: 'ë¹„ ë‚´ë¦¬ëŠ” ìˆ²', emoji: 'ğŸŒ§ï¸â†’ğŸŒ²', type: 'generate', desc: 'ë‚´ê°€ ìƒëŒ€ì˜ ì„±ì¥ì„ ìì–‘í•œë‹¤', advice: 'ê¾¸ì¤€í•œ ì§€ì§€ê°€ ìš°ëš ì„  ì„±ê³µì„ ë§Œë“ ë‹¤' },
'wood_earth': { name: 'ë¿Œë¦¬ê°€ ë•…ì„ ê°ˆë¼', emoji: 'ğŸŒ³âš¡ğŸŒ', type: 'control', desc: 'ë‚´ê°€ ìƒëŒ€ì˜ ê¸°ë°˜ì„ í”ë“ ë‹¤', advice: 'ì§€ë°°ê°€ ì•„ë‹Œ ì„±ì¥ì„ ë„ì™€ì•¼' },
'earth_water': { name: 'ìŠ¤í€ì§€', emoji: 'ğŸ§½ğŸ’§', type: 'control', desc: 'ìƒëŒ€ì˜ ê°ì • ì—ë„ˆì§€ë¥¼ í¡ìˆ˜', advice: 'ì•ˆì „í•œ í•­êµ¬ê°€ ë˜ë˜, ìì‹ ë„ ì§œë‚´ì•¼' },
'water_fire': { name: 'ë¶ˆ ë„ëŠ” ë¬¼', emoji: 'ğŸ’§ğŸš«ğŸ”¥', type: 'control', desc: 'ìƒëŒ€ì˜ ê°•ë ¬í•¨ì„ ì‹íŒë‹¤', advice: 'ì‹íˆëŠ” ì˜í–¥ê³¼ ì—´ì •ì˜ ê³µê°„ ì‚¬ì´ ê· í˜•' },
'fire_metal': { name: 'ìš©ê´‘ë¡œ', emoji: 'ğŸ”¥ğŸ”¨âš™ï¸', type: 'control', desc: 'ë‚˜ì˜ ì—´ì´ ìƒëŒ€ë¥¼ ë³€í˜•ì‹œí‚¨ë‹¤', advice: 'ë³€í˜•ì´ íŒŒê´´ê°€ ë˜ì§€ ì•Šë„ë¡' },
'metal_wood': { name: 'ë„ë¼ì™€ ë‚˜ë¬´', emoji: 'ğŸª“ğŸŒ³', type: 'control', desc: 'ë‚˜ì˜ ë‚ ì¹´ë¡œì›€ì´ ìƒëŒ€ì˜ ì„±ì¥ì„ ìë¥¸ë‹¤', advice: 'ëª©ì  ìˆëŠ” ê°€ì§€ì¹˜ê¸°ë§Œ, ì´ìœ  ì—†ì´ ë² ì§€ ë§ ê²ƒ' },
'wood_wood': { name: 'ìˆ²ì˜ ë™ë§¹', emoji: 'ğŸŒ²ğŸŒ²', type: 'same', desc: 'ê°™ì€ ë°©í–¥ìœ¼ë¡œ ìë¼ëŠ” ë™ì§€', advice: 'ì„œë¡œì˜ ë¹›ì„ ê°€ë¦¬ì§€ ì•Šìœ¼ë©´ì„œ ì„±ì¥' },
'fire_fire': { name: 'ë“¤ë¶ˆ', emoji: 'ğŸ”¥ğŸ”¥', type: 'same', desc: 'ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ì»¤ì§€ëŠ” ì—´ì •', advice: 'ì„œë¡œë¥¼ ì†Œì§„í•˜ê¸° ì „ì— í•¨ê»˜ ì°½ì¡°' },
'earth_earth': { name: 'ì‚°ë§¥', emoji: 'â›°ï¸â›°ï¸', type: 'same', desc: 'ë‘ ë°°ë¡œ ë‹¨ë‹¨í•œ ê¸°ë°˜. ì •ì²´ ê°€ëŠ¥ì„±', advice: 'ë³€í™”ë¥¼ ë„ì…í•˜ì—¬ ì •ì²´ ë°©ì§€' },
'metal_metal': { name: 'ì¹¼ê³¼ ì¹¼', emoji: 'âš”ï¸âš”ï¸', type: 'same', desc: 'ë¶€ë”ªíˆê±°ë‚˜ ì—°í•©í•˜ëŠ” ë‚ ì¹´ë¡œìš´ ì •ì‹ ', advice: 'ë‚ ì„ ì„œë¡œê°€ ì•„ë‹Œ ë°”ê¹¥ìœ¼ë¡œ' },
'water_water': { name: 'ë°”ë‹¤ì˜ í•©ë¥˜', emoji: 'ğŸŒŠğŸŒŠ', type: 'same', desc: 'ê¹Šì´ê°€ í•©ì³ì ¸ ê´‘ëŒ€í•´ì§', advice: 'ì„œë¡œì˜ ê°ì •ì— ë¹ ì ¸ ìµì‚¬í•˜ì§€ ì•Šë„ë¡ ì ‘ì§€' },
'earth_wood': { name: 'í™ ìœ„ì˜ ë‚˜ë¬´', emoji: 'ğŸŒğŸŒ²', type: 'support', desc: 'ë‚´ê°€ ìƒëŒ€ì˜ ì„±ì¥ ê¸°ë°˜ì´ ë¨', advice: 'ì§€ì§€í•˜ë˜ ì§‘ì°©í•˜ì§€ ë§ ê²ƒ' },
'wood_metal': { name: 'ë„ë¼ì— ë² ì´ëŠ” ë‚˜ë¬´', emoji: 'ğŸŒ²âš¡ğŸª“', type: 'receive', desc: 'ìƒëŒ€ì˜ ë‚ ì¹´ë¡œì›€ì— ì˜í–¥ë°›ìŒ', advice: 'ìœ ì—°í•¨ìœ¼ë¡œ ëŒ€ì‘' },
'fire_water': { name: 'êº¼ì§€ëŠ” ë¶ˆê½ƒ', emoji: 'ğŸ”¥âš¡ğŸ’§', type: 'receive', desc: 'ìƒëŒ€ì˜ ëƒ‰ì •í•¨ì— ì‹í˜€ì§', advice: 'ì—´ì •ì˜ ë³¸ì§ˆì„ ì§€í‚¤ë©´ì„œ ì¡°ìœ¨' },
'water_earth': { name: 'ë§‰íˆëŠ” ë¬¼', emoji: 'ğŸ’§âš¡ğŸŒ', type: 'receive', desc: 'ìƒëŒ€ì˜ ë‹¨ë‹¨í•¨ì— íë¦„ì´ ë§‰í˜', advice: 'ëŒì•„ê°€ëŠ” ì§€í˜œ' },
'metal_fire': { name: 'ë…¹ëŠ” ê¸ˆì†', emoji: 'âš™ï¸âš¡ğŸ”¥', type: 'receive', desc: 'ìƒëŒ€ì˜ ì—´ì •ì— ë³€í˜•ë¨', advice: 'ë‹¨ë ¨ìœ¼ë¡œ ë°›ì•„ë“¤ì´ê¸°' }
};

const BRANCH_CLASH_V2 = [[0,6],[1,7],[2,8],[3,9],[4,10],[5,11]];
const SELF_PUNISHMENT_V2 = [[6,6],[9,9],[4,4],[11,11]];

function analyzeYearlyRisksV2(mySaju, partnerSaju, startYear, years) {
  const risks = [];
  for (let year = startYear; year < startYear + years; year++) {
    const yearBranch = (year - 4) % 12;
    const yearEvents = [];
    const pBrIdx = BRANCH.findIndex(b => b.c === partnerSaju.day.b.c);
    const myBrIdx = BRANCH.findIndex(b => b.c === mySaju.day.b.c);
    if (BRANCH_CLASH_V2.some(([a,b]) => (pBrIdx===a&&yearBranch===b)||(pBrIdx===b&&yearBranch===a))) { 
      yearEvents.push({ type: 'ìƒëŒ€ ì¼ì§€ì¶©', severity: 'âš ï¸', desc: year+'ë…„ ìƒëŒ€ë°© ì¼ì§€ì™€ ì„¸ìš´ì´ ì¶©', advice: 'ìƒëŒ€ë°© ìŠ¤íŠ¸ë ˆìŠ¤ ê¸°ê°„. íŠ¹ë³„íˆ ë°°ë ¤ í•„ìš”.' }); 
    }
    if (SELF_PUNISHMENT_V2.some(([a,b]) => pBrIdx===a&&yearBranch===b)) { 
      yearEvents.push({ type: 'ìƒëŒ€ ìí˜•', severity: 'âš ï¸', desc: year+'ë…„ ìƒëŒ€ë°© ìí˜•ì‚´ ë°œë™', advice: 'ìì±… ê²½í–¥ ì£¼ì˜. ì•ˆì •ê° ì œê³µ.' }); 
    }
    if (BRANCH_CLASH_V2.some(([a,b]) => (myBrIdx===a&&yearBranch===b)||(myBrIdx===b&&yearBranch===a))) { 
      yearEvents.push({ type: 'ë‚´ ì¼ì§€ì¶©', severity: 'âš ï¸', desc: year+'ë…„ ë‚˜ì˜ ì¼ì§€ì™€ ì„¸ìš´ì´ ì¶©', advice: 'ë‚´ê°€ í˜ë“  í•´. ìƒëŒ€ ì§€ì§€ í•„ìš”.' }); 
    }
    if (yearEvents.length > 0) risks.push({ year, events: yearEvents });
  }
  return risks;
}

function generateCharacterSectionHTML(myIlju, pIlju, myDm, pDm) {
  const myChar = ILJU_IMAGE_KR[myIlju] || { name: 'ë¯¸ìƒ', emoji: 'â“', desc: '' };
  const pChar = ILJU_IMAGE_KR[pIlju] || { name: 'ë¯¸ìƒ', emoji: 'â“', desc: '' };
  const interactionKey = myDm.e + '_' + pDm.e;
  const reverseKey = pDm.e + '_' + myDm.e;
  const myToP = INTERACTION_METAPHOR_KR[interactionKey];
  const pToMe = INTERACTION_METAPHOR_KR[reverseKey];
  
  let html = '<div class="card"><h3>ğŸ­ ì¼ì£¼ ìºë¦­í„°</h3><div style="display:grid;grid-template-columns:1fr auto 1fr;gap:10px;align-items:center;margin-top:15px;"><div style="text-align:center;padding:15px;background:rgba(253,216,53,0.1);border-radius:10px;"><p style="font-size:2rem;margin-bottom:5px;">'+myChar.emoji+'</p><p style="font-size:1.1rem;font-weight:bold;color:var(--gold);">"'+myChar.name+'"</p><p style="font-size:0.8rem;color:var(--gray);margin-top:8px;">'+myChar.desc+'</p></div><div style="text-align:center;font-size:1.5rem;">âš¡</div><div style="text-align:center;padding:15px;background:rgba(233,30,99,0.1);border-radius:10px;"><p style="font-size:2rem;margin-bottom:5px;">'+pChar.emoji+'</p><p style="font-size:1.1rem;font-weight:bold;color:#e91e63;">"'+pChar.name+'"</p><p style="font-size:0.8rem;color:var(--gray);margin-top:8px;">'+pChar.desc+'</p></div></div></div>';

  if (myToP || pToMe) {
    html += '<div class="card"><h3>ğŸ”„ ì˜¤í–‰ ì—­í•™</h3>';
    if (myToP) {
      html += '<div style="padding:12px;margin-top:10px;border-radius:8px;background:rgba(253,216,53,0.08);border-left:3px solid var(--gold);"><p style="font-weight:bold;margin-bottom:5px;"><span style="color:var(--gold);">ë‚˜</span> â†’ <span style="color:#e91e63;">ìƒëŒ€</span>: "'+myToP.name+'" '+myToP.emoji+'</p><p style="font-size:0.9rem;margin-bottom:5px;">'+myToP.desc+'</p><p style="font-size:0.8rem;color:var(--gold);">ğŸ’¡ '+myToP.advice+'</p></div>';
    }
    if (pToMe) {
      html += '<div style="padding:12px;margin-top:10px;border-radius:8px;background:rgba(233,30,99,0.08);border-left:3px solid #e91e63;"><p style="font-weight:bold;margin-bottom:5px;"><span style="color:#e91e63;">ìƒëŒ€</span> â†’ <span style="color:var(--gold);">ë‚˜</span>: "'+pToMe.name+'" '+pToMe.emoji+'</p><p style="font-size:0.9rem;margin-bottom:5px;">'+pToMe.desc+'</p><p style="font-size:0.8rem;color:var(--gold);">ğŸ’¡ '+pToMe.advice+'</p></div>';
    }
    html += '</div>';
  }
  
  return { html, myChar, pChar, myToP, pToMe };
}
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-9SYCKLSKD6');
</script><!--
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ€ ì‚¬ì£¼ë¡œë˜ Pro v34.7 [PUBLIC] - GitHub Pages Edition                          â•‘
â•‘  ì „ë¬¸ê°€ ìˆ˜ì¤€ ì‚¬ì£¼íŒ”ì ë¶„ì„ & ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°                                 â•‘
â•‘                                                                                â•‘
â•‘  ğŸ†“ FREE EDITION - ëª¨ë“  ê¸°ëŠ¥ ë¬´ë£Œ                                             â•‘
â•‘  ğŸ”“ PERSONAL VERSION (DevTools, Right-click disabled)                   â•‘
â•‘                                                                                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ“‹ CODE MAP (K-MUDANGê³¼ ê³µìœ )                                                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  [SHARED] ê³µí†µ ì½”ë“œ (106ê°œ í•¨ìˆ˜) - K-MUDANGê³¼ ë™ê¸°í™” í•„ìˆ˜                     â•‘
â•‘    â€¢ ë°ì´í„°: STEM, BRANCH, TEN_GODS, ELEMENT, JIJANGGAN, TWELVE_STATES       â•‘
â•‘    â€¢ ê³„ì‚°: calcYearPillar, calcMonthPillar, calcDayPillar, calcHourPillar    â•‘
â•‘    â€¢ ë¶„ì„: calcStrength, calcGods, calcFormat, calcLuck, calcYearLuck        â•‘
â•‘    â€¢ ì‹­ì‹ : getTenGod, getTwelveState, getBranchYang (v32.5)                  â•‘
â•‘    â€¢ ì‹ ì‚´: calcGongmang, calcSinsal, analyzeJijanggan                        â•‘
â•‘    â€¢ í•©ì¶©: analyzeAdvancedInteractions, analyzeSamhapBureau                  â•‘
â•‘    â€¢ í†µë³€: analyzeClimate, analyzeHealth, analyzeYukChinRon                  â•‘
â•‘                                                                                â•‘
â•‘  [UNIQUE] ì‚¬ì£¼ë¡œë˜ ì „ìš© ì½”ë“œ                                                  â•‘
â•‘    â€¢ ê¶í•©: analyzeMatch, copyMatchForAI, fullAnalysis                        â•‘
â•‘    â€¢ ê³µìœ : shareKakaoFallback, shareTalismanKakao, saveImage                 â•‘
â•‘    â€¢ ì‹œê°„: correctTimeToSolarTime, isBeforeSolarTerm, isInSummerTime         â•‘
â•‘    â€¢ UI: showDaeunTab, startTalismanGeneration                               â•‘
â•‘                                                                                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ“ VERSION HISTORY                                                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  v34.7 (2026-01-27):                                                          â•‘
â•‘    - [SYNC] K-MUDANG v4.23 NWS ì‹œìŠ¤í…œ ë™ê¸°í™”                                  â•‘
â•‘    - [NEW] ë¹„ì¦ˆë‹ˆìŠ¤ ê¸´ì¥ ëª¨ë“œ: å¿Œç¥â‰¥2 && business â†’ +5ì  (ê¸°ì¡´ -8ì  ëŒ€ì‹ )     â•‘
â•‘  v34.6 (2026-01-26):                                                          â•‘
â•‘    - [FIX] ì¡°í›„ ë³´ì™„ ì¡°ê±´ ë²„ê·¸ ìˆ˜ì •: 'ì—´'â†’'ì¡°' (ì¡´ì¬í•˜ì§€ ì•Šë˜ íƒ€ì… ìˆ˜ì •)       â•‘
â•‘           â†’ 'í•œ+ì¡°', 'ì¡°+í•œ' ì¡°í•© ì •ìƒ ì¸ì‹                                    â•‘
â•‘    - [NEW] ê·¹í•œê·¹ì¡° ì²œìƒì—°ë¶„ ê°€ì : ê·¹+ê·¹ ì¡°í•© ì‹œ +15ì  (ê¸°ì¡´ +12)              â•‘
â•‘    - [SYNC] K-MUDANG v4.22.4 ì¡°í›„ ë¡œì§ê³¼ ì •í•©ì„± í™•ë³´                          â•‘
â•‘                                                                               â•‘
â•‘  v34.4 (2026-01-26):                                                          â•‘
â•‘    - [FIX] ì˜¤í–‰ ìƒí˜¸ì‘ìš© í”¼ê·¹ê´€ê³„ 5ê°œ í‚¤ ì¶”ê°€ (earth_wood ë“±)                  â•‘
â•‘           â†’ "ë™ì¼ ì˜¤í–‰ (ë¹„í™”)" ì˜ëª»ëœ fallback ë©”ì‹œì§€ í•´ê²°                     â•‘
â•‘    - [FIX] fullAnalysis ì¡°í›„ìš©ì‹  ìš°ì„ ìˆœìœ„ ë²„ê·¸ ìˆ˜ì •                            â•‘
â•‘           â†’ ì¡°í›„ë¡ (í•œ/ì¡°) ì¡°ê±´ì„ í†µê´€ìš©ì‹  ì¡°ê±´ë³´ë‹¤ ë¨¼ì € ì²´í¬                   â•‘
â•‘           â†’ ê²¨ìš¸ ì‹ ì•½+ê´€ì‚´ê°• ì‚¬ì£¼ë„ ç« ìš©ì‹  ì •ìƒ íŒì •                          â•‘
â•‘    - [FIX] ë‚©ìŒ ì˜¤íƒ€ ìˆ˜ì •: æ³‰ä¸Šæ°´ â†’ æ³‰ä¸­æ°´ (ì²œì¤‘ìˆ˜)                            â•‘
â•‘    - [NEW] ê¶í•©íƒ­ ìŒë ¥ ì…ë ¥ ì§€ì› ì¶”ê°€                                          â•‘
â•‘           â†’ PARTNER_CALENDAR ë³€ìˆ˜, setPartnerCalendar() í•¨ìˆ˜                  â•‘
â•‘           â†’ runMatch(), analyzeMatch() ìŒë ¥â†’ì–‘ë ¥ ìë™ ë³€í™˜                    â•‘
â•‘    - [NEW] ê¶í•©íƒ­ ì‹œê°„(ì‹œì£¼) ì…ë ¥ ì§€ì› ì¶”ê°€                                    â•‘
â•‘           â†’ partner-hour select (ì‹œê°„ ëª¨ë¦„ ê¸°ë³¸ê°’)                            â•‘
â•‘           â†’ ì‹œê°„ ì…ë ¥ ì‹œ ì‹œì£¼ ê³„ì‚°, ë¯¸ì…ë ¥ ì‹œ null ì²˜ë¦¬                        â•‘
â•‘    - [UPD] Footer ë©˜íŠ¸ í™•ì¥ (ì‚¬ì£¼íƒ­: ê¸°ëŠ¥ ì¶”ê°€ ë°˜ì˜, ê¶í•©íƒ­: 8ëŒ€â†’15ëŒ€)         â•‘
â•‘    - [SYNC] K-MUDANG v4.22.4ì™€ ë™ê¸°í™”                                         â•‘
â•‘                                                                               â•‘
â•‘  v34.3 (2026-01-25):                                                          â•‘
â•‘    - [FIX] ì•”í•© ì •ì˜ ìˆ˜ì •: ì§„ìœ /ì‚¬ì‹ /ì˜¤ì¶• ì•”í•© ì œê±° (ìœ¡í•©ê³¼ í˜¼ë™ ë°©ì§€)         â•‘
â•‘    - [FIX] ì‹œê°„ë³´ì • í›„ ì‹¤ì œ ì‹œì§€ í‘œì‹œ (ì…ë ¥ ì‹œ â‰  ë³´ì • í›„ ì‹œ ëª…í™•íˆ í‘œê¸°)       â•‘
â•‘    - [NEW] ê¸°ì‹  2ë°° ê²½ê³ : ì²œê°„+ì§€ì§€ ëª¨ë‘ ê¸°ì‹ ì´ë©´ íŠ¹ë³„ ê²½ê³                     â•‘
â•‘    - [NEW] ì¡°ì—´ ì‚¬ì£¼ ë³‘ì˜¤ë…„ ê²½ê³ : ì—¬ë¦„ìƒ+ç«ê¸°ì‹ +ä¸™åˆë…„ ê±´ê°• ê²½ê³               â•‘
â•‘    - [NEW] AI ë³µì‚¬ì— ì˜¤ëŠ˜ ì¼ì§„ ì¶”ê°€: ë‚ ì§œ/ì¼ì§„/ì‹­ì‹ /12ìš´ì„±/ìš©ì‹ ê¸°ì‹  ì—¬ë¶€      â•‘
â•‘  v34.4 (2026-01-25):                                                          â•‘
â•‘    - [NEW] ë¶€ì  ë“±ê¸‰ ì‹œìŠ¤í…œ: í¬ê·€/ì˜ì›…/ì „ì„¤ 3ë‹¨ê³„                              â•‘
â•‘    - [NEW] ë“±ê¸‰ ë¼ë²¨: ì‹œë¦¬ì–¼ ìœ„ ã€Œì „ì„¤ã€ã€Œì˜ì›…ã€ í‘œì‹œ                          â•‘
â•‘    - [NEW] ë“±ê¸‰ë³„ ë¹„ì£¼ì–¼: í…Œë‘ë¦¬, ì½”ë„ˆ, ì‹œë¦¬ì–¼ ìƒ‰ìƒ ì°¨ë“±                       â•‘
â•‘    - [NEW] ìë™ ì—°ë„ ì‹œìŠ¤í…œ: ë§¤ë…„ ìˆ˜ë™ ì—…ë°ì´íŠ¸ ë¶ˆí•„ìš”                         â•‘
â•‘    - Total: 70ê°œ AI Rules + ë“±ê¸‰ ì‹œìŠ¤í…œ                                       â•‘
â•‘                                                                               â•‘
â•‘  v34.4 (2026-01-25):                                                          â•‘
â•‘    - [FIX] í•œì‹ (é–‘ç¥) ê³„ì‚° ì˜¤ë¥˜ ìˆ˜ì •: +1 â†’ +4 (ê¸°ì‹ ì„ ìƒí•˜ëŠ” ì˜¤í–‰)             â•‘
â•‘           ê¸°ì¡´: ê¸°ì‹ ì´ ìƒí•˜ëŠ” ì˜¤í–‰ (æ°´â†’æœ¨) / ìˆ˜ì •: ê¸°ì‹ ì„ ìƒí•˜ëŠ” ì˜¤í–‰ (é‡‘â†’æ°´)  â•‘
â•‘                                                                               â•‘
â•‘  v34.4 (2026-01-24):                                                          â•‘
â•‘    - [NEW] 4K ë¶€ì  ì‹œìŠ¤í…œ í¬íŒ… (K-MUDANG v34.4 ê¸°ë°˜)                         â•‘
â•‘    - [NEW] í•œì§€(éŸ“ç´™) í…ìŠ¤ì²˜ 3ë ˆì´ì–´ ì‹œìŠ¤í…œ                                    â•‘
â•‘    - [NEW] í•´ìƒë„ ì—…ê·¸ë ˆì´ë“œ: 1080Ã—1920 â†’ 2160Ã—3840 (4K)                       â•‘
â•‘    - [FIX] íƒœê·¹ ìƒ‰ìƒ: ì „í†µ ìƒ‰ìƒ ê³ ì • (#C41E3A, #1E3A5F)                        â•‘
â•‘    - [FIX] í…Œë§ˆ ìƒ‰ìƒ: ë°ì€ ë°°ê²½ + ê°•í•œ í¬ì¸íŠ¸ ì ìš©                             â•‘
â•‘    - Total: 70ê°œ AI Rules + 4K ë¶€ì                                            â•‘
â•‘                                                                               â•‘
â•‘  v32.6 (2026-01-23):                                                          â•‘
â•‘    - [FIX] AI í”„ë¡¬í”„íŠ¸ ë³µì‚¬ ì˜¤ë¥˜ ìˆ˜ì • (í•œì‹  ê³„ì‚° ë²„ê·¸)                          â•‘
â•‘    - [FIX] GODS.giê°€ ë¬¸ìì—´ì¸ë° ìˆ«ì ì—°ì‚° ì‹œë„í•˜ë˜ ë¬¸ì œ í•´ê²°                    â•‘
â•‘                                                                                â•‘
â•‘  v32.5 (2026-01-23):                                                          â•‘
â•‘    - [NEW] AI Rules 54ê°œ â†’ 70ê°œ í™•ì¥ (K-MUDANG ë™ê¸°í™” + 100ì  ë³´ì¥ í”„ë¡¬í”„íŠ¸)  â•‘
â•‘    - [NEW] ê·œì¹™ 55-69: K-MUDANG ê³ ê¸‰ ê·œì¹™ ì´ì‹                                 â•‘
â•‘    - [NEW] ê·œì¹™ 70: í¬ì‹ /ê¸°ì‹  í•„ìˆ˜ ëª…ì‹œ ê·œì¹™ ì¶”ê°€                              â•‘
â•‘    - [FIX] ìš©ì‹  ì„¹ì…˜ ë°•ìŠ¤ í˜•íƒœë¡œ ê°•í™” (í•œì‹  ì¶”ê°€)                              â•‘
â•‘    - [FIX] AI í•´ì„ ìš”ì²­ì— í¬ì‹ /ê¸°ì‹  ëª…ì‹œ ì§€ì‹œ ì¶”ê°€                             â•‘
â•‘    - Total: 70ê°œ AI Rules                                                     â•‘
â•‘                                                                               â•‘
â•‘  v32.2 (2026-01-22):                                                          â•‘
â•‘    - [SYNC] K-MUDANG v4.18.0 ì™„ì „ ë™ê¸°í™”                                       â•‘
â•‘    - [NEW] ì¢…ê²©(å¾æ ¼) ë¡œì§ ì¶”ê°€: ì¢…ì¬ê²©, ì¢…ì‚´ê²©, ì¢…ì•„ê²©, ì¢…ê°•ê²©                â•‘
â•‘    - [NEW] calcGods: isFollower, followerType ë°˜í™˜ê°’ ì¶”ê°€                      â•‘
â•‘  v32.1 (2026-01-21):                                                          â•‘
â•‘    - [NEW] ì§€ì§€ ì‹­ì‹  ê³„ì‚° ê¸°ëŠ¥ ì¶”ê°€ (getBranchYang í•¨ìˆ˜)                      â•‘
â•‘    - [NEW] ì‹­ì‹  ë§¤í•‘í‘œ ì¶”ê°€ (AI í•„ìˆ˜ ì°¸ì¡°)                                    â•‘
â•‘    - [NEW] ëŒ€ìš´/ì„¸ìš´ ì‹­ì‹  [ì²œê°„/ì§€ì§€] í‘œì‹œ                                    â•‘
â•‘    - [NEW] ì‚¼í•©êµ­(ä¸‰åˆå±€) ìƒì„¸ ë¶„ì„ ì¶”ê°€                                      â•‘
â•‘    - [NEW] ë“ë ¹/ì‹¤ë ¹ ì„¹ì…˜ ì¶”ê°€                                                â•‘
â•‘    - [NEW] CRITICAL AI INSTRUCTIONS ì„¹ì…˜                                      â•‘
â•‘    - Total: 54ê°œ AI Rules                                                     â•‘
â•‘                                                                                â•‘
â•‘  v32.0 (2026-01-20):                                                          â•‘
â•‘    - [FIX] ì¡°í›„ìš©ì‹  í†µê´€(Bridge) ì „ëµ ì ìš©                                    â•‘
â•‘    - [FIX] ì‹ ê°•ë„ ê³„ì‚°: 12ìš´ì„± ì ìˆ˜ ì¶”ê°€                                      â•‘
â•‘                                                                                â•‘
â•‘  Business: ì‚¬ì£¼ë¡œë˜ | Registration: 487-20-02668                              â•‘
â•‘  Contact: kmudang.official@gmail.com                                          â•‘
â•‘  Last Updated: 2026-01-21                                                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"><title>ğŸ€ ì‚¬ì£¼ë¡œë˜ Pro - ìš´ëª…ì˜ ë²ˆí˜¸</title><meta name="description" content="ì‚¬ì£¼íŒ”ì ê¸°ë°˜ ë¡œë˜ ë²ˆí˜¸ ìƒì„±. íŠ¹í—ˆì¶œì› ì¡°í›„ë¡  ì•Œê³ ë¦¬ì¦˜. ì „ë¬¸ ì‚¬ì£¼ ë¶„ì„."><!-- Open Graph / ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ì¸ë„¤ì¼ --><meta property="og:type" content="website"><meta property="og:title" content="ğŸ€ ì‚¬ì£¼ë¡œë˜ Pro | íŠ¹í—ˆì¶œì› AI ëª…ë¦¬í•™"><meta property="og:description" content="ğŸ“œ íŠ¹í—ˆì¶œì› 10-2026-0010452 Â· ğŸŒ¡ï¸ ì¡°í›„ë¡  ì •ë°€ ìš©ì‹ ë¶„ì„ Â· ğŸ’• ì‚¬ì£¼ê¶í•© Â· ğŸ® 2026 ê°œìš´ë¶€ì  Â· ğŸ° ìš´ëª…ì˜ ë¡œë˜ë²ˆí˜¸"><meta property="og:image" content="https://raw.githubusercontent.com/shrmsdl-netizen/simplesajulotto/main/share-thumbnail.png"><meta property="og:url" content="https://simplesajulotto.com"><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="ğŸ€ ì‚¬ì£¼ë¡œë˜ Pro | íŠ¹í—ˆì¶œì› AI ëª…ë¦¬í•™"><meta name="twitter:description" content="ğŸ“œ íŠ¹í—ˆì¶œì› 10-2026-0010452 Â· ğŸŒ¡ï¸ ì¡°í›„ë¡  ì •ë°€ ìš©ì‹ ë¶„ì„ Â· ğŸ’• ì‚¬ì£¼ê¶í•© Â· ğŸ® 2026 ê°œìš´ë¶€ì  Â· ğŸ° ìš´ëª…ì˜ ë¡œë˜ë²ˆí˜¸"><meta name="twitter:image" content="https://raw.githubusercontent.com/shrmsdl-netizen/simplesajulotto/main/share-thumbnail.png"><!-- JSON-LD Schema --><script type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareApplication","name":"ì‚¬ì£¼ë¡œë˜ Pro","alternateName":"SajuLotto","applicationCategory":"LifestyleApplication","operatingSystem":"Web Browser","description":"ì‚¬ì£¼íŒ”ì(å››æŸ±å…«å­—) ê¸°ë°˜ ë¡œë˜ ë²ˆí˜¸ ìƒì„± ë° ì „ë¬¸ ëª…ë¦¬ ë¶„ì„. íŠ¹í—ˆì¶œì› ì¡°í›„ë¡ (èª¿å€™è«–) ì•Œê³ ë¦¬ì¦˜ ì ìš©. ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ 100% ì œì™¸.","offers":{"@type":"Offer","price":"0","priceCurrency":"KRW"},"author":{"@type":"Organization","name":"ì‚¬ì£¼ë¡œë˜","url":"https://simplesajulotto.com"},"aggregateRating":{"@type":"AggregateRating","ratingValue":"4.9","ratingCount":"523"}}</script><link rel="preconnect" href="https://fonts.googleapis.com"><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700;900&display=swap" rel="stylesheet"><style>*{margin:0;padding:0;box-sizing:border-box;}:root{--bg:#1a1a2e;--card:#16213e;--gold:#FDD835;--gold-dark:#F9A825;--red:#C62828;--red-dark:#8B0000;--white:#fff;--gray:#9CA3AF;--wood:#4CAF50;--fire:#F44336;--earth:#FF9800;--metal:#9E9E9E;--water:#2196F3;--blue:#003478;}body{font-family:'Noto Serif KR',serif;background:var(--bg);color:var(--white);min-height:100vh;padding-bottom:20px;line-height:1.7;position:relative;}.watermark{position:fixed;top:140px;left:50%;transform:translateX(-50%);width:500px;max-width:100%;opacity:0.15;z-index:999;pointer-events:none;}.watermark img{width:100%;height:auto;display:block;}@media (max-width:600px){.watermark{width:100%;left:0;transform:none;}}.bagua{position:fixed;font-size:2rem;opacity:0.5;pointer-events:none;z-index:1;font-family:serif;line-height:1;text-shadow:0 0 15px currentColor;text-align:center;}.bagua.tl{top:200px;left:10px;color:#FFD700;}.bagua.tr{top:200px;right:10px;color:#FF6B6B;}.bagua.bl{bottom:120px;left:10px;color:#4ECDC4;}.bagua.br{bottom:120px;right:10px;color:#A29BFE;}.bagua-sub{font-size:0.45em;display:block;margin-top:3px;opacity:0.8;}header{background:linear-gradient(135deg,#1a1a2e 0%,#16213e 50%,#0f0f23 100%);padding:25px 20px 20px;text-align:center;position:relative;z-index:2;border-bottom:2px solid var(--gold);box-shadow:0 4px 20px rgba(253,216,53,0.2);overflow:hidden;}header::before{content:'';position:absolute;top:0;left:-100%;width:200%;height:100%;background:linear-gradient(90deg,transparent,rgba(253,216,53,0.1),transparent);animation:headerShine 3s infinite;}@keyframes headerShine{0%{transform:translateX(-50%);}100%{transform:translateX(50%);}}header::after{content:'âœ¦ ç¦ âœ¦ é‹ âœ¦ è²¡ âœ¦ å‰ âœ¦';position:absolute;top:5px;left:50%;transform:translateX(-50%);font-size:9px;color:var(--gold);letter-spacing:8px;opacity:0.5;}header h1{font-size:28px;font-weight:900;background:linear-gradient(135deg,#FFD700 0%,#FFF8DC 25%,#FFD700 50%,#FFA500 75%,#FFD700 100%);background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:goldShine 3s linear infinite;margin-top:15px;text-shadow:0 0 30px rgba(253,216,53,0.5);position:relative;z-index:1;}@keyframes goldShine{0%{background-position:0% center;}100%{background-position:200% center;}}header p{font-size:12px;color:var(--gold);margin-top:10px;opacity:0.8;letter-spacing:1px;position:relative;z-index:1;}.header-sparkles{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;}.sparkle{position:absolute;color:var(--gold);font-size:12px;animation:sparkleAnim 3s ease-in-out infinite;opacity:0;}@keyframes sparkleAnim{0%,100%{opacity:0;transform:scale(0.5);}50%{opacity:1;transform:scale(1.2);}}.top-nav{background:var(--bg);display:flex;justify-content:center;align-items:center;gap:5px;padding:12px 10px;position:sticky;top:0;z-index:100;}.top-nav button{background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.15);color:var(--gray);font-family:inherit;font-size:13px;cursor:pointer;display:flex;align-items:center;gap:6px;padding:10px 16px;border-radius:25px;transition:all 0.2s;}.top-nav button:hover{background:rgba(255,255,255,0.1);}.top-nav button.active{background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:var(--red-dark);font-weight:700;border-color:var(--gold);box-shadow:0 2px 10px rgba(253,216,53,0.3);}.top-nav button span{font-size:16px;}.container{max-width:500px;margin:0 auto;padding:15px;position:relative;z-index:1;}.tab{display:none;animation:fadeIn 0.3s;}.tab.active{display:block;}@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}.card{background:linear-gradient(145deg,rgba(255,255,255,0.08),rgba(255,255,255,0.03));border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:20px;margin-bottom:15px;}.card h3{font-size:15px;font-weight:700;margin-bottom:15px;color:var(--white);display:flex;align-items:center;gap:8px;}.card.gold{background:linear-gradient(145deg,rgba(253,216,53,0.15),rgba(253,216,53,0.05));border-color:rgba(253,216,53,0.3);}.card.warn{background:linear-gradient(145deg,rgba(244,67,54,0.15),rgba(244,67,54,0.05));border-color:rgba(244,67,54,0.3);}.btn{background:linear-gradient(135deg,var(--red),var(--red-dark));color:var(--white);border:none;padding:16px 30px;font-family:inherit;font-size:15px;font-weight:700;border-radius:12px;cursor:pointer;width:100%;margin:6px 0;box-shadow:0 4px 15px rgba(198,40,40,0.3);transition:transform 0.2s;}.btn:active{transform:scale(0.98);}.btn.gold{background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:var(--red-dark);}.btn.secondary{background:linear-gradient(135deg,#1a1a2e,#2d2d44);border:1px solid rgba(255,255,255,0.2);box-shadow:none;}.btn.outline{background:transparent;border:1px solid rgba(255,255,255,0.3);box-shadow:none;}.btn-row{display:flex;gap:10px;margin:10px 0;}.btn-row .btn{flex:1;margin:0;}.balls{display:flex;flex-wrap:wrap;justify-content:center;gap:6px;margin:15px 0;}.ball{width:48px;height:48px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:18px;font-weight:700;color:var(--white);box-shadow:0 4px 12px rgba(0,0,0,0.3);position:relative;}.ball::before{content:'';position:absolute;top:8px;left:12px;width:8px;height:8px;background:rgba(255,255,255,0.4);border-radius:50%;}.ball.sm{width:36px;height:36px;font-size:14px;}.ball.sm::before{width:6px;height:6px;top:6px;left:9px;}.ball.y{background:linear-gradient(135deg,#FFC107,#FF9800);}.ball.b{background:linear-gradient(135deg,#42A5F5,#1976D2);}.ball.r{background:linear-gradient(135deg,#EF5350,#C62828);}.ball.g{background:linear-gradient(135deg,#66BB6A,#2E7D32);}.ball.p{background:linear-gradient(135deg,#AB47BC,#6A1B9A);}.form-row{display:flex;gap:8px;margin-bottom:12px;align-items:flex-end;}.form-group{flex:1;}.form-group label{display:block;color:var(--gray);font-size:11px;margin-bottom:4px;}.form-group select,.form-group input{width:100%;padding:10px;background:#2a2a3d;border:1px solid rgba(255,255,255,0.2);border-radius:8px;color:var(--white);font-family:inherit;font-size:14px;}.form-group select option{background:#2a2a3d;color:#ffffff;padding:10px;}.form-group select:focus,.form-group input:focus{outline:none;border-color:var(--gold);}.toggle-btns{display:flex;gap:5px;}.toggle-btn{flex:1;padding:10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.2);border-radius:8px;color:var(--gray);font-family:inherit;font-size:12px;cursor:pointer;}.toggle-btn.on{background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:var(--red-dark);font-weight:700;border-color:var(--gold);}.pillars{display:flex;justify-content:center;gap:8px;margin:15px 0;}.pillar{min-width:70px;background:linear-gradient(180deg,rgba(253,216,53,0.1),rgba(0,0,0,0.3));border:1px solid rgba(253,216,53,0.3);border-radius:12px;padding:12px 8px;text-align:center;}.pillar.dm{border-color:var(--gold);box-shadow:0 0 15px rgba(253,216,53,0.3);}.pillar-label{font-size:10px;color:var(--gray);margin-bottom:8px;}.pillar-stem,.pillar-branch{font-size:1.6rem;font-weight:900;display:block;margin:3px 0;}.pillar-sub{font-size:9px;color:var(--gray);margin-top:6px;}.pillar-god{font-size:10px;color:var(--gold);margin-top:4px;}.el-wood{color:var(--wood);}.el-fire{color:var(--fire);}.el-earth{color:var(--earth);}.el-metal{color:var(--metal);}.el-water{color:var(--water);}.bg-wood{background:var(--wood);}.bg-fire{background:var(--fire);}.bg-earth{background:var(--earth);}.bg-metal{background:var(--metal);}.bg-water{background:var(--water);}.strength-box{background:rgba(0,0,0,0.3);border-radius:10px;padding:15px;margin:15px 0;}.strength-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}.strength-title{font-size:14px;color:var(--gold);}.strength-badge{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:700;}.strength-badge.strong{background:rgba(239,68,68,0.2);color:#FCA5A5;}.strength-badge.weak{background:rgba(59,130,246,0.2);color:#93C5FD;}.strength-badge.balanced{background:rgba(234,179,8,0.2);color:#FDE047;}.strength-bar{height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;margin-bottom:12px;}.strength-fill{height:100%;border-radius:4px;transition:width 0.5s;}.strength-fill.strong{background:linear-gradient(90deg,#EF4444,#F97316);}.strength-fill.weak{background:linear-gradient(90deg,#3B82F6,#06B6D4);}.strength-fill.balanced{background:linear-gradient(90deg,#EAB308,#22C55E);}.factors{display:grid;grid-template-columns:repeat(2,1fr);gap:6px;}.factor{display:flex;justify-content:space-between;padding:6px 10px;background:rgba(255,255,255,0.03);border-radius:6px;font-size:12px;}.factor-label{color:var(--gray);}.factor-value{font-weight:600;}.factor-value.pos{color:var(--wood);}.factor-value.neg{color:var(--fire);}.gods{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:15px 0;}.god{text-align:center;padding:15px 10px;border-radius:12px;background:rgba(0,0,0,0.2);}.god.yong{border:2px solid var(--gold);background:linear-gradient(180deg,rgba(253,216,53,0.1),transparent);}.god.hee{border:2px solid var(--wood);background:linear-gradient(180deg,rgba(76,175,80,0.1),transparent);}.god.gi{border:2px solid var(--fire);background:linear-gradient(180deg,rgba(244,67,54,0.1),transparent);}.god-title{font-size:11px;color:var(--gray);margin-bottom:8px;}.god-element{font-size:2rem;font-weight:900;}.god-name{font-size:12px;margin-top:5px;}.god-desc{font-size:10px;color:var(--gray);margin-top:4px;}.sub-tabs{display:flex;gap:5px;margin-bottom:15px;flex-wrap:wrap;}.sub-tab{padding:8px 12px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:20px;color:var(--gray);font-size:12px;cursor:pointer;font-family:inherit;}.sub-tab.on{background:var(--gold);color:var(--red-dark);font-weight:700;border-color:var(--gold);}.sub-content{display:none;}.sub-content.on{display:block;}.daeun-panel{min-height:100px;}.info-box{background:rgba(255,255,255,0.03);border-radius:10px;padding:15px;margin:10px 0;border-left:3px solid var(--gray);}.info-box.good{border-color:var(--wood);background:rgba(76,175,80,0.1);}.info-box.warn{border-color:var(--fire);background:rgba(244,67,54,0.1);}.info-box.gold{border-color:var(--gold);background:rgba(253,216,53,0.1);}.info-box p{font-size:13px;line-height:1.8;}.info-box strong{color:var(--gold);}.luck-timeline{display:flex;gap:8px;overflow-x:auto;padding:10px 0;}.luck-item{min-width:60px;text-align:center;padding:10px 8px;background:rgba(255,255,255,0.05);border-radius:10px;border:1px solid rgba(255,255,255,0.1);flex-shrink:0;}.luck-item.current{border-color:var(--gold);background:rgba(253,216,53,0.1);}.luck-item.good{border-color:var(--wood);}.luck-item.bad{border-color:var(--fire);}.luck-age{font-size:10px;color:var(--gray);}.luck-pillar{font-size:16px;font-weight:700;margin:5px 0;}.luck-rating{font-size:14px;}.sinsal-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;}.sinsal{display:flex;align-items:flex-start;gap:10px;padding:12px;background:rgba(255,255,255,0.03);border-radius:10px;border:1px solid rgba(255,255,255,0.1);}.sinsal.good{border-color:rgba(76,175,80,0.5);background:rgba(76,175,80,0.1);}.sinsal.bad{border-color:rgba(244,67,54,0.5);background:rgba(244,67,54,0.1);}.sinsal-icon{font-size:1.5rem;}.sinsal-name{font-size:13px;font-weight:700;margin-bottom:4px;}.sinsal-desc{font-size:11px;color:var(--gray);line-height:1.5;}.int-list{margin:10px 0;}.int-item{display:flex;align-items:center;gap:12px;padding:12px;background:rgba(255,255,255,0.03);border-radius:10px;margin-bottom:8px;}.int-type{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.1);border-radius:50%;font-weight:900;font-size:14px;}.int-chars{font-size:16px;font-weight:700;}.int-meaning{font-size:12px;color:var(--gray);margin-top:4px;line-height:1.5;}.rating{display:flex;align-items:center;gap:5px;margin:10px 0;}.rating-label{font-size:12px;color:var(--gray);}.rating-stars{font-size:16px;letter-spacing:2px;}.history-item{display:flex;justify-content:center;gap:4px;padding:12px;background:rgba(255,255,255,0.03);border-radius:10px;margin:6px 0;}.toast{position:fixed;bottom:100px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--gold);color:var(--red-dark);padding:15px 30px;border-radius:8px;font-size:14px;font-weight:700;opacity:0;transition:all 0.3s;z-index:200;}.toast.show{transform:translateX(-50%) translateY(0);opacity:1;}.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);z-index:200;align-items:center;justify-content:center;padding:20px;}.modal.active{display:flex;}.modal-content{background:var(--bg);border:1px solid rgba(253,216,53,0.3);border-radius:20px;padding:25px;width:100%;max-width:380px;text-align:center;}.modal-content h3{color:var(--gold);margin-bottom:20px;font-size:18px;}#capture-area{position:fixed;top:-9999px;left:-9999px;width:380px;padding:35px 25px;background:linear-gradient(145deg,var(--gold),var(--gold-dark));text-align:center;font-family:'Noto Serif KR',serif;border-radius:20px;border:4px solid var(--red);}footer.tab-footer{display:none;text-align:center;padding:30px 20px;color:#666;font-size:11px;line-height:1.8;}footer.tab-footer.active{display:block;}.share-section{margin-top:30px;padding:20px;background:linear-gradient(145deg,rgba(253,216,53,0.08),rgba(255,215,0,0.03));border-radius:15px;text-align:center;}.share-title{font-size:1rem;color:var(--gold);margin-bottom:15px;}.share-buttons{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;}.share-btn{display:flex;align-items:center;gap:8px;padding:12px 20px;border-radius:25px;border:none;font-size:0.9rem;font-weight:600;cursor:pointer;transition:all 0.3s;}.share-btn.kakao{background:#FEE500;color:#3C1E1E;}.share-btn.kakao:hover{background:#F5DC00;transform:scale(1.05);}.share-btn.copy-link{background:rgba(255,255,255,0.1);color:var(--gold);border:1px solid var(--gold);}.share-btn.copy-link:hover{background:rgba(253,216,53,0.2);}#talisman-canvas{max-width:100%;height:auto;border-radius:10px;box-shadow:0 10px 40px rgba(212,175,55,0.3);}#talisman-preview{text-align:center;padding:15px;background:rgba(0,0,0,0.3);border-radius:15px;border:1px solid rgba(212,175,55,0.3);}#talisman-ritual-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.95);z-index:9999;justify-content:center;align-items:center;flex-direction:column;}#talisman-ritual-overlay.active{display:flex;}@keyframes pulse{0%,100%{opacity:1;}50%{opacity:0.5;}}#talisman-ritual-overlay p{animation:pulse 1.5s infinite;}.zodiac-wheel-container{display:none;text-align:center;margin:20px auto;padding:20px;}.zodiac-wheel-container.show{display:block;}.wheel-wrapper{position:relative;width:280px;height:280px;margin:0 auto 15px;border-radius:50%;box-shadow:0 8px 25px rgba(0,0,0,0.3),0 0 0 3px var(--gold),0 0 20px rgba(212,175,55,0.3);}.wheel-wrapper::after{content:'â–¼';position:absolute;top:-25px;left:50%;transform:translateX(-50%);font-size:24px;color:var(--red);z-index:10;filter:drop-shadow(0 2px 4px rgba(0,0,0,0.5));}.wheel-glow{position:absolute;top:-8px;left:-8px;right:-8px;bottom:-8px;border-radius:50%;background:conic-gradient( from 0deg,transparent,rgba(212,175,55,0.5),transparent,rgba(212,175,55,0.5),transparent );opacity:0;transition:opacity 0.3s ease;z-index:-1;}.wheel-glow.active{opacity:1;animation:wheelGlowRotate 0.8s linear infinite;}@keyframes wheelGlowRotate{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}#zodiacWheel{width:100%;height:100%;border-radius:50%;transition:transform 1.5s cubic-bezier(0.15,0.6,0.2,1);}.sparkle-overlay{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;pointer-events:none;opacity:0;transition:opacity 0.3s ease;background:radial-gradient(circle at 25% 25%,rgba(255,255,255,0.5) 0%,transparent 20%),radial-gradient(circle at 75% 30%,rgba(255,255,255,0.3) 0%,transparent 15%);}.sparkle-overlay.active{opacity:1;animation:wheelSparkle 0.15s ease-in-out infinite alternate;}@keyframes wheelSparkle{0%{background:radial-gradient(circle at 25% 25%,rgba(255,255,255,0.5) 0%,transparent 20%),radial-gradient(circle at 75% 30%,rgba(255,255,255,0.3) 0%,transparent 15%);}100%{background:radial-gradient(circle at 30% 30%,rgba(255,255,255,0.6) 0%,transparent 25%),radial-gradient(circle at 70% 25%,rgba(255,255,255,0.4) 0%,transparent 20%);}}.zodiac-result-text{font-size:1.3rem;font-weight:bold;color:var(--gold);min-height:1.5em;opacity:0;transition:opacity 0.5s ease,transform 0.5s ease;transform:translateY(10px);}.zodiac-result-text.show{opacity:1;transform:translateY(0);}.zodiac-loading{display:none;color:var(--red);font-weight:500;}.zodiac-loading.show{display:block;}</style><!-- Kakao SDK --><script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js" integrity="sha384-TiCUE00h649CAMonG018J2ujOgDKW/kVWlChEuu4jK2vxfAAD0eZxzCKakxg55G4" crossorigin="anonymous"></script><script></script>
<!-- â˜… Force preload Ma Shan Zheng for Canvas â˜… -->
<link rel="preload" href="https://fonts.gstatic.com/s/mashanzheng/v10/NaPecZTRCLxvwo41b4gvzkXaRME.woff2" as="font" type="font/woff2" crossorigin>
<style>
@font-face {
    font-family: 'Ma Shan Zheng';
    font-style: normal;
    font-weight: 400;
    font-display: block;
    src: url(https://fonts.gstatic.com/s/mashanzheng/v10/NaPecZTRCLxvwo41b4gvzkXaRME.woff2) format('woff2');
    unicode-range: U+0000-FFFF;
}
.font-preload {
    font-family: 'Ma Shan Zheng', cursive;
    position: absolute;
    left: -9999px;
    visibility: hidden;
}
</style>
</head><body ><!-- ì›Œí„°ë§ˆí¬ ë°°ê²½ --><div class="watermark"><img src="https://raw.githubusercontent.com/shrmsdl-netizen/simplesajulotto/main/share-thumbnail.png" alt="" onerror="this.parentElement.style.display='none'"></div><!-- ========================================
     íŒ”ê´˜ ì¥ì‹ (ì‚¬ë°©)
     ======================================== --><div class="bagua tl">â˜°<span class="bagua-sub">ä¹¾</span></div><div class="bagua tr">â˜·<span class="bagua-sub">å¤</span></div><div class="bagua bl">â˜µ<span class="bagua-sub">å</span></div><div class="bagua br">â˜²<span class="bagua-sub">é›¢</span></div><!-- ========================================
     Capture Card (Hidden)
     ======================================== --><div id="capture-area"><div style="color:#C62828;font-size:10px;letter-spacing:10px;margin-bottom:15px;opacity:0.5;">ç¦ é‹ è²¡ å‰</div><h2 style="font-size:22px;color:#C62828;margin-bottom:5px;">ğŸ€ ì‚¬ì£¼ë¡œë˜ Pro</h2><p style="font-size:11px;color:#8B0000;margin-bottom:20px;">ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ 100% ì œì™¸ Â· ì‚¬ì£¼ ê¸°ë°˜</p><div style="background:rgba(139,0,0,0.1);border:2px dashed #C62828;border-radius:15px;padding:20px;margin-bottom:20px;"><p style="font-size:11px;color:#8B0000;margin-bottom:10px;" id="capture-date"></p><div id="capture-numbers" style="display:flex;justify-content:center;gap:6px;flex-wrap:wrap;"></div></div><p style="font-size:14px;color:#C62828;font-weight:700;margin-bottom:5px;">"ëŒ€ë°•ë‚˜ì„¸ìš”! ğŸ€"</p><p style="font-size:10px;color:#8B0000;opacity:0.6;">simplesajulotto.com</p></div><!-- ========================================
     Header
     ======================================== --><header><div class="header-sparkles"><span class="sparkle" style="top:20%;left:10%;animation-delay:0s;">âœ¦</span><span class="sparkle" style="top:60%;left:5%;animation-delay:0.5s;">âœ§</span><span class="sparkle" style="top:30%;left:90%;animation-delay:1s;">âœ¦</span><span class="sparkle" style="top:70%;left:85%;animation-delay:1.5s;">âœ§</span><span class="sparkle" style="top:40%;left:15%;animation-delay:2s;">â‹†</span><span class="sparkle" style="top:50%;left:92%;animation-delay:2.5s;">â‹†</span></div><h1>ğŸ€ ì‚¬ì£¼ë¡œë˜ Pro</h1><p>âœ¨ ëª…ë¦¬í•™ì˜ ë°©ëŒ€í•œ ë°ì´í„° Â· ì˜¤ì°¨ ì—†ëŠ” ì •ë°€ ê³„ì‚° Â· AIì˜ ì‹¬ì¸µ í†µì°° âœ¨</p></header><!-- ========================================
     ìƒë‹¨ íƒ­ ë„¤ë¹„ê²Œì´ì…˜
     ======================================== --><div class="top-nav"><button class="active" onclick="switchTab('saju')"><span>ğŸ”®</span><span>ì‚¬ì£¼</span></button><button onclick="switchTab('match')"><span>ğŸ’‘</span><span>ê¶í•©</span></button><button onclick="switchTab('lotto')"><span>ğŸ²</span><span>ë¡œë˜</span></button></div><div class="container"><!-- ========================================
     Tab 1: ë¡œë˜ ë²ˆí˜¸ ìƒì„±
     ======================================== --><div id="tab-lotto" class="tab"><div class="card gold"><div style="text-align:center;padding:10px;background:rgba(198,40,40,0.2);border-radius:8px;margin-bottom:15px;"><span style="font-size:13px;color:var(--gold);">âœ… ì—­ëŒ€ ëª¨ë“  ë‹¹ì²¨ë²ˆí˜¸ ë¶„ì„ ì™„ë£Œ</span></div><div class="balls" id="lotto-balls"><div class="ball y">?</div><div class="ball b">?</div><div class="ball r">?</div><div class="ball r">?</div><div class="ball g">?</div><div class="ball p">?</div></div><button class="btn" onclick="generateLotto()">ğŸ² í–‰ìš´ì˜ ë²ˆí˜¸ ìƒì„±</button><div class="btn-row"><button class="btn secondary" onclick="openShareModal()">ğŸ“¤ ê³µìœ </button><button class="btn gold" onclick="saveImage()">ğŸ“¸ ì´ë¯¸ì§€ ì €ì¥</button></div><p style="text-align:center;margin-top:15px;font-size:12px;color:var(--gray);"><span style="background:rgba(253,216,53,0.2);padding:5px 12px;border-radius:20px;color:var(--gold);">
                âœ¨ ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ì™€ 100% ê²¹ì¹˜ì§€ ì•ŠëŠ” ì¡°í•©
            </span></p></div><!-- ì˜¤ëŠ˜ì˜ ì¼ì§„ (ì‚¬ì£¼ ì…ë ¥ í›„ í‘œì‹œ) --><div class="card" id="today-fortune" style="display:none;"><h3>ğŸŒŸ ì˜¤ëŠ˜ì˜ ìš´ì„¸</h3><div id="today-fortune-content"></div></div><!-- íˆìŠ¤í† ë¦¬ --><div class="card" id="history-card" style="display:none;"><h3>ğŸ“‹ ì˜¤ëŠ˜ ìƒì„±í•œ ë²ˆí˜¸</h3><div id="history-list"></div></div></div><!-- ========================================
     Tab 2: ì‚¬ì£¼ ë¶„ì„
     ======================================== --><div id="tab-saju" class="tab active"><!-- í•™ë¬¸ì  íƒêµ¬ ì•ˆë‚´ --><div style="text-align:center;padding:15px 10px;margin-bottom:10px;background:linear-gradient(135deg, rgba(212,175,55,0.1), rgba(212,175,55,0.05));border-radius:10px;border:1px solid rgba(212,175,55,0.2);"><p style="font-size:14px;color:var(--gold);margin:0;">ğŸ”’ ì¼ì²´ì˜ ê´‘ê³  ì—†ì´ ìˆœìˆ˜í•œ í•™ë¬¸ì  íƒêµ¬(å­¸å•çš„ æ¢ç©¶)ë§Œì„ ì¶”êµ¬í•©ë‹ˆë‹¤</p></div><!-- ìƒë…„ì›”ì¼ ì…ë ¥ --><div class="card"><h3>ğŸ“… ìƒë…„ì›”ì¼ì‹œ</h3><div class="form-row"><div class="form-group"><label>ë…„</label><select id="birth-year"></select></div><div class="form-group"><label>ì›”</label><select id="birth-month"></select></div><div class="form-group"><label>ì¼</label><select id="birth-day"></select></div><div class="form-group"><label>ì‹œ</label><select id="birth-hour"></select></div></div><div class="form-row"><div class="form-group"><label>ì„±ë³„</label><div class="toggle-btns"><button class="toggle-btn on" data-gender="m" onclick="setGender('m')">ğŸ‘¨ ë‚¨</button><button class="toggle-btn" data-gender="f" onclick="setGender('f')">ğŸ‘© ì—¬</button></div></div><div class="form-group"><label>ì–‘/ìŒë ¥</label><div class="toggle-btns"><button class="toggle-btn on" data-cal="solar" onclick="setCalendar('solar')">â˜€ï¸ ì–‘ë ¥</button><button class="toggle-btn" data-cal="lunar" onclick="setCalendar('lunar')">ğŸŒ™ ìŒë ¥</button></div></div></div><!-- [v31.3 NEW] ì‹œê°„ ë³´ì • ì˜µì…˜ --><details style="margin-top:15px;background:rgba(255,255,255,0.03);border-radius:10px;padding:10px;"><summary style="cursor:pointer;color:var(--gold);font-size:13px;">âš™ï¸ ê³ ê¸‰ ì‹œê°„ ë³´ì • ì„¤ì • (ì „ë¬¸ê°€ìš©)</summary><div style="margin-top:10px;padding:10px;background:rgba(0,0,0,0.2);border-radius:8px;"><div style="display:flex;flex-wrap:wrap;gap:10px;font-size:12px;"><label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox" id="opt-summertime" checked onchange="updateTimeSettings()"><span>ì„œë¨¸íƒ€ì„ ë³´ì • (1948-1988)</span></label><label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox" id="opt-longitude" checked onchange="updateTimeSettings()"><span>ê²½ë„ ë³´ì • (ì„œìš¸ -32ë¶„)</span></label><label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox" id="opt-yajasi" onchange="updateTimeSettings()"><span>ì•¼ìì‹œ ì‚¬ìš©</span></label></div><p style="margin-top:8px;font-size:11px;color:var(--gray);line-height:1.6;">
                    â„¹ï¸ ì„œë¨¸íƒ€ì„: 1948-1988ë…„ íŠ¹ì • ê¸°ê°„ ì¶œìƒì 1ì‹œê°„ ë³´ì •<br>
                    â„¹ï¸ ê²½ë„ ë³´ì •: ë™ê²½ 135Â° í‘œì¤€ì‹œ â†’ ì„œìš¸(127Â°) íƒœì–‘ì‹œ ë³€í™˜<br>
                    â„¹ï¸ ì•¼ìì‹œ: 23:00~00:00ì„ ë‹¹ì¼ë¡œ ì²˜ë¦¬ (ì²´í¬ í•´ì œ ì‹œ ìµì¼)
                </p></div></details><button class="btn" onclick="analyzeSaju()">ğŸ”® ì •ë°€ ë¶„ì„</button><p style="font-size:0.85rem;color:#aaa;margin-top:10px;text-align:center;line-height:1.6;">
            ğŸ’¡ ë¶„ì„ í›„ í•˜ë‹¨ì˜ <strong style="color:#D4AF37;">AI í”„ë¡¬í”„íŠ¸ ë³µì‚¬</strong> ë²„íŠ¼ì„ ëˆŒëŸ¬<br>
            Gemini, ChatGPT ë“±ì— ë¶™ì—¬ë„£ìœ¼ë©´<br><strong style="color:#FFD700;">ì •í™•í•œ ì‚¬ì£¼ ë°ì´í„° ê¸°ë°˜ì˜ ì „ë¬¸ê°€ ìˆ˜ì¤€ ì„œìˆ í˜• í’€ì´</strong>ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p></div><!-- ì‚¬ì£¼ ê²°ê³¼ ì˜ì—­ --><div id="saju-result" style="display:none;"><!-- ì‚¬ì£¼ ì›êµ­ --><div class="card"><h3>ğŸ“œ ì‚¬ì£¼ ì›êµ­</h3><div class="pillars" id="pillars"></div><div id="twelve-states"></div><div class="strength-box" id="strength-box"></div></div><!-- ë‚©ìŒ/ëª…ê¶/íƒœì› (NEW) --><div class="card"><h3>ğŸµ ë‚©ìŒ Â· ëª…ê¶ Â· íƒœì›</h3><div id="napeum-myunggung"></div></div><!-- ì§€ì¥ê°„ ë¶„ì„ (NEW) --><div class="card"><h3>ğŸ” ì§€ì¥ê°„ ë¶„ì„</h3><div id="jijanggan-analysis"></div></div><!-- í†µê·¼/íˆ¬ê°„ ë¶„ì„ (NEW) --><div class="card"><h3>ğŸŒ³ í†µê·¼ Â· íˆ¬ê°„</h3><div id="tonggeun-analysis"></div></div><!-- ìš©ì‹ /í¬ì‹ /ê¸°ì‹  --><div class="card"><h3>ğŸ¯ ìš©ì‹  Â· í¬ì‹  Â· ê¸°ì‹ </h3><div class="gods" id="gods"></div><div id="gods-detail"></div><div id="johu-detail"></div></div><!-- ìœ¡ì¹œ ë¶„ì„ (NEW) --><div class="card"><h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ìœ¡ì¹œ(å…­è¦ª) ë¶„ì„</h3><div id="yukcheon-analysis"></div></div><!-- ê²©êµ­ --><div class="card"><h3>ğŸ“ ê²©êµ­</h3><div id="format"></div></div><!-- 60ê°‘ì ì¼ì£¼ë¡  --><div class="card"><h3>ğŸ´ 60ê°‘ì ì¼ì£¼ë¡ </h3><div id="ilju"></div></div><!-- ê¶ìœ„ ë¶„ì„ (NEW) --><div class="card"><h3>ğŸ›ï¸ ê¶ìœ„(å®®ä½) ë¶„ì„</h3><div id="gungwi-analysis"></div></div><!-- 12ìš´ì„± ì™„ì „ ë¶„ì„ (NEW) --><div class="card"><h3>ğŸ”„ 12ìš´ì„± ì™„ì „ ë¶„ì„</h3><div id="twelve-states-full"></div></div><!-- ëŒ€ìš´ í†µí•© íƒ­ --><div class="card"><h3>ğŸŒŠ ëŒ€ìš´ Â· ìš´ì„¸</h3><div class="sub-tabs" id="daeun-tabs" style="flex-wrap:wrap;"><button class="sub-tab on" onclick="showDaeunTab('timeline')">ëŒ€ìš´í‘œ</button><button class="sub-tab" onclick="showDaeunTab('gyoungi')">êµìš´ê¸°</button><button class="sub-tab" onclick="showDaeunTab('tenyears')">10ë…„</button><button class="sub-tab" onclick="showDaeunTab('monthly')">ì›”ìš´</button><button class="sub-tab" onclick="showDaeunTab('detail')">ìƒì„¸</button></div><div id="daeun-tab-content"><div id="daeun-timeline" class="daeun-panel"><div id="luck-meta"></div><div class="luck-timeline" id="luck-timeline"></div></div><div id="daeun-gyoungi" class="daeun-panel" style="display:none;"><div id="gyoungi-analysis"></div></div><div id="daeun-tenyears" class="daeun-panel" style="display:none;"><div id="ten-years-luck"></div></div><div id="daeun-monthly" class="daeun-panel" style="display:none;"><div id="monthly-luck"></div></div><div id="daeun-detail" class="daeun-panel" style="display:none;"><div id="luck-detail"></div></div></div></div><!-- í†µë³€ --><div class="card"><h3>ğŸ”® í†µë³€</h3><div class="sub-tabs" id="fortune-tabs"><button class="sub-tab on" onclick="showFortune('total')">ì´ìš´</button><button class="sub-tab" onclick="showFortune('today')">ì˜¤ëŠ˜</button><button class="sub-tab" onclick="showFortune('year')">ì—°ìš´</button><button class="sub-tab" onclick="showFortune('career')">ì§ì—…</button><button class="sub-tab" onclick="showFortune('love')">ì—°ì• </button><button class="sub-tab" onclick="showFortune('wealth')">ì¬ë¬¼</button><button class="sub-tab" onclick="showFortune('health')">ê±´ê°•</button></div><div id="fortune-content"></div></div><!-- í•©ì¶©í˜•íŒŒí•´ --><div class="card"><h3>ğŸ’« í•©ì¶©í˜•íŒŒí•´</h3><div id="interactions"></div></div><!-- ë°©í•©/ì•”í•© ë¶„ì„ (NEW) --><div class="card"><h3>ğŸŒ€ ë°©í•© Â· ì•”í•©</h3><div id="banghap-amhap"></div></div><!-- í•©ì¶© ê³ ê¸‰ ë¶„ì„ (NEW) --><div class="card"><h3>âš—ï¸ í•©í™”/ì¶©í•´ì†Œ ë¶„ì„</h3><div id="advanced-interactions"></div></div><!-- ê³µë§ --><div class="card"><h3>ğŸ•³ï¸ ê³µë§</h3><div id="gongmang"></div></div><!-- ê³µë§ í•´ì†Œ ë¶„ì„ (NEW) --><div class="card"><h3>ğŸ”“ ê³µë§ í•´ì†Œ ë¶„ì„</h3><div id="gongmang-haeso"></div></div><!-- ì‹ ì‚´ --><div class="card"><h3>â­ ì‹ ì‚´</h3><div class="sinsal-grid" id="sinsal"></div></div><!-- ì‹ ì‚´ ìœ„ì¹˜ë³„ ë¶„ì„ (NEW) --><div class="card"><h3>ğŸ“ ì‹ ì‚´ ìœ„ì¹˜ë³„ í•´ì„</h3><div id="sinsal-position"></div></div><!-- AI ì¢…í•© í•´ì„ (NEW) --><div class="card" style="background:linear-gradient(145deg, rgba(156,39,176,0.15), rgba(103,58,183,0.08)); border-color:rgba(156,39,176,0.3);"><h3>ğŸ§  AI ì¢…í•© í•´ì„</h3><div id="ai-interpretation"></div><button class="btn" style="margin-top:15px;background:linear-gradient(135deg,#9C27B0,#673AB7);" onclick="copySajuForAI()">
                ğŸ“‹ ì„œìˆ í˜• í•´ì„ì„ ìœ„í•œ ë³µì‚¬ (Gemini/ChatGPT)
            </button><p style="margin-top:15px;font-size:13px;color:#9C27B0;opacity:0.9;line-height:1.8;text-align:center;">
                âœ¨ ì •ë°€í•œ ëª…ë¦¬ ë°ì´í„°ì™€ AIì˜ ì‹¬ì¸µ ë¶„ì„ì´ ë§Œë‚˜ëŠ”<br><span style="color:var(--gold);font-weight:600;">í˜„ì¡´í•˜ëŠ” ê°€ì¥ ì™„ë²½í•œ ì‚¬ì£¼ í•´ì„ì˜ ì¡°í•©</span>ì…ë‹ˆë‹¤
            </p><p style="margin-top:10px;font-size:12px;color:#aaa;line-height:1.7;text-align:center;">
                ê³ ì „ ëª…ë¦¬ì˜ ë³µì¡í•œ ìˆ˜ì‹ì€ ë‹¨ í•œ ì¹˜ì˜ ì˜¤ì°¨ ì—†ì´ ê³„ì‚°í•˜ê³ ,<br>
                ê·¸ ê²°ê³¼ë¥¼ ì„¸ê³„ ìµœì •ìƒ AIê°€ ì˜¤ì§ ë‹¹ì‹ ë§Œì„ ìœ„í•´ í•´ì„í•©ë‹ˆë‹¤.<br><span style="color:var(--gold);opacity:0.9;">ì „ë¬¸ê°€ì˜ í†µì°°ê³¼ ê¸°ìˆ ì˜ ì •í™•ì„±, ë‘˜ ëª¨ë‘ë¥¼ ì·¨í•˜ì‹­ì‹œì˜¤.</span></p></div><!-- ì‚¬ì£¼ ê¸°ë°˜ ë¡œë˜ --><div class="card gold"><h3>ğŸ° ì‚¬ì£¼ ê¸°ë°˜ í–‰ìš´ ë²ˆí˜¸</h3><p style="font-size:12px;color:var(--gray);margin-bottom:15px;">
                ë‹¹ì‹ ì˜ ìš©ì‹ (ç”¨ç¥) ì˜¤í–‰ì— ê°€ì¤‘ì¹˜ë¥¼ ë¶€ì—¬í•œ íŠ¹ë³„í•œ ë²ˆí˜¸ì…ë‹ˆë‹¤.
            </p><div class="balls" id="saju-lotto-balls"></div><button class="btn gold" onclick="generateSajuLotto()">ğŸ”® ìš©ì‹  ê¸°ë°˜ ë²ˆí˜¸ ìƒì„±</button></div></div></div><!-- ========================================
     Tab 3: ê¶í•©
     ======================================== --><div id="tab-match" class="tab"><div class="card"><h3>ğŸ’‘ ê¶í•© ë¶„ì„</h3><p style="font-size:12px;color:var(--gray);margin-bottom:15px;">
            ìƒëŒ€ë°© ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´ ë‘ ì‚¬ëŒì˜ ê¶í•©ì„ ë¶„ì„í•©ë‹ˆë‹¤.
        </p><div style="background:rgba(253,216,53,0.1);padding:15px;border-radius:10px;margin-bottom:15px;"><p style="font-size:11px;color:var(--gray);margin-bottom:10px;">ğŸ‘¤ ë‚˜ì˜ ì •ë³´</p><div id="my-info-display"><p style="color:var(--gold);">ë¨¼ì € [ì‚¬ì£¼ë¶„ì„] íƒ­ì—ì„œ ë‚´ ì‚¬ì£¼ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”</p></div></div><p style="font-size:11px;color:var(--gray);margin-bottom:10px;">ğŸ’• ìƒëŒ€ë°© ì •ë³´</p><div class="form-row"><div class="form-group"><label>ë…„</label><select id="partner-year"></select></div><div class="form-group"><label>ì›”</label><select id="partner-month"></select></div><div class="form-group"><label>ì¼</label><select id="partner-day"></select></div><div class="form-group"><label>ì‹œ</label><select id="partner-hour"></select></div></div><div class="form-row"><div class="form-group"><label>ì–‘/ìŒë ¥</label><div class="toggle-btns"><button class="toggle-btn on" data-pcal="solar" onclick="setPartnerCalendar('solar')">â˜€ï¸ ì–‘ë ¥</button><button class="toggle-btn" data-pcal="lunar" onclick="setPartnerCalendar('lunar')">ğŸŒ™ ìŒë ¥</button></div></div><div class="form-group"><label>ì„±ë³„</label><select id="partner-gender"><option value="m">ë‚¨</option><option value="f">ì—¬</option></select></div><div class="form-group"><label>ê´€ê³„</label><select id="relationship-type"><option value="romance">ğŸ’• ì—°ì¸/ë°°ìš°ì</option><option value="business">ğŸ’¼ ë¹„ì¦ˆë‹ˆìŠ¤</option><option value="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ê°€ì¡±</option></select></div></div><button class="btn" onclick="analyzeMatch()">ğŸ’• ê¶í•© ë³´ê¸°</button></div><div id="match-result"></div></div></div><!-- container --><!-- ========================================
     Share Modal
     ======================================== --><div class="modal" id="share-modal"><div class="modal-content"><h3>ğŸ“¤ ë²ˆí˜¸ ê³µìœ í•˜ê¸°</h3><div style="background:rgba(0,0,0,0.3);padding:20px;border-radius:12px;margin:15px 0;"><p style="font-size:12px;color:var(--gray);margin-bottom:10px;">ğŸ€ ì‚¬ì£¼ë¡œë˜ Pro</p><div class="balls" id="share-balls"></div></div><button class="btn" onclick="shareNumbers()">ğŸ“¤ ê³µìœ í•˜ê¸°</button><button class="btn secondary" onclick="copyNumbers()">ğŸ“‹ ë²ˆí˜¸ ë³µì‚¬</button><button class="btn outline" onclick="closeShareModal()">ë‹«ê¸°</button></div></div><!-- Toast --><div class="toast" id="toast"></div><!-- ê³µìœ  ì„¹ì…˜ --><div class="container" style="margin-top:30px;margin-bottom:20px;"><div class="share-section"><p class="share-title">âœ¨ 2026ë…„ ê°œìš´ë¶€ì </p><p style="font-size:0.85rem;color:#aaa;margin-bottom:15px;line-height:1.6;">
            ë‚˜ë§Œì˜ ê³ í•´ìƒë„ ê°œìš´ ë¶€ì ì„ ë§Œë“¤ì–´ íœ´ëŒ€í° ë°°ê²½í™”ë©´ìœ¼ë¡œ ì„¤ì •í•˜ì„¸ìš”
        </p><!-- [v31.0] ì˜ì‹ ì• ë‹ˆë©”ì´ì…˜ ì˜¤ë²„ë ˆì´ --><div id="talisman-ritual-overlay" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.95);z-index:9999;justify-content:center;align-items:center;flex-direction:column;"><canvas id="ritual-canvas" width="300" height="400" style="border-radius:10px;"></canvas><p style="color:#D4AF37;font-size:1.2rem;margin-top:20px;animation:pulse 1.5s infinite;">ğŸ–Œï¸ ë¶€ì ì„ ê·¸ë¦¬ëŠ” ì¤‘...</p></div><!-- ë¶€ì  ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸° --><div id="talisman-preview" style="display:none;margin-bottom:20px;"><canvas id="talisman-canvas" width="540" height="960" style="max-width:100%;height:auto;border-radius:10px;box-shadow:0 10px 40px rgba(212,175,55,0.3);"></canvas><div style="margin-top:15px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap;"><button onclick="downloadTalisman()" style="padding:12px 24px;background:linear-gradient(135deg,#D4AF37,#B8860B);color:#1a1a1a;border:none;border-radius:20px;font-weight:600;cursor:pointer;font-size:1rem;">
                    ğŸ“¥ ì´ë¯¸ì§€ ì €ì¥
                </button><button onclick="shareTalismanKakao()" style="padding:12px 24px;background:#FEE500;color:#3C1E1E;border:none;border-radius:20px;font-weight:600;cursor:pointer;font-size:1rem;">
                    ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ ê³µìœ 
                </button></div><p style="font-size:0.8rem;color:#888;margin-top:12px;">ğŸ’¡ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•œ í›„ íœ´ëŒ€í° ë°°ê²½í™”ë©´ìœ¼ë¡œ ì„¤ì •í•˜ì„¸ìš”!</p></div><!-- ë  ë£°ë › ì˜ì—­ (ë¶€ì  ìƒì„±ì‹œì—ë§Œ í‘œì‹œ) --><div id="zodiac-wheel-container" class="zodiac-wheel-container"><div class="wheel-wrapper"><div class="wheel-glow" id="wheelGlow"></div><img id="zodiacWheel" src="zodiac-wheel.png" alt="ì‹­ì´ì§€ì‹  íœ "><div class="sparkle-overlay" id="sparkleOverlay"></div></div><div class="zodiac-loading" id="zodiacLoading">âœ¦ ìš´ëª…ì˜ ë  íƒìƒ‰ì¤‘... âœ¦</div><div class="zodiac-result-text" id="zodiacResultText"></div></div><div id="talisman-btn-wrapper"><button class="share-btn" onclick="generateTalisman()" style="background:linear-gradient(135deg,#8B0000,#DC143C);width:100%;padding:18px;font-size:1.1rem;text-align:center;display:flex;justify-content:center;align-items:center;">
                ğŸ® ê³ í•´ìƒë„ ê°œìš´ë¶€ì  ë§Œë“¤ê¸° ğŸ®
            </button></div></div><!-- ë³µì±„ ì„¹ì…˜ --><div style="margin-top:20px;padding:20px;background:linear-gradient(145deg, rgba(255,215,0,0.1), rgba(255,180,0,0.05));border-radius:15px;text-align:center;"><p style="font-size:1rem;color:var(--gold);margin-bottom:10px;">ğŸ™ ë³µì±„(ç¦å‚µ)</p><p style="font-size:0.95rem;color:#ddd;margin-bottom:5px;line-height:1.7;">
            ì ê´˜ë¥¼ ë³´ì…¨ìœ¼ë‹ˆ, ë³µì±„ëŠ” ì˜ˆ(ç¦®)ì…ë‹ˆë‹¤.
        </p><p style="font-size:0.9rem;color:#aaa;margin-bottom:18px;">
            ë‚˜ëˆˆ ë³µì€ ë°°ê°€ ë˜ì–´ ëŒì•„ì˜µë‹ˆë‹¤.
        </p><div style="display:flex;flex-direction:column;gap:10px;align-items:center;"><button onclick="copyAccount()" style="width:220px;padding:12px 20px;background:rgba(255,255,255,0.1);color:var(--gold);font-weight:600;border-radius:25px;border:1px solid var(--gold);font-size:0.9rem;cursor:pointer;">
                ğŸ¦ ê³„ì¢Œë³µì‚¬ (ì¼€ì´ë±…í¬)
            </button></div><p style="margin-top:20px;font-size:1.05rem;color:#ccc;line-height:1.8;">
            ğŸ”’ ê´‘ê³  ì—†ì´, ë¶ˆìˆœí•œ ê¸°ìš´ ì—†ì´<br><span style="color:var(--gold);font-size:1.1rem;">ì˜¤ë¡¯ì´ ë§‘ì€ ê¸°(æ°£)ë§Œ ë¨¸ë¬´ëŠ” ê³³</span></p><p style="margin-top:12px;font-size:0.8rem;color:#888;line-height:1.6;">
            ë³µì±„ëŠ” ìë°œì  ê°ì‚¬ì˜ í‘œì‹œì´ë©°, ì„œë¹„ìŠ¤ ì´ìš©ê³¼ ë¬´ê´€í•©ë‹ˆë‹¤.
        </p></div></div><footer id="footer-lotto" class="tab-footer"><div style="border-top:1px solid rgba(76,175,80,0.2);padding-top:25px;margin-bottom:20px;"><p style="color:var(--wood);font-size:16px;margin-bottom:15px;font-weight:600;">ğŸ€ ì‚¬ì£¼ ê¸°ë°˜ í–‰ìš´ ë²ˆí˜¸ ìƒì„±</p><p style="font-size:14px;line-height:2.2;color:#ccc;"><span style="color:#bbb;">ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ 100% ì œì™¸ Â· ì˜¤í–‰(äº”è¡Œ) ê· í˜• ë°°ì¹˜</span><br><span style="color:#aaa;">ìš©ì‹ (ç”¨ç¥) ê¸°ë°˜ í–‰ìš´ìˆ˜ ë„ì¶œ Â· ê°œì¸í™” ì•Œê³ ë¦¬ì¦˜</span></p></div><p style="font-size:13px;color:#cc9900;">âš ï¸ ë¡œë˜ëŠ” ì˜¤ë½ì…ë‹ˆë‹¤. ê³¼ë„í•œ êµ¬ë§¤ëŠ” ì‚¼ê°€ì„¸ìš”.</p><p style="font-size:12px;color:#999;margin-top:5px;">ë³¸ ì‚¬ì´íŠ¸ëŠ” ë‹¹ì²¨ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p><p style="margin-top:15px;font-size:13px;color:#888;">ğŸ”’ ê´‘ê³  ì—†ëŠ” ì²­ì • ê³µê°„ Â· Â© 2026 ì‚¬ì£¼ë¡œë˜ Pro</p><p style="color:#D4AF37;font-size:13px;font-weight:600;margin-top:8px;">ğŸ“œ íŠ¹í—ˆ ì¶œì›: 10-2026-0010452</p><p style="font-size:11px;color:#777;margin-top:3px;">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 487-20-02668</p></footer><footer id="footer-saju" class="tab-footer active"><div style="padding-top:25px;margin-bottom:20px;"><p style="color:var(--gold);font-size:16px;margin-bottom:15px;font-weight:600;">â˜¯ ê³ ì „ ëª…ë¦¬í•™ì˜ ì •ìˆ˜(ç²¾é«“)</p><p style="font-size:14px;line-height:2.2;color:#ccc;"><strong style="color:var(--gold);">ã€ì ì²œìˆ˜(æ»´å¤©é«“)ã€</strong> Â· <strong style="color:var(--gold);">ã€ìí‰ì§„ì „(å­å¹³çœè©®)ã€</strong> Â· <strong style="color:var(--gold);">ã€ê¶í†µë³´ê°(çª®é€šå¯¶é‘‘)ã€</strong><br>ì‚¼ëŒ€ ê³ ì „ì˜ ì •í†µ ëª…ë¦¬ ì´ë¡ ì„ í˜„ëŒ€ì ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.<br><br><span style="color:#bbb;">ë§Œì„¸ë ¥(è¬æ­²æ›†) ì •ë°€ ê³„ì‚° Â· ì ˆê¸°(ç¯€æ°£) ì‹œê°„ ë³´ì • Â· ğŸ“œ íŠ¹í—ˆì¶œì› ì¡°í›„ìš©ì‹ (èª¿å€™ç”¨ç¥)</span><br><span style="color:#aaa;">ë‚©ìŒì˜¤í–‰(ç´éŸ³äº”è¡Œ) Â· ëª…ê¶(å‘½å®®) Â· íƒœì›(èƒå…ƒ) Â· ì§€ì¥ê°„(æ”¯è—å¹²)</span><br><span style="color:#999;">í†µê·¼íˆ¬ê°„(é€šæ ¹é€å¹²) Â· ë°©í•©(æ–¹åˆ) Â· ì•”í•©(æš—åˆ) Â· 60ê°‘ì ì¼ì£¼ë¡ </span><br><span style="color:#888;">12ìš´ì„±(åäºŒé‹æ˜Ÿ) Â· ê³µë§(ç©ºäº¡) Â· ì‹ ê°•ì‹ ì•½(èº«å¼·èº«å¼±) ì •ë°€íŒì •</span><br><span style="color:#777;">ìœ¡ì¹œ(å…­è¦ª) ë°°ì¹˜ Â· ë°°ìš°ìì„±(é…å¶è€…æ˜Ÿ) Â· ì‹ ì‚´(ç¥ç…) ì²´ê³„</span><br><span style="color:#6a6;">60ê°‘ì ìºë¦­í„° ì•„í‚¤íƒ€ì… Â· AI ì‹¬ì¸µ ë¶„ì„ ê°€ì´ë“œ</span><br><span style="color:#59a;">íŠ¹ìˆ˜ê²©êµ­(å¾æ ¼/ç—…è—¥) Â· ìœ„í—˜ê²½ê³  ì‹œìŠ¤í…œ</span></p></div><p style="margin-top:12px;font-size:13px;color:#888;">Â© 2026 ì‚¬ì£¼ë¡œë˜ Pro Â· å‘½ç†ç¡ç©¶æ‰€</p><p style="color:#D4AF37;font-size:13px;font-weight:600;margin-top:8px;">ğŸ“œ íŠ¹í—ˆ ì¶œì›: 10-2026-0010452</p><p style="font-size:11px;color:#777;margin-top:3px;">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 487-20-02668</p></footer><footer id="footer-match" class="tab-footer"><div style="border-top:1px solid rgba(233,30,99,0.2);padding-top:25px;margin-bottom:20px;"><p style="color:#e91e63;font-size:16px;margin-bottom:15px;font-weight:600;">ğŸ’• ì²œë…„ ì¸ì—°í•™(åƒå¹´ å§»ç·£å­¸)</p><p style="font-size:14px;line-height:2.2;color:#ccc;"><strong style="color:#e91e63;">ì²œê°„í•©(å¤©å¹²åˆ)</strong> Â· <strong style="color:#e91e63;">ì§€ì§€ìœ¡í•©(åœ°æ”¯å…­åˆ)</strong> Â· <strong style="color:#e91e63;">ì‚¼í•©ë°©í•©(ä¸‰åˆæ–¹åˆ)</strong><br><span style="color:#bbb;">ë‚©ìŒê¶í•©(ç´éŸ³å®®åˆ) Â· ìš©ì‹ ê¶í•©(ç”¨ç¥å®®åˆ) Â· ì•”í•©(æš—åˆ)</span><br><span style="color:#aaa;">ì›ì§„ê·€ë¬¸(æ€¨å—”é¬¼é–€) ì•…ì—° ì²´í¬ Â· ë°°ìš°ìì„±(é…å¶è€…æ˜Ÿ) êµì°¨ë¶„ì„</span><br><span style="color:#999;">12ìš´ì„±(åäºŒé‹æ˜Ÿ) ì—ë„ˆì§€ ë¹„êµ Â· ì‹ ê°•ì‹ ì•½(èº«å¼·èº«å¼±) ë°¸ëŸ°ìŠ¤</span><br><span style="color:#888;">ğŸ“œ íŠ¹í—ˆì¶œì› ì¡°í›„(èª¿å€™) í•œë‚œì¡°ìŠµ ì•Œê³ ë¦¬ì¦˜ Â· ê¸°í›„ ë¸Œë¦¿ì§€ ë³´ì™„</span><br><span style="color:#777;">ğŸ’¼ ë¹„ì¦ˆë‹ˆìŠ¤/ì—°ì•  ëª¨ë“œ ì°¨ë³„í™” Â· ìœ¡ì¹œ(å…­è¦ª) ìš´ëª…ì  ì¸ì—°</span><br><span style="color:#6a6;">ê·€ì¸(è²´äºº)/ê¸°ì¸(å¿Œäºº) íŒë³„ Â· í–¥í›„ 5ë…„ ìœ„í—˜ì‹œê¸° ì˜ˆì¸¡</span><br><span style="color:#59a;">60ê°‘ì ìºë¦­í„° ì•„í‚¤íƒ€ì… Â· AI ì‹¬ì¸µ ë¶„ì„ ê°€ì´ë“œ</span><br><br>ë™ì–‘ ì „í†µ ê¶í•©ë²•ì˜ <strong style="color:#e91e63;">18ëŒ€ í•µì‹¬ ì›ë¦¬(åå…«å¤§ æ ¸å¿ƒ åŸç†)</strong>ë¥¼ ì§‘ëŒ€ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
        </p></div><p style="font-size:13px;color:#aaa;">ğŸ”’ ê´‘ê³  ì—†ëŠ” ì²­ì • ê³µê°„(æ·¸æ·¨ ç©ºé–“)</p><p style="margin-top:12px;font-size:13px;color:#888;">Â© 2026 ì‚¬ì£¼ë¡œë˜ Pro Â· å§»ç·£ç¡ç©¶</p><p style="color:#D4AF37;font-size:13px;font-weight:600;margin-top:8px;">ğŸ“œ íŠ¹í—ˆ ì¶œì›: 10-2026-0010452</p><p style="font-size:11px;color:#777;margin-top:3px;">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 487-20-02668</p></footer><script>const PAST_WINNERS = [
[1,4,16,23,31,41],[10,23,29,33,37,40],[9,13,21,25,32,42],[11,16,19,21,27,31],[14,27,30,31,40,42],[16,24,29,40,41,42],
[14,15,26,27,40,42],[2,9,16,25,26,40],[8,19,25,34,37,39],[2,4,16,17,36,39],[9,25,30,33,41,44],[1,7,36,37,41,42],
[2,11,21,25,39,45],[22,34,36,37,42,44],[2,6,12,19,33,44],[1,4,9,23,34,45],[6,13,27,35,40,41],[4,14,22,38,39,45],
[6,8,14,21,23,38],[3,5,15,16,44,45],[8,13,14,26,28,43],[5,17,18,23,30,33],[4,5,7,9,24,42],[1,6,11,20,31,35],
[7,16,34,37,38,43],[4,9,12,14,24,44],[2,10,12,13,23,29],[2,14,16,18,28,43],[3,6,7,8,27,35],[1,5,23,24,35,37],
[9,14,20,23,33,34],[11,16,21,22,28,42],[8,18,21,27,29,45],[1,4,7,23,28,43],[3,13,24,29,34,40],[5,6,17,22,28,31],
[3,4,14,15,22,26],[1,4,15,25,29,30],[4,6,14,16,24,40],[5,6,11,22,25,38],[12,19,24,26,38,43],[5,13,26,28,41,42],
[4,16,17,21,31,45],[2,5,6,30,31,36],[1,9,16,19,21,25],[7,8,27,30,36,43],[4,10,14,27,29,41],[10,11,25,27,28,31],
[4,9,12,30,39,43],[4,13,22,24,40,42],[3,12,17,34,36,40],[1,13,22,25,34,41],[3,6,10,13,27,42],[3,4,18,30,32,35],
[6,9,11,17,18,25],[8,10,14,28,38,40],[2,8,16,21,27,44],[4,21,23,24,39,41],[2,3,5,8,18,29],[6,12,18,32,40,43]
];const PAST_SET = new Set(PAST_WINNERS.map(arr => [...arr].sort((a,b)=>a-b).join(',')));const STEM = [
{c:'ç”²',k:'ê°‘',e:'wood',y:true},{c:'ä¹™',k:'ì„',e:'wood',y:false},
{c:'ä¸™',k:'ë³‘',e:'fire',y:true},{c:'ä¸',k:'ì •',e:'fire',y:false},
{c:'æˆŠ',k:'ë¬´',e:'earth',y:true},{c:'å·±',k:'ê¸°',e:'earth',y:false},
{c:'åºš',k:'ê²½',e:'metal',y:true},{c:'è¾›',k:'ì‹ ',e:'metal',y:false},
{c:'å£¬',k:'ì„',e:'water',y:true},{c:'ç™¸',k:'ê³„',e:'water',y:false}
];const BRANCH = [
{c:'å­',k:'ì',e:'water',a:'ì¥',m:'rat'},{c:'ä¸‘',k:'ì¶•',e:'earth',a:'ì†Œ',m:'ox'},
{c:'å¯…',k:'ì¸',e:'wood',a:'í˜¸ë‘ì´',m:'tiger'},{c:'å¯',k:'ë¬˜',e:'wood',a:'í† ë¼',m:'rabbit'},
{c:'è¾°',k:'ì§„',e:'earth',a:'ìš©',m:'dragon'},{c:'å·³',k:'ì‚¬',e:'fire',a:'ë±€',m:'snake'},
{c:'åˆ',k:'ì˜¤',e:'fire',a:'ë§',m:'horse'},{c:'æœª',k:'ë¯¸',e:'earth',a:'ì–‘',m:'goat'},
{c:'ç”³',k:'ì‹ ',e:'metal',a:'ì›ìˆ­ì´',m:'monkey'},{c:'é…‰',k:'ìœ ',e:'metal',a:'ë‹­',m:'rooster'},
{c:'æˆŒ',k:'ìˆ ',e:'earth',a:'ê°œ',m:'dog'},{c:'äº¥',k:'í•´',e:'water',a:'ë¼ì§€',m:'pig'}
];const JIJANGGAN = {0: [
{stem: 9, type: 'jung', days: 30, name: 'ç™¸(ì •ê¸°)'}
],
1: [
{stem: 9, type: 'yeo', days: 9, name: 'ç™¸(ì—¬ê¸°)'},
{stem: 7, type: 'jung', days: 3, name: 'è¾›(ì¤‘ê¸°)'},
{stem: 5, type: 'jung', days: 18, name: 'å·±(ì •ê¸°)'}
],
2: [
{stem: 4, type: 'yeo', days: 7, name: 'æˆŠ(ì—¬ê¸°)'},
{stem: 2, type: 'jung', days: 7, name: 'ä¸™(ì¤‘ê¸°)'},
{stem: 0, type: 'jung', days: 16, name: 'ç”²(ì •ê¸°)'}
],
3: [
{stem: 1, type: 'jung', days: 30, name: 'ä¹™(ì •ê¸°)'}
],
4: [
{stem: 1, type: 'yeo', days: 9, name: 'ä¹™(ì—¬ê¸°)'},
{stem: 9, type: 'jung', days: 3, name: 'ç™¸(ì¤‘ê¸°)'},
{stem: 4, type: 'jung', days: 18, name: 'æˆŠ(ì •ê¸°)'}
],
5: [
{stem: 4, type: 'yeo', days: 5, name: 'æˆŠ(ì—¬ê¸°)'},
{stem: 6, type: 'jung', days: 9, name: 'åºš(ì¤‘ê¸°)'},
{stem: 2, type: 'jung', days: 16, name: 'ä¸™(ì •ê¸°)'}
],
6: [
{stem: 5, type: 'yeo', days: 9, name: 'å·±(ì—¬ê¸°)'},
{stem: 3, type: 'jung', days: 21, name: 'ä¸(ì •ê¸°)'}
],
7: [
{stem: 3, type: 'yeo', days: 9, name: 'ä¸(ì—¬ê¸°)'},
{stem: 1, type: 'jung', days: 3, name: 'ä¹™(ì¤‘ê¸°)'},
{stem: 5, type: 'jung', days: 18, name: 'å·±(ì •ê¸°)'}
],
8: [
{stem: 4, type: 'yeo', days: 7, name: 'æˆŠ(ì—¬ê¸°)'},
{stem: 8, type: 'jung', days: 7, name: 'å£¬(ì¤‘ê¸°)'},
{stem: 6, type: 'jung', days: 16, name: 'åºš(ì •ê¸°)'}
],
9: [
{stem: 7, type: 'jung', days: 30, name: 'è¾›(ì •ê¸°)'}
],
10: [
{stem: 7, type: 'yeo', days: 9, name: 'è¾›(ì—¬ê¸°)'},
{stem: 3, type: 'jung', days: 3, name: 'ä¸(ì¤‘ê¸°)'},
{stem: 4, type: 'jung', days: 18, name: 'æˆŠ(ì •ê¸°)'}
],
11: [
{stem: 0, type: 'yeo', days: 7, name: 'ç”²(ì—¬ê¸°)'},
{stem: 8, type: 'jung', days: 23, name: 'å£¬(ì •ê¸°)'}
]};const ELEMENT = {wood:{c:'æœ¨',k:'ëª©',n:'ë‚˜ë¬´',color:'#4CAF50',icon:'ğŸŒ³',nums:[3,8,13,18,23,28,33,38,43]},
fire:{c:'ç«',k:'í™”',n:'ë¶ˆ',color:'#F44336',icon:'ğŸ”¥',nums:[2,7,12,17,22,27,32,37,42]},
earth:{c:'åœŸ',k:'í† ',n:'í™',color:'#FF9800',icon:'ğŸŒ',nums:[5,10,15,20,25,30,35,40,45]},
metal:{c:'é‡‘',k:'ê¸ˆ',n:'ì‡ ',color:'#9E9E9E',icon:'âš™ï¸',nums:[4,9,14,19,24,29,34,39,44]},
water:{c:'æ°´',k:'ìˆ˜',n:'ë¬¼',color:'#2196F3',icon:'ğŸ’§',nums:[1,6,11,16,21,26,31,36,41]}};const EL_ORDER = ['wood','fire','earth','metal','water'];const DIRECTIONAL_HARMONY/*æ–¹åˆ*/ = [
{branches: [2,3,4], element: 'wood', name: 'ì¸ë¬˜ì§„ ë°©í•©', dir: 'ë™ë°©ëª©êµ­(æ±æ–¹æœ¨å±€)'},
{branches: [5,6,7], element: 'fire', name: 'ì‚¬ì˜¤ë¯¸ ë°©í•©', dir: 'ë‚¨ë°©í™”êµ­(å—æ–¹ç«å±€)'},
{branches: [8,9,10], element: 'metal', name: 'ì‹ ìœ ìˆ  ë°©í•©', dir: 'ì„œë°©ê¸ˆêµ­(è¥¿æ–¹é‡‘å±€)'},
{branches: [11,0,1], element: 'water', name: 'í•´ìì¶• ë°©í•©', dir: 'ë¶ë°©ìˆ˜êµ­(åŒ—æ–¹æ°´å±€)'}
];
// ===== ê¶í•© ë¶„ì„ìš© í…Œì´ë¸” (K-MUDANG v4.21.0 í†µí•©) =====
const MATCH_SIX_HARMONY/*å…­åˆ*/ = [[0,1],[2,11],[3,10],[4,9],[5,8],[6,7]];
const MATCH_TRIPLE_HARMONY/*ä¸‰åˆ*/ = {wood:[11,3,7],fire:[2,6,10],metal:[5,9,1],water:[8,0,4]};
const MATCH_RESENTMENT/*æ€¨å—”*/ = [[0,7],[2,9],[1,6],[4,11],[5,10],[3,8]];
const MATCH_STEM_COMBINE/*å¤©å¹²åˆ*/ = [[0,5],[1,6],[2,7],[3,8],[4,9]];const HIDDEN_HARMONY/*æš—åˆ*/ = [
{a: 2, b: 1, name: 'ì¸ì¶•ì•”í•©', desc: 'å¯…ì˜ ë³‘(ä¸™)ê³¼ ä¸‘ì˜ ì‹ (è¾›)ì´ ì•”í•© (ä¸™è¾›åˆ)'},
{a: 3, b: 8, name: 'ë¬˜ì‹ ì•”í•©', desc: 'å¯ì˜ ì„(ä¹™)ê³¼ ç”³ì˜ ê²½(åºš)ì´ ì•”í•© (ä¹™åºšåˆ)'},
{a: 6, b: 11, name: 'ì˜¤í•´ì•”í•©', desc: 'åˆì˜ ì •(ä¸)ê³¼ äº¥ì˜ ì„(å£¬)ì´ ì•”í•© (ä¸å£¬åˆ)'}
];const SOUND_ELEMENT/*ç´éŸ³*/ = [
{name: 'í•´ì¤‘ê¸ˆ(æµ·ä¸­é‡‘)', element: 'metal', desc: 'ë°”ë‹¤ ì†ì˜ ê¸ˆ. ê¹Šì´ ìˆ¨ê²¨ì§„ ë³´ë¬¼.'},
{name: 'ë…¸ì¤‘í™”(çˆä¸­ç«)', element: 'fire', desc: 'í™”ë¡œ ì†ì˜ ë¶ˆ. ì œë ¨í•˜ëŠ” ì—´ì •.'},
{name: 'ëŒ€ë¦¼ëª©(å¤§æ—æœ¨)', element: 'wood', desc: 'í° ìˆ²ì˜ ë‚˜ë¬´. ìš°ëš ì†Ÿì€ ê¸°ìƒ.'},
{name: 'ë…¸ë°©í† (è·¯å‚åœŸ)', element: 'earth', desc: 'ê¸¸ê°€ì˜ í™. ì–´ë””ì„œë‚˜ ì ì‘í•˜ëŠ” ìœ ì—°í•¨.'},
{name: 'ê²€ë´‰ê¸ˆ(åŠé‹’é‡‘)', element: 'metal', desc: 'ì¹¼ë‚ ì˜ ê¸ˆ. ë‚ ì¹´ë¡œìš´ ê²°ë‹¨ë ¥.'},
{name: 'ì‚°ë‘í™”(å±±é ­ç«)', element: 'fire', desc: 'ì‚° ì •ìƒì˜ ë¶ˆ. ë†’ì€ ì´ìƒê³¼ ì—´ë§.'},
{name: 'ê°„í•˜ìˆ˜(æ¾—ä¸‹æ°´)', element: 'water', desc: 'ì‹œëƒ‡ë¬¼. ë§‘ê³  ìˆœìˆ˜í•œ ì§€í˜œ.'},
{name: 'ì„±ë‘í† (åŸé ­åœŸ)', element: 'earth', desc: 'ì„±ë²½ì˜ í™. íŠ¼íŠ¼í•˜ê³  ì•ˆì •ì .'},
{name: 'ë°±ëê¸ˆ(ç™½è Ÿé‡‘)', element: 'metal', desc: 'ë°€ëì˜ ê¸ˆ. ì„¬ì„¸í•˜ê³  ì„¸ë ¨ëœ.'},
{name: 'ì–‘ë¥˜ëª©(æ¥ŠæŸ³æœ¨)', element: 'wood', desc: 'ë²„ë“œë‚˜ë¬´. ìœ ì—°í•˜ê³  ì•„ë¦„ë‹¤ìš´.'},
{name: 'ì²œì¤‘ìˆ˜(æ³‰ä¸­æ°´)', element: 'water', desc: 'ìƒ˜ ì†ì˜ ë¬¼. ëŠì„ì—†ì´ ì†ŸëŠ” ìƒëª…ë ¥.'},
{name: 'ì˜¥ìƒí† (å±‹ä¸ŠåœŸ)', element: 'earth', desc: 'ì§€ë¶•ì˜ í™. ë³´í˜¸í•˜ê³  ê°ì‹¸ëŠ”.'},
{name: 'ë²½ë ¥í™”(éœ¹é‚ç«)', element: 'fire', desc: 'ë²ˆê°œë¶ˆ. ê°•ë ¬í•˜ê³  í­ë°œì ì¸.'},
{name: 'ì†¡ë°±ëª©(æ¾æ ¢æœ¨)', element: 'wood', desc: 'ì†Œë‚˜ë¬´. ì‚¬ì‹œì‚¬ì²  í‘¸ë¥¸ ì ˆê°œ.'},
{name: 'ì¥ë¥˜ìˆ˜(é•·æµæ°´)', element: 'water', desc: 'ê¸´ ê°•ë¬¼. ìœ ìœ íˆ íë¥´ëŠ”.'},
{name: 'ì‚¬ì¤‘ê¸ˆ(ç ‚ä¸­é‡‘)', element: 'metal', desc: 'ëª¨ë˜ ì† ê¸ˆ. ìˆ¨ê²¨ì§„ ì¬ëŠ¥.'},
{name: 'ì‚°í•˜í™”(å±±ä¸‹ç«)', element: 'fire', desc: 'ì‚° ì•„ë˜ ë¶ˆ. ì ì¬ëœ ì—ë„ˆì§€.'},
{name: 'í‰ì§€ëª©(å¹³åœ°æœ¨)', element: 'wood', desc: 'í‰ì§€ì˜ ë‚˜ë¬´. ë„“ê²Œ í¼ì§€ëŠ”.'},
{name: 'ë²½ìƒí† (å£ä¸ŠåœŸ)', element: 'earth', desc: 'ë²½ì˜ í™. ì˜ˆìˆ ì  ê°ê°.'},
{name: 'ê¸ˆë°•ê¸ˆ(é‡‘ç®”é‡‘)', element: 'metal', desc: 'ê¸ˆë°•. í™”ë ¤í•˜ì§€ë§Œ ì–‡ì€.'},
{name: 'ë³µë“±í™”(è¦†ç‡ˆç«)', element: 'fire', desc: 'ë“±ë¶ˆ. ì–´ë‘ ì„ ë°íˆëŠ” ì§€í˜œ.'},
{name: 'ì²œí•˜ìˆ˜(å¤©æ²³æ°´)', element: 'water', desc: 'ì€í•˜ìˆ˜. ë“œë†’ì€ ì´ìƒ.'},
{name: 'ëŒ€ì—­í† (å¤§é©›åœŸ)', element: 'earth', desc: 'í° ì—­ì˜ í™. ì†Œí†µê³¼ êµë¥˜.'},
{name: 'ì°¨ì²œê¸ˆ(é‡µé‡§é‡‘)', element: 'metal', desc: 'ë¹„ë…€ê¸ˆ. ê³ ê·€í•˜ê³  ìš°ì•„í•œ.'},
{name: 'ìƒìëª©(æ¡‘æŸ˜æœ¨)', element: 'wood', desc: 'ë½•ë‚˜ë¬´. ì‹¤ìš©ì ì´ê³  ìœ ìµí•œ.'},
{name: 'ëŒ€ê³„ìˆ˜(å¤§æºªæ°´)', element: 'water', desc: 'í° ê³„ê³¡ë¬¼. ê¹Šê³  ë„“ì€.'},
{name: 'ì‚¬ì¤‘í† (ç ‚ä¸­åœŸ)', element: 'earth', desc: 'ëª¨ë˜ ì† í™. ê²¬ê³ í•˜ê²Œ ë‹¤ì§€ëŠ”.'},
{name: 'ì²œìƒí™”(å¤©ä¸Šç«)', element: 'fire', desc: 'í•˜ëŠ˜ì˜ ë¶ˆ(íƒœì–‘). ë¹›ë‚˜ëŠ” ì¡´ì¬.'},
{name: 'ì„ë¥˜ëª©(çŸ³æ¦´æœ¨)', element: 'wood', desc: 'ì„ë¥˜ë‚˜ë¬´. í’ì„±í•œ ê²°ì‹¤.'},
{name: 'ëŒ€í•´ìˆ˜(å¤§æµ·æ°´)', element: 'water', desc: 'í° ë°”ë‹¤. ëì—†ëŠ” í¬ìš©ë ¥.'}
];const SEASON = {0:'winter',1:'winter',2:'spring',3:'spring',4:'spring',5:'summer',6:'summer',7:'summer',8:'autumn',9:'autumn',10:'autumn',11:'winter'};const TEN_GODS = {peer:{k:'ë¹„ê²¬',c:'æ¯”è‚©',d:'í˜•ì œ, ì¹œêµ¬, ê²½ìŸì. ìì‹ ê°ê³¼ ë…ë¦½ì‹¬ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.'},
robWealth:{k:'ê²ì¬',c:'åŠ«è²¡',d:'ê²½ìŸ, ì†ì¬. ìŠ¹ë¶€ìš•ì´ ê°•í•˜ì§€ë§Œ ëˆ ê´€ë¦¬ ì£¼ì˜.'},
eatingGod:{k:'ì‹ì‹ ',c:'é£Ÿç¥',d:'ì¬ëŠ¥, ë¨¹ê±°ë¦¬. ì°½ì˜ë ¥ê³¼ í‘œí˜„ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.'},
hurtOfficer:{k:'ìƒê´€',c:'å‚·å®˜',d:'í‘œí˜„, ì°½ì‘. ì˜ˆìˆ ì  ì¬ëŠ¥ì´ ìˆìœ¼ë‚˜ ë§ì¡°ì‹¬ í•„ìš”.'},
indirectWealth:{k:'í¸ì¬',c:'åè²¡',d:'íš¡ì¬, íˆ¬ì. ì‚¬ì—… ìˆ˜ì™„ì´ ì¢‹ì§€ë§Œ ë°”ëŒê¸° ì£¼ì˜.'},
directWealth:{k:'ì •ì¬',c:'æ­£è²¡',d:'ì •ë‹¹í•œ ì¬ë¬¼. ì„±ì‹¤í•˜ê³  ì €ì¶•ì„ ì˜í•©ë‹ˆë‹¤.'},
indirectOfficer:{k:'í¸ê´€',c:'åå®˜',d:'ê¶Œìœ„, ì••ë°•. ì¶”ì§„ë ¥ì´ ìˆìœ¼ë‚˜ ìŠ¤íŠ¸ë ˆìŠ¤ ì£¼ì˜.'},
directOfficer:{k:'ì •ê´€',c:'æ­£å®˜',d:'ëª…ì˜ˆ, ìŠ¹ì§„. í’ˆìœ„ìˆê³  ì‚¬íšŒì  ì¸ì •ì„ ë°›ìŠµë‹ˆë‹¤.'},
indirectSeal:{k:'í¸ì¸',c:'åå°',d:'í•™ë¬¸, ì˜ê°. ë…ì°½ì ì´ì§€ë§Œ ìš°ìš¸í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
directSeal:{k:'ì •ì¸',c:'æ­£å°',d:'í•™ì—…, ë¬¸ì„œ. ì‹œí—˜ìš´ì´ ì¢‹ê³  ì–´ë¥¸ì˜ ë„ì›€ì„ ë°›ìŠµë‹ˆë‹¤.'}};const TWELVE_STATES = [
{k:'ì¥ìƒ',l:12,d:'ìƒˆë¡œ íƒœì–´ë‚˜ëŠ” ê¸°ìš´. ì‹œì‘ê³¼ í¬ë§ì´ ìˆìŠµë‹ˆë‹¤.'},
{k:'ëª©ìš•',l:8,d:'ì”»ê¹€ì„ ë°›ëŠ” ì‹œê¸°. ë³€í™”ì™€ ë¶ˆì•ˆì •ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
{k:'ê´€ëŒ€',l:10,d:'ì„±ì¥í•˜ëŠ” ê¸°ìš´. ë°œì „ê³¼ ê¸°íšŒê°€ ì˜µë‹ˆë‹¤.'},
{k:'ê±´ë¡',l:11,d:'ì™•ì„±í•œ í™œë™ê¸°. ìµœê³ ì˜ ì—ë„ˆì§€ì™€ ì„±ì·¨ê°€ ìˆìŠµë‹ˆë‹¤.'},
{k:'ì œì™•',l:12,d:'ì •ì ì— ì˜¤ë¥¸ ìƒíƒœ. ê¶Œë ¥ê³¼ ì§€ìœ„ê°€ ë†’ìŠµë‹ˆë‹¤.'},
{k:'ì‡ ',l:7,d:'ë‚´ë ¤ê°€ëŠ” ê¸°ìš´. ì•ˆì •ì„ ì·¨í•˜ë©° ì§€í˜œë¥¼ ìŒ“ìŠµë‹ˆë‹¤.'},
{k:'ë³‘',l:4,d:'ê¸°ìš´ì´ ì•½í•´ì§. ê±´ê°•ê³¼ íœ´ì‹ì— ì‹ ê²½ ì“°ì„¸ìš”.'},
{k:'ì‚¬',l:3,d:'ëë‚˜ê°€ëŠ” ì‹œê¸°. ë§ˆë¬´ë¦¬ì™€ ì •ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.'},
{k:'ë¬˜',l:2,d:'ìˆ¨ê²¨ì§„ ìƒíƒœ. ì¡°ìš©íˆ ë‚´ë©´ì„ ê°€ê¾¸ì„¸ìš”.'},
{k:'ì ˆ',l:1,d:'ì™„ì „íˆ ë¹„ì›Œì§„ ìƒíƒœ. ìƒˆë¡œìš´ ì‹œì‘ì„ ì¤€ë¹„í•©ë‹ˆë‹¤.'},
{k:'íƒœ',l:5,d:'ì‰íƒœë˜ëŠ” ê¸°ìš´. ìƒˆ ìƒëª…ê³¼ ê°€ëŠ¥ì„±ì´ ì‹¹í‹‰ë‹ˆë‹¤.'},
{k:'ì–‘',l:6,d:'ê¸°ë¥´ëŠ” ì‹œê¸°. ì²œì²œíˆ ì„±ì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.'}
];const SOLAR_TERMS = {1940:[[2,5,1,8],[3,6,18,51],[4,5,23,17],[5,6,11,19],[6,6,15,30],[7,7,2,4],[8,8,11,44],[9,8,14,18],[10,9,5,53],[11,8,8,30],[12,7,1,15],[1,6,7,8]],
1941:[[2,4,6,50],[3,6,0,34],[4,5,5,3],[5,6,17,9],[6,6,21,22],[7,8,7,59],[8,8,17,40],[9,8,20,15],[10,9,11,51],[11,8,14,27],[12,7,7,12],[1,6,12,58]],
1942:[[2,4,12,34],[3,6,6,17],[4,5,10,49],[5,5,22,57],[6,6,3,11],[7,7,13,49],[8,7,23,31],[9,8,2,7],[10,8,17,43],[11,7,20,20],[12,7,13,5],[1,6,18,49]],
1943:[[2,4,18,21],[3,6,12,3],[4,5,16,36],[5,6,4,44],[6,6,8,59],[7,7,19,38],[8,8,5,21],[9,8,7,58],[10,8,23,35],[11,8,2,12],[12,7,18,57],[1,6,0,40]],
1944:[[2,5,0,23],[3,5,18,6],[4,4,22,42],[5,5,10,52],[6,5,15,9],[7,7,1,51],[8,7,11,36],[9,7,14,14],[10,8,5,51],[11,7,8,28],[12,7,1,12],[1,6,6,31]],
1945:[[2,4,6,19],[3,6,0,5],[4,5,4,41],[5,5,16,52],[6,5,21,9],[7,7,7,52],[8,7,17,38],[9,7,20,17],[10,8,11,54],[11,7,14,31],[12,7,7,14],[1,6,12,24]],
1946:[[2,4,12,3],[3,6,5,46],[4,5,10,21],[5,5,22,34],[6,6,2,53],[7,7,13,37],[8,7,23,25],[9,8,2,6],[10,8,17,44],[11,7,20,21],[12,7,13,5],[1,6,18,15]],
1947:[[2,4,17,51],[3,6,11,32],[4,5,16,6],[5,6,4,23],[6,6,8,44],[7,7,19,26],[8,8,5,16],[9,8,7,58],[10,8,23,37],[11,8,2,14],[12,7,18,58],[1,6,0,7]],
1948:[[2,4,23,42],[3,5,17,22],[4,4,21,57],[5,5,10,9],[6,5,14,30],[7,7,1,16],[8,7,11,7],[9,7,13,51],[10,8,5,29],[11,7,8,7],[12,7,0,50],[1,6,5,59]],
1949:[[2,4,5,22],[3,5,23,2],[4,5,3,35],[5,5,15,49],[6,5,20,13],[7,7,6,59],[8,7,16,53],[9,7,19,38],[10,8,11,18],[11,7,13,56],[12,7,6,39],[1,6,11,49]],
1950:[[2,4,11,3],[3,6,4,42],[4,5,9,14],[5,5,21,37],[6,6,2,2],[7,7,12,46],[8,7,22,43],[9,8,1,29],[10,8,17,9],[11,7,19,47],[12,7,12,30],[1,6,17,38]],
1951:[[2,4,16,52],[3,6,10,26],[4,5,14,59],[5,6,3,14],[6,6,7,42],[7,7,18,29],[8,8,4,26],[9,8,7,14],[10,8,22,55],[11,8,1,33],[12,7,18,16],[1,6,23,29]],
1952:[[2,4,22,53],[3,5,16,22],[4,4,20,56],[5,5,9,9],[6,5,13,35],[7,7,0,22],[8,7,10,19],[9,7,13,8],[10,8,4,48],[11,7,7,26],[12,7,0,9],[1,6,5,19]],
1953:[[2,4,4,45],[3,5,22,14],[4,5,2,48],[5,5,15,0],[6,5,19,25],[7,7,6,10],[8,7,16,7],[9,7,18,58],[10,8,10,39],[11,7,13,18],[12,7,6,1],[1,6,11,12]],
1954:[[2,4,10,30],[3,6,3,55],[4,5,8,28],[5,5,20,42],[6,6,1,10],[7,7,11,55],[8,7,21,54],[9,8,0,47],[10,8,16,29],[11,7,19,8],[12,7,11,52],[1,6,17,4]],
1955:[[2,4,16,17],[3,6,9,41],[4,5,14,15],[5,6,2,30],[6,6,6,59],[7,7,17,43],[8,8,3,44],[9,8,6,38],[10,8,22,21],[11,8,1,0],[12,7,17,44],[1,6,22,57]],
1956:[[2,4,22,12],[3,5,15,38],[4,4,20,12],[5,5,8,26],[6,5,12,54],[7,7,23,40],[8,7,9,40],[9,7,12,34],[10,8,4,16],[11,7,6,56],[12,6,23,40],[1,6,4,52]],
1957:[[2,4,3,55],[3,5,21,22],[4,5,1,57],[5,5,14,12],[6,5,18,42],[7,7,5,28],[8,7,15,28],[9,7,18,24],[10,8,10,7],[11,7,12,48],[12,7,5,33],[1,6,10,45]],
1958:[[2,4,9,48],[3,6,3,8],[4,5,7,42],[5,5,19,57],[6,6,0,27],[7,7,11,14],[8,7,21,16],[9,8,0,14],[10,8,15,58],[11,7,18,39],[12,7,11,24],[1,6,16,38]],
1959:[[2,4,15,42],[3,6,8,55],[4,5,13,28],[5,6,1,43],[6,6,6,14],[7,7,17,0],[8,8,3,2],[9,8,6,3],[10,8,21,49],[11,8,0,31],[12,7,17,16],[1,6,22,31]],
1960:[[2,4,21,42],[3,5,14,56],[4,4,19,30],[5,5,7,45],[6,5,12,16],[7,6,23,2],[8,7,8,59],[9,7,11,55],[10,8,3,37],[11,7,6,18],[12,6,23,3],[1,6,4,17]],
1961:[[2,4,3,23],[3,5,20,32],[4,5,1,6],[5,5,13,22],[6,5,17,55],[7,7,4,42],[8,7,14,41],[9,7,17,40],[10,8,9,23],[11,7,12,5],[12,7,4,51],[1,6,10,5]],
1962:[[2,4,9,18],[3,6,2,29],[4,5,6,59],[5,5,19,14],[6,5,23,46],[7,7,10,33],[8,7,20,33],[9,7,23,34],[10,8,15,18],[11,7,17,59],[12,7,10,45],[1,6,15,58]],
1963:[[2,4,15,8],[3,6,8,15],[4,5,12,44],[5,6,1,0],[6,6,5,32],[7,7,16,19],[8,8,2,21],[9,8,5,24],[10,8,21,9],[11,7,23,51],[12,7,16,37],[1,6,21,50]],
1964:[[2,4,21,5],[3,5,14,14],[4,4,18,44],[5,5,6,58],[6,5,11,28],[7,6,22,14],[8,7,8,14],[9,7,11,17],[10,8,3,2],[11,7,5,45],[12,6,22,32],[1,6,3,46]],
1965:[[2,4,2,46],[3,5,19,54],[4,5,0,27],[5,5,12,44],[6,5,17,18],[7,7,4,6],[8,7,14,6],[9,7,17,10],[10,8,8,55],[11,7,11,38],[12,7,4,25],[1,6,9,40]],
1966:[[2,4,8,38],[3,6,1,47],[4,5,6,18],[5,5,18,33],[6,5,23,6],[7,7,9,53],[8,7,19,54],[9,7,23,0],[10,8,14,46],[11,7,17,29],[12,7,10,17],[1,6,15,32]],
1967:[[2,4,14,31],[3,6,7,38],[4,5,12,8],[5,6,0,22],[6,6,4,55],[7,7,15,42],[8,8,1,44],[9,8,4,51],[10,8,20,38],[11,7,23,22],[12,7,16,11],[1,6,21,26]],
1968:[[2,4,20,27],[3,5,13,35],[4,4,18,4],[5,5,6,16],[6,5,10,47],[7,6,21,33],[8,7,7,34],[9,7,10,41],[10,8,2,29],[11,7,5,14],[12,6,22,3],[1,6,3,19]],
1969:[[2,4,2,8],[3,5,19,17],[4,4,23,47],[5,5,12,2],[6,5,16,36],[7,7,3,24],[8,7,13,27],[9,7,16,35],[10,8,8,23],[11,7,11,8],[12,7,3,56],[1,6,9,11]],
1970:[[2,4,7,46],[3,6,0,55],[4,5,5,26],[5,5,17,45],[6,5,22,21],[7,7,9,11],[8,7,19,16],[9,7,22,27],[10,8,14,16],[11,7,17,1],[12,7,9,50],[1,6,15,5]],
1971:[[2,4,13,26],[3,6,6,36],[4,5,11,9],[5,5,23,29],[6,6,4,6],[7,7,14,56],[8,8,1,2],[9,8,4,15],[10,8,20,5],[11,7,22,51],[12,7,15,40],[1,6,20,56]],
1972:[[2,4,19,20],[3,5,12,29],[4,4,17,0],[5,5,5,13],[6,5,9,48],[7,6,20,37],[8,7,6,42],[9,7,10,0],[10,8,1,50],[11,7,4,38],[12,6,21,28],[1,6,2,45]],
1973:[[2,4,1,4],[3,5,18,13],[4,4,22,44],[5,5,11,0],[6,5,15,39],[7,7,2,30],[8,7,12,36],[9,7,15,52],[10,8,7,42],[11,7,10,28],[12,7,3,18],[1,6,8,35]],
1974:[[2,4,6,59],[3,6,0,7],[4,5,4,36],[5,5,16,52],[6,5,21,29],[7,7,8,19],[8,7,18,26],[9,7,21,45],[10,8,13,36],[11,7,16,23],[12,7,9,13],[1,6,14,29]],
1975:[[2,4,12,59],[3,6,6,3],[4,5,10,30],[5,5,22,44],[6,6,3,19],[7,7,14,8],[8,8,0,14],[9,8,3,35],[10,8,19,27],[11,7,22,15],[12,7,15,6],[1,6,20,24]],
1976:[[2,4,18,40],[3,5,11,48],[4,4,16,17],[5,5,4,30],[6,5,9,6],[7,6,19,56],[8,7,6,2],[9,7,9,24],[10,8,1,16],[11,7,4,5],[12,6,20,56],[1,6,2,14]],
1977:[[2,4,0,34],[3,5,17,41],[4,4,22,10],[5,5,10,24],[6,5,15,1],[7,7,1,51],[8,7,11,58],[9,7,15,20],[10,8,7,11],[11,7,10,0],[12,7,2,51],[1,6,8,9]],
1978:[[2,4,6,27],[3,5,23,34],[4,5,4,4],[5,5,16,19],[6,5,20,56],[7,7,7,46],[8,7,17,53],[9,7,21,16],[10,8,13,7],[11,7,15,56],[12,7,8,47],[1,6,14,5]],
1979:[[2,4,12,13],[3,6,5,21],[4,5,9,50],[5,5,22,6],[6,6,2,43],[7,7,13,33],[8,7,23,42],[9,8,3,7],[10,8,18,59],[11,7,21,49],[12,7,14,40],[1,6,19,59]],
1980:[[2,4,18,10],[3,5,11,18],[4,4,15,47],[5,5,3,59],[6,5,8,35],[7,6,19,24],[8,7,5,31],[9,7,8,55],[10,8,0,47],[11,7,3,38],[12,6,20,30],[1,6,1,50]],
1981:[[2,3,23,56],[3,5,17,3],[4,4,21,33],[5,5,9,48],[6,5,14,26],[7,7,1,16],[8,7,11,25],[9,7,14,50],[10,8,6,42],[11,7,9,32],[12,7,2,23],[1,6,7,43]],
1982:[[2,4,5,46],[3,5,22,55],[4,5,3,25],[5,5,15,41],[6,5,20,18],[7,7,7,8],[8,7,17,17],[9,7,20,42],[10,8,12,34],[11,7,15,25],[12,7,8,17],[1,6,13,37]],
1983:[[2,4,11,40],[3,6,4,48],[4,5,9,18],[5,5,21,32],[6,6,2,8],[7,7,12,58],[8,7,23,7],[9,8,2,33],[10,8,18,26],[11,7,21,18],[12,7,14,10],[1,6,19,30]],
1984:[[2,4,17,19],[3,5,10,27],[4,4,14,56],[5,5,3,10],[6,5,7,48],[7,6,18,39],[8,7,4,49],[9,7,8,17],[10,8,0,11],[11,7,3,4],[12,6,19,57],[1,6,1,18]],
1985:[[2,3,23,12],[3,5,16,21],[4,4,20,51],[5,5,9,5],[6,5,13,43],[7,7,0,34],[8,7,10,44],[9,7,14,12],[10,8,6,5],[11,7,8,58],[12,7,1,50],[1,6,7,12]],
1986:[[2,4,5,8],[3,5,22,17],[4,5,2,46],[5,5,14,59],[6,5,19,35],[7,7,6,24],[8,7,16,33],[9,7,20,2],[10,8,11,55],[11,7,14,48],[12,7,7,41],[1,6,13,1]],
1987:[[2,4,10,52],[3,6,4,1],[4,5,8,31],[5,5,20,47],[6,6,1,25],[7,7,12,15],[8,7,22,24],[9,8,1,52],[10,8,17,44],[11,7,20,37],[12,7,13,29],[1,6,18,49]],
1988:[[2,4,16,43],[3,5,9,51],[4,4,14,19],[5,5,2,32],[6,5,7,9],[7,6,17,59],[8,7,4,9],[9,7,7,38],[10,7,23,32],[11,7,2,26],[12,6,19,18],[1,6,0,40]],
1989:[[2,3,22,27],[3,5,15,36],[4,4,20,6],[5,5,8,21],[6,5,12,59],[7,6,23,50],[8,7,10,0],[9,7,13,30],[10,8,5,23],[11,7,8,17],[12,7,1,10],[1,6,6,32]],
1990:[[2,4,4,14],[3,5,21,23],[4,5,1,53],[5,5,14,8],[6,5,18,46],[7,7,5,36],[8,7,15,46],[9,7,19,17],[10,8,11,10],[11,7,14,5],[12,7,6,57],[1,6,12,19]],
1991:[[2,4,10,8],[3,6,3,17],[4,5,7,47],[5,5,20,1],[6,6,0,38],[7,7,11,27],[8,7,21,37],[9,8,1,7],[10,8,17,0],[11,7,19,54],[12,7,12,47],[1,6,18,9]],
1992:[[2,4,15,48],[3,5,9,0],[4,4,13,30],[5,5,1,46],[6,5,6,25],[7,6,17,16],[8,7,3,27],[9,7,6,58],[10,7,22,52],[11,7,1,47],[12,6,18,40],[1,5,23,59]],
1993:[[2,3,21,37],[3,5,14,47],[4,4,19,18],[5,5,7,34],[6,5,12,12],[7,6,23,4],[8,7,9,15],[9,7,12,48],[10,8,4,41],[11,7,7,37],[12,7,0,30],[1,6,5,52]],
1994:[[2,4,3,31],[3,5,20,41],[4,5,1,11],[5,5,13,26],[6,5,18,3],[7,7,4,53],[8,7,15,3],[9,7,18,36],[10,8,10,30],[11,7,13,25],[12,7,6,18],[1,6,11,40]],
1995:[[2,4,9,13],[3,6,2,24],[4,5,6,55],[5,5,19,13],[6,5,23,52],[7,7,10,43],[8,7,20,54],[9,8,0,27],[10,8,16,19],[11,7,19,14],[12,7,12,6],[1,6,17,27]],
1996:[[2,4,14,8],[3,5,8,20],[4,4,12,51],[5,5,1,7],[6,5,5,47],[7,6,16,38],[8,7,2,49],[9,7,6,23],[10,7,22,17],[11,7,1,13],[12,6,18,6],[1,5,23,26]],
1997:[[2,4,2,4],[3,5,20,15],[4,5,0,47],[5,5,13,4],[6,5,17,43],[7,7,4,34],[8,7,14,45],[9,7,18,20],[10,8,10,14],[11,7,13,11],[12,7,6,4],[1,6,11,26]],
1998:[[2,4,7,57],[3,6,1,8],[4,5,5,40],[5,5,17,58],[6,5,22,37],[7,7,9,28],[8,7,19,40],[9,7,23,15],[10,8,15,9],[11,7,18,6],[12,7,10,58],[1,6,16,20]],
1999:[[2,4,13,57],[3,6,7,8],[4,5,11,39],[5,5,23,54],[6,6,4,31],[7,7,15,21],[8,8,1,32],[9,8,5,6],[10,8,20,59],[11,7,23,56],[12,7,16,48],[1,6,22,9]],
2000:[[2,4,19,40],[3,5,12,53],[4,4,17,25],[5,5,5,42],[6,5,10,22],[7,6,21,13],[8,7,7,25],[9,7,11,1],[10,8,2,55],[11,7,5,52],[12,6,22,44],[1,6,4,4]],
2001:[[2,4,1,29],[3,5,18,41],[4,4,23,14],[5,5,11,33],[6,5,16,13],[7,7,3,5],[8,7,13,18],[9,7,16,55],[10,8,8,48],[11,7,11,45],[12,7,4,37],[1,6,9,57]],
2002:[[2,4,7,24],[3,6,0,35],[4,5,5,6],[5,5,17,24],[6,5,22,3],[7,7,8,53],[8,7,19,7],[9,7,22,44],[10,8,14,37],[11,7,17,35],[12,7,10,27],[1,6,15,47]],
2003:[[2,4,13,5],[3,6,6,17],[4,5,10,50],[5,5,23,10],[6,6,3,50],[7,7,14,41],[8,8,0,55],[9,8,4,34],[10,8,20,27],[11,7,23,26],[12,7,16,18],[1,6,21,38]],
2004:[[2,4,18,56],[3,5,12,9],[4,4,16,43],[5,5,5,2],[6,5,9,43],[7,6,20,35],[8,7,6,49],[9,7,10,28],[10,8,2,22],[11,7,5,20],[12,6,22,11],[1,6,3,30]],
2005:[[2,4,0,43],[3,5,17,55],[4,4,22,29],[5,5,10,49],[6,5,15,32],[7,7,2,24],[8,7,12,40],[9,7,16,21],[10,8,8,14],[11,7,11,13],[12,7,4,4],[1,6,9,24]],
2006:[[2,4,6,27],[3,5,23,39],[4,5,4,15],[5,5,16,38],[6,5,21,21],[7,7,8,14],[8,7,18,32],[9,7,22,15],[10,8,14,8],[11,7,17,7],[12,7,9,58],[1,6,15,17]],
2007:[[2,4,12,18],[3,6,5,31],[4,5,10,6],[5,5,22,27],[6,6,3,10],[7,7,14,2],[8,8,0,21],[9,8,4,5],[10,8,19,58],[11,7,22,59],[12,7,15,50],[1,6,21,9]],
2008:[[2,4,18,0],[3,5,11,16],[4,4,15,53],[5,5,4,17],[6,5,9,0],[7,6,19,54],[8,7,6,13],[9,7,9,59],[10,8,1,52],[11,7,4,52],[12,6,21,42],[1,6,2,59]],
2009:[[2,3,23,50],[3,5,17,4],[4,4,21,43],[5,5,10,9],[6,5,14,54],[7,7,1,48],[8,7,12,8],[9,7,15,57],[10,8,7,50],[11,7,10,50],[12,7,3,40],[1,6,8,57]],
2010:[[2,4,5,42],[3,5,23,0],[4,5,3,41],[5,5,16,5],[6,5,20,51],[7,7,7,45],[8,7,17,59],[9,7,21,44],[10,8,13,36],[11,7,16,33],[12,7,9,22],[1,6,14,40]],
2011:[[2,4,11,33],[3,6,4,46],[4,5,9,23],[5,5,21,45],[6,6,2,33],[7,7,13,26],[8,7,23,47],[9,8,3,36],[10,8,19,29],[11,7,22,29],[12,7,15,18],[1,6,20,36]],
2012:[[2,4,17,22],[3,5,10,38],[4,4,15,18],[5,5,3,42],[6,5,8,30],[7,6,19,25],[8,7,5,46],[9,7,9,37],[10,8,1,30],[11,7,4,29],[12,6,21,17],[1,6,2,33]],
2013:[[2,3,23,13],[3,5,16,28],[4,4,21,10],[5,5,9,37],[6,5,14,27],[7,7,1,23],[8,7,11,45],[9,7,15,37],[10,8,7,30],[11,7,10,29],[12,7,3,17],[1,6,8,33]],
2014:[[2,4,5,3],[3,5,22,21],[4,5,2,59],[5,5,15,24],[6,5,20,14],[7,7,7,10],[8,7,17,32],[9,7,21,25],[10,8,13,18],[11,7,16,17],[12,7,9,5],[1,6,14,21]],
2015:[[2,4,10,58],[3,6,4,15],[4,5,8,55],[5,5,21,19],[6,6,2,9],[7,7,13,4],[8,7,23,26],[9,8,3,21],[10,8,19,13],[11,7,22,12],[12,7,15,0],[1,6,20,16]],
2016:[[2,4,16,46],[3,5,10,2],[4,4,14,42],[5,5,3,7],[6,5,7,57],[7,6,18,52],[8,7,5,15],[9,7,9,11],[10,8,1,4],[11,7,4,4],[12,6,20,51],[1,6,2,5]],
2017:[[2,3,22,34],[3,5,15,51],[4,4,20,32],[5,5,9,0],[6,5,13,50],[7,7,0,46],[8,7,11,9],[9,7,15,6],[10,8,6,58],[11,7,9,59],[12,7,2,46],[1,6,8,0]],
2018:[[2,4,4,28],[3,5,21,45],[4,5,2,26],[5,5,14,51],[6,5,19,42],[7,7,6,37],[8,7,16,59],[9,7,20,56],[10,8,12,49],[11,7,15,50],[12,7,8,38],[1,6,13,52]],
2019:[[2,4,10,14],[3,6,3,29],[4,5,8,9],[5,5,20,35],[6,6,1,26],[7,7,12,21],[8,7,22,45],[9,8,2,44],[10,8,18,37],[11,7,21,39],[12,7,14,26],[1,6,19,39]],
2020:[[2,4,16,3],[3,5,9,19],[4,4,13,59],[5,5,2,26],[6,5,7,18],[7,6,18,14],[8,7,4,37],[9,7,8,38],[10,8,0,31],[11,7,3,32],[12,6,20,19],[1,6,1,31]],
2021:[[2,3,21,58],[3,5,15,17],[4,4,19,59],[5,5,8,25],[6,5,13,14],[7,7,0,8],[8,7,10,30],[9,7,14,30],[10,8,6,23],[11,7,9,25],[12,7,2,13],[1,6,7,25]],
2022:[[2,4,3,50],[3,5,21,9],[4,5,1,50],[5,5,14,17],[6,5,19,6],[7,7,5,58],[8,7,16,20],[9,7,20,21],[10,8,12,15],[11,7,15,17],[12,7,8,5],[1,6,13,18]],
2023:[[2,4,9,42],[3,6,2,59],[4,5,7,38],[5,5,20,5],[6,6,0,55],[7,7,11,49],[8,7,22,11],[9,8,2,13],[10,8,18,6],[11,7,21,9],[12,7,13,57],[1,6,19,9]],
2024:[[2,4,15,27],[3,5,8,43],[4,4,13,23],[5,5,1,51],[6,5,6,42],[7,6,17,38],[8,7,4,1],[9,7,8,6],[10,7,23,59],[11,7,2,59],[12,6,19,46],[1,6,0,56]],
2025:[[2,3,21,10],[3,5,14,26],[4,4,19,6],[5,5,7,36],[6,5,12,28],[7,6,23,23],[8,7,9,46],[9,7,13,51],[10,8,5,44],[11,7,8,46],[12,7,1,33],[1,6,6,44]],
2026:[[2,4,5,2],[3,5,22,59],[4,5,3,40],[5,5,20,49],[6,6,0,48],[7,7,10,57],[8,7,20,43],[9,7,23,41],[10,8,15,29],[11,7,18,52],[12,7,11,53],[1,5,17,23]],
2027:[[2,4,8,46],[3,6,2,2],[4,5,6,42],[5,5,19,10],[6,6,0,0],[7,7,10,54],[8,7,21,18],[9,8,1,26],[10,8,17,19],[11,7,20,22],[12,7,13,10],[1,6,18,22]],
2028:[[2,4,14,31],[3,5,7,47],[4,4,12,27],[5,5,0,55],[6,5,5,46],[7,6,16,41],[8,7,3,5],[9,7,7,14],[10,7,23,8],[11,7,2,12],[12,6,19,0],[1,6,0,12]],
2029:[[2,3,20,20],[3,5,13,37],[4,4,18,17],[5,5,6,45],[6,5,11,36],[7,6,22,31],[8,7,8,56],[9,7,13,5],[10,8,4,58],[11,7,8,1],[12,7,0,48],[1,6,6,0]],
2030:[[2,4,2,8],[3,5,19,24],[4,5,0,3],[5,5,12,31],[6,5,17,21],[7,7,4,14],[8,7,14,38],[9,7,18,48],[10,8,10,42],[11,7,13,46],[12,7,6,35],[1,6,11,47]],
2031:[[2,4,7,58],[3,6,1,14],[4,5,5,52],[5,5,18,19],[6,5,23,9],[7,7,10,2],[8,7,20,26],[9,8,0,37],[10,8,16,31],[11,7,19,36],[12,7,12,25],[1,6,17,38]],
2032:[[2,4,13,48],[3,5,7,4],[4,4,11,42],[5,5,0,8],[6,5,4,58],[7,6,15,51],[8,7,2,15],[9,7,6,27],[10,7,22,21],[11,7,1,27],[12,6,18,16],[1,5,23,29]],
2033:[[2,3,19,33],[3,5,12,49],[4,4,17,26],[5,5,5,54],[6,5,10,45],[7,6,21,38],[8,7,8,3],[9,7,12,17],[10,8,4,11],[11,7,7,17],[12,7,0,6],[1,6,5,20]],
2034:[[2,4,1,27],[3,5,18,43],[4,4,23,21],[5,5,11,48],[6,5,16,37],[7,7,3,29],[8,7,13,53],[9,7,18,6],[10,8,10,0],[11,7,13,7],[12,7,5,57],[1,6,11,11]],
2035:[[2,4,7,15],[3,6,0,31],[4,5,5,9],[5,5,17,37],[6,5,22,27],[7,7,9,19],[8,7,19,44],[9,7,23,58],[10,8,15,53],[11,7,18,59],[12,7,11,49],[1,6,17,3]],
2036:[[2,4,13,2],[3,5,6,18],[4,4,10,56],[5,4,23,23],[6,5,4,13],[7,6,15,6],[8,7,1,31],[9,7,5,46],[10,7,21,41],[11,7,0,48],[12,6,17,38],[1,5,22,53]],
2037:[[2,3,18,52],[3,5,12,8],[4,4,16,45],[5,5,5,11],[6,5,10,1],[7,6,20,53],[8,7,7,18],[9,7,11,34],[10,8,3,29],[11,7,6,36],[12,6,23,26],[1,6,4,41]],
2038:[[2,4,0,40],[3,5,17,57],[4,4,22,34],[5,5,11,1],[6,5,15,50],[7,7,2,42],[8,7,13,7],[9,7,17,24],[10,8,9,18],[11,7,12,27],[12,7,5,17],[1,6,10,32]],
2039:[[2,4,6,32],[3,5,23,49],[4,5,4,27],[5,5,16,55],[6,5,21,45],[7,7,8,37],[8,7,18,59],[9,7,23,16],[10,8,15,10],[11,7,18,18],[12,7,11,9],[1,6,16,24]],
2040:[[2,4,12,18],[3,5,5,34],[4,4,10,12],[5,4,22,39],[6,5,3,29],[7,6,14,22],[8,7,0,48],[9,7,5,5],[10,7,21,0],[11,7,0,9],[12,6,17,0],[1,5,22,16]],
2041:[[2,3,18,4],[3,5,11,20],[4,4,15,58],[5,5,4,26],[6,5,9,17],[7,6,20,11],[8,7,6,37],[9,7,10,57],[10,8,2,51],[11,7,6,0],[12,6,22,51],[1,6,4,8]],
2042:[[2,3,23,52],[3,5,17,6],[4,4,21,43],[5,5,10,12],[6,5,15,2],[7,7,1,55],[8,7,12,22],[9,7,16,42],[10,8,8,37],[11,7,11,48],[12,7,4,39],[1,6,9,55]],
2043:[[2,4,5,41],[3,5,22,57],[4,5,3,34],[5,5,16,1],[6,5,20,51],[7,7,7,43],[8,7,18,9],[9,7,22,29],[10,8,14,24],[11,7,17,35],[12,7,10,27],[1,6,15,44]],
2044:[[2,4,11,27],[3,5,4,44],[4,4,9,21],[5,4,21,49],[6,5,2,39],[7,6,13,33],[8,6,23,59],[9,7,4,20],[10,7,20,15],[11,6,23,26],[12,6,16,17],[1,5,21,35]],
2045:[[2,3,17,17],[3,5,10,33],[4,4,15,10],[5,5,3,37],[6,5,8,27],[7,6,19,21],[8,7,5,48],[9,7,10,10],[10,8,2,5],[11,7,5,16],[12,6,22,7],[1,6,3,26]],
2046:[[2,3,23,7],[3,5,16,21],[4,4,20,58],[5,5,9,25],[6,5,14,15],[7,7,1,7],[8,7,11,35],[9,7,15,58],[10,8,7,53],[11,7,11,5],[12,7,3,56],[1,6,9,14]],
2047:[[2,4,4,53],[3,5,22,8],[4,5,2,44],[5,5,15,12],[6,5,20,1],[7,7,6,54],[8,7,17,21],[9,7,21,46],[10,8,13,41],[11,7,16,53],[12,7,9,44],[1,6,15,3]],
2048:[[2,4,10,37],[3,5,3,52],[4,4,8,29],[5,4,20,57],[6,5,1,47],[7,6,12,41],[8,6,23,8],[9,7,3,31],[10,7,19,26],[11,6,22,39],[12,6,15,30],[1,5,20,50]],
2049:[[2,3,16,27],[3,5,9,43],[4,4,14,20],[5,5,2,47],[6,5,7,36],[7,6,18,29],[8,7,4,55],[9,7,9,19],[10,8,1,14],[11,7,4,27],[12,6,21,19],[1,6,2,39]],
2050:[[2,4,0,32],[3,5,17,49],[4,4,22,26],[5,5,10,53],[6,5,15,42],[7,7,2,34],[8,7,12,58],[9,7,17,12],[10,8,9,5],[11,7,12,11],[12,7,5,1],[1,6,10,15]],
2051:[[2,4,4,3],[3,5,21,19],[4,5,1,56],[5,5,14,24],[6,5,19,14],[7,7,6,7],[8,7,16,35],[9,7,20,59],[10,8,12,54],[11,7,16,7],[12,7,8,58],[1,6,14,18]],
2052:[[2,4,9,48],[3,5,3,4],[4,4,7,42],[5,4,20,9],[6,5,1,0],[7,6,11,53],[8,6,22,21],[9,7,2,45],[10,7,18,41],[11,6,21,53],[12,6,14,44],[1,5,20,3]],
2053:[[2,3,15,38],[3,5,8,54],[4,4,13,31],[5,5,1,58],[6,5,6,47],[7,6,17,40],[8,7,4,8],[9,7,8,33],[10,8,0,29],[11,7,3,42],[12,6,20,34],[1,6,1,54]],
2054:[[2,3,21,28],[3,5,14,44],[4,4,19,21],[5,5,7,48],[6,5,12,37],[7,6,23,30],[8,7,9,58],[9,7,14,24],[10,8,6,19],[11,7,9,33],[12,7,2,25],[1,6,7,46]],
2055:[[2,4,3,15],[3,5,20,32],[4,5,1,8],[5,5,13,35],[6,5,18,23],[7,7,5,16],[8,7,15,44],[9,7,20,11],[10,8,12,6],[11,7,15,20],[12,7,8,13],[1,6,13,33]],
2056:[[2,4,8,58],[3,5,2,15],[4,4,6,52],[5,4,19,20],[6,5,0,10],[7,6,11,4],[8,6,21,33],[9,7,2,0],[10,7,17,55],[11,6,21,10],[12,6,14,1],[1,5,19,22]],
2057:[[2,3,14,48],[3,5,8,5],[4,4,12,42],[5,5,1,10],[6,5,5,59],[7,6,16,53],[8,7,3,21],[9,7,7,48],[10,7,23,44],[11,7,2,58],[12,6,19,50],[1,6,1,11]],
2058:[[2,3,20,38],[3,5,13,55],[4,4,18,32],[5,5,7,0],[6,5,11,49],[7,6,22,43],[8,7,9,12],[9,7,13,40],[10,8,5,35],[11,7,8,49],[12,7,1,41],[1,6,7,2]],
2059:[[2,4,2,26],[3,5,19,43],[4,5,0,21],[5,5,12,48],[6,5,17,37],[7,7,4,30],[8,7,14,59],[9,7,19,27],[10,8,11,23],[11,7,14,38],[12,7,7,30],[1,6,12,52]],
2060:[[2,4,8,10],[3,5,1,28],[4,4,6,6],[5,4,18,34],[6,4,23,24],[7,6,10,18],[8,6,20,48],[9,7,1,16],[10,7,17,12],[11,6,20,26],[12,6,13,17],[1,5,18,37]],
2061:[[2,3,14,0],[3,5,7,18],[4,4,11,55],[5,5,0,24],[6,5,5,14],[7,6,16,8],[8,7,2,38],[9,7,7,6],[10,7,23,2],[11,7,2,17],[12,6,19,10],[1,6,0,31]],
2062:[[2,3,19,50],[3,5,13,8],[4,4,17,46],[5,5,6,14],[6,5,11,4],[7,6,21,58],[8,7,8,28],[9,7,12,58],[10,8,4,53],[11,7,8,8],[12,7,1,1],[1,6,6,23]],
2063:[[2,4,1,38],[3,5,18,57],[4,4,23,34],[5,5,12,2],[6,5,16,51],[7,7,3,45],[8,7,14,15],[9,7,18,45],[10,8,10,41],[11,7,13,57],[12,7,6,49],[1,6,12,11]],
2064:[[2,4,7,22],[3,5,0,41],[4,4,5,19],[5,4,17,48],[6,4,22,38],[7,6,9,33],[8,6,20,4],[9,7,0,35],[10,7,16,31],[11,6,19,47],[12,6,12,39],[1,5,17,59]],
2065:[[2,3,13,11],[3,5,6,30],[4,4,11,8],[5,4,23,37],[6,5,4,27],[7,6,15,21],[8,7,1,53],[9,7,6,24],[10,7,22,20],[11,7,1,37],[12,6,18,30],[1,5,23,52]],
2066:[[2,3,19,2],[3,5,12,20],[4,4,16,57],[5,5,5,25],[6,5,10,15],[7,6,21,9],[8,7,7,40],[9,7,12,11],[10,8,4,8],[11,7,7,25],[12,7,0,18],[1,6,5,40]],
2067:[[2,4,0,49],[3,5,18,9],[4,4,22,47],[5,5,11,15],[6,5,16,5],[7,7,2,59],[8,7,13,31],[9,7,18,3],[10,8,9,59],[11,7,13,16],[12,7,6,9],[1,6,11,32]],
2068:[[2,4,6,35],[3,4,23,53],[4,4,4,30],[5,4,16,58],[6,4,21,48],[7,6,8,42],[8,6,19,15],[9,6,23,47],[10,7,15,44],[11,6,19,1],[12,6,11,54],[1,5,17,16]],
2069:[[2,3,12,25],[3,5,5,44],[4,4,10,22],[5,4,22,51],[6,5,3,42],[7,6,14,37],[8,7,1,9],[9,7,5,41],[10,7,21,38],[11,7,0,55],[12,6,17,47],[1,5,23,8]],
2070:[[2,3,18,15],[3,5,11,34],[4,4,16,12],[5,5,4,40],[6,5,9,30],[7,6,20,24],[8,7,6,56],[9,7,11,29],[10,8,3,26],[11,7,6,44],[12,6,23,37],[1,6,4,59]],
2071:[[2,4,0,3],[3,5,17,23],[4,4,22,1],[5,5,10,29],[6,5,15,19],[7,7,2,13],[8,7,12,46],[9,7,17,19],[10,8,9,15],[11,7,12,33],[12,7,5,26],[1,6,10,48]],
2072:[[2,4,5,48],[3,4,23,8],[4,4,3,46],[5,4,16,14],[6,4,21,4],[7,6,7,58],[8,6,18,31],[9,6,23,5],[10,7,15,1],[11,6,18,20],[12,6,11,13],[1,5,16,35]],
2073:[[2,3,11,38],[3,5,4,58],[4,4,9,36],[5,4,22,5],[6,5,2,56],[7,6,13,50],[8,7,0,23],[9,7,4,58],[10,7,20,55],[11,7,0,13],[12,6,17,6],[1,5,22,29]],
2074:[[2,3,17,29],[3,5,10,49],[4,4,15,27],[5,5,3,55],[6,5,8,45],[7,6,19,39],[8,7,6,12],[9,7,10,47],[10,8,2,44],[11,7,6,3],[12,6,22,56],[1,6,4,18]],
2075:[[2,3,23,16],[3,5,16,37],[4,4,21,15],[5,5,9,43],[6,5,14,33],[7,7,1,27],[8,7,11,59],[9,7,16,35],[10,8,8,32],[11,7,11,52],[12,7,4,46],[1,6,10,9]],
2076:[[2,4,5,0],[3,4,22,21],[4,4,2,59],[5,4,15,27],[6,4,20,17],[7,6,7,11],[8,6,17,45],[9,6,22,20],[10,7,14,18],[11,6,17,38],[12,6,10,31],[1,5,15,55]],
2077:[[2,3,10,51],[3,5,4,12],[4,4,8,50],[5,4,21,19],[6,5,2,10],[7,6,13,4],[8,6,23,38],[9,7,4,13],[10,7,20,10],[11,6,23,30],[12,6,16,23],[1,5,21,46]],
2078:[[2,3,16,41],[3,5,10,3],[4,4,14,40],[5,5,3,8],[6,5,7,58],[7,6,18,52],[8,7,5,25],[9,7,10,1],[10,8,1,59],[11,7,5,19],[12,6,22,13],[1,6,3,36]],
2079:[[2,3,22,29],[3,5,15,50],[4,4,20,27],[5,5,8,55],[6,5,13,45],[7,7,0,38],[8,7,11,12],[9,7,15,49],[10,8,7,47],[11,7,11,8],[12,7,4,2],[1,6,9,26]],
2080:[[2,4,4,14],[3,4,21,35],[4,4,2,13],[5,4,14,40],[6,4,19,30],[7,6,6,24],[8,6,16,58],[9,6,21,35],[10,7,13,33],[11,6,16,54],[12,6,9,47],[1,5,15,11]],
2081:[[2,3,10,4],[3,5,3,26],[4,4,8,4],[5,4,20,32],[6,5,1,22],[7,6,12,15],[8,6,22,49],[9,7,3,27],[10,7,19,24],[11,6,22,47],[12,6,15,40],[1,5,21,4]],
2082:[[2,3,15,55],[3,5,9,17],[4,4,13,54],[5,5,2,22],[6,5,7,12],[7,6,18,6],[8,7,4,40],[9,7,9,17],[10,8,1,15],[11,7,4,36],[12,6,21,30],[1,6,2,54]],
2083:[[2,3,21,43],[3,5,15,5],[4,4,19,42],[5,5,8,10],[6,5,12,59],[7,6,23,53],[8,7,10,27],[9,7,15,5],[10,8,7,3],[11,7,10,24],[12,7,3,17],[1,6,8,42]],
2084:[[2,4,3,27],[3,4,20,49],[4,4,1,26],[5,4,13,54],[6,4,18,44],[7,6,5,38],[8,6,16,11],[9,6,20,49],[10,7,12,47],[11,6,16,9],[12,6,9,3],[1,5,14,27]],
2085:[[2,3,9,18],[3,5,2,41],[4,4,7,18],[5,4,19,45],[6,5,0,34],[7,6,11,28],[8,6,21,59],[9,7,2,38],[10,7,18,35],[11,6,21,58],[12,6,14,53],[1,5,20,18]],
2086:[[2,3,15,9],[3,5,8,32],[4,4,13,9],[5,5,1,36],[6,5,6,25],[7,6,17,18],[8,7,3,51],[9,7,8,29],[10,8,0,27],[11,7,3,50],[12,6,20,44],[1,6,2,9]],
2087:[[2,3,20,57],[3,5,14,20],[4,4,18,56],[5,5,7,22],[6,5,12,11],[7,6,23,4],[8,7,9,37],[9,7,14,16],[10,8,6,14],[11,7,9,38],[12,7,2,31],[1,6,7,57]],
2088:[[2,4,2,42],[3,4,20,4],[4,4,0,41],[5,4,13,8],[6,4,17,57],[7,6,4,50],[8,6,15,23],[9,6,20,2],[10,7,11,59],[11,6,15,23],[12,6,8,17],[1,5,13,42]],
2089:[[2,3,8,33],[3,5,1,56],[4,4,6,32],[5,4,18,59],[6,4,23,47],[7,6,10,40],[8,6,21,12],[9,7,1,52],[10,7,17,50],[11,6,21,13],[12,6,14,8],[1,5,19,34]],
2090:[[2,3,14,24],[3,5,7,47],[4,4,12,24],[5,5,0,50],[6,5,5,38],[7,6,16,30],[8,7,3,4],[9,7,7,43],[10,7,23,41],[11,7,3,5],[12,6,20,0],[1,6,1,26]],
2091:[[2,3,20,12],[3,5,13,35],[4,4,18,11],[5,5,6,38],[6,5,11,27],[7,6,22,20],[8,7,8,52],[9,7,13,31],[10,8,5,28],[11,7,8,53],[12,7,1,47],[1,6,7,13]],
2092:[[2,4,1,56],[3,4,19,19],[4,3,23,56],[5,4,12,23],[6,4,17,12],[7,6,4,5],[8,6,14,38],[9,6,19,17],[10,7,11,14],[11,6,14,39],[12,6,7,33],[1,5,12,59]],
2093:[[2,3,7,48],[3,5,1,11],[4,4,5,48],[5,4,18,14],[6,4,23,3],[7,6,9,55],[8,6,20,27],[9,7,1,6],[10,7,17,5],[11,6,20,29],[12,6,13,24],[1,5,18,51]],
2094:[[2,3,13,40],[3,5,7,4],[4,4,11,40],[5,5,0,6],[6,5,4,53],[7,6,15,46],[8,7,2,18],[9,7,6,58],[10,7,22,56],[11,7,2,21],[12,6,19,16],[1,6,0,43]],
2095:[[2,3,19,28],[3,5,12,52],[4,4,17,28],[5,5,5,54],[6,5,10,43],[7,6,21,36],[8,7,8,8],[9,7,12,49],[10,8,4,47],[11,7,8,11],[12,7,1,7],[1,6,6,34]],
2096:[[2,4,1,11],[3,4,18,36],[4,3,23,13],[5,4,11,41],[6,4,16,30],[7,6,3,23],[8,6,13,56],[9,6,18,36],[10,7,10,33],[11,6,13,58],[12,6,6,52],[1,5,12,18]],
2097:[[2,3,7,3],[3,5,0,27],[4,4,5,4],[5,4,17,32],[6,4,22,21],[7,6,9,14],[8,6,19,47],[9,7,0,27],[10,7,16,25],[11,6,19,50],[12,6,12,45],[1,5,18,13]],
2098:[[2,3,12,55],[3,5,6,19],[4,4,10,56],[5,4,23,22],[6,5,4,11],[7,6,15,3],[8,7,1,35],[9,7,6,16],[10,7,22,14],[11,7,1,40],[12,6,18,35],[1,6,0,3]],
2099:[[2,3,18,43],[3,5,12,8],[4,4,16,44],[5,5,5,10],[6,5,9,59],[7,6,20,51],[8,7,7,23],[9,7,12,5],[10,8,4,3],[11,7,7,29],[12,7,0,24],[1,6,5,52]],
2100:[[2,3,24,31],[3,5,17,56],[4,4,22,32],[5,5,10,58],[6,5,15,47],[7,7,2,40],[8,7,13,13],[9,7,17,54],[10,8,9,52],[11,7,13,19],[12,7,6,14],[1,6,11,43]]};const LUNAR_DATA=[0x04bd8,0x04ae0,0x0a570,0x054d5,0x0d260,0x0d950,0x16554,0x056a0,0x09ad0,0x055d2,0x04ae0,0x0a5b6,0x0a4d0,0x0d250,0x1d255,0x0b540,0x0d6a0,0x0ada2,0x095b0,0x14977,0x04970,0x0a4b0,0x0b4b5,0x06a50,0x06d40,0x1ab54,0x02b60,0x09570,0x052f2,0x04970,0x06566,0x0d4a0,0x0ea50,0x06e95,0x05ad0,0x02b60,0x186e3,0x092e0,0x1c8d7,0x0c950,0x0d4a0,0x1d8a6,0x0b550,0x056a0,0x1a5b4,0x025d0,0x092d0,0x0d2b2,0x0a950,0x0b557,0x06ca0,0x0b550,0x15355,0x04da0,0x0a5d0,0x14573,0x052d0,0x0a9a8,0x0e950,0x06aa0,0x0aea6,0x0ab50,0x04b60,0x0aae4,0x0a570,0x05260,0x0f263,0x0d950,0x05b57,0x056a0,0x096d0,0x04dd5,0x04ad0,0x0a4d0,0x0d4d4,0x0d250,0x0d558,0x0b540,0x0b5a0,0x195a6,0x095b0,0x049b0,0x0a974,0x0a4b0,0x0b27a,0x06a50,0x06d40,0x0af46,0x0ab60,0x09570,0x04af5,0x04970,0x064b0,0x074a3,0x0ea50,0x06b58,0x055c0,0x0ab60,0x096d5,0x092e0,0x0c960,0x0d954,0x0d4a0,0x0da50,0x07552,0x056a0,0x0abb7,0x025d0,0x092d0,0x0cab5,0x0a950,0x0b4a0,0x0baa4,0x0ad50,0x055d9,0x04ba0,0x0a5b0,0x15176,0x052b0,0x0a930,0x07954,0x06aa0,0x0ad50,0x05b52,0x04b60,0x0a6e6,0x0a4e0,0x0d260,0x0ea65,0x0d530,0x05aa0,0x076a3,0x096d0,0x04bd7,0x04ad0,0x0a4d0,0x1d0b6,0x0d250,0x0d520,0x0dd45,0x0b5a0,0x056d0,0x055b2,0x049b0,0x0a577,0x0a4b0,0x0aa50,0x1b255,0x06d20,0x0ada0];const LUNAR_START = 1900;const MY_ACCOUNT = "ì¼€ì´ë±…í¬ 100150462483 ê¹€ëŒ€ì¸";let GENDER = 'm';let CALENDAR = 'solar';let PARTNER_CALENDAR = 'solar';let SAJU = null;let GODS = null;let STRENGTH = null;let BIRTH_YEAR = null;let BIRTH_MONTH = null;let BIRTH_DAY = null;let BIRTH_HOUR = null;let ORIGINAL_LUNAR_YEAR = null;let ORIGINAL_LUNAR_MONTH = null;let ORIGINAL_LUNAR_DAY = null;let currentNumbers = [];let history = [];const KAKAO_KEY = 'YOUR_KAKAO_JAVASCRIPT_KEY';function initKakao() {if (typeof Kakao !== 'undefined' && !Kakao.isInitialized()) {try {Kakao.init(KAKAO_KEY);console.log('Kakao SDK initialized');} catch(e) {console.log('Kakao init skipped (key not set)');}}}
let talismanGenerated = false;let talismanDataUrl = null;function generateTalisman() {if (!SAJU || !SAJU.day) {toast('ë¨¼ì € ì‚¬ì£¼ ë¶„ì„ì„ í•´ì£¼ì„¸ìš”! ğŸ”®');return;}
const yearBranchIdx = BRANCH.findIndex(b => b.c === SAJU.year.b.c);spinZodiacWheel(yearBranchIdx, function() {startTalismanGeneration();});setTimeout(() => { if(!talismanGenerated) createHighResTalisman(); }, 100);}
function startTalismanGeneration() {const overlay = document.getElementById('talisman-ritual-overlay');if (overlay) {overlay.classList.add('active');playRitualAnimation(() => {if(!talismanGenerated) createHighResTalisman();overlay.classList.remove('active');document.getElementById('talisman-preview').style.display = 'block';document.getElementById('talisman-btn-wrapper').style.display = 'none';toast('ğŸ® ê°œìš´ ë¶€ì ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');});} else {if(!talismanGenerated) createHighResTalisman();document.getElementById('talisman-preview').style.display = 'block';document.getElementById('talisman-btn-wrapper').style.display = 'none';toast('ğŸ® ê°œìš´ ë¶€ì ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');}}
function playRitualAnimation(callback) {const canvas = document.getElementById('ritual-canvas');if (!canvas) {callback();return;}
const ctx = canvas.getContext('2d');const W = 300, H = 400;ctx.fillStyle = '#0a0505';ctx.fillRect(0, 0, W, H);const yongEl = GODS && GODS.yong ? GODS.yong : 'fire';const colors = {fire: { main: '#C41E3A', accent: '#FFD700' },
water: { main: '#1E3A5F', accent: '#87CEEB' },
wood: { main: '#228B22', accent: '#90EE90' },
metal: { main: '#B8860B', accent: '#FFD700' },
earth: { main: '#8B4513', accent: '#DEB887' }};const color = colors[yongEl] || colors.fire;let opacity = 0;const interval = setInterval(() => {ctx.fillStyle = '#0a0505';ctx.fillRect(0, 0, W, H);ctx.strokeStyle = color.main;ctx.lineWidth = 3;ctx.strokeRect(20, 20, W-40, H-40);opacity = Math.min(1, opacity + 0.08);ctx.fillStyle = `rgba(255, 215, 0, ${opacity})`;ctx.font = 'bold 180px "Ma Shan Zheng", "Noto Serif KR", serif';ctx.textAlign = 'center';ctx.textBaseline = 'middle';ctx.fillText('ç¬¦', W/2, H/2 - 30);ctx.fillStyle = `rgba(139, 115, 85, ${opacity})`;ctx.font = '24px "Ma Shan Zheng", "Noto Sans KR", sans-serif';ctx.fillText('ê°œìš´ë¶€ì  ìƒì„±ì¤‘...', W/2, H - 60);if (opacity >= 1) {clearInterval(interval);setTimeout(callback, 500);}}, 80);}
async function createHighResTalisman() {
    // â˜… Wait for fonts to load â˜…
    await document.fonts.ready;
    await document.fonts.load('560px "Ma Shan Zheng"');
    const canvas = document.getElementById('talisman-canvas');const ctx = canvas.getContext('2d');const W = 2160, H = 3840;canvas.width = W;canvas.height = H;
// === ë“±ê¸‰ ì‹œìŠ¤í…œ ===
const rarity = getTalismanRarity();
// === ìë™ ì—°ë„ ì‹œìŠ¤í…œ ===
const currentYear = new Date().getFullYear();
const yearStemIdx = (currentYear - 4) % 10;
const yearBranchIdx = (currentYear - 4) % 12;
const yearStem = STEM[yearStemIdx];
const yearBranch = BRANCH[yearBranchIdx];
const yearElement = ELEMENT[yearStem.e];
const animals = ['ì¥','ì†Œ','í˜¸ë‘ì´','í† ë¼','ìš©','ë±€','ë§','ì–‘','ì›ìˆ­ì´','ë‹­','ê°œ','ë¼ì§€'];
const yearAnimal = animals[yearBranchIdx];
const colors = ['ê²€ì€','í‘¸ë¥¸','ë¶‰ì€','í°','ë…¸ë€'];
const yearColor = colors[Math.floor(yearStemIdx / 2)];
const chineseNums = ['ã€‡','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹'];
const yearChinese = String(currentYear).split('').map(d => chineseNums[parseInt(d)]).join('');
const yongEl = GODS && GODS.yong ? GODS.yong : 'fire';const themes = {fire: { bg1: '#FFF0F0', bg2: '#FFE0E0', bg3: '#FFF5F5', main: '#B20000', accent: '#8B0000', border: '#4D0000', text: '#1A0A08', symbol: 'é³³', symbolName: 'ë´‰í™©', emoji: 'ğŸ”¥', elColor: '#CC0000' },
water: { bg1: '#E8F0FF', bg2: '#D0E0F8', bg3: '#F0F5FF', main: '#0000AA', accent: '#000080', border: '#000055', text: '#0A0A1E', symbol: 'é¾œ', symbolName: 'í˜„ë¬´', emoji: 'ğŸ’§', elColor: '#0000CC' },
wood: { bg1: '#E8FFE8', bg2: '#D0F0D0', bg3: '#F0FFF0', main: '#003300', accent: '#002200', border: '#001100', text: '#050A05', symbol: 'é¾', symbolName: 'ì²­ë£¡', emoji: 'ğŸŒ³', elColor: '#004D00' },
metal: { bg1: '#FFFBF0', bg2: '#FFF5E0', bg3: '#FFFEF8', main: '#D4A017', accent: '#C9A227', border: '#8B7500', text: '#3D2B00', symbol: 'è™', symbolName: 'ë°±í˜¸', emoji: 'âš”ï¸', elColor: '#FFD700' },
earth: { bg1: '#F0EBE0', bg2: '#E0D8C8', bg3: '#F5F0E8', main: '#4A3728', accent: '#3D2B1F', border: '#2D1F15', text: '#100D08', symbol: 'éºŸ', symbolName: 'ê¸°ë¦°', emoji: 'ğŸŒ', elColor: '#6B5344' }};const theme = themes[yongEl] || themes.fire;const bgGrad = ctx.createLinearGradient(0, 0, 0, H);bgGrad.addColorStop(0, theme.bg1);bgGrad.addColorStop(0.5, theme.bg2);bgGrad.addColorStop(1, theme.bg3);ctx.fillStyle = bgGrad;ctx.fillRect(0, 0, W, H);
// === ì „ì„¤ ë“±ê¸‰: ë°°ê²½ ê¸€ë¡œìš° íš¨ê³¼ ===
if (rarity.grade === 'legendary') {
const glow = ctx.createRadialGradient(W/2, H/2, 0, W/2, H/2, H*0.6);
glow.addColorStop(0, 'rgba(255,215,0,0.08)');
glow.addColorStop(1, 'transparent');
ctx.fillStyle = glow;
ctx.fillRect(0, 0, W, H);
}
drawHanjiTexture(ctx, W, H);
// === ë“±ê¸‰ë³„ í…Œë‘ë¦¬ ===
if (rarity.grade === 'legendary') {
// ì „ì„¤: ê¸ˆìƒ‰ ê¸€ë¡œìš° + 3ì¤‘ í…Œë‘ë¦¬
ctx.shadowColor = '#FFD700';
ctx.shadowBlur = 30;
ctx.strokeStyle = '#FFD700';
ctx.lineWidth = 16;
ctx.strokeRect(70, 70, W-140, H-140);
ctx.shadowBlur = 0;
ctx.strokeStyle = theme.main;
ctx.lineWidth = 8;
ctx.strokeRect(95, 95, W-190, H-190);
ctx.strokeStyle = '#FFD700';
ctx.lineWidth = 4;
ctx.strokeRect(115, 115, W-230, H-230);
} else if (rarity.grade === 'epic') {
// ì˜ì›…: ê¸ˆìƒ‰ ì•…ì„¼íŠ¸ 3ì¤‘ í…Œë‘ë¦¬
ctx.strokeStyle = theme.border;
ctx.lineWidth = 12;
ctx.strokeRect(80, 80, W-160, H-160);
ctx.strokeStyle = '#D4AF37';
ctx.lineWidth = 6;
ctx.strokeRect(100, 100, W-200, H-200);
ctx.strokeStyle = theme.main;
ctx.lineWidth = 4;
ctx.strokeRect(115, 115, W-230, H-230);
} else {
// í¬ê·€: ê¸°ë³¸ ì´ì¤‘ í…Œë‘ë¦¬
ctx.strokeStyle = theme.border;
ctx.lineWidth = 12;
ctx.strokeRect(80, 80, W-160, H-160);
ctx.strokeStyle = theme.main;
ctx.lineWidth = 4;
ctx.strokeRect(110, 110, W-220, H-220);
}
drawCornerOrnamentsHD(ctx, W, H, theme, rarity);drawTaegeukHD(ctx, W/2, 300, 120, theme);ctx.fillStyle = theme.main;ctx.font = 'bold 128px "Ma Shan Zheng", "Noto Serif KR", serif';ctx.textAlign = 'center';ctx.fillText(`${yearChinese} é–‹é‹ç¬¦`, W/2, 560);ctx.fillStyle = theme.text;ctx.font = '64px "Ma Shan Zheng", "Noto Sans KR", sans-serif';ctx.fillText(`${currentYear}ë…„ ê°œìš´ ë¶€ì `, W/2, 660);ctx.strokeStyle = theme.border;ctx.lineWidth = 4;ctx.beginPath();ctx.moveTo(300, 740);ctx.lineTo(W-300, 740);ctx.stroke();const mantras = {wood: { hanja: 'æœ¨å¾·ç”Ÿç™¼ è¬äº‹äº¨é€š', meaning: 'ë‚˜ë¬´ì˜ ë•ì´ ìƒë°œí•˜ì—¬ ë§Œì‚¬í˜•í†µ' },
fire: { hanja: 'ç«å¾·æ˜Œç›› å…‰æ˜å¤§å‰', meaning: 'ë¶ˆì˜ ë•ì´ ì°½ì„±í•˜ì—¬ ê´‘ëª…ëŒ€ê¸¸' },
earth: { hanja: 'åœŸå¾·åšè¼‰ è²¡ç¥¿è±Šç›ˆ', meaning: 'í™ì˜ ë•ì´ ë‘í„°ì›Œ ì¬ë¡í’ì˜' },
metal: { hanja: 'é‡‘å¾·å …å›º ç™¾äº‹æˆå°±', meaning: 'ì‡ ì˜ ë•ì´ ê²¬ê³ í•˜ì—¬ ë°±ì‚¬ì„±ì·¨' },
water: { hanja: 'æ°´å¾·æ½¤æ¾¤ æ™ºæ…§é€šé”', meaning: 'ë¬¼ì˜ ë•ì´ ìœ¤íƒí•˜ì—¬ ì§€í˜œí†µë‹¬' }};const mantra = mantras[yongEl] || mantras.fire;ctx.fillStyle = theme.main;ctx.font = 'bold 104px "Ma Shan Zheng", "Noto Serif KR", serif';ctx.fillText(mantra.hanja, W/2, 900);ctx.fillStyle = theme.border;ctx.font = '56px "Ma Shan Zheng", "Noto Sans KR", sans-serif';ctx.fillText(mantra.meaning, W/2, 1000);ctx.fillStyle = theme.main;ctx.font = 'bold 560px "Ma Shan Zheng", "Noto Serif KR", serif';ctx.fillText('ç¬¦', W/2, 1500);ctx.fillStyle = theme.main;ctx.font = 'bold 160px "Ma Shan Zheng", "Noto Serif KR", serif';ctx.fillText(theme.symbol, W/2, 1700);ctx.fillStyle = theme.border;ctx.font = '56px "Ma Shan Zheng", "Noto Sans KR", sans-serif';ctx.fillText(`${theme.symbolName} Â· ${ELEMENT[yongEl].k}`, W/2, 1780);const dayStem = SAJU.day.s.c;const dayBranch = SAJU.day.b.c;ctx.fillStyle = theme.main;ctx.font = 'bold 180px "Ma Shan Zheng", "Noto Serif KR", serif';ctx.fillText(dayStem + dayBranch, W/2, 1960);const iljuKey = dayStem + dayBranch;const dayDesc = (typeof ILJU_60 !== 'undefined' && ILJU_60[iljuKey]) ? ILJU_60[iljuKey].name : '';ctx.fillStyle = theme.border;ctx.font = '56px "Ma Shan Zheng", "Noto Sans KR", sans-serif';ctx.fillText(dayDesc + ' ì¼ì£¼', W/2, 2050);ctx.fillStyle = 'rgba(255, 255, 255, 0.85)';roundRectHD(ctx, 200, 2120, W-400, 560, 40);ctx.fill();ctx.strokeStyle = theme.main;ctx.lineWidth = 4;roundRectHD(ctx, 200, 2120, W-400, 560, 40);ctx.stroke();ctx.textAlign = 'left';ctx.font = '64px "Ma Shan Zheng", "Noto Sans KR", sans-serif';const yongsinEl = ELEMENT[GODS.yong];const huisinEl = ELEMENT[GODS.hee];const gisinEl = ELEMENT[GODS.gi];ctx.fillStyle = '#CC0000';ctx.fillText('ç”¨ç¥ (ìš©ì‹ )', 300, 2260);ctx.fillStyle = theme.main;ctx.fillText(`${yongsinEl.k} ${theme.emoji}`, 900, 2260);ctx.fillStyle = '#006600';ctx.fillText('å–œç¥ (í¬ì‹ )', 300, 2380);ctx.fillStyle = theme.main;ctx.fillText(`${huisinEl.k}`, 900, 2380);ctx.fillStyle = '#666666';ctx.fillText('å¿Œç¥ (ê¸°ì‹ )', 300, 2500);ctx.fillStyle = '#888';ctx.fillText(`${gisinEl.k}`, 900, 2500);ctx.fillStyle = theme.border;ctx.fillText('èº«å¼ºå¼± (ì‹ ê°•ì•½)', 300, 2620);ctx.fillStyle = theme.main;const strType = STRENGTH ? (STRENGTH.type === 'strong' ? 'ì‹ ê°•' : STRENGTH.type === 'weak' ? 'ì‹ ì•½' : 'ì¤‘í™”') : '?';const strPct = STRENGTH ? STRENGTH.pct + '%' : '';ctx.fillText(`${strType} ${strPct}`, 900, 2620);ctx.textAlign = 'center';ctx.fillStyle = theme.border;ctx.font = '56px "Ma Shan Zheng", "Noto Sans KR", sans-serif';ctx.fillText(`â”€â”€â”€ ${currentYear}ë…„ ${yearStem.c}${yearBranch.c}å¹´ ${yearColor} ${yearAnimal}ë  í•´ â”€â”€â”€`, W/2, 2800);let bestMonth = '?', worstMonth = '?';try {const monthlyLuck = getYearlyMonthLuck(currentYear, SAJU, GODS);if (monthlyLuck && monthlyLuck.best) bestMonth = monthlyLuck.best.month;if (monthlyLuck && monthlyLuck.worst) worstMonth = monthlyLuck.worst.month;} catch(e) {}
ctx.font = '64px "Ma Shan Zheng", "Noto Sans KR", sans-serif';ctx.fillStyle = '#006600';ctx.fillText(`âœ¨ ìµœê³ ì˜ ë‹¬: ${bestMonth}ì›”`, W/2 - 360, 2920);ctx.fillStyle = '#CC0000';ctx.fillText(`âš ï¸ ì£¼ì˜í•  ë‹¬: ${worstMonth}ì›”`, W/2 + 360, 2920);ctx.strokeStyle = theme.border;ctx.lineWidth = 4;ctx.beginPath();ctx.moveTo(300, 3040);ctx.lineTo(W-300, 3040);ctx.stroke();ctx.fillStyle = theme.main;ctx.font = 'bold 88px "Ma Shan Zheng", "Noto Serif KR", serif';ctx.fillText('å„é€€ç¦ä¾† ç™¾äº‹å¤§å‰', W/2, 3180);ctx.fillStyle = theme.border;ctx.font = '52px "Ma Shan Zheng", "Noto Sans KR", sans-serif';ctx.fillText('ì•¡ì€ ë¬¼ëŸ¬ê°€ê³  ë³µì´ ì˜¤ë‹ˆ ëª¨ë“  ì¼ì´ ëŒ€ê¸¸í•˜ë¦¬ë¼', W/2, 3280);ctx.fillStyle = theme.border;ctx.font = '44px "Ma Shan Zheng", "Noto Sans KR", sans-serif';ctx.fillText('ì‚¬ì£¼ë¡œë˜ Pro â˜¯ simplesajulotto.com', W/2, 3480);const serialNo = generateSerialNumber();
// === ë“±ê¸‰ ë¼ë²¨ (ì‹œë¦¬ì–¼ ìœ„) ===
if (rarity.grade === 'legendary') {
const labelGrad = ctx.createLinearGradient(W/2-150, 3520, W/2+150, 3520);
labelGrad.addColorStop(0, '#FFD700');
labelGrad.addColorStop(0.5, '#FFF8DC');
labelGrad.addColorStop(1, '#FFD700');
ctx.fillStyle = labelGrad;
ctx.font = 'bold 44px "Ma Shan Zheng", "Noto Sans KR", sans-serif';
ctx.fillText('ã€Œ ì „ ì„¤ ã€', W/2, 3520);
} else if (rarity.grade === 'epic') {
ctx.fillStyle = '#D4AF37';
ctx.font = 'bold 40px "Ma Shan Zheng", "Noto Sans KR", sans-serif';
ctx.fillText('ã€Œ ì˜ ì›… ã€', W/2, 3520);
}
// === ë“±ê¸‰ë³„ ì‹œë¦¬ì–¼ ë„˜ë²„ ìŠ¤íƒ€ì¼ ===
if (rarity.grade === 'legendary') {
// í™€ë¡œê·¸ë˜í”½ ë ˆì¸ë³´ìš° íš¨ê³¼
const grad = ctx.createLinearGradient(W/2-250, 3580, W/2+250, 3580);
grad.addColorStop(0, '#FF6B6B');
grad.addColorStop(0.2, '#FFD93D');
grad.addColorStop(0.4, '#6BCB77');
grad.addColorStop(0.6, '#4D96FF');
grad.addColorStop(0.8, '#9B59B6');
grad.addColorStop(1, '#FF6B6B');
ctx.fillStyle = grad;
ctx.font = 'bold 36px monospace';
ctx.fillText(`â˜…â˜…â˜…â˜…â˜… ${serialNo} â˜…â˜…â˜…â˜…â˜…`, W/2, 3580);
} else if (rarity.grade === 'epic') {
// ê¸ˆìƒ‰ ì‹œë¦¬ì–¼
ctx.fillStyle = '#D4AF37';
ctx.font = 'bold 34px monospace';
ctx.fillText(`â˜…â˜…â˜…â˜… ${serialNo} â˜…â˜…â˜…â˜…`, W/2, 3580);
} else {
// ê¸°ë³¸ íšŒìƒ‰
ctx.fillStyle = 'rgba(75, 55, 40, 0.6)';
ctx.font = '32px monospace';
ctx.fillText(`No. ${serialNo}`, W/2, 3560);
}
ctx.fillStyle = 'rgba(75, 55, 40, 0.5)';ctx.font = '40px "Ma Shan Zheng", "Noto Sans KR", sans-serif';ctx.fillText('ğŸ“± íœ´ëŒ€í° ë°°ê²½í™”ë©´ìœ¼ë¡œ ì„¤ì •í•˜ì„¸ìš”', W/2, 3680);talismanGenerated = true;talismanDataUrl = canvas.toDataURL('image/png', 1.0);}
function drawHanjiTexture(ctx, W, H) {
// === í•œì§€(Hanji) ì§ˆê° íš¨ê³¼ 60% - K-MUDANG ì›ë³¸ ===
// 1. ê¸°ë³¸ ë…¸ì´ì¦ˆ (ì )
for(let i=0;i<W*H*0.15;i++){const x=Math.random()*W;const y=Math.random()*H;const size=Math.random()*2.5+0.5;const colors=['rgba(139,90,43,','rgba(101,67,33,','rgba(180,140,100,','rgba(120,80,40,','rgba(160,120,80,'];const c=colors[Math.floor(Math.random()*colors.length)];const alpha=Math.random()*0.35+0.1;ctx.fillStyle=c+alpha+')';ctx.fillRect(x,y,size,size);}
// 2. í•œì§€ ì„¬ìœ  íš¨ê³¼ (ê°€ë¡œ/ì„¸ë¡œ ì„ )
ctx.globalAlpha=0.15;for(let i=0;i<800;i++){const x=Math.random()*W;const y=Math.random()*H;const len=Math.random()*60+20;const isH=Math.random()>0.5;ctx.strokeStyle='rgba(120,80,40,0.3)';ctx.lineWidth=Math.random()*1.5+0.3;ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(isH?x+len:x+Math.random()*5,isH?y+Math.random()*3:y+len);ctx.stroke();}ctx.globalAlpha=1.0;
// 3. ê°€ì¥ìë¦¬ ë¹ˆí‹°ì§€ íš¨ê³¼ (vignette) ê°•í™”
const vignette=ctx.createRadialGradient(W/2,H/2,H*0.3,W/2,H/2,H*0.8);vignette.addColorStop(0,'rgba(139,90,43,0)');vignette.addColorStop(0.7,'rgba(120,80,40,0.05)');vignette.addColorStop(1,'rgba(101,67,33,0.15)');ctx.fillStyle=vignette;ctx.fillRect(0,0,W,H);}
function getTalismanRarity() {
// ë“±ê¸‰ ì¡°ê±´ ì²´í¬
let hasSamhap = false, hasBanghap = false, hasCheonul = false, hasYearMatch = false;
try {
const adv = analyzeAdvancedInteractions(SAJU);
if (adv && adv.samhapGuk) hasSamhap = adv.samhapGuk.some(s => s.complete);
const banghap = analyzeDirectionalHarmony ? analyzeDirectionalHarmony(SAJU) : [];
hasBanghap = banghap.some(b => b.type === 'complete');
const sinsal = calcSinsal ? calcSinsal(SAJU) : '';
hasCheonul = sinsal.includes('å¤©ä¹™è²´äºº');
const currentYear = new Date().getFullYear();
const yearStemIdx = (currentYear - 4) % 10;
const yearElement = ELEMENT[STEM[yearStemIdx].e];
hasYearMatch = GODS && GODS.yong && yearElement.e === GODS.yong;
} catch(e) { console.log('Rarity check error:', e); }
const hasBureau = hasSamhap || hasBanghap;
// ì „ì„¤: (ì‚¼í•© OR ë°©í•©) AND ì„¸ìš´=ìš©ì‹ 
if (hasBureau && hasYearMatch) return { grade: 'legendary', label: 'ì „ì„¤', stars: 'â˜…â˜…â˜…â˜…â˜…' };
// ì˜ì›…: ì‚¼í•© OR ë°©í•© OR ì²œì„ê·€ì¸ OR ì„¸ìš´=ìš©ì‹ 
if (hasBureau || hasCheonul || hasYearMatch) return { grade: 'epic', label: 'ì˜ì›…', stars: 'â˜…â˜…â˜…â˜…' };
// í¬ê·€: ê¸°ë³¸
return { grade: 'rare', label: 'í¬ê·€', stars: 'â˜…â˜…â˜…' };
}
function generateSerialNumber() {const now = new Date();const year = now.getFullYear();const random = Math.floor(Math.random() * 9999).toString().padStart(4, '0');const dayPillar = SAJU.day.s.c + SAJU.day.b.c;return `${year}-SJLOTTO-${dayPillar}-${random}`;}
function drawTaegeukHD(ctx, x, y, r, theme) {const TAEGEUK_RED = '#C41E3A';const TAEGEUK_BLUE = '#1E3A5F';ctx.beginPath();ctx.arc(x, y, r, 0, Math.PI * 2);ctx.strokeStyle = theme.main;ctx.lineWidth = 8;ctx.stroke();ctx.beginPath();ctx.arc(x, y, r * 0.85, 0, Math.PI, false);ctx.fillStyle = TAEGEUK_BLUE;ctx.fill();ctx.beginPath();ctx.arc(x, y, r * 0.85, Math.PI, Math.PI * 2, false);ctx.fillStyle = TAEGEUK_RED;ctx.fill();ctx.beginPath();ctx.arc(x - r * 0.35, y, r * 0.28, 0, Math.PI * 2);ctx.fillStyle = TAEGEUK_RED;ctx.fill();ctx.beginPath();ctx.arc(x + r * 0.35, y, r * 0.28, 0, Math.PI * 2);ctx.fillStyle = TAEGEUK_BLUE;ctx.fill();}
function drawCornerOrnamentsHD(ctx, W, H, theme, rarity) {
const isLegendary = rarity && rarity.grade === 'legendary';
const isEpic = rarity && rarity.grade === 'epic';
const size = isLegendary ? 140 : isEpic ? 120 : 100;
const lineW = isLegendary ? 10 : isEpic ? 8 : 6;
const offset = 140;
ctx.strokeStyle = isLegendary ? '#FFD700' : theme.main;
ctx.lineWidth = lineW;
// 4ê°œ ì½”ë„ˆ ê¸°ë³¸ Lì
ctx.beginPath();ctx.moveTo(offset, offset + size);ctx.lineTo(offset, offset);ctx.lineTo(offset + size, offset);ctx.stroke();
ctx.beginPath();ctx.moveTo(W - offset - size, offset);ctx.lineTo(W - offset, offset);ctx.lineTo(W - offset, offset + size);ctx.stroke();
ctx.beginPath();ctx.moveTo(offset, H - offset - size);ctx.lineTo(offset, H - offset);ctx.lineTo(offset + size, H - offset);ctx.stroke();
ctx.beginPath();ctx.moveTo(W - offset - size, H - offset);ctx.lineTo(W - offset, H - offset);ctx.lineTo(W - offset, H - offset - size);ctx.stroke();
// ì˜ì›…/ì „ì„¤: ë‚´ë¶€ ì´ì¤‘ Lì
if (isEpic || isLegendary) {
const inner = 30;
ctx.strokeStyle = theme.main;
ctx.lineWidth = 4;
ctx.beginPath();ctx.moveTo(offset+inner, offset+inner+size*0.6);ctx.lineTo(offset+inner, offset+inner);ctx.lineTo(offset+inner+size*0.6, offset+inner);ctx.stroke();
ctx.beginPath();ctx.moveTo(W-offset-inner-size*0.6, offset+inner);ctx.lineTo(W-offset-inner, offset+inner);ctx.lineTo(W-offset-inner, offset+inner+size*0.6);ctx.stroke();
ctx.beginPath();ctx.moveTo(offset+inner, H-offset-inner-size*0.6);ctx.lineTo(offset+inner, H-offset-inner);ctx.lineTo(offset+inner+size*0.6, H-offset-inner);ctx.stroke();
ctx.beginPath();ctx.moveTo(W-offset-inner-size*0.6, H-offset-inner);ctx.lineTo(W-offset-inner, H-offset-inner);ctx.lineTo(W-offset-inner, H-offset-inner-size*0.6);ctx.stroke();
}
// ì „ì„¤: ë‹¤ì´ì•„ëª¬ë“œ ì¥ì‹
if (isLegendary) {
ctx.fillStyle = '#FFD700';
const drawDiamond = (x, y, s) => {
ctx.beginPath();ctx.moveTo(x, y-s);ctx.lineTo(x+s, y);ctx.lineTo(x, y+s);ctx.lineTo(x-s, y);ctx.closePath();ctx.fill();
};
const d = 12;
drawDiamond(offset+size/2, offset, d);
drawDiamond(offset, offset+size/2, d);
drawDiamond(W-offset-size/2, offset, d);
drawDiamond(W-offset, offset+size/2, d);
drawDiamond(offset+size/2, H-offset, d);
drawDiamond(offset, H-offset-size/2, d);
drawDiamond(W-offset-size/2, H-offset, d);
drawDiamond(W-offset, H-offset-size/2, d);
}
}
function roundRectHD(ctx, x, y, w, h, r) {ctx.beginPath();ctx.moveTo(x + r, y);ctx.lineTo(x + w - r, y);ctx.quadraticCurveTo(x + w, y, x + w, y + r);ctx.lineTo(x + w, y + h - r);ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);ctx.lineTo(x + r, y + h);ctx.quadraticCurveTo(x, y + h, x, y + h - r);ctx.lineTo(x, y + r);ctx.quadraticCurveTo(x, y, x + r, y);ctx.closePath();}
function drawTaegeuk(ctx, x, y, r) {ctx.beginPath();ctx.arc(x, y, r, 0, Math.PI * 2);ctx.strokeStyle = '#D4AF37';ctx.lineWidth = 2;ctx.stroke();ctx.beginPath();ctx.arc(x, y, r * 0.8, 0, Math.PI, false);ctx.fillStyle = '#C41E3A';ctx.fill();ctx.beginPath();ctx.arc(x, y, r * 0.8, Math.PI, Math.PI * 2, false);ctx.fillStyle = '#1E3A5F';ctx.fill();ctx.beginPath();ctx.arc(x - r * 0.35, y, r * 0.25, 0, Math.PI * 2);ctx.fillStyle = '#1E3A5F';ctx.fill();ctx.beginPath();ctx.arc(x + r * 0.35, y, r * 0.25, 0, Math.PI * 2);ctx.fillStyle = '#C41E3A';ctx.fill();}
function drawCornerOrnaments(ctx, W, H) {ctx.fillStyle = '#D4AF37';ctx.font = '14px serif';ctx.textAlign = 'center';ctx.fillText('ç¦', 35, 40);ctx.fillText('ç¥¿', W-35, 40);ctx.fillText('å£½', 35, H-25);ctx.fillText('å–œ', W-35, H-25);}
function roundRect(ctx, x, y, w, h, r) {ctx.beginPath();ctx.moveTo(x + r, y);ctx.lineTo(x + w - r, y);ctx.quadraticCurveTo(x + w, y, x + w, y + r);ctx.lineTo(x + w, y + h - r);ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);ctx.lineTo(x + r, y + h);ctx.quadraticCurveTo(x, y + h, x, y + h - r);ctx.lineTo(x, y + r);ctx.quadraticCurveTo(x, y, x + r, y);ctx.closePath();}
function downloadTalisman() {if (!talismanGenerated) {generateTalisman();if (!talismanGenerated) return;}
const link = document.createElement('a');link.download = '2026_ê°œìš´ë¶€ì _ì‚¬ì£¼ë¡œë˜.png';link.href = talismanDataUrl;link.click();toast('ğŸ“¥ ë¶€ì  ì´ë¯¸ì§€ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');}
function shareTalismanKakao() {if (!talismanGenerated) {generateTalisman();if (!talismanGenerated) return;}
if (navigator.share && navigator.canShare) {const canvas = document.getElementById('talisman-canvas');canvas.toBlob(async (blob) => {const file = new File([blob], '2026_ê°œìš´ë¶€ì .png', { type: 'image/png' });const shareData = {title: 'ğŸ® 2026ë…„ ê°œìš´ ë¶€ì ',
text: 'ì‚¬ì£¼ë¡œë˜ Proì—ì„œ ë§Œë“  ë‚˜ë§Œì˜ ê°œìš´ ë¶€ì ì…ë‹ˆë‹¤!\n\nğŸ‘‰ ë‚˜ë„ ë§Œë“¤ì–´ë³´ê¸°:',
url: window.location.href,
files: [file]};try {if (navigator.canShare(shareData)) {await navigator.share(shareData);toast('ê³µìœ  ì™„ë£Œ! ğŸ‰');return;}} catch(e) {if (e.name !== 'AbortError') {console.log('Share failed:', e);}}
shareKakaoFallback();}, 'image/png');return;}
shareKakaoFallback();}
function shareKakaoFallback() {if (typeof Kakao !== 'undefined' && Kakao.isInitialized()) {try {Kakao.Share.sendDefault({objectType: 'feed',
content: {title: 'ğŸ® 2026ë…„ ê°œìš´ ë¶€ì ',
description: 'ì‚¬ì£¼ë¡œë˜ Proì—ì„œ ë§Œë“  ë‚˜ë§Œì˜ ê°œìš´ ë¶€ì ! ë‹¹ì‹ ì˜ ìš©ì‹ ê³¼ 2026ë…„ ìš´ì„¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.',
imageUrl: 'https://raw.githubusercontent.com/shrmsdl-netizen/simplesajulotto/main/talisman-preview.png',
link: {mobileWebUrl: window.location.href,
webUrl: window.location.href}},
buttons: [{title: 'ë‚˜ë„ ë¶€ì  ë§Œë“¤ê¸°',
link: {mobileWebUrl: window.location.href,
webUrl: window.location.href}}]});return;} catch(e) {console.error('Kakao share error:', e);}}
copyShareLink();toast('ğŸ’¡ ë¶€ì  ì´ë¯¸ì§€ëŠ” [ì´ë¯¸ì§€ ì €ì¥] ë²„íŠ¼ìœ¼ë¡œ ì €ì¥ í›„ ì§ì ‘ ê³µìœ í•´ì£¼ì„¸ìš”!');}
function shareKakao() {shareTalismanKakao();}
function getShareText() {return `ì²œë…„ ëª…ë¦¬í•™ì˜ ì§€í˜œë¥¼ í˜„ëŒ€ì ìœ¼ë¡œ êµ¬í˜„í•œ ì‚¬ì£¼ ë¶„ì„ ì•±
âœ¨ ì „ë¬¸ê°€ ìˆ˜ì¤€ ì‚¬ì£¼íŒ”ì ë¶„ì„
ğŸ’• ê³¼í•™ì  ê¶í•© ì§„ë‹¨
ğŸ€ ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ ì œì™¸ ë¡œë˜
ìš´ëª…ì˜ ë¹„ë°€ì„ í’€ì–´ë³´ì„¸ìš” ğŸ”®`;}
function getShareImageUrl() {return 'https://raw.githubusercontent.com/shrmsdl-netizen/simplesajulotto/main/share-thumbnail.png';}
function copyShareLink() {const text = `ğŸ€ ì‚¬ì£¼ë¡œë˜ Pro - ì²œë…„ ëª…ë¦¬í•™ì˜ ì§€í˜œ
âœ¨ AIê¸‰ ì •ë°€ ì‚¬ì£¼ ë¶„ì„
ğŸ’• 8ëŒ€ ì›ë¦¬ ê¶í•© ì§„ë‹¨
ğŸ² ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ ì œì™¸ ë¡œë˜
ğŸ‘‰ ${window.location.href}`;navigator.clipboard.writeText(text).then(() => {toast('ğŸ“‹ ê³µìœ  ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');}).catch(() => {const ta = document.createElement('textarea');ta.value = text;document.body.appendChild(ta);ta.select();document.execCommand('copy');document.body.removeChild(ta);toast('ğŸ“‹ ê³µìœ  ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');});}
function init() {initKakao();const cy = new Date().getFullYear();['birth-year', 'partner-year'].forEach(id => {const el = document.getElementById(id);if (el) {el.innerHTML = '<option value="" disabled selected>ë…„</option>';for (let i = cy; i >= 1940; i--) el.innerHTML += `<option value="${i}">${i}</option>`;}});['birth-month', 'partner-month'].forEach(id => {const el = document.getElementById(id);if (el) {el.innerHTML = '<option value="" disabled selected>ì›”</option>';for (let i = 1; i <= 12; i++) el.innerHTML += `<option value="${i}">${i}</option>`;}});['birth-day', 'partner-day'].forEach(id => {const el = document.getElementById(id);if (el) {el.innerHTML = '<option value="" disabled selected>ì¼</option>';for (let i = 1; i <= 31; i++) el.innerHTML += `<option value="${i}">${i}</option>`;}});const hourEl = document.getElementById('birth-hour');if (hourEl) {hourEl.innerHTML = '<option value="-1" selected>ì‹œê°„ ëª¨ë¦„</option>';const hours = ['å­æ™‚(23:30-01:29)','ä¸‘æ™‚(01:30-03:29)','å¯…æ™‚(03:30-05:29)','å¯æ™‚(05:30-07:29)',
'è¾°æ™‚(07:30-09:29)','å·³æ™‚(09:30-11:29)','åˆæ™‚(11:30-13:29)','æœªæ™‚(13:30-15:29)',
'ç”³æ™‚(15:30-17:29)','é…‰æ™‚(17:30-19:29)','æˆŒæ™‚(19:30-21:29)','äº¥æ™‚(21:30-23:29)'];hours.forEach((t, i) => hourEl.innerHTML += `<option value="${i}">${t}</option>`);}
const pHourEl = document.getElementById('partner-hour');if (pHourEl) {pHourEl.innerHTML = '<option value="-1" selected>ì‹œê°„ ëª¨ë¦„</option>';const pHours = ['å­æ™‚(23:30-01:29)','ä¸‘æ™‚(01:30-03:29)','å¯…æ™‚(03:30-05:29)','å¯æ™‚(05:30-07:29)','è¾°æ™‚(07:30-09:29)','å·³æ™‚(09:30-11:29)','åˆæ™‚(11:30-13:29)','æœªæ™‚(13:30-15:29)','ç”³æ™‚(15:30-17:29)','é…‰æ™‚(17:30-19:29)','æˆŒæ™‚(19:30-21:29)','äº¥æ™‚(21:30-23:29)'];pHours.forEach((t, i) => pHourEl.innerHTML += `<option value="${i}">${t}</option>`);}}
document.addEventListener('DOMContentLoaded', init);function toast(msg) {const t = document.getElementById('toast');t.textContent = msg;t.classList.add('show');setTimeout(() => t.classList.remove('show'), 3000);}
function getBallColor(n) {if (n <= 10) return 'y';if (n <= 20) return 'b';if (n <= 30) return 'r';if (n <= 40) return 'g';return 'p';}
function createBall(n, sm = false) {return `<div class="ball ${sm ? 'sm' : ''} ${getBallColor(n)}">${n}</div>`;}
function setGender(g) {GENDER = g;document.querySelectorAll('[data-gender]').forEach(b => b.classList.toggle('on', b.dataset.gender === g));}
function setCalendar(c) {CALENDAR = c;document.querySelectorAll('[data-cal]').forEach(b => b.classList.toggle('on', b.dataset.cal === c));}
function setPartnerCalendar(c) {PARTNER_CALENDAR = c;document.querySelectorAll('[data-pcal]').forEach(b => b.classList.toggle('on', b.dataset.pcal === c));}
function updateTimeSettings() {TIME_CORRECTION_SETTINGS.useSummerTime = document.getElementById('opt-summertime')?.checked ?? true;TIME_CORRECTION_SETTINGS.useLongitude = document.getElementById('opt-longitude')?.checked ?? true;TIME_CORRECTION_SETTINGS.useYajasi = document.getElementById('opt-yajasi')?.checked ?? false;}
function switchTab(name) {document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));document.querySelectorAll('.top-nav button').forEach(b => b.classList.remove('active'));document.querySelectorAll('.tab-footer').forEach(f => f.classList.remove('active'));document.getElementById('tab-' + name)?.classList.add('active');document.getElementById('footer-' + name)?.classList.add('active');if (typeof event !== 'undefined' && event?.currentTarget) event.currentTarget.classList.add('active'); else document.querySelector(`.top-nav button[onclick*="'${name}'"]`)?.classList.add('active');}
function showFortune(type) {document.querySelectorAll('#fortune-tabs .sub-tab').forEach(t => t.classList.remove('on'));event.currentTarget.classList.add('on');renderFortune(type);}
function showDaeunTab(tabName) {document.querySelectorAll('#daeun-tabs .sub-tab').forEach(t => t.classList.remove('on'));event.currentTarget.classList.add('on');document.querySelectorAll('.daeun-panel').forEach(p => p.style.display = 'none');const targetPanel = document.getElementById('daeun-' + tabName);if (targetPanel) {targetPanel.style.display = 'block';}}
function generateLotto() {try {const container = document.getElementById('lotto-balls');if (!container) { toast('í™”ë©´ ì˜¤ë¥˜'); return; }
const btn = event?.currentTarget;if (btn) {btn.disabled = true;btn.textContent = 'ğŸ² ì¶”ì²¨ ì¤‘...';}
let counter = 0;const interval = setInterval(() => {const temp = Array.from({length: 6}, () => Math.floor(Math.random() * 45) + 1);container.innerHTML = temp.map(n => createBall(n)).join('');counter++;if (counter > 15) {clearInterval(interval);let nums, attempts = 0;do {const pool = Array.from({length: 45}, (_, i) => i + 1);nums = [];for (let i = 0; i < 6; i++) {const idx = Math.floor(Math.random() * pool.length);nums.push(pool.splice(idx, 1)[0]);}
nums.sort((a, b) => a - b);attempts++;} while (PAST_SET.has(nums.join(',')) && attempts < 1000);currentNumbers = nums;container.innerHTML = nums.map(n => createBall(n)).join('');history.unshift(nums);if (history.length > 5) history.pop();document.getElementById('history-card').style.display = 'block';document.getElementById('history-list').innerHTML = history.map(h =>
`<div class="history-item">${h.map(n => createBall(n, true)).join('')}</div>`
).join('');if (btn) {btn.disabled = false;btn.textContent = 'ğŸ² í–‰ìš´ì˜ ë²ˆí˜¸ ìƒì„±';}
if (SAJU) showTodayFortune();}}, 50);} catch (error) {console.error('ë¡œë˜ ìƒì„± ì˜¤ë¥˜:', error);toast('ë²ˆí˜¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');}}
function generateSajuLotto() {try {if (!GODS) { toast('ë¨¼ì € ì‚¬ì£¼ ë¶„ì„ì„ í•´ì£¼ì„¸ìš”'); return; }
const container = document.getElementById('saju-lotto-balls');if (!container) { toast('í™”ë©´ ì˜¤ë¥˜'); return; }
const yongNums = ELEMENT[GODS.yong]?.nums || [];const heeNums = ELEMENT[GODS.hee]?.nums || [];const giNums = ELEMENT[GODS.gi]?.nums || [];let weightedPool = [];for (let i = 1; i <= 45; i++) {let weight = 1;if (yongNums.includes(i)) weight = 3;else if (heeNums.includes(i)) weight = 2;else if (giNums.includes(i)) weight = 0.5;for (let j = 0; j < weight * 2; j++) weightedPool.push(i);}
const today = new Date();const todayStr = `${today.getFullYear()}-${today.getMonth()+1}-${today.getDate()}`;const seed = `${BIRTH_YEAR}-${BIRTH_MONTH}-${BIRTH_DAY}-${GODS.yong}-${GODS.hee}-${todayStr}`;let hash = 0;for (let i = 0; i < seed.length; i++) {hash = ((hash << 5) - hash) + seed.charCodeAt(i);hash = hash & hash;}
let nums = [], attempts = 0;do {const selected = new Set();let tempHash = hash + attempts;while (selected.size < 6) {tempHash = Math.abs((tempHash * 1103515245 + 12345) & 0x7fffffff);const idx = tempHash % weightedPool.length;selected.add(weightedPool[idx]);}
nums = [...selected].sort((a, b) => a - b);attempts++;} while (PAST_SET.has(nums.join(',')) && attempts < 1000);currentNumbers = nums;container.innerHTML = nums.map(n => createBall(n)).join('');const yongCount = nums.filter(n => yongNums.includes(n)).length;toast(`ğŸ”® ì˜¤ëŠ˜ì˜ ìš´ëª… ë²ˆí˜¸ (ìš©ì‹  ${ELEMENT[GODS.yong].k} ${yongCount}ê°œ)`);} catch (error) {console.error('ì‚¬ì£¼ ë¡œë˜ ìƒì„± ì˜¤ë¥˜:', error);toast('ë²ˆí˜¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');}}
function lunarToSolar(ly, lm, ld, isLeap = false) {if (ly < 1900 || ly > 2049) {console.warn('ìŒë ¥ ë³€í™˜: ì§€ì› ë²”ìœ„ ì™¸ ì—°ë„', ly);return null;}
const yearIdx = ly - LUNAR_START;if (yearIdx < 0 || yearIdx >= LUNAR_DATA.length) {return null;}
const baseDate = new Date(1900, 0, 31);let totalDays = 0;for (let i = 0; i < yearIdx; i++) {totalDays += getLunarYearDays(LUNAR_START + i);}
const leapMonth = getLeapMonth(ly);for (let i = 1; i < lm; i++) {totalDays += getLunarMonthDays(ly, i);if (leapMonth === i) {totalDays += getLeapMonthDays(ly);}}
if (isLeap && leapMonth === lm) {totalDays += getLunarMonthDays(ly, lm);}
totalDays += ld - 1;const resultDate = new Date(baseDate.getTime() + totalDays * 24 * 60 * 60 * 1000);return {year: resultDate.getFullYear(),
month: resultDate.getMonth() + 1,
day: resultDate.getDate()};}
function getLunarYearDays(year) {const idx = year - LUNAR_START;if (idx < 0 || idx >= LUNAR_DATA.length) return 365;let sum = 0;const data = LUNAR_DATA[idx];for (let i = 1; i <= 12; i++) {sum += getLunarMonthDays(year, i);}
const leapMonth = getLeapMonth(year);if (leapMonth > 0) {sum += getLeapMonthDays(year);}
return sum;}
function getLeapMonth(year) {const idx = year - LUNAR_START;if (idx < 0 || idx >= LUNAR_DATA.length) return 0;return LUNAR_DATA[idx] & 0xf;}
function getLunarMonthDays(year, month) {const idx = year - LUNAR_START;if (idx < 0 || idx >= LUNAR_DATA.length) return 30;const data = LUNAR_DATA[idx];return (data & (0x10000 >> month)) ? 30 : 29;}
function getLeapMonthDays(year) {const idx = year - LUNAR_START;if (idx < 0 || idx >= LUNAR_DATA.length) return 29;const data = LUNAR_DATA[idx];return (data & 0x10000) ? 30 : 29;}
const SUMMER_TIME_PERIODS = [
{ start: new Date(1948, 5, 1), end: new Date(1948, 8, 12, 23, 59) },
{ start: new Date(1949, 3, 3), end: new Date(1949, 8, 10, 23, 59) },
{ start: new Date(1950, 3, 1), end: new Date(1950, 8, 9, 23, 59) },
{ start: new Date(1951, 4, 6), end: new Date(1951, 8, 8, 23, 59) },
{ start: new Date(1955, 4, 5), end: new Date(1955, 8, 8, 23, 59) },
{ start: new Date(1956, 4, 20), end: new Date(1956, 8, 29, 23, 59) },
{ start: new Date(1957, 4, 5), end: new Date(1957, 8, 21, 23, 59) },
{ start: new Date(1958, 4, 4), end: new Date(1958, 8, 20, 23, 59) },
{ start: new Date(1959, 4, 3), end: new Date(1959, 8, 19, 23, 59) },
{ start: new Date(1960, 4, 1), end: new Date(1960, 8, 17, 23, 59) },
{ start: new Date(1987, 4, 10), end: new Date(1987, 9, 11, 23, 59) },
{ start: new Date(1988, 4, 8), end: new Date(1988, 9, 9, 23, 59) }
];function getStandardTimeOffset(year, month, day) {const date = new Date(year, month - 1, day);const utc830Start = new Date(1954, 2, 21);const utc830End = new Date(1961, 7, 9);if (date >= utc830Start && date <= utc830End) {return 30;}
return 0;}
function isInSummerTime(year, month, day, hour, minute) {const date = new Date(year, month - 1, day, hour || 12, minute || 0);for (const period of SUMMER_TIME_PERIODS) {if (date >= period.start && date <= period.end) {return true;}}
return false;}
const LONGITUDE_CORRECTION = 32;let TIME_CORRECTION_SETTINGS = {useSummerTime: true,
useLongitude: true,
useYajasi: false};function correctTimeToSolarTime(year, month, day, hour, minute) {let totalMinutes = hour * 60 + (minute || 0);let correctedYear = year;let correctedMonth = month;let correctedDay = day;if (TIME_CORRECTION_SETTINGS.useSummerTime && isInSummerTime(year, month, day, hour, minute)) {totalMinutes -= 60;}
totalMinutes += getStandardTimeOffset(year, month, day);if (TIME_CORRECTION_SETTINGS.useLongitude) {totalMinutes -= LONGITUDE_CORRECTION;}
if (totalMinutes < 0) {totalMinutes += 24 * 60;correctedDay--;if (correctedDay < 1) {correctedMonth--;if (correctedMonth < 1) {correctedMonth = 12;correctedYear--;}
correctedDay = new Date(correctedYear, correctedMonth, 0).getDate();}} else if (totalMinutes >= 24 * 60) {totalMinutes -= 24 * 60;correctedDay++;const lastDay = new Date(correctedYear, correctedMonth, 0).getDate();if (correctedDay > lastDay) {correctedDay = 1;correctedMonth++;if (correctedMonth > 12) {correctedMonth = 1;correctedYear++;}}}
const correctedHour = Math.floor(totalMinutes / 60);const correctedMinute = totalMinutes % 60;return {year: correctedYear,
month: correctedMonth,
day: correctedDay,
hour: correctedHour,
minute: correctedMinute,
summerTimeCorrected: TIME_CORRECTION_SETTINGS.useSummerTime && isInSummerTime(year, month, day, hour, minute),
longitudeCorrected: TIME_CORRECTION_SETTINGS.useLongitude};}
function hourToSiji(hour, minute) {const totalMinutes = hour * 60 + (minute || 0);if (totalMinutes >= 23 * 60 + 30) return 0;if (totalMinutes < 1 * 60 + 30) return 0;return Math.floor((totalMinutes - 90) / 120) + 1;}
function adjustTime(y, m, d, h) {if (h < 0) return { y, m, d, h, hour: 12, minute: 0 };const sijiToHourMinute = [
[0, 30], [2, 30], [4, 30], [6, 30], [8, 30], [10, 30],
[12, 30], [14, 30], [16, 30], [18, 30], [20, 30], [22, 30]
];const [baseHour, baseMinute] = sijiToHourMinute[h];const corrected = correctTimeToSolarTime(y, m, d, baseHour, baseMinute);const newSiji = hourToSiji(corrected.hour, corrected.minute);if (newSiji === 0 && !TIME_CORRECTION_SETTINGS.useYajasi) {if (corrected.hour >= 23 && corrected.minute >= 30) {let nextDay = corrected.day + 1;let nextMonth = corrected.month;let nextYear = corrected.year;const lastDay = new Date(nextYear, nextMonth, 0).getDate();if (nextDay > lastDay) {nextDay = 1;nextMonth++;if (nextMonth > 12) {nextMonth = 1;nextYear++;}}
return { y: nextYear, m: nextMonth, d: nextDay, h: newSiji };}}
return {y: corrected.year,
m: corrected.month,
d: corrected.day,
h: newSiji,
hour: corrected.hour,
minute: corrected.minute};}
function getSolarTermTime(year, termIndex) {let termData = SOLAR_TERMS[year];if (!termData) {const years = Object.keys(SOLAR_TERMS).map(Number).sort((a, b) => a - b);let closest = years[0];for (const y of years) {if (y <= year) closest = y;else break;}
termData = SOLAR_TERMS[closest];}
if (!termData || termIndex < 0 || termIndex >= termData.length) {const defaultDays = [4, 6, 5, 6, 6, 7, 8, 8, 8, 8, 7];return { m: termIndex + 2, d: defaultDays[termIndex] || 5, h: 0, n: 0 };}
const term = termData[termIndex];if (Array.isArray(term)) {return { m: term[0], d: term[1], h: term[2], n: term[3] };}
return term;}
function isBeforeSolarTerm(year, month, day, hour, minute, termIndex) {const term = getSolarTermTime(year, termIndex);const currentTime = new Date(year, month - 1, day, hour || 0, minute || 0);const termTime = new Date(year, term.m - 1, term.d, term.h, term.n);return currentTime < termTime;}
function calcYearPillar(y, m, d, h, n) {let adjY = y;if (isBeforeSolarTerm(y, m, d, h || 0, n || 0, 0)) {adjY--;}
const si = (adjY - 4) % 10;const bi = (adjY - 4) % 12;return { s: STEM[si < 0 ? si + 10 : si], b: BRANCH[bi < 0 ? bi + 12 : bi] };}
function calcMonthPillar(y, m, d, h, n) {let solarMonth;let beforeTerm;if (m === 1) {const term = getSolarTermTime(y - 1, 11);const termTime = new Date(y, term.m - 1, term.d, term.h, term.n);const currentTime = new Date(y, m - 1, d, h || 0, n || 0);beforeTerm = currentTime < termTime;} else {const termIndex = m - 2;beforeTerm = isBeforeSolarTerm(y, m, d, h || 0, n || 0, termIndex);}
if (m === 1) {if (beforeTerm) {solarMonth = 11;} else {solarMonth = 12;}} else if (m === 2) {if (beforeTerm) {solarMonth = 12;} else {solarMonth = 1;}} else {if (beforeTerm) {solarMonth = m - 2;} else {solarMonth = m - 1;}}
const isBeforeLichun = isBeforeSolarTerm(y, m, d, h || 0, n || 0, 0);const yearForStem = isBeforeLichun ? y - 1 : y;const yearIdx = ((yearForStem - 4) % 60 + 60) % 60;const ysi = yearIdx % 10;const monthBranchIndex = (solarMonth + 1) % 12;const inMonthStem = ((ysi % 5) * 2 + 2) % 10;const msi = (inMonthStem + solarMonth - 1) % 10;return { s: STEM[msi], b: BRANCH[monthBranchIndex], solarMonth: solarMonth };}
function calcDayPillar(y, m, d) {const a = Math.floor((14 - m) / 12);const adjY = y + 4800 - a;const adjM = m + 12 * a - 3;const jdn = d + Math.floor((153 * adjM + 2) / 5) + 365 * adjY + Math.floor(adjY / 4) - Math.floor(adjY / 100) + Math.floor(adjY / 400) - 32045;const baseJdn = 2445731;const idx60 = ((jdn - baseJdn) % 60 + 60) % 60;return { s: STEM[idx60 % 10], b: BRANCH[idx60 % 12] };}
function calcHourPillar(dayStem, h) {if (h < 0 || h > 11) return null;const hbi = h;const dsi = STEM.indexOf(dayStem);const ziHourStem = ((dsi % 5) * 2) % 10;const hsi = (ziHourStem + hbi) % 10;return { s: STEM[hsi], b: BRANCH[hbi] };}
function analyzeJijanggan(saju) {const dm = saju.day.s;const dmi = STEM.indexOf(dm);const result = { pillars: [], summary: { elements: {wood:0,fire:0,earth:0,metal:0,water:0}, gods: {}, tougans: [] } };const pillarNames = ['ë…„ì§€', 'ì›”ì§€', 'ì¼ì§€', 'ì‹œì§€'];const branches = [saju.year?.b, saju.month?.b, saju.day?.b, saju.hour?.b];const stems = [saju.year?.s, saju.month?.s, saju.day?.s, saju.hour?.s];branches.forEach((branch, pIdx) => {if (!branch) return;const bi = BRANCH.indexOf(branch);const jj = JIJANGGAN[bi];const pillarInfo = {name: pillarNames[pIdx],
branch: branch,
hidden: []};jj.forEach((h, hIdx) => {const hiddenStem = STEM[h.stem];const god = getTenGod(hiddenStem, dm);const isJunggi = hIdx === jj.length - 1;const tougan = stems.some((s, si) => s && STEM.indexOf(s) === h.stem);const tonggeun = stems.some((s, si) => {if (!s) return false;return STEM.indexOf(s) === h.stem;});const hiddenInfo = {stem: hiddenStem,
type: isJunggi ? 'ì •ê¸°' : (hIdx === 0 ? 'ì—¬ê¸°' : 'ì¤‘ê¸°'),
days: h.days,
god: god,
tougan: tougan,
tonggeun: tonggeun,
strength: isJunggi ? 1.0 : (hIdx === 0 ? 0.3 : 0.5)};pillarInfo.hidden.push(hiddenInfo);result.summary.elements[hiddenStem.e] += hiddenInfo.strength;if (!result.summary.gods[god.k]) result.summary.gods[god.k] = 0;result.summary.gods[god.k] += hiddenInfo.strength;if (tougan && !result.summary.tougans.find(t => t.stem === h.stem)) {result.summary.tougans.push({stem: h.stem,
name: hiddenStem.c + hiddenStem.k,
from: pillarNames[pIdx],
god: god.k});}});result.pillars.push(pillarInfo);});return result;}
function analyzeTonggeunTougan(saju) {const result = { tonggeun: [], tougan: [] };const dm = saju.day.s;const pillarNames = ['ë…„ì£¼', 'ì›”ì£¼', 'ì¼ì£¼', 'ì‹œì£¼'];const branches = [saju.year?.b, saju.month?.b, saju.day?.b, saju.hour?.b];const stems = [saju.year?.s, saju.month?.s, saju.day?.s, saju.hour?.s];stems.forEach((stem, sIdx) => {if (!stem) return;const si = STEM.indexOf(stem);const roots = [];branches.forEach((branch, bIdx) => {if (!branch) return;const bi = BRANCH.indexOf(branch);const jj = JIJANGGAN[bi];jj.forEach((h, hIdx) => {if (h.stem === si) {const isJunggi = hIdx === jj.length - 1;roots.push({pillar: pillarNames[bIdx].slice(0, 1) + 'ì§€',
branch: branch.c,
type: isJunggi ? 'ì •ê¸°' : (hIdx === 0 ? 'ì—¬ê¸°' : 'ì¤‘ê¸°'),
strength: isJunggi ? 'ê°•' : (hIdx === 0 ? 'ì•½' : 'ì¤‘')});}});});if (roots.length > 0) {result.tonggeun.push({pillar: pillarNames[sIdx],
stem: stem.c + stem.k,
god: sIdx === 2 ? 'ì¼ê°„' : getTenGod(stem, dm).k,
roots: roots});}});branches.forEach((branch, bIdx) => {if (!branch) return;const bi = BRANCH.indexOf(branch);const jj = JIJANGGAN[bi];jj.forEach(h => {stems.forEach((stem, sIdx) => {if (!stem) return;if (STEM.indexOf(stem) === h.stem) {const existing = result.tougan.find(t => t.stem === stem.c + stem.k);if (!existing) {result.tougan.push({stem: stem.c + stem.k,
pillar: pillarNames[sIdx],
from: pillarNames[bIdx].slice(0, 1) + 'ì§€',
god: sIdx === 2 ? 'ì¼ê°„' : getTenGod(stem, dm).k});}}});});});return result;}
function getTenGod(stem, dayStem) {const dEl = EL_ORDER.indexOf(dayStem.e);const sEl = EL_ORDER.indexOf(stem.e);const diff = (sEl - dEl + 5) % 5;const samePol = (dayStem.y === stem.y);const godKeys = ['peer','robWealth','eatingGod','hurtOfficer','indirectWealth','directWealth','indirectOfficer','directOfficer','indirectSeal','directSeal'];const godMap = { 0: samePol ? 0 : 1, 1: samePol ? 2 : 3, 2: samePol ? 4 : 5, 3: samePol ? 6 : 7, 4: samePol ? 8 : 9 };return TEN_GODS[godKeys[godMap[diff]]];}
function getTwelveState(dayStem, branch) {const starts = [11, 6, 2, 9, 2, 9, 5, 0, 8, 3];const dsi = STEM.indexOf(dayStem);const bi = BRANCH.indexOf(branch);const start = starts[dsi];const isYang = dayStem.y;const stateIdx = isYang ?
(bi - start + 12) % 12 :
(start - bi + 12) % 12;return TWELVE_STATES[stateIdx];}
function calcNapeum(stem, branch) {const si = STEM.indexOf(stem);const bi = BRANCH.indexOf(branch);let idx60 = -1;for (let i = 0; i < 60; i++) {if (i % 10 === si && i % 12 === bi) {idx60 = i;break;}}
if (idx60 === -1) idx60 = 0;const idx = Math.floor(idx60 / 2);const napeum = SOUND_ELEMENT[idx];return {name: napeum.name,
element: napeum.element,
elementK: ELEMENT[napeum.element].k,
desc: napeum.desc};}
function calcMyunggung(monthBranch, hourBranch) {const mbi = BRANCH.indexOf(monthBranch);const hbi = BRANCH.indexOf(hourBranch);const mgIdx = (14 - mbi - hbi + 24) % 12;const mgBranch = BRANCH[mgIdx];const mgDesc = {0: {name: 'ìê¶(å­å®®)', trait: 'ì§€í˜œë¡­ê³  ì¹¨ì°©í•¨. ë¹„ë°€ì´ ë§ê³  ë°¤ì— í™œë™ì .', career: 'ì—°êµ¬, ì² í•™, ì•¼ê°„ì—…ì¢…'},
1: {name: 'ì¶•ê¶(ä¸‘å®®)', trait: 'ì„±ì‹¤í•˜ê³  ëˆê¸° ìˆìŒ. ì¬ë¬¼ì„ ëª¨ìœ¼ëŠ” ì¬ì£¼.', career: 'ê¸ˆìœµ, ë¶€ë™ì‚°, ë†ì—…'},
2: {name: 'ì¸ê¶(å¯…å®®)', trait: 'ì•¼ì‹¬ì°¨ê³  ìš©ê°í•¨. ë¦¬ë”ì‹­ì´ ê°•í•¨.', career: 'êµ°ì¸, ì •ì¹˜, ìŠ¤í¬ì¸ '},
3: {name: 'ë¬˜ê¶(å¯å®®)', trait: 'ì˜¨í™”í•˜ê³  ì˜ˆìˆ ì . ì¸ê¸°ê°€ ë§ìŒ.', career: 'ì˜ˆìˆ , ë””ìì¸, ì„œë¹„ìŠ¤'},
4: {name: 'ì§„ê¶(è¾°å®®)', trait: 'ë³€í™”ë¬´ìŒí•˜ê³  ì‹ ë¹„ë¡œì›€. í° ê¿ˆì„ ê°€ì§.', career: 'ì¢…êµ, ì² í•™, ì°½ì—…'},
5: {name: 'ì‚¬ê¶(å·³å®®)', trait: 'ì§€í˜œë¡­ê³  ì‹ ì¤‘í•¨. ë¹„ë°€ì„ ì˜ ì§€í‚´.', career: 'ë²•ë¥ , ì˜ë£Œ, ìƒë‹´'},
6: {name: 'ì˜¤ê¶(åˆå®®)', trait: 'ì—´ì •ì ì´ê³  ì ê·¹ì . ëª…ì˜ˆë¥¼ ì¤‘ì‹œ.', career: 'ì •ì¹˜, ì—°ì˜ˆ, êµìœ¡'},
7: {name: 'ë¯¸ê¶(æœªå®®)', trait: 'ë¶€ë“œëŸ½ê³  ì˜ˆìˆ ì . ë´‰ì‚¬ì •ì‹ ì´ ê°•í•¨.', career: 'ì˜ˆìˆ , ì¢…êµ, ì˜ë£Œ'},
8: {name: 'ì‹ ê¶(ç”³å®®)', trait: 'ì˜ë¦¬í•˜ê³  ì¬ì¹˜ ìˆìŒ. ë§ì†œì”¨ê°€ ì¢‹ìŒ.', career: 'ì˜ì—…, ì™¸êµ, IT'},
9: {name: 'ìœ ê¶(é…‰å®®)', trait: 'ì„¬ì„¸í•˜ê³  ì™„ë²½ì£¼ì˜. ë¯¸ì  ê°ê°ì´ ë›°ì–´ë‚¨.', career: 'ê¸ˆìœµ, ë³´ì„, ë¯¸ìš©'},
10: {name: 'ìˆ ê¶(æˆŒå®®)', trait: 'ì˜ë¦¬ ìˆê³  ì¶©ì§í•¨. ì±…ì„ê°ì´ ê°•í•¨.', career: 'êµ°ì¸, ê²½ì°°, ë³´ì•ˆ'},
11: {name: 'í•´ê¶(äº¥å®®)', trait: 'ë‚™ì²œì ì´ê³  ëŒ€ì¸ê´€ê³„ ì¢‹ìŒ. ë³µì´ ë§ìŒ.', career: 'ë¬´ì—­, ì—¬í–‰, ìœ í†µ'}};return {branch: mgBranch,
index: mgIdx,
...mgDesc[mgIdx]};}
function calcTaewon(yearStem, monthStem, monthBranch) {const msi = STEM.indexOf(monthStem);const mbi = BRANCH.indexOf(monthBranch);const tStem = STEM[(msi + 1) % 10];const tBranch = BRANCH[(mbi + 3) % 12];const napeum = calcNapeum(tStem, tBranch);return {stem: tStem,
branch: tBranch,
pillar: tStem.c + tBranch.c,
napeum: napeum,
desc: `ì‰íƒœ ì‹œì ì˜ ê¸°ìš´. ${napeum.name}(${napeum.elementK})ì˜ ê¸°ìš´ìœ¼ë¡œ íƒœì–´ë‚¨.`};}
function analyzeDirectionalHarmony(saju) {const branches = [];if (saju.year) branches.push(BRANCH.indexOf(saju.year.b));if (saju.month) branches.push(BRANCH.indexOf(saju.month.b));if (saju.day) branches.push(BRANCH.indexOf(saju.day.b));if (saju.hour) branches.push(BRANCH.indexOf(saju.hour.b));const results = [];for (const bh of DIRECTIONAL_HARMONY) {const has = bh.branches.map(b => branches.includes(b));const count = has.filter(x => x).length;if (count === 3) {results.push({type: 'complete',
name: bh.name,
dir: bh.dir,
element: bh.element,
elementK: ELEMENT[bh.element].k,
branches: bh.branches.map(b => BRANCH[b].c).join(''),
power: 'ê°•ë ¥',
desc: `${bh.dir} ì™„ì„±! ${ELEMENT[bh.element].k} ê¸°ìš´ì´ ë§¤ìš° ê°•í•´ì§‘ë‹ˆë‹¤.`});} else if (count === 2) {const missing = bh.branches.find((b, i) => !has[i]);results.push({type: 'partial',
name: bh.name + ' ë¯¸ì™„',
dir: bh.dir,
element: bh.element,
elementK: ELEMENT[bh.element].k,
branches: bh.branches.filter((b, i) => has[i]).map(b => BRANCH[b].c).join(''),
missing: BRANCH[missing].c,
power: 'ì¤‘ê°„',
desc: `${BRANCH[missing].c}ê°€ ì˜¤ë©´ ${bh.dir}ì´ ì™„ì„±ë©ë‹ˆë‹¤.`});}}
return results;}
function analyzeHiddenHarmony(saju) {const branches = [];const pillars = ['ë…„ì§€', 'ì›”ì§€', 'ì¼ì§€', 'ì‹œì§€'];if (saju.year) branches.push({idx: BRANCH.indexOf(saju.year.b), name: 'ë…„ì§€', c: saju.year.b.c});if (saju.month) branches.push({idx: BRANCH.indexOf(saju.month.b), name: 'ì›”ì§€', c: saju.month.b.c});if (saju.day) branches.push({idx: BRANCH.indexOf(saju.day.b), name: 'ì¼ì§€', c: saju.day.b.c});if (saju.hour) branches.push({idx: BRANCH.indexOf(saju.hour.b), name: 'ì‹œì§€', c: saju.hour.b.c});const results = [];for (let i = 0; i < branches.length; i++) {for (let j = i + 1; j < branches.length; j++) {for (const ah of HIDDEN_HARMONY) {if ((branches[i].idx === ah.a && branches[j].idx === ah.b) ||
(branches[i].idx === ah.b && branches[j].idx === ah.a)) {results.push({name: ah.name,
positions: `${branches[i].name}(${branches[i].c})â†”${branches[j].name}(${branches[j].c})`,
desc: ah.desc,
meaning: 'ê²‰ìœ¼ë¡œëŠ” ì•ˆ ë“œëŸ¬ë‚˜ì§€ë§Œ ì†ìœ¼ë¡œ í†µí•˜ëŠ” ê´€ê³„. ìˆ¨ê²¨ì§„ ì¸ì—°, ë¹„ë°€ìŠ¤ëŸ¬ìš´ ê´€ê³„ë¥¼ ì˜ë¯¸.'});}}}}
return results;}
function analyzeGongmangHaeso(saju, gongmang) {if (!gongmang || !gongmang.affected || gongmang.affected.length === 0) {return { hasGongmang: false, results: [] };}
const branches = [];if (saju.year) branches.push(BRANCH.indexOf(saju.year.b));if (saju.month) branches.push(BRANCH.indexOf(saju.month.b));if (saju.day) branches.push(BRANCH.indexOf(saju.day.b));if (saju.hour) branches.push(BRANCH.indexOf(saju.hour.b));const results = [];for (const affected of gongmang.affected) {const gmBranchIdx = BRANCH.findIndex(b => affected.includes(b.k) || affected.includes(b.c));if (gmBranchIdx === -1) continue;let resolved = false;let resolveMethod = '';const chungPair = (gmBranchIdx + 6) % 12;if (branches.includes(chungPair)) {resolved = true;resolveMethod = `${BRANCH[chungPair].c}(ì¶©)ìœ¼ë¡œ ê³µë§ í•´ì†Œ`;}
const samhapSets = [[0,4,8], [1,5,9], [2,6,10], [3,7,11]];for (const set of samhapSets) {if (set.includes(gmBranchIdx)) {const others = set.filter(s => s !== gmBranchIdx);if (others.every(o => branches.includes(o))) {resolved = true;resolveMethod = `ì‚¼í•©(${set.map(s => BRANCH[s].c).join('')})ìœ¼ë¡œ ê³µë§ í•´ì†Œ`;}}}
results.push({position: affected,
branch: BRANCH[gmBranchIdx].c,
resolved: resolved,
method: resolveMethod,
effect: resolved ?
'ê³µë§ì´ í•´ì†Œë˜ì–´ í•´ë‹¹ ê¸°ìš´ì´ ì œ ì—­í• ì„ í•©ë‹ˆë‹¤.' :
'ê³µë§ì´ í•´ì†Œë˜ì§€ ì•Šì•„ í•´ë‹¹ ê¸°ìš´ì´ ì•½í•©ë‹ˆë‹¤. ì„¸ìš´ì´ë‚˜ ëŒ€ìš´ì—ì„œ í•´ì†Œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'});}
return { hasGongmang: true, results };}
function analyzeSinsalPosition(saju) {const results = [];const positions = [
{name: 'ë…„ì§€', b: saju.year?.b, meaning: 'ì¡°ìƒ, ì‚¬íšŒ', age: 'ìœ ë…„ê¸°(0-15ì„¸)'},
{name: 'ì›”ì§€', b: saju.month?.b, meaning: 'ë¶€ëª¨, í˜•ì œ', age: 'ì²­ë…„ê¸°(15-30ì„¸)'},
{name: 'ì¼ì§€', b: saju.day?.b, meaning: 'ë°°ìš°ì, ë³¸ì¸', age: 'ì¤‘ë…„ê¸°(30-45ì„¸)'},
{name: 'ì‹œì§€', b: saju.hour?.b, meaning: 'ìë…€, ë§ë…„', age: 'ë§ë…„ê¸°(45ì„¸ ì´í›„)'}
];const ybi = BRANCH.indexOf(saju.year?.b);const taohua = {0:9,1:6,2:3,3:0,4:9,5:6,6:3,7:0,8:9,9:6,10:3,11:0};for (const pos of positions) {if (!pos.b) continue;const bi = BRANCH.indexOf(pos.b);if (bi === taohua[ybi]) {results.push({sinsal: 'ë„í™”ì‚´(æ¡ƒèŠ±æ®º)',
position: pos.name,
interpretation: pos.name === 'ë…„ì§€' ? 'ì–´ë¦´ ë•Œë¶€í„° ì¸ê¸°ê°€ ë§ìŒ. ì´ë¥¸ ì—°ì•  ê°€ëŠ¥ì„±.' :
pos.name === 'ì›”ì§€' ? 'í•™ì°½ì‹œì ˆ ì¸ê¸° ë§ìŒ. ì—°ì˜ˆì¸ ê¸°ì§ˆ.' :
pos.name === 'ì¼ì§€' ? 'ë°°ìš°ìê°€ ë§¤ë ¥ì . ë³¸ì¸ë„ ë§¤ë ¥ì´ ë„˜ì¹¨.' :
'ìë…€ê°€ ì˜ˆì˜ê±°ë‚˜ ì¸ê¸° ë§ìŒ. ë§ë…„ì—ë„ ì¸ê¸°.',
advice: pos.name === 'ì¼ì§€' ? 'ë°°ìš°ìì™€ì˜ ê´€ê³„ì—ì„œ ë°”ëŒê¸° ì¡°ì‹¬' : 'ë§¤ë ¥ì„ ì¥ì ìœ¼ë¡œ í™œìš©í•˜ì„¸ìš”'});}}
const yima = {0:2,1:11,2:8,3:5,4:2,5:11,6:8,7:5,8:2,9:11,10:8,11:5};for (const pos of positions) {if (!pos.b) continue;const bi = BRANCH.indexOf(pos.b);if (bi === yima[ybi]) {results.push({sinsal: 'ì—­ë§ˆì‚´(é©›é¦¬æ®º)',
position: pos.name,
interpretation: pos.name === 'ë…„ì§€' ? 'ì¡°ìƒì´ ì´ì‚¬ê°€ ë§ì•˜ê±°ë‚˜ íƒ€í–¥ì‚´ì´.' :
pos.name === 'ì›”ì§€' ? 'ì–´ë¦° ì‹œì ˆ ì´ì‚¬ê°€ ë§ìŒ. í•´ì™¸ ìœ í•™ ê°€ëŠ¥.' :
pos.name === 'ì¼ì§€' ? 'ì§ì—…ìƒ ì¶œì¥/ì´ë™ì´ ë§ìŒ. ë°°ìš°ìê°€ ë°”ìœ ì‚¬ëŒ.' :
'ë§ë…„ì—ë„ í™œë™ì . ìë…€ê°€ ë©€ë¦¬ ê°.',
advice: 'ê°€ë§Œíˆ ìˆìœ¼ë©´ ì•ˆ ì¢‹ìŒ. í™œë°œíˆ ì›€ì§ì´ì„¸ìš”!'});}}
const huagai = {0:4,1:1,2:10,3:7,4:4,5:1,6:10,7:7,8:4,9:1,10:10,11:7};for (const pos of positions) {if (!pos.b) continue;const bi = BRANCH.indexOf(pos.b);if (bi === huagai[ybi]) {results.push({sinsal: 'í™”ê°œì‚´(è¯è“‹æ®º)',
position: pos.name,
interpretation: pos.name === 'ë…„ì§€' ? 'ì¡°ìƒ ì¤‘ ì˜ˆìˆ ê°€ë‚˜ ì¢…êµì¸ì´ ìˆìŒ.' :
pos.name === 'ì›”ì§€' ? 'í•™ì°½ì‹œì ˆ ì™¸ë¡œì›€. ì˜ˆìˆ /ì² í•™ì— ê´€ì‹¬.' :
pos.name === 'ì¼ì§€' ? 'ë°°ìš°ìê°€ ì˜ˆìˆ ì ì´ê±°ë‚˜ ì¢…êµì . ì •ì‹ ì„¸ê³„ ì¤‘ì‹œ.' :
'ë§ë…„ì— ì¢…êµ/ì² í•™ì— ë¹ ì§. ê³ ë…í•  ìˆ˜ ìˆìŒ.',
advice: 'ì˜ˆìˆ , ì¢…êµ, í•™ë¬¸ ë“± ì •ì‹ ì  í™œë™ì—ì„œ ìœ„ì•ˆì„ ì°¾ìœ¼ì„¸ìš”'});}}
return results;}
function analyzeGyoungi(luck, birthYear, currentYear) {const age = currentYear - birthYear + 1;const results = [];for (let i = 0; i < luck.length - 1; i++) {const curr = luck[i];const next = luck[i + 1];const transitionAge = next.startAge;const transitionYear = birthYear + transitionAge - 1;if (Math.abs(age - transitionAge) <= 2) {const stemChange = `${curr.s.c}â†’${next.s.c}`;const branchChange = `${curr.b.c}â†’${next.b.c}`;const fromEl = ELEMENT[curr.s.e].k + ELEMENT[curr.b.e].k;const toEl = ELEMENT[next.s.e].k + ELEMENT[next.b.e].k;let intensity = 'normal';let warning = '';const elIdx1 = EL_ORDER.indexOf(curr.s.e);const elIdx2 = EL_ORDER.indexOf(next.s.e);if (Math.abs(elIdx1 - elIdx2) === 2 || Math.abs(elIdx1 - elIdx2) === 3) {intensity = 'strong';warning = 'ì˜¤í–‰ì´ í¬ê²Œ ë°”ë€ŒëŠ” ì‹œê¸°. ìƒí™œ ì „ë°˜ì— ë³€í™”ê°€ ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';}
if (curr.rating !== next.rating) {intensity = 'strong';if (curr.rating === 'good' && next.rating === 'bad') {warning += ' ì¢‹ì€ ìš´ì—ì„œ ì–´ë ¤ìš´ ìš´ìœ¼ë¡œ ë°”ë€ë‹ˆë‹¤. ë¯¸ë¦¬ ëŒ€ë¹„í•˜ì„¸ìš”.';} else if (curr.rating === 'bad' && next.rating === 'good') {warning += ' ì–´ë ¤ìš´ ìš´ì´ ëë‚˜ê³  ì¢‹ì€ ìš´ì´ ì˜µë‹ˆë‹¤. í¬ë§ì„ ê°€ì§€ì„¸ìš”!';}}
results.push({transitionAge: transitionAge,
transitionYear: transitionYear,
from: `${curr.s.c}${curr.b.c} (${fromEl})`,
to: `${next.s.c}${next.b.c} (${toEl})`,
stemChange: stemChange,
branchChange: branchChange,
intensity: intensity,
warning: warning || 'ëŒ€ìš´ì´ ìì—°ìŠ¤ëŸ½ê²Œ ì „í™˜ë©ë‹ˆë‹¤.',
advice: intensity === 'strong' ?
'ì´ ì‹œê¸°ëŠ” ì¸ìƒì˜ ì¤‘ìš”í•œ ì „í™˜ì ì…ë‹ˆë‹¤. í° ê²°ì •ì€ ì‹ ì¤‘í•˜ê²Œ!' :
'ë³€í™”ì— ìì—°ìŠ¤ëŸ½ê²Œ ì ì‘í•˜ë©´ ë©ë‹ˆë‹¤.',
isCurrent: Math.abs(age - transitionAge) <= 1});}}
return results;}
function calcStrength(saju) {const dm = saju.day.s;const dme = dm.e;const mbi = BRANCH.findIndex(b => b.c === saju.month.b.c);const season = SEASON[mbi];let score = 0;const factors = [];const peerEl = dme;const sealEl = EL_ORDER[(EL_ORDER.indexOf(dme) + 4) % 5];const exprEl = EL_ORDER[(EL_ORDER.indexOf(dme) + 1) % 5];const wealthEl = EL_ORDER[(EL_ORDER.indexOf(dme) + 2) % 5];const officerEl = EL_ORDER[(EL_ORDER.indexOf(dme) + 3) % 5];const myEls = [peerEl, sealEl];const JIJANGGAN_W = {0: [{s:8, w:0.33}, {s:9, w:0.67}],
1: [{s:9, w:0.3}, {s:7, w:0.1}, {s:5, w:0.6}],
2: [{s:4, w:0.23}, {s:2, w:0.23}, {s:0, w:0.54}],
3: [{s:0, w:0.33}, {s:1, w:0.67}],
4: [{s:1, w:0.3}, {s:9, w:0.1}, {s:4, w:0.6}],
5: [{s:4, w:0.23}, {s:6, w:0.23}, {s:2, w:0.54}],
6: [{s:2, w:0.3}, {s:5, w:0.33}, {s:3, w:0.37}],
7: [{s:3, w:0.3}, {s:1, w:0.1}, {s:5, w:0.6}],
8: [{s:4, w:0.23}, {s:8, w:0.23}, {s:6, w:0.54}],
9: [{s:6, w:0.33}, {s:7, w:0.67}],
10:[{s:7, w:0.3}, {s:3, w:0.1}, {s:4, w:0.6}],
11:[{s:4, w:0.23}, {s:0, w:0.23}, {s:8, w:0.54}]};const allStems = [saju.year.s, saju.month.s, saju.hour?.s].filter(s => s);const allBranches = [saju.year.b, saju.month.b, saju.day.b, saju.hour?.b].filter(b => b);const branchIndices = allBranches.map(b => BRANCH.findIndex(br => br.c === b.c));const STEM_COMBINE = [[0,5],[1,6],[2,7],[3,8],[4,9]];let disabledSeals = [];let disabledPeers = [];const adjacentPairs = [
{ pos1: 'year', pos2: 'month', s1: saju.year.s, s2: saju.month.s },
{ pos1: 'month', pos2: 'day', s1: saju.month.s, s2: saju.day.s },
{ pos1: 'day', pos2: 'hour', s1: saju.day.s, s2: saju.hour?.s }
];adjacentPairs.forEach(pair => {if (!pair.s1 || !pair.s2) return;const idx1 = STEM.findIndex(s => s.c === pair.s1.c);const idx2 = STEM.findIndex(s => s.c === pair.s2.c);const isCombine = STEM_COMBINE.some(([a, b]) =>
(idx1 === a && idx2 === b) || (idx1 === b && idx2 === a)
);if (isCombine) {if (pair.pos1 !== 'day') {if (pair.s1.e === sealEl) disabledSeals.push(idx1);if (pair.s1.e === peerEl) disabledPeers.push(idx1);}
if (pair.pos2 !== 'day') {if (pair.s2.e === sealEl) disabledSeals.push(idx2);if (pair.s2.e === peerEl) disabledPeers.push(idx2);}
factors.push({ l: 'ğŸ”— ì²œê°„í•©', v: `${pair.s1.c}${pair.s2.c}åˆ (${pair.pos1}-${pair.pos2}) â†’ ë¬´ë ¥í™”`, p: false });}});const monthScore = {2: {wood:3, fire:1, earth:-2, metal:-2, water:-1},
3: {wood:3, fire:2, earth:-2, metal:-2, water:-1},
4: {earth:2, wood:0, fire:-1, metal:-1, water:-1},
5: {fire:3, earth:1, metal:-2, water:-2, wood:0},
6: {fire:3, earth:2, metal:-2, water:-2, wood:0},
7: {earth:2, fire:1, wood:-1, metal:-1, water:-2},
8: {metal:3, water:1, wood:-2, fire:-2, earth:0},
9: {metal:3, water:2, wood:-2, fire:-2, earth:0},
10: {earth:2, metal:1, fire:-1, wood:-2, water:-1},
11: {water:3, wood:1, fire:-2, earth:-2, metal:0},
0: {water:3, wood:2, fire:-2, earth:-2, metal:0},
1: {earth:2, water:0, metal:-1, wood:-1, fire:-2}};const ms = monthScore[mbi][dme];const deukRyung = ms >= 2;score += ms * 6;const monthNames = ['å­','ä¸‘','å¯…','å¯','è¾°','å·³','åˆ','æœª','ç”³','é…‰','æˆŒ','äº¥'];factors.push({ l: 'ì›”ë ¹ë“ë ¹', v: `${monthNames[mbi]}ì›” ${deukRyung ? 'âœ“ë‹¹ë ¹' : 'âœ—ì‹¤ë ¹'} (${ms >= 0 ? '+' : ''}${ms*6})`, p: deukRyung });let realRootScore = 0;let hasRealRoot = { day: false, hour: false };const TWELVE_STARTS = [11, 6, 2, 9, 2, 9, 5, 0, 8, 3];const TWELVE_NAMES = ['ì¥ìƒ','ëª©ìš•','ê´€ëŒ€','ê±´ë¡','ì œì™•','ì‡ ','ë³‘','ì‚¬','ë¬˜','ì ˆ','íƒœ','ì–‘'];const dmIdx = STEM.findIndex(s => s.c === dm.c);const isYangGan = dmIdx % 2 === 0;allBranches.forEach((b, idx) => {const bi = BRANCH.findIndex(br => br.c === b.c);const position = ['year', 'month', 'day', 'hour'][idx];const posWeight = position === 'day' ? 1.5 : position === 'hour' ? 1.3 : position === 'month' ? 1.2 : 1.0;let twIdx = bi - TWELVE_STARTS[dmIdx];if (!isYangGan) twIdx = -twIdx;twIdx = ((twIdx % 12) + 12) % 12;const twName = TWELVE_NAMES[twIdx];let twelveBonus = 0;if (twName === 'ê±´ë¡' || twName === 'ì œì™•') {twelveBonus = 4 * posWeight;if (position === 'day' || position === 'hour') hasRealRoot[position] = true;} else if (twName === 'ê´€ëŒ€' || twName === 'ì¥ìƒ') {twelveBonus = 2 * posWeight;if (position === 'day' || position === 'hour') hasRealRoot[position] = true;}
realRootScore += twelveBonus;const hidden = JIJANGGAN_W[bi] || [];hidden.forEach(h => {const hStem = STEM[h.s];if (hStem.e === peerEl || hStem.e === sealEl) {realRootScore += h.w * posWeight * 2;if (position === 'day') hasRealRoot.day = true;if (position === 'hour') hasRealRoot.hour = true;}});});score += Math.min(realRootScore, 15);const rootStrong = realRootScore >= 4;factors.push({ l: 'í†µê·¼(ì‹¤ì œë¿Œë¦¬)', v: rootStrong ? `âœ“ ${realRootScore.toFixed(1)}ì ` : `âœ— ì•½ê·¼ (${realRootScore.toFixed(1)})`, p: rootStrong });let helpCount = 0;let attackCount = 0;let exprStemCount = 0;allStems.forEach((st, idx) => {const si = STEM.findIndex(s => s.c === st.c);if (disabledSeals.includes(si) || disabledPeers.includes(si)) {factors.push({ l: 'âš ï¸ í•©ê±°', v: `${st.c} ë¬´ë ¥í™”ë¨`, p: false });return;}
if (st.e === peerEl) { helpCount++; score += 2.5; }
if (st.e === sealEl) { helpCount++; score += 2; }
if (st.e === officerEl) { attackCount++; score -= 2; }
if (st.e === wealthEl) { attackCount++; score -= 1; }
if (st.e === exprEl) { exprStemCount++; score -= 2; }});if (helpCount > 0) factors.push({ l: 'ì²œê°„ ë¹„ê²/ì¸ì„±', v: `${helpCount}ê°œ íˆ¬ì¶œ`, p: true });if (attackCount > 0) factors.push({ l: 'ì²œê°„ ê´€/ì¬ ì••ë°•', v: `${attackCount}ê°œ`, p: false });let exprTotal = exprStemCount;allBranches.forEach(b => { if (b.e === exprEl) exprTotal++; });if (exprTotal >= 3) {score -= 4;factors.push({ l: 'âš ï¸ ì‹ìƒíƒœê³¼', v: `${exprTotal}ê°œ â†’ ì„¤ê¸°ê³¼ë‹¤ (âˆ’4)`, p: false });} else if (exprStemCount >= 2) {score -= 2;factors.push({ l: 'âš ï¸ ì‹ìƒ íˆ¬ì¶œ', v: `${exprStemCount}å¤©å¹² (âˆ’2)`, p: false });}
let officerTotal = 0;[...allStems, ...allBranches].forEach(p => { if (p.e === officerEl) officerTotal++; });if (officerTotal >= 2) {score -= 2;factors.push({ l: 'ê´€ì‚´ì••ë°•', v: `${officerTotal}ê°œ (âˆ’2)`, p: false });}
const DIRECTIONAL = [
{ branches: [2, 3, 4], element: 'wood', name: 'å¯…å¯è¾° ëª©êµ­' },
{ branches: [5, 6, 7], element: 'fire', name: 'å·³åˆæœª í™”êµ­' },
{ branches: [8, 9, 10], element: 'metal', name: 'ç”³é…‰æˆŒ ê¸ˆêµ­' },
{ branches: [11, 0, 1], element: 'water', name: 'äº¥å­ä¸‘ ìˆ˜êµ­' }
];let directionalFormed = null;DIRECTIONAL.forEach(d => {if (d.branches.every(b => branchIndices.includes(b))) {directionalFormed = d;if (d.element === peerEl) {score += 8;factors.push({ l: 'ğŸ”¥ ë°©í•©', v: `${d.name} â†’ ë¹„ê² (+8)`, p: true });} else if (d.element === sealEl) {score += 6;factors.push({ l: 'ğŸ”¥ ë°©í•©', v: `${d.name} â†’ ì¸ì„± (+6)`, p: true });} else if (d.element === exprEl) {score -= 5;factors.push({ l: 'âš ï¸ ë°©í•©', v: `${d.name} â†’ ì„¤ê¸° (âˆ’5)`, p: false });} else if (d.element === officerEl) {score -= 6;factors.push({ l: 'âš ï¸ ë°©í•©', v: `${d.name} â†’ ì••ë°• (âˆ’6)`, p: false });}}});const THREE_HARMONY = [
{ branches: [2, 6, 10], element: 'fire', name: 'å¯…åˆæˆŒ í™”êµ­' },
{ branches: [8, 0, 4], element: 'water', name: 'ç”³å­è¾° ìˆ˜êµ­' },
{ branches: [5, 9, 1], element: 'metal', name: 'å·³é…‰ä¸‘ ê¸ˆêµ­' },
{ branches: [11, 3, 7], element: 'wood', name: 'äº¥å¯æœª ëª©êµ­' }
];if (!directionalFormed) {THREE_HARMONY.forEach(th => {const hasCount = th.branches.filter(b => branchIndices.includes(b)).length;const hasCenter = branchIndices.includes(th.branches[1]);if (hasCount >= 2 && hasCenter) {if (th.element === peerEl) {const bonus = hasCount === 3 ? 7 : 4;score += bonus;factors.push({ l: 'ğŸ”¥ ì‚¼í•©', v: `${th.name} â†’ ë¹„ê² (+${bonus})`, p: true });} else if (th.element === sealEl) {const bonus = hasCount === 3 ? 5 : 3;score += bonus;factors.push({ l: 'ğŸ”¥ ì‚¼í•©', v: `${th.name} â†’ ì¸ì„± (+${bonus})`, p: true });} else if (th.element === exprEl) {const penalty = hasCount === 3 ? 4 : 2;score -= penalty;factors.push({ l: 'âš ï¸ ì‚¼í•©', v: `${th.name} â†’ ì„¤ê¸° (âˆ’${penalty})`, p: false });} else if (th.element === officerEl) {const penalty = hasCount === 3 ? 5 : 3;score -= penalty;factors.push({ l: 'âš ï¸ ì‚¼í•©', v: `${th.name} â†’ ì••ë°• (âˆ’${penalty})`, p: false });}}});}
const wangjiClash = [[0,6,'ìì˜¤ì¶©'],[3,9,'ë¬˜ìœ ì¶©']];for (const [a, b, name] of wangjiClash) {if (branchIndices.includes(a) && branchIndices.includes(b)) {score -= 3;factors.push({ l: 'âš¡ ì™•ì§€ì¶©', v: `${name} (âˆ’3)`, p: false });}}
let type = 'balanced';let extreme = null;if (score >= 15) { type = 'strong'; extreme = 'ê·¹ì‹ ê°•'; }
else if (score >= 8) type = 'strong';else if (score >= 3) type = 'balanced';else if (score <= -5) { type = 'weak'; extreme = 'ê·¹ì‹ ì•½'; }
else if (score <= 2) type = 'weak';if ((hasRealRoot.day || hasRealRoot.hour) && extreme === 'ê·¹ì‹ ì•½') {extreme = null;type = 'weak';factors.push({ l: 'âš¡ ë¿Œë¦¬ë³´ì •', v: 'ê·¹ì‹ ì•½â†’ì‹ ì•½', p: true });}
let pct = Math.round(((score + 15) / 40) * 100);pct = Math.max(5, Math.min(95, pct));if (hasRealRoot.hour && pct < 15) pct = 15;if (hasRealRoot.day && pct < 20) pct = 20;return {type,
score: Math.round(score * 10) / 10,
pct,
factors,
extreme,
hourRoot: hasRealRoot.hour,
dayRoot: hasRealRoot.day,
disabledSeals,
disabledPeers};}
const CLIMATE_BALANCE/*èª¿å€™*/ = {0: {0: {yong:'fire', sub:'wood', desc:'ê²¨ìš¸ ê°‘ëª©ì€ ì–¼ì–´ìˆì–´ ç«ë¡œ ë”°ëœ»í•˜ê²Œ'},
1: {yong:'fire', sub:'wood', desc:'ì¶•ì›” í† ì™•ì ˆ, ç«ë¡œ í•œê¸° ì œê±°'},
2: {yong:'water', sub:'fire', desc:'ì¸ì›” ë´„ê¸°ìš´ ì‹œì‘, æ°´ë¡œ ë¿Œë¦¬ ì–‘ë¶„'},
3: {yong:'water', sub:'fire', desc:'ë¬˜ì›” ëª©ì™•, æ°´ë¡œ ìœ¤íƒí•˜ê²Œ'},
4: {yong:'water', sub:'metal', desc:'ì§„ì›” í† ê¸° ê°•í•´ æ°´ë¡œ ì¡°ì ˆ'},
5: {yong:'water', sub:'metal', desc:'ì‚¬ì›” ì—¬ë¦„ ì‹œì‘, æ°´ë¡œ ê±´ì¡° ë°©ì§€'},
6: {yong:'water', sub:'metal', desc:'ì˜¤ì›” í™”ì™•, æ°´ê°€ í•„ìˆ˜'},
7: {yong:'water', sub:'metal', desc:'ë¯¸ì›” í† ì™•ì ˆ, æ°´ë¡œ ì¡°ì—´ ì œê±°'},
8: {yong:'water', sub:'fire', desc:'ì‹ ì›” ê¸ˆê¸°ìš´ ê°•í•´ æ°´ë¡œ ì„¤ê¸°'},
9: {yong:'water', sub:'fire', desc:'ìœ ì›” ê¸ˆì™•, æ°´ë¡œ ê¸ˆìƒìˆ˜'},
10: {yong:'fire', sub:'water', desc:'ìˆ ì›” í† ê¸°ìš´, ç«ë¡œ ìƒëª©'},
11: {yong:'fire', sub:'water', desc:'í•´ì›” ìˆ˜ê¸°ìš´ ê°•í•´ ç«ë¡œ ì¡°ì ˆ'}},
1: {0: {yong:'fire', sub:'water', desc:'ê²¨ìš¸ ì„ëª©ì€ ì•½í•´ì„œ ç«ë¡œ ë”°ëœ»í•˜ê²Œ'},
1: {yong:'fire', sub:'water', desc:'ì¶•ì›” í•œê¸° ê°•í•´ ç«ê°€ í•„ìˆ˜'},
2: {yong:'water', sub:'fire', desc:'ì¸ì›” ì´ˆë´„, æ°´ë¡œ ì„±ì¥'},
3: {yong:'fire', sub:'water', desc:'ë¬˜ì›” ì„ëª© ì™•, ç«ë¡œ ì„¤ê¸°'},
4: {yong:'water', sub:'fire', desc:'ì§„ì›” í† ê¸°ìš´, æ°´ë¡œ ìƒëª©'},
5: {yong:'water', sub:'metal', desc:'ì‚¬ì›” í™”ê¸° ê°•í•´ æ°´ë¡œ ìì–‘'},
6: {yong:'water', sub:'metal', desc:'ì˜¤ì›” ëœ¨ê±°ì›Œ æ°´ê°€ í•„ìˆ˜'},
7: {yong:'water', sub:'metal', desc:'ë¯¸ì›” ì¡°ì—´, æ°´ë¡œ ì‹œì›í•˜ê²Œ'},
8: {yong:'fire', sub:'water', desc:'ì‹ ì›” ê¸ˆì™•ì ˆ, ç«ë¡œ ê¸ˆ ì œì–´'},
9: {yong:'fire', sub:'water', desc:'ìœ ì›” ê¸ˆì™•, ç«ë¡œ ë³´í˜¸'},
10: {yong:'fire', sub:'water', desc:'ìˆ ì›” í™”ê¸° ìˆ˜ì¥, ç«ë¡œ ë”°ëœ»í•˜ê²Œ'},
11: {yong:'fire', sub:'wood', desc:'í•´ì›” ìˆ˜ì™•, ç«ë¡œ ê· í˜•'}},
2: {0: {yong:'wood', sub:'earth', desc:'ê²¨ìš¸ ë³‘í™”ëŠ” æœ¨ìœ¼ë¡œ ìƒí™”'},
1: {yong:'wood', sub:'fire', desc:'ì¶•ì›” í•œí† , æœ¨ìœ¼ë¡œ ìƒí™”'},
2: {yong:'water', sub:'metal', desc:'ì¸ì›” ëª©ìƒí™” ì™•, æ°´ë¡œ ì¡°ì ˆ'},
3: {yong:'water', sub:'metal', desc:'ë¬˜ì›” ëª©ì™•, æ°´ë¡œ ê· í˜•'},
4: {yong:'water', sub:'metal', desc:'ì§„ì›” í† ê¸°, æ°´ë¡œ ìœ¤íƒ'},
5: {yong:'water', sub:'metal', desc:'ì‚¬ì›” í™”ì™•, æ°´ê°€ í•„ìˆ˜'},
6: {yong:'water', sub:'metal', desc:'ì˜¤ì›” íƒœì–‘ ì •ì , æ°´ë¡œ ì‹í˜'},
7: {yong:'water', sub:'metal', desc:'ë¯¸ì›” ì¡°ì—´, æ°´ë¡œ ì‹œì›í•˜ê²Œ'},
8: {yong:'wood', sub:'water', desc:'ì‹ ì›” ê¸ˆì™•, æœ¨ìœ¼ë¡œ ìƒí™”'},
9: {yong:'wood', sub:'water', desc:'ìœ ì›” ê¸ˆì™•, æœ¨ìœ¼ë¡œ ë³´ê°•'},
10: {yong:'wood', sub:'water', desc:'ìˆ ì›” í† ì¡°, æœ¨ìœ¼ë¡œ ìƒí™”'},
11: {yong:'wood', sub:'fire', desc:'í•´ì›” ìˆ˜ì™•, æœ¨ìœ¼ë¡œ í†µê´€'}},
3: {0: {yong:'wood', sub:'fire', desc:'ê²¨ìš¸ ì •í™”ëŠ” æœ¨ìœ¼ë¡œ ë¶ˆì”¨ ìœ ì§€'},
1: {yong:'wood', sub:'fire', desc:'ì¶•ì›” í•œê¸°, æœ¨ìœ¼ë¡œ ìƒí™”'},
2: {yong:'wood', sub:'water', desc:'ì¸ì›” ìƒëª©, æ°´ë¡œ ì¡°ì ˆ'},
3: {yong:'wood', sub:'water', desc:'ë¬˜ì›” ëª©ì™•, æ°´ë¡œ ê· í˜•'},
4: {yong:'wood', sub:'water', desc:'ì§„ì›” ìŠµí† , æœ¨ìœ¼ë¡œ ìƒí™”'},
5: {yong:'water', sub:'wood', desc:'ì‚¬ì›” í™”ì™•, æ°´ë¡œ ì¡°í›„'},
6: {yong:'water', sub:'wood', desc:'ì˜¤ì›” í™”ê·¹ì„±, æ°´ê°€ í•„ìˆ˜'},
7: {yong:'water', sub:'wood', desc:'ë¯¸ì›” ì¡°ì—´, æ°´ë¡œ ì‹œì›í•˜ê²Œ'},
8: {yong:'wood', sub:'fire', desc:'ì‹ ì›” ê¸ˆê¸° ê°•í•´ æœ¨ìœ¼ë¡œ ìƒí™”'},
9: {yong:'wood', sub:'fire', desc:'ìœ ì›” ê¸ˆì™•, æœ¨ìœ¼ë¡œ ë³´ê°•'},
10: {yong:'wood', sub:'fire', desc:'ìˆ ì›” í™”ê¸° ìˆ˜ì¥, æœ¨ìœ¼ë¡œ ìœ ì§€'},
11: {yong:'wood', sub:'fire', desc:'í•´ì›” ìˆ˜ê·¹í™”, æœ¨ìœ¼ë¡œ í†µê´€'}},
4: {0: {yong:'fire', sub:'wood', desc:'ê²¨ìš¸ ë¬´í† ëŠ” ç«ë¡œ ë”°ëœ»í•˜ê²Œ'},
1: {yong:'fire', sub:'wood', desc:'ì¶•ì›” í•œí† , ç«ë¡œ ì˜¨ê¸°'},
2: {yong:'fire', sub:'wood', desc:'ì¸ì›” ëª©ê·¹í† , ç«ë¡œ í†µê´€'},
3: {yong:'fire', sub:'metal', desc:'ë¬˜ì›” ëª©ì™•, ç«ë¡œ ì œì–´'},
4: {yong:'metal', sub:'water', desc:'ì§„ì›” í† ì™•, é‡‘ìœ¼ë¡œ ì„¤ê¸°'},
5: {yong:'water', sub:'metal', desc:'ì‚¬ì›” í™”ì™•, æ°´ë¡œ ì¡°í›„'},
6: {yong:'water', sub:'metal', desc:'ì˜¤ì›” ì¡°í† , æ°´ê°€ í•„ìˆ˜'},
7: {yong:'water', sub:'metal', desc:'ë¯¸ì›” í† ì™•ì ˆ, æ°´ë¡œ ìœ¤íƒ'},
8: {yong:'water', sub:'fire', desc:'ì‹ ì›” ê¸ˆê¸° ê°•í•´ æ°´ë¡œ ê· í˜•'},
9: {yong:'fire', sub:'water', desc:'ìœ ì›” ê¸ˆì™•, ç«ë¡œ ì¡°ì ˆ'},
10: {yong:'fire', sub:'water', desc:'ìˆ ì›” í† ì™•, ç«ë¡œ ìƒí† '},
11: {yong:'fire', sub:'wood', desc:'í•´ì›” ìˆ˜ì™•, ç«ë¡œ ì˜¨ê¸°'}},
5: {0: {yong:'fire', sub:'wood', desc:'ê²¨ìš¸ ê¸°í† ëŠ” ç«ë¡œ ë”°ëœ»í•˜ê²Œ'},
1: {yong:'fire', sub:'wood', desc:'ì¶•ì›” í•œìŠµí† , ç«ë¡œ ì˜¨ê¸°'},
2: {yong:'fire', sub:'water', desc:'ì¸ì›” ëª©ê·¹í† , ç«ë¡œ ë³´í˜¸'},
3: {yong:'fire', sub:'water', desc:'ë¬˜ì›” ëª©ì™•, ç«ë¡œ í†µê´€'},
4: {yong:'metal', sub:'water', desc:'ì§„ì›” í† ì™•, é‡‘ìœ¼ë¡œ ì„¤ê¸°'},
5: {yong:'water', sub:'metal', desc:'ì‚¬ì›” ì¡°í† , æ°´ë¡œ ìœ¤íƒ'},
6: {yong:'water', sub:'metal', desc:'ì˜¤ì›” í™”ì™•, æ°´ê°€ í•„ìˆ˜'},
7: {yong:'water', sub:'metal', desc:'ë¯¸ì›” í† ì™•ì ˆ, æ°´ë¡œ ì¡°ìŠµ'},
8: {yong:'water', sub:'fire', desc:'ì‹ ì›” ê¸ˆê¸°, æ°´ë¡œ ìœ¤ê¸°'},
9: {yong:'fire', sub:'water', desc:'ìœ ì›” ê¸ˆì™•, ç«ë¡œ ê· í˜•'},
10: {yong:'fire', sub:'water', desc:'ìˆ ì›” í† ì™•, ç«ë¡œ ìƒí† '},
11: {yong:'fire', sub:'wood', desc:'í•´ì›” ìˆ˜ì™•, ç«ë¡œ ì¡°ì ˆ'}},
6: {0: {yong:'fire', sub:'earth', desc:'ê²¨ìš¸ ê²½ê¸ˆì€ ç«ë¡œ ë‹¨ë ¨'},
1: {yong:'fire', sub:'earth', desc:'ì¶•ì›” í•œê¸ˆ, ç«ë¡œ ë…¹ì„'},
2: {yong:'fire', sub:'water', desc:'ì¸ì›” ëª©ê¸°ìš´, ç«ë¡œ ë³´í˜¸'},
3: {yong:'fire', sub:'earth', desc:'ë¬˜ì›” ëª©ì™•, ç«ë¡œ í†µê´€'},
4: {yong:'water', sub:'fire', desc:'ì§„ì›” í† ê¸°, æ°´ë¡œ ì„¤ê¸ˆ'},
5: {yong:'water', sub:'earth', desc:'ì‚¬ì›” í™”ì™•, æ°´ë¡œ ì¡°í›„'},
6: {yong:'water', sub:'earth', desc:'ì˜¤ì›” í™”ê·¹ê¸ˆ, æ°´ê°€ í•„ìˆ˜'},
7: {yong:'water', sub:'earth', desc:'ë¯¸ì›” ì¡°ì—´, æ°´ë¡œ ì‹í˜'},
8: {yong:'water', sub:'fire', desc:'ì‹ ì›” ê¸ˆì™•, æ°´ë¡œ ì„¤ê¸°'},
9: {yong:'water', sub:'fire', desc:'ìœ ì›” ê¸ˆê·¹ì„±, æ°´ç« í•„ìš”'},
10: {yong:'fire', sub:'water', desc:'ìˆ ì›” í† ìƒê¸ˆ, ç«ë¡œ ë‹¨ë ¨'},
11: {yong:'fire', sub:'earth', desc:'í•´ì›” ìˆ˜ì™•, ç«ë¡œ ì˜¨ê¸°'}},
7: {0: {yong:'fire', sub:'earth', desc:'ê²¨ìš¸ ì‹ ê¸ˆì€ ç«ë¡œ ë”°ëœ»í•˜ê²Œ'},
1: {yong:'fire', sub:'earth', desc:'ì¶•ì›” í•œê¸ˆ, ç«ë¡œ ì˜¨ê¸°'},
2: {yong:'water', sub:'fire', desc:'ì¸ì›” ëª©ê¸°ìš´, æ°´ë¡œ ì„¸ì •'},
3: {yong:'water', sub:'fire', desc:'ë¬˜ì›” ëª©ì™•, æ°´ë¡œ ìœ¤ê¸°'},
4: {yong:'water', sub:'fire', desc:'ì§„ì›” í† ê¸°, æ°´ë¡œ ì”»ê¹€'},
5: {yong:'water', sub:'earth', desc:'ì‚¬ì›” í™”ì™•, æ°´ë¡œ ì¡°í›„'},
6: {yong:'water', sub:'earth', desc:'ì˜¤ì›” í™”ê·¹ê¸ˆ, æ°´ê°€ í•„ìˆ˜'},
7: {yong:'water', sub:'earth', desc:'ë¯¸ì›” ì¡°ì—´, æ°´ë¡œ ì‹œì›í•˜ê²Œ'},
8: {yong:'water', sub:'fire', desc:'ì‹ ì›” ê¸ˆì™•, æ°´ë¡œ ì„¤ê¸°'},
9: {yong:'water', sub:'fire', desc:'ìœ ì›” ê¸ˆê·¹ì„±, æ°´ë¡œ ì„¸ì •'},
10: {yong:'fire', sub:'water', desc:'ìˆ ì›” í† ê¸°, ç«ë¡œ ë¹›ë‚¨'},
11: {yong:'fire', sub:'earth', desc:'í•´ì›” ìˆ˜ì™•, ç«ë¡œ ê· í˜•'}},
8: {0: {yong:'fire', sub:'earth', desc:'ê²¨ìš¸ ì„ìˆ˜ëŠ” ç«ë¡œ ì–¼ìŒ ë…¹ì„'},
1: {yong:'fire', sub:'wood', desc:'ì¶•ì›” í•œìˆ˜, ç«ë¡œ ì˜¨ê¸°'},
2: {yong:'earth', sub:'fire', desc:'ì¸ì›” ìˆ˜ìƒëª©, åœŸë¡œ ì œì–´'},
3: {yong:'earth', sub:'fire', desc:'ë¬˜ì›” ëª©ê¸°ìš´, åœŸë¡œ ê· í˜•'},
4: {yong:'metal', sub:'fire', desc:'ì§„ì›” í† ê¸°, é‡‘ìœ¼ë¡œ ìƒìˆ˜'},
5: {yong:'metal', sub:'water', desc:'ì‚¬ì›” í™”ì™•, é‡‘ìœ¼ë¡œ ìƒìˆ˜'},
6: {yong:'metal', sub:'water', desc:'ì˜¤ì›” í™”ê·¹ì„±, é‡‘æ°´ í•„ìš”'},
7: {yong:'metal', sub:'water', desc:'ë¯¸ì›” í† ì™•, é‡‘ìœ¼ë¡œ í†µê´€'},
8: {yong:'fire', sub:'earth', desc:'ì‹ ì›” ê¸ˆìƒìˆ˜, ç«ë¡œ ì¡°ì ˆ'},
9: {yong:'fire', sub:'earth', desc:'ìœ ì›” ê¸ˆì™•, ç«ë¡œ ê· í˜•'},
10: {yong:'fire', sub:'wood', desc:'ìˆ ì›” í† ê¸°, ç«ë¡œ ì˜¨ê¸°'},
11: {yong:'fire', sub:'wood', desc:'í•´ì›” ìˆ˜ì™•, ç«ê°€ í•„ìˆ˜'}},
9: {0: {yong:'fire', sub:'wood', desc:'ê²¨ìš¸ ê³„ìˆ˜ëŠ” ç«ë¡œ ì–¼ìŒ ë…¹ì„'},
1: {yong:'fire', sub:'wood', desc:'ì¶•ì›” í•œìˆ˜, ç«ë¡œ ì˜¨ê¸°'},
2: {yong:'fire', sub:'metal', desc:'ì¸ì›” ëª©ê¸°ìš´, ç«ë¡œ ì„¤ê¸°'},
3: {yong:'fire', sub:'metal', desc:'ë¬˜ì›” ëª©ì™•, ç«ë¡œ ê· í˜•'},
4: {yong:'fire', sub:'metal', desc:'ì§„ì›” í† ê·¹ìˆ˜, ç«ë¡œ í†µê´€'},
5: {yong:'metal', sub:'water', desc:'ì‚¬ì›” í™”ì™•, é‡‘ìœ¼ë¡œ ìƒìˆ˜'},
6: {yong:'metal', sub:'water', desc:'ì˜¤ì›” í™”ê·¹ì„±, é‡‘æ°´ í•„ìš”'},
7: {yong:'metal', sub:'water', desc:'ë¯¸ì›” í† ì™•, é‡‘ìœ¼ë¡œ í†µê´€'},
8: {yong:'fire', sub:'wood', desc:'ì‹ ì›” ê¸ˆìƒìˆ˜, ç«ë¡œ ì¡°ì ˆ'},
9: {yong:'fire', sub:'wood', desc:'ìœ ì›” ê¸ˆì™•, ç«ë¡œ ì„¤ê¸ˆ'},
10: {yong:'fire', sub:'wood', desc:'ìˆ ì›” í† ê¸°, ç«ë¡œ ì˜¨ê¸°'},
11: {yong:'fire', sub:'metal', desc:'í•´ì›” ìˆ˜ì™•, ç«ê°€ í•„ìˆ˜'}}};function analyzeSamhapBureau(saju) {const brs = [saju.year?.b, saju.month?.b, saju.day?.b, saju.hour?.b].filter(b => b);const brIdxs = brs.map(b => BRANCH.indexOf(b));const THREE_HARMONY = [
{ branches: [2, 6, 10], element: 'fire', name: 'ì¸ì˜¤ìˆ  í™”êµ­(å¯…åˆæˆŒ ç«å±€)' },
{ branches: [8, 0, 4], element: 'water', name: 'ì‹ ìì§„ ìˆ˜êµ­(ç”³å­è¾° æ°´å±€)' },
{ branches: [5, 9, 1], element: 'metal', name: 'ì‚¬ìœ ì¶• ê¸ˆêµ­(å·³é…‰ä¸‘ é‡‘å±€)' },
{ branches: [11, 3, 7], element: 'wood', name: 'í•´ë¬˜ë¯¸ ëª©êµ­(äº¥å¯æœª æœ¨å±€)' }
];let result = { complete: false, partial: false, element: null, name: null, count: 0 };for (const th of THREE_HARMONY) {const hasCount = th.branches.filter(b => brIdxs.includes(b)).length;const hasCenter = brIdxs.includes(th.branches[1]);if (hasCount === 3) {result = { complete: true, partial: false, element: th.element, name: th.name, count: 3 };break;} else if (hasCount === 2 && hasCenter) {if (!result.complete) {const presentBranches = th.branches.filter(b => brIdxs.includes(b));const branchChars = presentBranches.map(b => BRANCH[b].c).join('');const bureauName = th.name.split('(')[0];result = {complete: false,
partial: true,
element: th.element,
name: branchChars + ' ë°˜í•©(' + bureauName + ')',
count: 2,
presentBranches};}}}
return result;}
function fullAnalysis(saju, strength) {const dm = saju.day.s;const dmEl = dm.e;const dmi = STEM.indexOf(dm);const mbi = BRANCH.indexOf(saju.month.b);const samhap = analyzeSamhapBureau(saju);const climate = analyzeClimate(saju);let elCount = countElements(saju);if (samhap.complete) {elCount[samhap.element] = (elCount[samhap.element] || 0) + 2;} else if (samhap.partial) {elCount[samhap.element] = (elCount[samhap.element] || 0) + 1;}
const EL = EL_ORDER;const dmIdx = EL.indexOf(dmEl);const peerEl = dmEl;const exprEl = EL[(dmIdx + 1) % 5];const wealthEl = EL[(dmIdx + 2) % 5];const officerEl = EL[(dmIdx + 3) % 5];const sealEl = EL[(dmIdx + 4) % 5];const str = strength || calcStrength(saju);const isWeak = str.type === 'weak';const isStrong = str.type === 'strong';const officerPower = (elCount[officerEl] || 0) +
(samhap.element === officerEl ? (samhap.complete ? 3 : 1) : 0);const isOfficerStrong = officerPower >= 2;const wealthPower = elCount[wealthEl] || 0;const isWealthStrong = wealthPower >= 3;const sealPower = elCount[sealEl] || 0;const isSealStrong = sealPower >= 3;let yong, hee, gi;let yongReason = '';const peerPower = elCount[peerEl] || 0;const isVeryStrong = str.percent >= 90;if (isVeryStrong && peerPower >= 6) {yong = peerEl;hee = sealEl;gi = officerEl;yongReason = `ì¢…ê²©(å¾æ ¼): ì¼ê°„ ${str.percent}%ë¡œ ê·¹ì‹ ê°•. ê°•í•œ ê¸°ìš´ì„ ë”°ë¼ì•¼ í•¨`;}
else if (climate.type.includes('ê·¹í•œ') || climate.type.includes('í•œ')) {yong = 'fire';if (isOfficerStrong && sealEl === 'water') {hee = sealEl;gi = officerEl;yongReason = 'ì¡°í›„ìš©ì‹ (í•´ë™)+í†µê´€: í•œìŠµí•˜ë‚˜ ê´€ì‚´ë„ ê°•í•´ ìˆ˜ë„ í•„ìš”';} else {hee = 'wood';gi = 'water';yongReason = 'ì¡°í›„ìš©ì‹ (í•´ë™): í•œìŠµ ì‚¬ì£¼ë¡œ ç« í•„ìš”';}}
else if (climate.type.includes('ê·¹ì¡°') || climate.type.includes('ì¡°')) {yong = 'water';hee = 'metal';gi = 'fire';yongReason = 'ì¡°í›„ìš©ì‹ (ìœ¤íƒ): ì¡°ì—´ ì‚¬ì£¼ë¡œ æ°´ í•„ìš”';}
else if (isWeak && isOfficerStrong) {yong = sealEl;hee = peerEl;gi = wealthEl;yongReason = 'í†µê´€ìš©ì‹ (ì‚´ì¸ìƒìƒ): ê´€ì‚´ì´ ê°•í•´ ì¸ì„±ìœ¼ë¡œ í†µê´€';}
else if (isWealthStrong && isWeak) {const peerPower = elCount[peerEl] || 0;if (peerPower <= 1) {yong = sealEl;hee = peerEl;yongReason = 'ë³‘ì•½ìš©ì‹ (ìƒë¹„): ë¹„ê² ë¶€ì¬ë¡œ ì¸ì„±ì´ ë¨¼ì € í•„ìš”';} else {yong = peerEl;hee = sealEl;yongReason = 'ë³‘ì•½ìš©ì‹ (ë¶„ì¬): ì¬ì„± ê³¼ë‹¤ë¡œ ë¹„ê² í•„ìš”';}
gi = wealthEl;}
else if (isStrong) {yong = exprEl;hee = wealthEl;gi = sealEl;yongReason = 'ì–µë¶€ìš©ì‹ (ì„¤ê¸°): ì‹ ê°•í•˜ì—¬ ì‹ìƒìœ¼ë¡œ ì„¤ê¸°';}
else if (isWeak) {yong = sealEl;hee = peerEl;gi = officerEl;yongReason = 'ì–µë¶€ìš©ì‹ (ë¶€ì¡°): ì‹ ì•½í•˜ì—¬ ì¸ì„±ìœ¼ë¡œ ìƒì¡°';}
else {yong = exprEl;hee = wealthEl;gi = officerEl;yongReason = 'ì–µë¶€ìš©ì‹ (ì„¤ê¸°): ì¤‘í™” ì‚¬ì£¼ë¡œ ì‹ìƒ ì„¤ê¸°';}
if (samhap.complete && samhap.element === officerEl && yong !== sealEl) {yong = exprEl;yongReason += ` + ì‹ì‹ ì œì‚´(${samhap.name})`;}
const johuData = CLIMATE_BALANCE[dmi] && CLIMATE_BALANCE[dmi][mbi];const yongCount = elCount[yong] || 0;let yongWarning = null;if (yongCount === 0) {yongWarning = `âš ï¸ ìš©ì‹ (${ELEMENT[yong].k}) ì›êµ­ ë¶€ì¬! ìš´ì—ì„œ ${ELEMENT[yong].k}ì´ ì˜¬ ë•Œë§Œ íš¨ê³¼ ë°œíœ˜`;} else if (yongCount === 1) {yongWarning = `âš ï¸ ìš©ì‹ (${ELEMENT[yong].k}) ì›êµ­ì— 1ê°œë¿. í•´ë‹¹ ê¸€ìê°€ ì¶©/ê·¹ ë°›ìœ¼ë©´ ìœ„í—˜`;}
let sudaHwasik = null;const waterCount = elCount.water || 0;const fireCount = elCount.fire || 0;if (dmEl === 'fire' && waterCount >= 3 && fireCount <= 1) {sudaHwasik = 'ìˆ˜ë‹¤í™”ì‹(æ°´å¤šç«ç†„): ë¬¼ì´ ë¶ˆì„ ë„ëŠ” í˜•êµ­. ç«/æœ¨ ìš´ì— ë°œë³µ, æ°´/é‡‘ ìš´ì— ìœ„í—˜';}
let hwadaGeumso = null;const metalCount = elCount.metal || 0;if (dmEl === 'metal' && fireCount >= 3 && metalCount <= 1) {hwadaGeumso = 'í™”ë‹¤ê¸ˆì†Œ(ç«å¤šé‡‘å°‘): ë¶ˆì´ ê¸ˆì„ ë…¹ì´ëŠ” í˜•êµ­. åœŸ/é‡‘ ìš´ì— ë°œë³µ, ç«/æœ¨ ìš´ì— ìœ„í—˜';}
let hwadaSuBin = null;if (yong === 'water' && fireCount >= 3 && waterCount <= 1) {hwadaSuBin = 'í™”ë‹¤ìˆ˜ë¹ˆ(ç«å¤šæ°´è²§): ìš©ì‹ (æ°´)ì´ ç«ì— ì¦ë°œ ìœ„í—˜! ì¬ë¬¼/ì¸ì—°ì´ ë“¤ì–´ì™€ë„ ê¸ˆë°© ë‚˜ê°. ë¶€ë™ì‚°/ìê²©ì¦ì— ë¬¶ì–´ë‘ì„¸ìš”';}
let geumdaMokjeol = null;const woodCount = elCount.wood || 0;if (yong === 'wood' && metalCount >= 3 && woodCount <= 1) {geumdaMokjeol = 'ê¸ˆë‹¤ëª©ì ˆ(é‡‘å¤šæœ¨æŠ˜): ìš©ì‹ (æœ¨)ì´ é‡‘ì— ì˜ë¦´ ìœ„í—˜! æœ¨ ìš´ì´ ì™€ë„ íš¨ê³¼ê°€ ì•½í•¨. æ°´ë¡œ í†µê´€ í•„ìš”';}
let todaGeummae = null;const earthCount = elCount.earth || 0;if (yong === 'metal' && earthCount >= 4 && metalCount <= 1) {todaGeummae = 'í† ë‹¤ê¸ˆë§¤(åœŸå¤šé‡‘åŸ‹): ìš©ì‹ (é‡‘)ì´ åœŸì— ë¬»í ìœ„í—˜! ë„ˆë¬´ ë§ì€ ì§€ì›(ì¸ì„±)ì´ ì˜¤íˆë ¤ ë…. æœ¨ìœ¼ë¡œ í† ë¥¼ ì œì–´ í•„ìš”';}
let mokdaHwasik = null;if (yong === 'fire' && woodCount >= 4 && fireCount <= 1) {mokdaHwasik = 'ëª©ë‹¤í™”ì‹(æœ¨å¤šç«ç†„): ìš©ì‹ (ç«)ì´ æœ¨ì— ë®ì—¬ êº¼ì§ˆ ìœ„í—˜! ë‚˜ë¬´ê°€ ë„ˆë¬´ ë§ì•„ ë¶ˆì´ íƒ€ì§€ ëª»í•¨. ì•½í•œ ç«ìš´ì— ë°œë³µ';}
let gunbiJaengjae = null;const peerPowerFinal = elCount[peerEl] || 0;const wealthPowerFinal = elCount[wealthEl] || 0;if (peerPowerFinal >= 4 && wealthPowerFinal <= 1) {gunbiJaengjae = 'êµ°ë¹„ìŸì¬(ç¾¤æ¯”çˆ­è²¡): ë¹„ê² íƒœì™•, ì¬ì„± ì•½í•¨. ë™ì—… ê¸ˆì§€, ëˆê±°ë˜ ì‹œ ë°°ì‹  ì£¼ì˜';}
let jaedaSinyak = null;if (wealthPowerFinal >= 3 && str.pct <= 30) {jaedaSinyak = `ì¬ë‹¤ì‹ ì•½(è²¡å¤šèº«å¼±): ì¬ì„±(ëˆ) ${wealthPowerFinal}ê°œë¡œ ê³¼ë‹¤í•˜ë‚˜ ì¼ê°„ì´ ì•½í•´(${str.pct}%) ê°ë‹¹ ëª»í•¨. ëˆ ìš•ì‹¬ ë¶€ë¦¬ë©´ ê±´ê°•ì„ ìƒìŠµë‹ˆë‹¤. ë¶€ë™ì‚°/ìê²©ì¦ í˜•íƒœë¡œ ë¬¶ì–´ë‘ì„¸ìš”.`;}
let wangjiChung = null;const branches = [saju.year?.b, saju.month?.b, saju.day?.b, saju.hour?.b].filter(b => b);const brIdxs = branches.map(b => BRANCH.indexOf(b));if (brIdxs.includes(0) && brIdxs.includes(6)) {wangjiChung = 'ìì˜¤ì¶©(å­åˆæ²–): ìˆ˜í™”ìƒì „(æ°´ç«ç›¸æˆ°)! ì‹¬í˜ˆê´€ vs ì‹ ì¥/ë°©ê´‘ ê±´ê°• ì£¼ì˜';}
else if (brIdxs.includes(3) && brIdxs.includes(9)) {wangjiChung = 'ë¬˜ìœ ì¶©(å¯é…‰æ²–): ê¸ˆëª©ìƒì „(é‡‘æœ¨ç›¸æˆ°)! ê°„/ë‹´ vs í/ëŒ€ì¥ ê±´ê°• ì£¼ì˜';}
let wangjiJungcheop = null;const wangji = {0: 'å­', 3: 'å¯', 6: 'åˆ', 9: 'é…‰'};const wangjiHealth = {0: {name: 'ìˆ˜', health: 'ì‹ ì¥/ë°©ê´‘/ìƒì‹ê¸° ê·¹ìœ„í—˜. ë¶€ì¢…, ëƒ‰ì¦ ì£¼ì˜'},
3: {name: 'ëª©', health: 'ê°„/ë‹´/ëˆˆ ê·¹ìœ„í—˜. ë¶„ë…¸ ì¡°ì ˆ, ê·¼ìœ¡ ê²½ë ¨ ì£¼ì˜'},
6: {name: 'í™”', health: 'ì‹¬í˜ˆê´€/ë‡Œ/ëˆˆ ê·¹ìœ„í—˜! ë‡Œì¶œí˜ˆ, ì‹¬ì¥ë§ˆë¹„ ì£¼ì˜. 2026ë…„ åˆ ì„¸ìš´ ì‹œ ì‘ê¸‰ìƒí™© ëŒ€ë¹„'},
9: {name: 'ê¸ˆ', health: 'í/ëŒ€ì¥/í”¼ë¶€ ê·¹ìœ„í—˜. í˜¸í¡ê¸° ì§ˆí™˜, í”¼ë¶€ë³‘ ì£¼ì˜'}};for (const [bi, char] of Object.entries(wangji)) {const count = brIdxs.filter(b => b === parseInt(bi)).length;if (count >= 3) {const info = wangjiHealth[bi];wangjiJungcheop = `ì™•ì§€ì¤‘ì²©(${char}${char}${char}): ${info.name} ê¸°ìš´ í­ì£¼! ${info.health}`;break;}}
let mugeunWarning = null;const dmStemIdx = STEM.indexOf(dm);const dmElIdx = EL_ORDER.indexOf(dmEl);const sameElStems = [dmElIdx * 2, dmElIdx * 2 + 1];let hasRoot = false;for (const bi of brIdxs) {const jjg = JIJANGGAN[bi];if (jjg) {for (const item of jjg) {if (sameElStems.includes(item.stem)) {hasRoot = true;break;}}}
if (hasRoot) break;}
if (!hasRoot) {const elNames = {wood: 'ëª©', fire: 'í™”', earth: 'í† ', metal: 'ê¸ˆ', water: 'ìˆ˜'};mugeunWarning = `ë¬´ê·¼(ç„¡æ ¹): ì¼ê°„ ${dm.c}(${elNames[dmEl]})ì´ ì§€ì§€ì— ë¿Œë¦¬ ì—†ìŒ. ê²‰ìœ¼ë¡œëŠ” ìˆì–´ ë³´ì—¬ë„ ì‹¤ì œ í˜ì´ ì—†ìŠµë‹ˆë‹¤. ìš´ì—ì„œ ë¹„ê²/ì¸ì„±ì´ ì˜¬ ë•Œ ë¹„ë¡œì†Œ í˜ì„ ì–»ìŠµë‹ˆë‹¤.`;}
let pyeoninDosik = null;const monthBi = BRANCH.indexOf(saju.month?.b);const dayBi = BRANCH.indexOf(saju.day?.b);const isMaoYouChung = (monthBi === 3 && dayBi === 9) || (monthBi === 9 && dayBi === 3);if (isMaoYouChung) {const monthBranchEl = BRANCH_EL[monthBi];const dayBranchEl = BRANCH_EL[dayBi];const dmElIdx = EL_ORDER.indexOf(dmEl);const siksinEl = EL_ORDER[(dmElIdx + 1) % 5];const pyeoninEl = EL_ORDER[(dmElIdx + 4) % 5];if ((monthBranchEl === siksinEl && dayBranchEl === pyeoninEl) ||
(monthBranchEl === 'wood' && dayBranchEl === 'metal')) {pyeoninDosik = `í¸ì¸ë„ì‹(åå°å€’é£Ÿ): ì›”ì§€(ì‹ì‹ )ì™€ ì¼ì§€(í¸ì¸)ê°€ ë¬˜ìœ ì¶©! ì¬ëŠ¥(ë°¥ê·¸ë¦‡)ì´ ê¹¨ì§„ í˜•êµ­. ì¼ì„ ì‹œì‘í•´ë„ ì¤‘ë„ì— ì—ì–´ì§€ê±°ë‚˜, ì˜ˆë¯¼í•¨ ë•Œë¬¸ì— ê¸°íšŒë¥¼ ê±·ì–´ì°° ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¾¸ì¤€í•¨ì´ ê°œìš´ë²•ì…ë‹ˆë‹¤.`;}}
return {yong, hee, gi, yongReason,
yongWarning,
sudaHwasik,
hwadaGeumso,
hwadaSuBin,
geumdaMokjeol,
todaGeummae,
mokdaHwasik,
gunbiJaengjae,
jaedaSinyak,
wangjiChung,
wangjiJungcheop,
mugeunWarning,
pyeoninDosik,
johu: johuData?.yong || null,
johuDesc: johuData?.desc || '',
climate, samhap, elCount,
officerPower, isOfficerStrong,
wealthPower, isWealthStrong,
type: str.type,
byungYak: findByungYak(saju, str),
sub: johuData?.sub || null};}
function analyzeClimate(saju) {const mbi = BRANCH.indexOf(saju.month.b);const season = SEASON[mbi];let climate = {type: '', desc: '', needs: []};const brs = [saju.year?.b, saju.month?.b, saju.day?.b, saju.hour?.b].filter(b => b);const brIdxs = brs.map(b => BRANCH.indexOf(b));let coldCount = 0, hotCount = 0;brIdxs.forEach(bi => {if (bi === 0 || bi === 1 || bi === 11) coldCount++;if (bi === 5 || bi === 6 || bi === 7) hotCount++;});const stems = [saju.year?.s, saju.month?.s, saju.day?.s, saju.hour?.s].filter(s => s);let waterStemCount = 0, fireStemCount = 0;stems.forEach(s => {if (s.e === 'water') waterStemCount++;if (s.e === 'fire') fireStemCount++;});const totalCold = coldCount + waterStemCount;const totalHot = hotCount + fireStemCount;const isWinter = [0, 1, 11].includes(mbi);const isSpring = [2, 3, 4].includes(mbi);const isSummer = [5, 6, 7].includes(mbi);const isAutumn = [8, 9, 10].includes(mbi);if (totalCold >= 4) {if (isWinter) {climate.type = 'ê·¹í•œ(æ¥µå¯’)';climate.desc = 'í•œê²¨ìš¸ ì–¼ì–´ë¶™ì€ ì‚¬ì£¼ì…ë‹ˆë‹¤. ç« ê¸°ìš´ì´ ì ˆì‹¤íˆ í•„ìš”í•©ë‹ˆë‹¤.';} else if (isSpring) {climate.type = 'í•œìŠµ(å¯’æ¿•)';climate.desc = 'ë´„ì´ì§€ë§Œ æ°´ ê¸°ìš´ì´ ê³¼ë‹¤í•˜ì—¬ ìŠµí•˜ê³  ëƒ‰í•©ë‹ˆë‹¤. ç«ë¡œ ì˜¨ê¸°ë¥¼ ë”í•´ì•¼ í•©ë‹ˆë‹¤.';} else if (isAutumn) {climate.type = 'ëƒ‰ìŠµ(å†·æ¿•)';climate.desc = 'ê°€ì„ì— æ°´ê°€ ê³¼ë‹¤í•˜ì—¬ ìŠµí•˜ê³  ì„œëŠ˜í•©ë‹ˆë‹¤. ç« ê¸°ìš´ì´ í•„ìš”í•©ë‹ˆë‹¤.';} else {climate.type = 'ìˆ˜ê³¼ë‹¤(æ°´éå¤š)';climate.desc = 'ì—¬ë¦„ì´ì§€ë§Œ æ°´ê°€ ë„˜ì³ë‚©ë‹ˆë‹¤. ê· í˜•ì´ í•„ìš”í•©ë‹ˆë‹¤.';}
climate.needs = ['fire', 'wood'];} else if (totalCold >= 3 || (coldCount >= 2 && season !== 'summer')) {climate.type = 'í•œ(å¯’)';climate.desc = 'ì°¨ê°€ìš´ ì‚¬ì£¼ì…ë‹ˆë‹¤. ë”°ëœ»í•œ ç« ê¸°ìš´ì´ í•„ìš”í•©ë‹ˆë‹¤.';climate.needs = ['fire', 'wood'];} else if (totalHot >= 4) {climate.type = 'ê·¹ì¡°(æ¥µç‡¥)';climate.desc = 'ë¶ˆë°”ë‹¤ ì‚¬ì£¼ì…ë‹ˆë‹¤. æ°´ ê¸°ìš´ì´ ì ˆì‹¤íˆ í•„ìš”í•©ë‹ˆë‹¤.';climate.needs = ['water', 'metal'];} else if (totalHot >= 3 || (hotCount >= 2 && season !== 'winter')) {climate.type = 'ì¡°(ç‡¥)';climate.desc = 'ëœ¨ê²ê³  ê±´ì¡°í•œ ì‚¬ì£¼ì…ë‹ˆë‹¤. ì‹œì›í•œ æ°´ ê¸°ìš´ì´ í•„ìš”í•©ë‹ˆë‹¤.';climate.needs = ['water', 'metal'];} else if (season === 'winter') {climate.type = 'í•œ(å¯’)';climate.desc = 'ê²¨ìš¸ ì‚¬ì£¼ì…ë‹ˆë‹¤. ë”°ëœ»í•œ ç« ê¸°ìš´ì´ í•„ìš”í•©ë‹ˆë‹¤.';climate.needs = ['fire', 'wood'];} else if (season === 'summer') {climate.type = 'ì¡°(ç‡¥)';climate.desc = 'ì—¬ë¦„ ì‚¬ì£¼ì…ë‹ˆë‹¤. ì‹œì›í•œ æ°´ ê¸°ìš´ì´ í•„ìš”í•©ë‹ˆë‹¤.';climate.needs = ['water', 'metal'];} else {climate.type = 'ì¤‘í™”(ä¸­å’Œ)';climate.desc = 'ê¸°í›„ê°€ ë¹„êµì  ê· í˜• ì¡íŒ ì‚¬ì£¼ì…ë‹ˆë‹¤.';climate.needs = [];}
return climate;}
function findByungYak(saju, strength) {const dm = saju.day.s;const dmi = STEM.indexOf(dm);const ec = countElements(saju);let byung = null, yak = null;let maxEl = null, maxCount = 0;for (let e of EL_ORDER) {if (ec[e] > maxCount && e !== dm.e) {maxCount = ec[e];maxEl = e;}}
if (maxCount >= 3) {byung = maxEl;const kontrolIdx = (EL_ORDER.indexOf(maxEl) + 3) % 5;yak = EL_ORDER[kontrolIdx];}
return { byung, yak, desc: byung ? `${ELEMENT[byung].k}ì´ ê³¼ë‹¤í•˜ë‹ˆ ${ELEMENT[yak].k}ìœ¼ë¡œ ì œì–´` : null };}
function calcGods(saju, str, samhapResult) {const dm = saju.day.s;const dmi = STEM.indexOf(dm);const mbi = BRANCH.indexOf(saju.month.b);const season = SEASON[mbi];let yong, hee, gi, johu = null, johuDesc = '';let isFollower = false;let followerType = null;const climate = analyzeClimate(saju);const isHan = climate.type.includes('í•œ') || climate.type.includes('å¯’');const isJo = climate.type.includes('ì¡°') || climate.type.includes('ç‡¥');const johuData = CLIMATE_BALANCE[dmi] && CLIMATE_BALANCE[dmi][mbi];if (johuData) {johu = johuData.yong;johuDesc = johuData.desc;}
const dmEl = dm.e;const sealEl = EL_ORDER[(EL_ORDER.indexOf(dmEl) + 4) % 5];const peerEl = dmEl;const exprEl = EL_ORDER[(EL_ORDER.indexOf(dmEl) + 1) % 5];const wealthEl = EL_ORDER[(EL_ORDER.indexOf(dmEl) + 2) % 5];const officerEl = EL_ORDER[(EL_ORDER.indexOf(dmEl) + 3) % 5];const elCount = {wood:0, fire:0, earth:0, metal:0, water:0};[saju.year, saju.month, saju.day, saju.hour].forEach(p => {if (p && p.s) elCount[p.s.e]++;if (p && p.b) elCount[p.b.e]++;});const noRoot = !str.dayRoot && !str.hourRoot;if (str.pct < 10 && noRoot) {let maxEl = null, maxCount = 0;Object.entries(elCount).forEach(([el, cnt]) => {if (el !== dmEl && cnt > maxCount) {maxEl = el;maxCount = cnt;}});if (maxCount >= 4) {isFollower = true;if (maxEl === wealthEl) {followerType = 'ì¢…ì¬ê²©';yong = maxEl;hee = EL_ORDER[(EL_ORDER.indexOf(maxEl) + 1) % 5];gi = sealEl;} else if (maxEl === officerEl) {followerType = 'ì¢…ì‚´ê²©';yong = maxEl;hee = EL_ORDER[(EL_ORDER.indexOf(maxEl) + 4) % 5];gi = dmEl;} else if (maxEl === exprEl) {followerType = 'ì¢…ì•„ê²©';yong = maxEl;hee = EL_ORDER[(EL_ORDER.indexOf(maxEl) + 1) % 5];gi = sealEl;} else {followerType = 'ì¢…ê°•ê²©';yong = maxEl;hee = EL_ORDER[(EL_ORDER.indexOf(maxEl) + 4) % 5];gi = EL_ORDER[(EL_ORDER.indexOf(maxEl) + 3) % 5];}
johuDesc = `${followerType}: ê·¹ì‹ ì•½ìœ¼ë¡œ ${maxEl}ì„ ë”°ë¦„`;}}
if (!isFollower && str.type === 'strong') {yong = exprEl;hee = wealthEl;gi = sealEl;} else if (!isFollower && str.type === 'weak') {yong = sealEl;hee = peerEl;gi = officerEl;} else if (!isFollower) {yong = exprEl;hee = wealthEl;gi = officerEl;}
const ec = countElements(saju);const officerCount = ec[officerEl] || 0;const isOfficerStrong = officerCount >= 2 || (samhapResult && samhapResult.element === officerEl);if (str.type === 'weak' && isOfficerStrong) {yong = sealEl;hee = peerEl;gi = wealthEl;johuDesc = (johuDesc || '') + ' (í†µê´€ìš©ì‹ : ê´€ì‚´íƒœì™• ì œì–´)';}
else if (isHan && (johu === 'fire' || yong === 'fire')) {yong = 'fire';hee = 'wood';gi = 'water';johuDesc = (johuDesc || '') + ' (ì¡°í›„ ìš°ì„ : í•œìŠµ ì‚¬ì£¼)';}
if (isJo && (johu === 'water' || yong === 'water')) {yong = 'water';hee = 'metal';gi = 'fire';johuDesc = (johuDesc || '') + ' (ì¡°í›„ ìš°ì„ : ì¡°ì—´ ì‚¬ì£¼)';}
if (samhapResult && samhapResult.complete) {const samhapEl = samhapResult.element;if ((samhapEl === 'metal' && dmEl === 'wood') ||
(samhapEl === 'fire' && dmEl === 'metal') ||
(samhapEl === 'water' && dmEl === 'fire') ||
(samhapEl === 'wood' && dmEl === 'earth') ||
(samhapEl === 'earth' && dmEl === 'water')) {yong = exprEl;hee = 'fire';johuDesc = (johuDesc || '') + ` (${samhapResult.name} ì œì‚´)`;}
if ((samhapEl === 'water' && dmEl === 'wood') ||
(samhapEl === 'wood' && dmEl === 'fire') ||
(samhapEl === 'fire' && dmEl === 'earth') ||
(samhapEl === 'earth' && dmEl === 'metal') ||
(samhapEl === 'metal' && dmEl === 'water')) {yong = exprEl;johuDesc = (johuDesc || '') + ` (${samhapResult.name} ì„¤ê¸°)`;}}
const byungYak = findByungYak(saju, str);return {yong, hee, gi,
type: str.type,
johu, johuDesc,
climate,
byungYak,
sub: johuData?.sub || null,
isFollower,
followerType};}
const SIX_RELATIONS/*å…­è¦ª*/ = {m: {'ë¹„ê²¬': {relation: 'í˜•ì œ/ì¹œêµ¬', desc: 'ë‚˜ì™€ ë™ë“±í•œ ê´€ê³„', detailed: 'í˜•ì œìë§¤, ì¹œêµ¬, ë™ë£Œ, ê²½ìŸì'},
'ê²ì¬': {relation: 'í˜•ì œ/ê²½ìŸì', desc: 'ë‚˜ì™€ ê²½ìŸí•˜ëŠ” ê´€ê³„', detailed: 'ì´ë³µí˜•ì œ, ì‚¬ì´Œ, ê²½ìŸì, ë™ì—…ì'},
'ì‹ì‹ ': {relation: 'ìë…€(ë”¸)/í›„ë°°', desc: 'ë‚´ê°€ ë‚³ì€ ê²ƒ', detailed: 'ë”¸, ì†ë…€, í›„ë°°, ë¶€í•˜, ì œì'},
'ìƒê´€': {relation: 'ìë…€(ì•„ë“¤)/ì¬ëŠ¥', desc: 'ë‚´ê°€ í‘œí˜„í•˜ëŠ” ê²ƒ', detailed: 'ì•„ë“¤, ì†ì, ì°½ì‘ë¬¼, ì•„ì´ë””ì–´'},
'í¸ì¬': {relation: 'ì•„ë²„ì§€/ì• ì¸', desc: 'ë‚´ê°€ ë‹¤ìŠ¤ë¦¬ëŠ” ì¬ë¬¼', detailed: 'ì•„ë²„ì§€, ì²©, ì• ì¸, ìœ í¥, íˆ¬ê¸°ì¬'},
'ì •ì¬': {relation: 'ì•„ë‚´/ì¬ì‚°', desc: 'ë‚´ê°€ ì§€í‚¤ëŠ” ì¬ë¬¼', detailed: 'ì•„ë‚´, ì •ì—…ìœ¼ë¡œ ë²ˆ ëˆ, ê¸‰ì—¬'},
'í¸ê´€': {relation: 'ìë…€(ì•„ë“¤)/ì§ì¥', desc: 'ë‚˜ë¥¼ ë‹¤ìŠ¤ë¦¬ëŠ” ê²ƒ', detailed: 'ì•„ë“¤, ì§ì¥ìƒì‚¬, ê¶Œë ¥, ì••ë°•'},
'ì •ê´€': {relation: 'ìë…€(ë”¸)/ëª…ì˜ˆ', desc: 'ë‚˜ë¥¼ ë°”ë¥´ê²Œ í•˜ëŠ” ê²ƒ', detailed: 'ë”¸, ëª…ì˜ˆ, ì§ì¥, ë²•ë¥ '},
'í¸ì¸': {relation: 'ê³„ëª¨/ì˜ë¶€', desc: 'ë‚˜ë¥¼ í¸ì¤‘ë˜ê²Œ ê¸°ë¥´ëŠ” ê²ƒ', detailed: 'ê³„ëª¨, ì˜ë¶“ì–´ë¨¸ë‹ˆ, ì„œëª¨'},
'ì •ì¸': {relation: 'ì–´ë¨¸ë‹ˆ/í•™ë¬¸', desc: 'ë‚˜ë¥¼ ë°”ë¥´ê²Œ ê¸°ë¥´ëŠ” ê²ƒ', detailed: 'ì–´ë¨¸ë‹ˆ, í•™ì—…, ë¬¸ì„œ, ìê²©ì¦'}},
f: {'ë¹„ê²¬': {relation: 'ìë§¤/ì¹œêµ¬', desc: 'ë‚˜ì™€ ë™ë“±í•œ ê´€ê³„', detailed: 'ìë§¤, ì¹œêµ¬, ë™ë£Œ, ê²½ìŸì'},
'ê²ì¬': {relation: 'ìë§¤/ê²½ìŸì', desc: 'ë‚˜ì™€ ê²½ìŸí•˜ëŠ” ê´€ê³„', detailed: 'ì´ë³µìë§¤, ì‚¬ì´Œ, ê²½ìŸì'},
'ì‹ì‹ ': {relation: 'ìë…€(ë”¸)/ì¬ëŠ¥', desc: 'ë‚´ê°€ ë‚³ì€ ê²ƒ', detailed: 'ë”¸, ì†ë…€, í‘œí˜„ë ¥, ì¬ëŠ¥'},
'ìƒê´€': {relation: 'ìë…€(ì•„ë“¤)/ì´ì„±', desc: 'ë‚´ê°€ í‘œí˜„í•˜ëŠ” ê²ƒ', detailed: 'ì•„ë“¤, ì†ì, ì—°ì¸, ë§¤ë ¥'},
'í¸ì¬': {relation: 'ì‹œì•„ë²„ì§€/ì¬ë¬¼', desc: 'ë‚´ê°€ ë‹¤ìŠ¤ë¦¬ëŠ” ì¬ë¬¼', detailed: 'ì‹œì•„ë²„ì§€, íˆ¬ê¸°ì¬, íš¡ì¬'},
'ì •ì¬': {relation: 'ì‹œì–´ë¨¸ë‹ˆ/ì¬ì‚°', desc: 'ë‚´ê°€ ì§€í‚¤ëŠ” ì¬ë¬¼', detailed: 'ì‹œì–´ë¨¸ë‹ˆ, ì •ì—…ì¬, ê¸‰ì—¬'},
'í¸ê´€': {relation: 'ì• ì¸/ë‚¨ì', desc: 'ë‚˜ë¥¼ ë‹¤ìŠ¤ë¦¬ëŠ” ê²ƒ', detailed: 'ì• ì¸, ë°”ëŒ, ì™¸ë„ë‚¨, í­ë ¥ë‚¨'},
'ì •ê´€': {relation: 'ë‚¨í¸/ëª…ì˜ˆ', desc: 'ë‚˜ë¥¼ ë°”ë¥´ê²Œ í•˜ëŠ” ê²ƒ', detailed: 'ë‚¨í¸, ëª…ì˜ˆ, ì§ì¥'},
'í¸ì¸': {relation: 'ê³„ëª¨/ì¥ì• ', desc: 'ë‚˜ë¥¼ í¸ì¤‘ë˜ê²Œ ê¸°ë¥´ëŠ” ê²ƒ', detailed: 'ê³„ëª¨, ì˜ëª¨, ë¶ˆì™„ì „í•œ í•™ì—…'},
'ì •ì¸': {relation: 'ì–´ë¨¸ë‹ˆ/í•™ë¬¸', desc: 'ë‚˜ë¥¼ ë°”ë¥´ê²Œ ê¸°ë¥´ëŠ” ê²ƒ', detailed: 'ì–´ë¨¸ë‹ˆ, í•™ì—…, ë¬¸ì„œ'}}};const SIX_RELATIONS_POSITION = {year: {name: 'ë…„ì£¼', meaning: 'ì¡°ìƒ, ì‚¬íšŒ, ì´ˆë…„(1-15ì„¸)', body: 'ë¨¸ë¦¬/ì–¼êµ´'},
month: {name: 'ì›”ì£¼', meaning: 'ë¶€ëª¨, í˜•ì œ, ì§ì—…, ì²­ë…„(16-30ì„¸)', body: 'ê°€ìŠ´/ì–´ê¹¨'},
day: {name: 'ì¼ì£¼', meaning: 'ë³¸ì¸, ë°°ìš°ì, ê°€ì •, ì¤‘ë…„(31-45ì„¸)', body: 'í—ˆë¦¬/ë³µë¶€'},
hour: {name: 'ì‹œì£¼', meaning: 'ìë…€, í›„ë°°, ë§ë…„(46ì„¸+)', body: 'ë‹¤ë¦¬/ë°œ'}};function analyzeYukcheon(saju, gender) {const dm = saju.day.s;const g = gender || GENDER || 'm';const yukData = SIX_RELATIONS[g];const result = {positions: [],
counts: {},
analysis: [],
spouse: null,
children: null,
parents: null};const pillars = [
{pos: 'year', pillar: saju.year},
{pos: 'month', pillar: saju.month},
{pos: 'day', pillar: saju.day},
{pos: 'hour', pillar: saju.hour}
];pillars.forEach(({pos, pillar}) => {if (!pillar) return;const stemGod = pos === 'day' ? {k: 'ì¼ê°„', c: 'æ—¥å¹²'} : getTenGod(pillar.s, dm);const mainJJ = JIJANGGAN[BRANCH.indexOf(pillar.b)];const mainStem = mainJJ && mainJJ.length > 0 ? STEM[mainJJ[mainJJ.length - 1].stem] : null;const branchGod = mainStem ? getTenGod(mainStem, dm) : null;const posInfo = SIX_RELATIONS_POSITION[pos];const yukInfo = yukData[stemGod.k];result.positions.push({position: pos,
posName: posInfo.name,
posMeaning: posInfo.meaning,
stem: pillar.s,
branch: pillar.b,
stemGod: stemGod.k,
branchGod: branchGod ? branchGod.k : null,
relation: yukInfo ? yukInfo.relation : 'ë³¸ì¸',
detailed: yukInfo ? yukInfo.detailed : 'ìê¸° ìì‹ '});if (stemGod.k !== 'ì¼ê°„') {result.counts[stemGod.k] = (result.counts[stemGod.k] || 0) + 1;}
if (branchGod) {result.counts[branchGod.k] = (result.counts[branchGod.k] || 0) + 0.5;}});const spouseGod = g === 'm' ? 'ì •ì¬' : 'ì •ê´€';const spouseGod2 = g === 'm' ? 'í¸ì¬' : 'í¸ê´€';const spouseCount = (result.counts[spouseGod] || 0) + (result.counts[spouseGod2] || 0);const dayBranchState = getTwelveState(dm, saju.day.b);let hasHiddenSpouse = false;const branches = [saju.year.b, saju.month.b, saju.day.b];if (saju.hour) branches.push(saju.hour.b);branches.forEach(br => {const bi = BRANCH.indexOf(br);const jj = JIJANGGAN[bi];if (jj) {jj.forEach(j => {const jjGod = getTenGod(STEM[j.stem], dm);if (jjGod && (jjGod.k === spouseGod || jjGod.k === spouseGod2)) {hasHiddenSpouse = true;}});}});let spouseAnalysis = '';const dbi = BRANCH.indexOf(saju.day.b);const ybi = BRANCH.indexOf(saju.year.b);const mbi = BRANCH.indexOf(saju.month.b);const hbi = saju.hour ? BRANCH.indexOf(saju.hour.b) : -1;const otherBranches = [ybi, mbi];if (hbi >= 0) otherBranches.push(hbi);const chungPairs = [[0,6],[1,7],[2,8],[3,9],[4,10],[5,11]];let spouseClash = false;let spouseClashType = '';chungPairs.forEach(([a,b]) => {if ((dbi === a && otherBranches.includes(b)) || (dbi === b && otherBranches.includes(a))) {spouseClash = true;spouseClashType = 'ì¶©(æ²–)';}});const harmPairs = [[3,8],[1,6],[3,4]];harmPairs.forEach(([a,b]) => {if ((dbi === a && otherBranches.includes(b)) || (dbi === b && otherBranches.includes(a))) {if (!spouseClash) {spouseClash = true;spouseClashType = 'ì›ì§„/í•´(å®³)';}}});if (spouseCount === 0 && !hasHiddenSpouse) {spouseAnalysis = 'ë°°ìš°ìì„±ì´ ì—†ì–´ìš”. ê²°í˜¼ì´ ëŠ¦ê±°ë‚˜ ì¸ì—°ì´ ì•½í•  ìˆ˜ ìˆì–´ìš”. ëŒ€ìš´ì—ì„œ ë“¤ì–´ì˜¤ë©´ ì¸ì—°ì´ ìƒê²¨ìš”.';} else if (spouseCount === 0 && hasHiddenSpouse) {spouseAnalysis = 'ì²œê°„ì— ë°°ìš°ìì„±ì´ ì—†ì§€ë§Œ ì§€ì¥ê°„ì— ìˆ¨ì–´ ìˆì–´ìš”. ê²‰ìœ¼ë¡œ ë“œëŸ¬ë‚˜ì§€ ì•ŠëŠ” ì‹¤ì†í˜• ë°°ìš°ìë¥¼ ë§Œë‚˜ê±°ë‚˜, ì†Œê°œíŒ…ë³´ë‹¤ëŠ” ìì—°ìŠ¤ëŸ¬ìš´ ë§Œë‚¨ì—ì„œ ì¸ì—°ì´ ìƒê²¨ìš”.';} else if (spouseCount >= 2) {spouseAnalysis = 'ë°°ìš°ìì„±ì´ ë§ì•„ìš”. ì´ì„± ì¸ê¸° ë§ì§€ë§Œ ë°”ëŒê¸° ì¡°ì‹¬! í•œ ì‚¬ëŒì—ê²Œ ì§‘ì¤‘í•˜ì„¸ìš”.';} else {spouseAnalysis = 'ë°°ìš°ìì„±ì´ ì ì ˆí•´ìš”. ì¢‹ì€ ì¸ì—°ì„ ë§Œë‚  ìˆ˜ ìˆì–´ìš”.';}
if (spouseClash) {spouseAnalysis += ` âš ï¸ ë‹¨, ë°°ìš°ìê¶(ì¼ì§€)ì´ ${spouseClashType}ì„ ë°›ì•„ ë¶€ë¶€ ê°ˆë“±ì´ ìˆì„ ìˆ˜ ìˆì–´ìš”. ì„œë¡œ ê±°ë¦¬ë¥¼ ë‘ê±°ë‚˜ ê°ì ë°”ìœ ìƒí™œì´ ì˜¤íˆë ¤ ì¢‹ì•„ìš”.`;}
result.spouse = {god: spouseGod,
count: spouseCount,
dayBranch: dayBranchState,
analysis: spouseAnalysis};const childGod = g === 'm' ? ['í¸ê´€', 'ì •ê´€'] : ['ì‹ì‹ ', 'ìƒê´€'];const childCount = (result.counts[childGod[0]] || 0) + (result.counts[childGod[1]] || 0);const hourPillar = saju.hour;let childAnalysis = '';if (!hourPillar) {childAnalysis = 'ì‹œì£¼ê°€ ì—†ì–´ì„œ ìë…€ ë¶„ì„ì´ ì–´ë ¤ì›Œìš”.';} else if (childCount === 0) {childAnalysis = 'ìë…€ì„±(ê´€ì„±)ì´ ì—†ì–´ìš”. ìë…€ê°€ ëŠ¦ê±°ë‚˜ ì ì„ ìˆ˜ ìˆì–´ìš”. ë˜í•œ ì¡°ì§ ìƒí™œë³´ë‹¤ ììœ ë¡œìš´ í”„ë¦¬ëœì„œë‚˜ ì „ë¬¸ì§ì´ ì˜ ë§ì•„ìš”. ê·œìœ¨ë³´ë‹¤ ì°½ì˜ì„±ìœ¼ë¡œ ìŠ¹ë¶€í•˜ì„¸ìš”!';} else if (childCount >= 2) {childAnalysis = 'ìë…€ì„±ì´ ë§ì•„ìš”. ìë…€ë³µì´ ìˆê³  ìë…€ê°€ ë§ì„ ìˆ˜ ìˆì–´ìš”.';} else {childAnalysis = 'ìë…€ ì¸ì—°ì´ ì ë‹¹í•´ìš”.';}
result.children = {gods: childGod,
count: childCount,
analysis: childAnalysis};const fatherGod = 'í¸ì¬';const motherGod = 'ì •ì¸';const fatherCount = result.counts[fatherGod] || 0;const motherCount = result.counts[motherGod] || 0;result.parents = {father: {god: fatherGod, count: fatherCount, analysis: fatherCount > 0 ? 'ì•„ë²„ì§€ì™€ ì¸ì—°ì´ ìˆì–´ìš”.' : 'ì•„ë²„ì§€ ì¸ì—°ì´ ì•½í•´ìš”.'},
mother: {god: motherGod, count: motherCount, analysis: motherCount > 0 ? 'ì–´ë¨¸ë‹ˆì™€ ì¸ì—°ì´ ê¹Šì–´ìš”.' : 'ì–´ë¨¸ë‹ˆ ì¸ì—°ì´ ë‹¤ì†Œ ì•½í•´ìš”.'}};for (let [god, count] of Object.entries(result.counts)) {if (count >= 2) {const info = yukData[god];if (info) {result.analysis.push({type: 'many',
god,
count,
meaning: `${god}ì´ ë§ì•„ì„œ ${info.detailed} ê´€ë ¨ ì¼ì´ ë§ì•„ìš”.`});}}}
const allGods = ['ë¹„ê²¬','ê²ì¬','ì‹ì‹ ','ìƒê´€','í¸ì¬','ì •ì¬','í¸ê´€','ì •ê´€','í¸ì¸','ì •ì¸'];allGods.forEach(god => {if (!result.counts[god]) {const info = yukData[god];if (info) {result.analysis.push({type: 'none',
god,
meaning: `${god}ì´ ì—†ì–´ì„œ ${info.detailed} ì¸ì—°ì´ ì•½í•´ìš”.`});}}});return result;}
const FORMATS_INNER = {'ë¹„ê²¬':{n:'ë¹„ê²¬ê²©(æ¯”è‚©æ ¼)',d:'ë…ë¦½ì‹¬ê³¼ ê²½ìŸì‹¬ì´ ê°•í•œ ììˆ˜ì„±ê°€í˜•ì…ë‹ˆë‹¤. ë‚¨ì—ê²Œ ì§€ê¸° ì‹«ì–´í•˜ê³  ìì¡´ì‹¬ì´ ì…‰ë‹ˆë‹¤. í˜•ì œ, ë™ë£Œì™€ì˜ ì¸ì—°ì´ ê¹Šìœ¼ë©°, ë™ì—…ì´ë‚˜ í˜‘ë ¥ ì‚¬ì—…ì—ì„œ ì„±ê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ê³ ì§‘ì´ ì„¸ê³  ë…ë‹¨ì ì¼ ìˆ˜ ìˆìœ¼ë‹ˆ í˜‘ì¡°í•˜ëŠ” ìì„¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.',b:'ë…ë¦½ ì‚¬ì—…, í”„ë¦¬ëœì„œ, ìŠ¤í¬ì¸ , ê²½ìŸ ë¶„ì•¼',lv:'ì¤‘'},
'ê²ì¬':{n:'ê²ì¬ê²©(åŠ«è²¡æ ¼)',d:'ë„ì „ì ì´ê³  ìŠ¹ë¶€ìš•ì´ ê°•í•©ë‹ˆë‹¤. ë°°ì§±ì´ ìˆì–´ í°ì¼ì„ ë²Œì´ì§€ë§Œ, ë•Œë¡œëŠ” ë¬´ëª¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¬ë¬¼ì— ëŒ€í•œ ìš•ì‹¬ì´ ìˆê³  íˆ¬ê¸°ì„±ì´ ìˆì–´ í•œíƒ•ì£¼ì˜ì— ë¹ ì§€ê¸° ì‰½ìŠµë‹ˆë‹¤. ì¸ë‚´ì‹¬ì„ ê¸°ë¥´ê³  ê¾¸ì¤€íˆ ë…¸ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.',b:'íˆ¬ì, ë„ë°•, ëª¨í—˜ ì‚¬ì—…, ì˜ì—…',lv:'í•˜'},
'ì‹ì‹ ':{n:'ì‹ì‹ ê²©(é£Ÿç¥æ ¼)',d:'íƒ€ê³ ë‚œ ì¬ëŠ¥ì´ ë§ê³  ì˜ì‹ì£¼ê°€ í’ì¡±í•©ë‹ˆë‹¤. ë¨¹ëŠ” ë³µì´ ìˆê³  ì„±ê²©ì´ ë‚™ì²œì ì…ë‹ˆë‹¤. ì˜ˆìˆ ì  ê°ê°ì´ ë›°ì–´ë‚˜ê³  í‘œí˜„ë ¥ì´ ì¢‹ìŠµë‹ˆë‹¤. ìì‹ìš´ì´ ì¢‹ê³  ìˆ˜ëª…ë„ ê¸´ í¸ì…ë‹ˆë‹¤. ë‹¤ë§Œ ê²Œì„ëŸ¬ì§€ê¸° ì‰¬ìš°ë‹ˆ ë¶€ì§€ëŸ°í•¨ì´ í•„ìš”í•©ë‹ˆë‹¤.',b:'ìš”ì‹ì—…, ì˜ˆìˆ , êµìœ¡, ì—°ì˜ˆ, ì°½ì‘',lv:'ìƒ'},
'ìƒê´€':{n:'ìƒê´€ê²©(å‚·å®˜æ ¼)',d:'ì°½ì˜ì ì´ê³  ì˜ˆìˆ ì  ê°ì„±ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ë¨¸ë¦¬ê°€ ì´ëª…í•˜ê³  ì–¸ë³€ì´ ì¢‹ìŠµë‹ˆë‹¤. ê·œì¹™ì— ì–½ë§¤ì´ê¸° ì‹«ì–´í•˜ê³  ììœ ë¡œìš´ ì˜í˜¼ì…ë‹ˆë‹¤. ë‹¤ë§Œ ì…ì´ ê±°ì¹ ê³  ê¶Œìœ„ì— ë°˜í•­í•˜ëŠ” ê²½í–¥ì´ ìˆì–´ ìƒì‚¬ì™€ ì¶©ëŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',b:'ì—°ì˜ˆ, ì˜ˆìˆ , ê°•ì—°, ë¹„í‰, ê¸°íš',lv:'ì¤‘'},
'í¸ì¬':{n:'í¸ì¬ê²©(åè²¡æ ¼)',d:'ì‚¬ì—… ìˆ˜ì™„ì´ ì¢‹ê³  íˆ¬ì ê°ê°ì´ íƒì›”í•©ë‹ˆë‹¤. íš¡ì¬ìˆ˜ê°€ ìˆê³  ëˆì´ í¬ê²Œ ë“¤ì–´ì™”ë‹¤ ë‚˜ê°€ëŠ” íƒ€ì…ì…ë‹ˆë‹¤. ì‚¬êµì„±ì´ ì¢‹ì•„ ì¸ë§¥ì´ ë„“ê³ , ì•„ë²„ì§€ì™€ì˜ ì¸ì—°ì´ ê¹ŠìŠµë‹ˆë‹¤. ì´ì„±ìš´ì´ ì¢‹ì§€ë§Œ ë°”ëŒê¸° ì£¼ì˜!',b:'ë¬´ì—­, ìœ í†µ, íˆ¬ì, ì˜ì—…, ì¤‘ê°œì—…',lv:'ìƒ'},
'ì •ì¬':{n:'ì •ì¬ê²©(æ­£è²¡æ ¼)',d:'ì„±ì‹¤í•˜ê³  ì €ì¶•ì„ ì˜í•©ë‹ˆë‹¤. ì •ì§í•˜ê³  ì°©ì‹¤í•œ ì„±ê²©ìœ¼ë¡œ ì‹ ìš©ì´ ì¢‹ìŠµë‹ˆë‹¤. ê¾¸ì¤€íˆ ëª¨ì•„ì„œ ë¶€ì ë˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤. ê°€ì •ì ì´ê³  ë°°ìš°ìì™€ì˜ ì¸ì—°ì´ ì¢‹ìŠµë‹ˆë‹¤. ë‹¤ë§Œ ì†Œì‹¬í•˜ê³  ì¸ìƒ‰í•´ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',b:'íšŒê³„, ê¸ˆìœµ, ê³µë¬´ì›, ê´€ë¦¬ì§',lv:'ìƒ'},
'í¸ê´€':{n:'í¸ê´€ê²©(ä¸ƒæ®ºæ ¼)',d:'ê¶Œìœ„ì™€ ì¶”ì§„ë ¥ì´ ìˆìŠµë‹ˆë‹¤. ì¹´ë¦¬ìŠ¤ë§ˆ ìˆê³  ê²°ë‹¨ë ¥ì´ ë¹ ë¦…ë‹ˆë‹¤. ê²½ìŸì—ì„œ ì´ê¸°ê³  ì¶œì„¸í•˜ë ¤ëŠ” ìš•êµ¬ê°€ ê°•í•©ë‹ˆë‹¤. ì˜ ë‹¤ìŠ¤ë¦¬ë©´ ì¥êµ° ì¬ëª©ì´ì§€ë§Œ, ì˜ëª»í•˜ë©´ ë‹¤í˜ˆì§ˆë¡œ ì ì„ ë§ì´ ë§Œë“­ë‹ˆë‹¤.',b:'êµ°ê²½, ë²•ì¡°, ì •ì¹˜, ë¬´ìˆ , ìŠ¤í¬ì¸ ',lv:'ì¤‘'},
'ì •ê´€':{n:'ì •ê´€ê²©(æ­£å®˜æ ¼)',d:'í’ˆìœ„ ìˆê³  ëª…ì˜ˆë¥¼ ì¤‘ì‹œí•©ë‹ˆë‹¤. ê·œë²”ì„ ì˜ ì§€í‚¤ê³  ì±…ì„ê°ì´ ê°•í•©ë‹ˆë‹¤. ì¡°ì§ì—ì„œ ì¸ì •ë°›ê³  ìŠ¹ì§„ì´ ë¹ ë¦…ë‹ˆë‹¤. ê´€ì§ìš´ì´ ìˆì–´ ê³µì§ì´ë‚˜ ëŒ€ê¸°ì—…ì—ì„œ ì„±ê³µí•©ë‹ˆë‹¤. ë‹¤ë§Œ ìœµí†µì„±ì´ ë¶€ì¡±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',b:'ê³µë¬´ì›, ëŒ€ê¸°ì—…, ë²•ì¡°, êµìœ¡ê³„',lv:'ìµœìƒ'},
'í¸ì¸':{n:'í¸ì¸ê²©(åå°æ ¼/æ¢Ÿç¥æ ¼)',d:'í•™êµ¬ì ì´ê³  íƒêµ¬ì‹¬ì´ ê°•í•©ë‹ˆë‹¤. ë…íŠ¹í•œ ì‚¬ê³ ë°©ì‹ìœ¼ë¡œ ë¹„ë²”í•œ ì•„ì´ë””ì–´ë¥¼ ëƒ…ë‹ˆë‹¤. ì¢…êµ, ì² í•™, ì‹ ë¹„í•™ì— ê´€ì‹¬ì´ ë§ìŠµë‹ˆë‹¤. ë‹¤ë§Œ í•œ ê°€ì§€ì— ì§‘ì¤‘ ëª»í•˜ê³  ëì„ ëª» ë§ºëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.',b:'ì—°êµ¬, ê¸°ìˆ , IT, ì¢…êµ, ì˜ë£Œ',lv:'ì¤‘'},
'ì •ì¸':{n:'ì •ì¸ê²©(æ­£å°æ ¼)',d:'ì¸ë•ì´ ìˆê³  í•™ë¬¸ì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ì–´ë¨¸ë‹ˆì™€ì˜ ì¸ì—°ì´ ê¹Šê³  ë¶€ëª¨ë•ì´ ìˆìŠµë‹ˆë‹¤. ë°°ì›€ì— ëŒ€í•œ ì—´ì •ì´ ìˆì–´ í•™ì, êµìœ¡ìì— ì í•©í•©ë‹ˆë‹¤. ì„±í’ˆì´ ì–´ì§ˆê³  ë‚¨ì„ ì˜ ëŒë´…ë‹ˆë‹¤.',b:'êµìœ¡, ì¶œíŒ, í•™ìˆ , ì¢…êµ, ë³µì§€',lv:'ìƒ'}};const FORMATS_SPECIAL = {'jongwang': {n:'ì¢…ì™•ê²©(å¾æ—ºæ ¼)', d:'ì¼ê°„ì˜ ê¸°ìš´ì´ ê·¹ë„ë¡œ ê°•í•˜ì—¬ ë¹„ê²ìœ¼ë¡œ ì¢…(å¾)í•˜ëŠ” ê²©ì…ë‹ˆë‹¤. ìê¸° ëœ»ëŒ€ë¡œ ì‚´ì•„ì•¼ í•˜ê³ , ë‚¨ ë°‘ì—ì„œ ì¼í•˜ë©´ ë‹µë‹µí•©ë‹ˆë‹¤. ììˆ˜ì„±ê°€í•˜ëŠ” ì‚¬ì—…ê°€, CEO, ë…ë¦½ ì „ë¬¸ê°€ì— ì í•©í•©ë‹ˆë‹¤. ê°•í•œ ìì¡´ì‹¬ê³¼ ì¶”ì§„ë ¥ìœ¼ë¡œ ì„±ê³µí•©ë‹ˆë‹¤.', b:'CEO, ì‚¬ì—…ê°€, ì •ì¹˜ì¸, ë…ë¦½ ì „ë¬¸ê°€', lv:'íŠ¹ìˆ˜'},
'jonggang': {n:'ì¢…ê°•ê²©(å¾å¼·æ ¼)', d:'ì¼ê°„ì´ ê°•í•˜ê³  ì¸ì„±ë„ ì™•ì„±í•˜ì—¬ ì¸ì„±ìœ¼ë¡œ ì¢…í•˜ëŠ” ê²©ì…ë‹ˆë‹¤. í•™ë¬¸ê³¼ ëª…ì˜ˆë¥¼ ì¤‘ì‹œí•˜ê³  ê¶Œìœ„ìˆëŠ” ìë¦¬ì— ì˜¤ë¦…ë‹ˆë‹¤. êµìˆ˜, ì—°êµ¬ì›, ê³ ìœ„ ê³µë¬´ì›ì— ì í•©í•©ë‹ˆë‹¤.', b:'êµìˆ˜, ì—°êµ¬ì›, ê³ ìœ„ ê³µì§', lv:'íŠ¹ìˆ˜'},
'jonga': {n:'ì¢…ì•„ê²©(å¾å…’æ ¼)', d:'ì‹ìƒì´ ê·¹ë„ë¡œ ì™•ì„±í•˜ì—¬ ì‹ìƒìœ¼ë¡œ ì¢…í•˜ëŠ” ê²©ì…ë‹ˆë‹¤. ì¬ëŠ¥ê³¼ í‘œí˜„ë ¥ì´ ë›°ì–´ë‚˜ê³  ì˜ˆìˆ , ì—°ì˜ˆ, ì°½ì‘ì—ì„œ í¬ê²Œ ì„±ê³µí•©ë‹ˆë‹¤. ììœ ë¡œìš´ ì˜í˜¼ìœ¼ë¡œ ì‚´ì•„ì•¼ í•©ë‹ˆë‹¤.', b:'ì˜ˆìˆ ê°€, ì—°ì˜ˆì¸, ì‘ê°€, í¬ë¦¬ì—ì´í„°', lv:'íŠ¹ìˆ˜'},
'jongjae': {n:'ì¢…ì¬ê²©(å¾è²¡æ ¼)', d:'ì¬ì„±ì´ ê·¹ë„ë¡œ ì™•ì„±í•˜ì—¬ ì¬ì„±ìœ¼ë¡œ ì¢…í•˜ëŠ” ê²©ì…ë‹ˆë‹¤. ì¬ë¬¼ì„ ë‹¤ë£¨ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•˜ê³  ì‚¬ì—…ê°€, ê¸ˆìœµì¸ìœ¼ë¡œ í° ë¶€ë¥¼ ì´ë£¹ë‹ˆë‹¤. ëˆê³¼ ì¸ì—°ì´ ê¹ŠìŠµë‹ˆë‹¤.', b:'ê¸ˆìœµì¸, ì‚¬ì—…ê°€, íˆ¬ìì, ë¶€ë™ì‚°', lv:'íŠ¹ìˆ˜'},
'jongsal': {n:'ì¢…ì‚´ê²©(å¾æ®ºæ ¼)', d:'ê´€ì‚´ì´ ê·¹ë„ë¡œ ì™•ì„±í•˜ì—¬ ê´€ì‚´ë¡œ ì¢…í•˜ëŠ” ê²©ì…ë‹ˆë‹¤. ê¶Œë ¥ê³¼ ëª…ì˜ˆë¥¼ ì¶”êµ¬í•˜ê³  ì¡°ì§ì—ì„œ ë†’ì€ ìë¦¬ì— ì˜¤ë¦…ë‹ˆë‹¤. êµ°ê²½, ì •ì¹˜ì¸, ê³ ìœ„ ì„ì›ì— ì í•©í•©ë‹ˆë‹¤.', b:'êµ°ê²½, ì •ì¹˜ì¸, ì„ì›, ë²•ì¡°ì¸', lv:'íŠ¹ìˆ˜'},
'yangin': {n:'ì–‘ì¸ê²©(ç¾Šåˆƒæ ¼)', d:'ì¼ì§€ì— ì–‘ì¸(ç¾Šåˆƒ)ì´ ìˆì–´ ê·¹ê°•í•œ ê¸°ìš´ì„ ê°€ì§„ ê²©ì…ë‹ˆë‹¤. ê²°ë‹¨ë ¥ê³¼ ì¶”ì§„ë ¥ì´ ëŒ€ë‹¨í•˜ê³  ìœ„ê¸°ì— ê°•í•©ë‹ˆë‹¤. ì¹¼ë‚  ê°™ì€ ì„±ê²©ìœ¼ë¡œ ì ì„ ë§Œë“¤ê¸°ë„ í•˜ì§€ë§Œ, ì˜ ì“°ë©´ ì˜ì›…ì´ ë©ë‹ˆë‹¤.', b:'êµ°ì¸, ì™¸ê³¼ì˜, ë²•ì¡°ì¸, ìŠ¤í¬ì¸  ì„ ìˆ˜', lv:'íŠ¹ìˆ˜'},
'geonrok': {n:'ê±´ë¡ê²©(å»ºç¥¿æ ¼)', d:'ì›”ì§€ê°€ ì¼ê°„ì˜ ê±´ë¡ì§€ì—¬ì„œ ê¸°ìš´ì´ ì™•ì„±í•©ë‹ˆë‹¤. ìŠ¤ìŠ¤ë¡œ ì¼ì–´ì„œëŠ” ììˆ˜ì„±ê°€í˜•ì´ê³ , ì§ì—… ì•ˆì •ì„±ì´ ì¢‹ìŠµë‹ˆë‹¤. ê¾¸ì¤€í•œ ë…¸ë ¥ìœ¼ë¡œ ì¤‘ë…„ ì´í›„ ë°œë³µí•©ë‹ˆë‹¤.', b:'ê³µë¬´ì›, ì „ë¬¸ì§, ìì˜ì—…', lv:'ìƒ'},
'woldeok': {n:'ì›”ë•ê²©(æœˆå¾·æ ¼)', d:'ì›”ë•ê·€ì¸ì´ ìˆì–´ ë•ì´ ìˆê³  ì–´ë ¤ìš¸ ë•Œ ë„ì›€ì„ ë°›ìŠµë‹ˆë‹¤. ì¸í’ˆì´ ì¢‹ê³  ì‹ ë¢°ë°›ìœ¼ë©° ê´€ì§ìš´ì´ ìˆìŠµë‹ˆë‹¤.', b:'ê³µì§, êµìœ¡, ì¢…êµ', lv:'ìƒ'}};function isFormatBroken(saju, formatGod) {const dm = saju.day.s;const dmEl = dm.e;const breakReasons = [];if (formatGod === 'ì •ê´€') {const allPillars = [saju.year, saju.month, saju.day, saju.hour].filter(p => p);for (let p of allPillars) {const god = getTenGod(p.s, dm);if (god.k === 'ìƒê´€') {breakReasons.push('ìƒê´€ê²¬ê´€(å‚·å®˜è¦‹å®˜): ìƒê´€ì´ ì •ê´€ì„ ê·¹í•˜ì—¬ íŒŒê²©');}}}
if (formatGod === 'ì‹ì‹ ') {const allPillars = [saju.year, saju.month, saju.day, saju.hour].filter(p => p);for (let p of allPillars) {const god = getTenGod(p.s, dm);if (god.k === 'í¸ì¸') {breakReasons.push('íš¨ì‹ íƒˆì‹(æ¢Ÿç¥å¥ªé£Ÿ): í¸ì¸ì´ ì‹ì‹ ì„ ê·¹í•˜ì—¬ íŒŒê²©');}}}
if (formatGod === 'ì •ì¬' || formatGod === 'í¸ì¬') {let biCount = 0;const allPillars = [saju.year, saju.month, saju.day, saju.hour].filter(p => p);for (let p of allPillars) {const god = getTenGod(p.s, dm);if (god.k === 'ë¹„ê²¬' || god.k === 'ê²ì¬') biCount++;}
if (biCount >= 2) {breakReasons.push('êµ°ê²ìŸì¬(ç¾¤åŠ«çˆ­è²¡): ë¹„ê²ì´ ë§ì•„ ì¬ë¥¼ ë¹¼ì•—ê¹€');}}
return breakReasons;}
function checkSpecialFormat(saju, strength) {if (!strength.extreme) return null;const dm = saju.day.s;const ec = countElements(saju);const allPillars = [saju.year, saju.month, saju.day, saju.hour].filter(p => p);const godCounts = {bigeop:0, sikSang:0, jae:0, gwan:0, in:0};allPillars.forEach(p => {const god = getTenGod(p.s, dm);if (['ë¹„ê²¬','ê²ì¬'].includes(god.k)) godCounts.bigeop++;if (['ì‹ì‹ ','ìƒê´€'].includes(god.k)) godCounts.sikSang++;if (['í¸ì¬','ì •ì¬'].includes(god.k)) godCounts.jae++;if (['í¸ê´€','ì •ê´€'].includes(god.k)) godCounts.gwan++;if (['í¸ì¸','ì •ì¸'].includes(god.k)) godCounts.in++;});const ybi = saju.year ? BRANCH.findIndex(b => b.c === saju.year.b.c) : -1;const hasSikSangWithRoot = saju.year && ['ìƒê´€','ì‹ì‹ '].includes(getTenGod(saju.year.s, saju.day.s)?.k) &&
(ybi === 5 || ybi === 6);if (strength.extreme === 'ê·¹ì‹ ê°•' && !hasSikSangWithRoot) {if (godCounts.bigeop >= 3) return FORMATS_SPECIAL.jongwang;if (godCounts.in >= 2 && godCounts.bigeop >= 2) return FORMATS_SPECIAL.jonggang;}
if (strength.extreme === 'ê·¹ì‹ ì•½') {if (godCounts.sikSang >= 3) return FORMATS_SPECIAL.jonga;if (godCounts.jae >= 3) return FORMATS_SPECIAL.jongjae;if (godCounts.gwan >= 3) return FORMATS_SPECIAL.jongsal;}
return null;}
function checkYangInGeonRok(saju) {const dm = saju.day.s;const dsi = STEM.indexOf(dm);const mbi = BRANCH.indexOf(saju.month.b);const geonrokMap = {0:2, 1:3, 2:5, 3:6, 4:5, 5:6, 6:8, 7:9, 8:11, 9:0};const yanginMap = {0:3, 1:2, 2:6, 3:5, 4:6, 5:5, 6:9, 7:8, 8:0, 9:11};if (mbi === geonrokMap[dsi]) {return FORMATS_SPECIAL.geonrok;}
const dbi = BRANCH.indexOf(saju.day.b);if (dbi === yanginMap[dsi]) {return {...FORMATS_SPECIAL.yangin, hasYangIn: true};}
return null;}
function calcFormat(saju, strength, samhapResult) {const str = strength || calcStrength(saju);const specialFormat = checkSpecialFormat(saju, str);if (specialFormat) {return {...specialFormat, type:'special', god:'íŠ¹ìˆ˜'};}
const yangInGeonRok = checkYangInGeonRok(saju);if (yangInGeonRok && yangInGeonRok.n.includes('ì–‘ì¸')) {return {...yangInGeonRok, type:'special', god:'ì–‘ì¸'};}
if (samhapResult && samhapResult.complete) {const samhapEl = samhapResult.element;const dm = saju.day.s;const dmEl = dm.e;const EL_ORDER = ['wood','fire','earth','metal','water'];const dmIdx = EL_ORDER.indexOf(dmEl);const samhapIdx = EL_ORDER.indexOf(samhapEl);const diff = (samhapIdx - dmIdx + 5) % 5;let samhapGod = '';let samhapFormatInfo = null;if (diff === 0) {samhapGod = 'ë¹„ê²¬';} else if (diff === 1) {samhapGod = 'ì‹ì‹ ';} else if (diff === 2) {samhapGod = 'í¸ì¬';} else if (diff === 3) {samhapGod = 'í¸ê´€';samhapFormatInfo = {n: `í¸ê´€ê²©(${samhapResult.name} ë³€ê²©)`,
d: `${samhapResult.name}ì´ ì™„ì„±ë˜ì–´ ê´€ì‚´ì´ íƒœì™•í•©ë‹ˆë‹¤. ì‹ì‹ ì œì‚´ì´ í•„ìš”í•˜ë©°, ì œì‚´ì´ ë˜ë©´ ê¶Œë ¥ê³¼ ì„±ê³µì„ ì–»ìŠµë‹ˆë‹¤. ì¹¼ì„ ì¥” ì¥êµ°ì˜ ê¸°ì§ˆì´ ìˆìŠµë‹ˆë‹¤.`,
b: 'êµ°ê²½, ê²€ì°°, ì˜ë£Œ, ê°ì‚¬, ë²•ì¡°ê³„',
formatReason: `${samhapResult.name} ì™„ì „ ì„±ë¦½ìœ¼ë¡œ ê´€ì‚´ ì§€ë°°`};} else if (diff === 4) {samhapGod = 'í¸ì¸';}
if (samhapFormatInfo) {return {...samhapFormatInfo,
god: samhapGod,
type: 'samhap_variation',
samhapBureau: samhapResult.name};}}
const mbi = BRANCH.indexOf(saju.month.b);const jj = JIJANGGAN[mbi];const mainJj = jj.find(j => j.days >= 16) || jj[jj.length - 1];const mainStem = STEM[mainJj.stem];const god = getTenGod(mainStem, saju.day.s);const monthGod = getTenGod(saju.month.s, saju.day.s);let finalGod = god.k;let formatReason = 'ì›”ì§€ ì •ê¸°';if (['ì‹ì‹ ','ìƒê´€','í¸ì¬','ì •ì¬','í¸ê´€','ì •ê´€','í¸ì¸','ì •ì¸'].includes(monthGod.k)) {const monthStemIdx = STEM.indexOf(saju.month.s);if (jj.some(j => j.stem === monthStemIdx)) {finalGod = monthGod.k;formatReason = 'ì›”ê°„ íˆ¬ì¶œ+ì›”ì§€ í†µê·¼';}
const brs = [BRANCH.indexOf(saju.year.b), mbi, BRANCH.indexOf(saju.day.b)];if (saju.hour) brs.push(BRANCH.indexOf(saju.hour.b));const samhapSets = [
{branches: [2,6,10], result: 'fire', name: 'ì¸ì˜¤ìˆ  í™”êµ­'},
{branches: [5,9,1], result: 'metal', name: 'ì‚¬ìœ ì¶• ê¸ˆêµ­'},
{branches: [8,0,4], result: 'water', name: 'ì‹ ìì§„ ìˆ˜êµ­'},
{branches: [11,3,7], result: 'wood', name: 'í•´ë¬˜ë¯¸ ëª©êµ­'}
];const monthStemElement = saju.month.s.e;for (const sh of samhapSets) {const hasCount = sh.branches.filter(b => brs.includes(b)).length;const hasCenter = brs.includes(sh.branches[1]);if (hasCount >= 2 && hasCenter) {const resultElementKey = sh.result;if (monthStemElement === resultElementKey) {finalGod = monthGod.k;formatReason = hasCount === 3 ?
`ì›”ê°„ íˆ¬ì¶œ+${sh.name} ì™„ì„±` :
`ì›”ê°„ íˆ¬ì¶œ+${sh.name} ë°˜í•©(ì™•ì§€ í¬í•¨)`;break;}}}
if (finalGod !== monthGod.k) {const otherBranches = [saju.year.b, saju.day.b];if (saju.hour) otherBranches.push(saju.hour.b);for (const br of otherBranches) {const brIdx = BRANCH.indexOf(br);const brJj = JIJANGGAN[brIdx];if (brJj.some(j => j.stem === monthStemIdx)) {for (const sh of samhapSets) {const hasCount = sh.branches.filter(b => brs.includes(b)).length;const hasCenter = brs.includes(sh.branches[1]);if (hasCount >= 2 && hasCenter && sh.branches.includes(brIdx)) {finalGod = monthGod.k;formatReason = `ì›”ê°„ íˆ¬ì¶œ+${br.c}ì§€ í†µê·¼+${sh.name.split(' ')[0]} ë°˜í•©`;break;}}
if (finalGod === monthGod.k) break;}}}}
const dmEl = saju.day.s.e;const wealthEl = EL_ORDER[(EL_ORDER.indexOf(dmEl) + 2) % 5];const ec = countElements(saju);const wealthPower = ec[wealthEl] || 0;if (wealthPower >= 3 && ['ì‹ì‹ ','ìƒê´€'].includes(finalGod)) {const str = calcStrength(saju);if (str.type === 'weak') {const dayIdx = EL_ORDER.indexOf(dmEl);const wealthGod = (dayIdx % 2 === 0) ? 'í¸ì¬' : 'ì •ì¬';finalGod = wealthGod;formatReason = `ì§€ì§€ ì¬ì„±(${ELEMENT[wealthEl].k}) íƒœì™• - ì¬ë‹¤ì‹ ì•½`;}}
if (yangInGeonRok && yangInGeonRok.n.includes('ê±´ë¡')) {return {...yangInGeonRok, type:'inner', god:'ê±´ë¡'};}
const breakReasons = isFormatBroken(saju, finalGod);const f = FORMATS_INNER[finalGod] || FORMATS_INNER['ì •ê´€'];return {...f,
god: finalGod,
type: 'inner',
broken: breakReasons.length > 0,
breakReasons,
tougan: monthGod.k !== god.k ? monthGod.k : null,
formatReason};}
function calcFormatSimple(saju) {const god = getTenGod(saju.month.s, saju.day.s);const f = FORMATS_INNER[god.k] || FORMATS_INNER['ì •ê´€'];f.god = god.k;return f;}
function getIljuDesc(ds, db) {const iljuData = {'ç”²å­':{t:'ç”²å­(ê°‘ì)ì¼ì£¼ - ë°”ë‹¤ ìœ„ì˜ í° ë‚˜ë¬´',d:'å­æ°´ê°€ ç”²æœ¨ì„ ìƒí•´ì£¼ë‹ˆ ì´ëª…í•˜ê³  í•™ë¬¸ì— ì¬ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤. ë¨¸ë¦¬ê°€ ì¢‹ê³  ê³„íšì„±ì´ ìˆìœ¼ë‚˜ ë•Œë¡œëŠ” ê±±ì •ì´ ë§ìŠµë‹ˆë‹¤. ë°¤ì— íƒœì–´ë‚˜ë©´ ë”ìš± ì¢‹ê³ , ë°°ìš°ìì™€ ì •ì´ ê¹ŠìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì§€ì ì´ê³  ë‚´ì¡°ë¥¼ ì˜í•©ë‹ˆë‹¤. ì—°í•˜ì™€ ì˜ ë§ìœ¼ë©° ë¬¼ê°€ì—ì„œ ì¸ì—°ì„ ë§Œë‚˜ê¸° ì‰½ìŠµë‹ˆë‹¤.'},
'ç”²å¯…':{t:'ç”²å¯…(ê°‘ì¸)ì¼ì£¼ - í˜¸ë‘ì´ ë“±ì— íƒ„ ë‚˜ë¬´',d:'ì¼ê°„ê³¼ ì¼ì§€ê°€ ê°™ì€ ì˜¤í–‰ìœ¼ë¡œ ìì¡´ì‹¬ì´ ì„¸ê³  ë…ë¦½ì‹¬ì´ ê°•í•©ë‹ˆë‹¤. ì¥ë‚¨ì¥ë…€ ê¸°ì§ˆì´ ìˆê³  ë¦¬ë”ì‹­ì´ ìˆìŠµë‹ˆë‹¤. ê³ ì§‘ì´ ì„¸ê³  ë‚¨ì—ê²Œ ì§€ê¸° ì‹«ì–´í•©ë‹ˆë‹¤.',s:'ë°°ìš°ìë„ ìì¡´ì‹¬ì´ ì„¸ì„œ ë¶€ë”ªí ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë¡œ ì–‘ë³´í•˜ëŠ” ìì„¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.'},
'ç”²è¾°':{t:'ç”²è¾°(ê°‘ì§„)ì¼ì£¼ - ìš©ì„ íƒ€ê³  ì˜¤ë¥´ëŠ” ë‚˜ë¬´',d:'ì§„í† ê°€ ëª©ì˜ ë¿Œë¦¬ê°€ ë˜ì–´ ì¬ëŠ¥ì´ í’ë¶€í•©ë‹ˆë‹¤. ì•¼ë§ì´ í¬ê³  ì¶œì„¸ìš•ì´ ìˆìŠµë‹ˆë‹¤. ë¬¸ì°½ì˜ ê¸°ìš´ì´ ìˆì–´ í•™ë¬¸ì— ëŠ¥í•˜ë©°, ì‚¬íšŒì ìœ¼ë¡œ ì¸ì •ë°›ê¸° ì‰½ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë“¬ì§í•˜ê³  ì¬ë¬¼ë³µì´ ìˆìŠµë‹ˆë‹¤. í† ë¼, ë‹­ë ì™€ ê¶í•©ì´ ì¢‹ìŠµë‹ˆë‹¤.'},
'ç”²åˆ':{t:'ç”²åˆ(ê°‘ì˜¤)ì¼ì£¼ - íƒœì–‘ ì•„ë˜ ìš°ëš ì„  ë‚˜ë¬´',d:'ëª©ìƒí™”ë¡œ ì¬ëŠ¥ì„ ë°œíœ˜í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤. í™”ë ¤í•˜ê³  ì˜ˆìˆ ì  ê°ê°ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ì„±ê²©ì´ ê¸‰í•˜ê³  ì—´ì •ì ì´ë©° ì¸ê¸°ê°€ ë§ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ í™œë°œí•˜ê³  ì‚¬êµì ì…ë‹ˆë‹¤. ë¶ˆê°™ì€ ì„±ê²©ìœ¼ë¡œ ë‹¤íˆ¼ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ ì„œë¡œ ì¡´ì¤‘í•´ì•¼ í•©ë‹ˆë‹¤.'},
'ç”²ç”³':{t:'ç”²ç”³(ê°‘ì‹ )ì¼ì£¼ - ë„ë¼ë¥¼ ë§ëŠ” ë‚˜ë¬´',d:'ê¸ˆê·¹ëª©ìœ¼ë¡œ ì¸ìƒì— ì‹œë ¨ì´ ìˆì§€ë§Œ ì´ë¥¼ ê·¹ë³µí•˜ë©´ ê°•í•´ì§‘ë‹ˆë‹¤. ê²°ë‹¨ë ¥ê³¼ ì¶”ì§„ë ¥ì´ ìƒê¸°ë©° ì—­ê²½ì— ê°•í•©ë‹ˆë‹¤. ì§ì¥ìš´ì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìì™€ ê°ˆë“±ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë¡œ ë‹¤ë¥¸ ì„±ê²©ì„ ì¸ì •í•˜ê³  ë°°ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.'},
'ç”²æˆŒ':{t:'ç”²æˆŒ(ê°‘ìˆ )ì¼ì£¼ - ê°€ì„ ì‚°ì˜ ë‚˜ë¬´',d:'ìˆ í†  ì†ì˜ ê¸ˆê¸°ìš´ì´ ëª©ì„ ê·¹í•˜ì—¬ ê³ ë…í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆìˆ ì  ì¬ëŠ¥ì´ ìˆê³  ì¢…êµ, ì² í•™ì— ê´€ì‹¬ì´ ë§ìŠµë‹ˆë‹¤. ëŠ¦ê²Œ í•„ íƒ€ì…ì…ë‹ˆë‹¤.',s:'ë°°ìš°ìì™€ì˜ ì¸ì—°ì´ ëŠ¦ê±°ë‚˜ ì‚¬ë³„, ì´ë³„ ì¡°ì‹¬í•´ì•¼ í•©ë‹ˆë‹¤.'},
'ä¹™ä¸‘':{t:'ä¹™ä¸‘(ì„ì¶•)ì¼ì£¼ - ê²¨ìš¸ ë•…ì˜ ì‘ì€ í’€',d:'ì¶•í† ê°€ ì„ëª©ì˜ ë¿Œë¦¬ê°€ ë˜ì–´ ëˆê¸°ê°€ ìˆìŠµë‹ˆë‹¤. ì„±ì‹¤í•˜ê³  í˜„ì‹¤ì ì´ë©° ì°©ì‹¤í•˜ê²Œ ì¬ë¬¼ì„ ëª¨ìë‹ˆë‹¤. ë‹¤ë§Œ ë‚´ì„±ì ì´ê³  ì†Œê·¹ì ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë“¬ì§í•˜ê³  ê²½ì œì ìœ¼ë¡œ ì•ˆì •ì ì…ë‹ˆë‹¤.'},
'ä¹™å¯':{t:'ä¹™å¯(ì„ë¬˜)ì¼ì£¼ - ë´„ë‚ ì˜ ê½ƒ',d:'ì¼ê°„ê³¼ ì¼ì§€ê°€ ê°™ì•„ ìê¸° ì£¼ê´€ì´ ëšœë ·í•©ë‹ˆë‹¤. ì„¬ì„¸í•˜ê³  ì˜ˆìˆ ì ì´ë©° ì¸ê¸°ê°€ ë§ìŠµë‹ˆë‹¤. ë¶€ë“œëŸ¬ìš´ ì™¸ëª¨ì™€ ë‹¬ë¦¬ ê³ ì§‘ì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ìì‹ ê³¼ ë¹„ìŠ·í•œ ì„±í–¥ì…ë‹ˆë‹¤. ì„œë¡œ ì¡´ì¤‘í•˜ë©´ ì¢‹ì€ ì¸ì—°ì…ë‹ˆë‹¤.'},
'ä¹™å·³':{t:'ä¹™å·³(ì„ì‚¬)ì¼ì£¼ - íƒœì–‘ì„ ë°›ëŠ” ê½ƒ',d:'ëª©ìƒí™”ë¡œ ì¬ëŠ¥ì„ ë°œíœ˜í•©ë‹ˆë‹¤. ì´ëª…í•˜ê³  ì–¸ë³€ì´ ì¢‹ìœ¼ë©° ì‚¬êµì„±ì´ ìˆìŠµë‹ˆë‹¤. ì´ì„±ì—ê²Œ ì¸ê¸°ê°€ ë§ê³  ì—°ì• ìš´ì´ ì¢‹ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ í™”ëˆí•˜ê³  ì—´ì •ì ì…ë‹ˆë‹¤. ë°”ëŒê¸° ì£¼ì˜!'},
'ä¹™æœª':{t:'ä¹™æœª(ì„ë¯¸)ì¼ì£¼ - ì—¬ë¦„ ì •ì›ì˜ í™”ì´ˆ',d:'ëª©ê·¹í† ë¡œ ì¬ë¬¼ì„ ì·¨í•˜ë‹ˆ ì‚¬ì—… ìˆ˜ì™„ì´ ì¢‹ìŠµë‹ˆë‹¤. ì˜ˆìˆ ì  ê°ê°ê³¼ ì¬í…Œí¬ ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤. ì—¬ì„±ì—ê²Œ íŠ¹íˆ ì¢‹ì€ ì¼ì£¼ì…ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ìˆœí•˜ê³  ê°€ì •ì ì…ë‹ˆë‹¤. ê²°í˜¼ í›„ ì¬ë¬¼ì´ ëŠ˜ì–´ë‚©ë‹ˆë‹¤.'},
'ä¹™é…‰':{t:'ä¹™é…‰(ì„ìœ )ì¼ì£¼ - ê°€ì„ ì„œë¦¬ ë§ëŠ” ê½ƒ',d:'ê¸ˆê·¹ëª©ìœ¼ë¡œ ì‹œë ¨ì´ ìˆì§€ë§Œ ì¸ë‚´í•˜ë©´ ì„±ê³µí•©ë‹ˆë‹¤. ì˜ˆë¦¬í•˜ê³  ë¹„íŒì ì´ë©° ì§ì—…ì¸ìœ¼ë¡œ ì„±ê³µí•˜ê¸° ì‰½ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìì™€ ê°ˆë“±ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë¡œ ë§ì¶°ê°€ëŠ” ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.'},
'ä¹™äº¥':{t:'ä¹™äº¥(ì„í•´)ì¼ì£¼ - ë¬¼ ìœ„ì— ëœ¬ ë¶€í‰ì´ˆ',d:'ìˆ˜ìƒëª©ìœ¼ë¡œ ì¬ëŠ¥ì´ í’ë¶€í•©ë‹ˆë‹¤. ì§€í˜œë¡­ê³  í•™ë¬¸ì— ëŠ¥í•˜ë©° ê·€ì¸ì˜ ë„ì›€ì„ ë°›ê¸° ì‰½ìŠµë‹ˆë‹¤. ìœ ì—°í•˜ê³  ì ì‘ë ¥ì´ ì¢‹ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì§€ì ì´ê³  ìƒí™œë ¥ì´ ê°•í•©ë‹ˆë‹¤.'},
'ä¸™å­':{t:'ä¸™å­(ë³‘ì)ì¼ì£¼ - ë°¤í•˜ëŠ˜ì˜ íƒœì–‘',d:'ìˆ˜ê·¹í™”ë¡œ ì‹œë ¨ì´ ìˆì§€ë§Œ ì´ë¥¼ ê·¹ë³µí•˜ëŠ” í˜ì´ ìˆìŠµë‹ˆë‹¤. ì°¨ê°€ìš´ ë¬¼ì— ë¹„ì¹œ ë”°ëœ»í•œ íƒœì–‘ì²˜ëŸ¼ ì´ì¤‘ì„±ì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìì™€ ì„±ê²© ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë¡œ ë³´ì™„í•˜ë©´ ì¢‹ì€ ì¸ì—°ì…ë‹ˆë‹¤.'},
'ä¸™å¯…':{t:'ä¸™å¯…(ë³‘ì¸)ì¼ì£¼ - ë™ìª½ì—ì„œ ë– ì˜¤ë¥´ëŠ” íƒœì–‘',d:'ëª©ìƒí™”ë¡œ ì¬ëŠ¥ì´ ë¹›ë‚˜ëŠ” ì¼ì£¼ì…ë‹ˆë‹¤. ë°ê³  í™œê¸°ì°¨ë©° ë¦¬ë”ì‹­ì´ ìˆìŠµë‹ˆë‹¤. ì´ë¥¸ ì•„ì¹¨ íƒœì–‘ì²˜ëŸ¼ í¬ë§ê³¼ ì—ë„ˆì§€ë¥¼ ì¤ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë“¬ì§í•˜ê³  ë“ ë“ í•©ë‹ˆë‹¤. ì¢‹ì€ ë‚´ì¡°ë¥¼ ë°›ìŠµë‹ˆë‹¤.'},
'ä¸™è¾°':{t:'ä¸™è¾°(ë³‘ì§„)ì¼ì£¼ - êµ¬ë¦„ ìœ„ì˜ íƒœì–‘',d:'ì§„í† ê°€ í™”ì˜ ê¸°ìš´ì„ ì„¤ê¸°í•˜ì—¬ ì¬ëŠ¥ì„ í¼ì¹˜ê¸° ì¢‹ìŠµë‹ˆë‹¤. ì•¼ë§ì´ í¬ê³  ì‚¬íšŒì  ì„±ê³µì„ ì´ë£¨ê¸° ì‰½ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì•ˆì •ì ì´ê³  ì¬ë¬¼ë³µì´ ìˆìŠµë‹ˆë‹¤.'},
'ä¸™åˆ':{t:'ä¸™åˆ(ë³‘ì˜¤)ì¼ì£¼ - í•œë‚®ì˜ íƒœì–‘',d:'í™”ì˜ ê¸°ìš´ì´ ê·¹ì— ë‹¬í•´ ì—´ì •ì ì´ê³  í™œë°œí•©ë‹ˆë‹¤. ì„±ê²©ì´ ê¸‰í•˜ê³  ìŠ¹ë¶€ìš•ì´ ê°•í•©ë‹ˆë‹¤. ë¦¬ë” ìì§ˆì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìë„ í™”ëˆí•œ ì„±ê²©ì…ë‹ˆë‹¤. ë‹¤íˆ¼ë„ ìˆì§€ë§Œ ì—´ì •ì ì¸ ì‚¬ë‘ì…ë‹ˆë‹¤.'},
'ä¸™ç”³':{t:'ä¸™ç”³(ë³‘ì‹ )ì¼ì£¼ - ì €ë…ë…¸ì„',d:'í™”ê·¹ê¸ˆìœ¼ë¡œ ëˆì„ ë²Œ ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤. ì‚¬ì—… ìˆ˜ì™„ì´ ì¢‹ê³  ì¬ë¬¼ìš´ì´ ìˆìŠµë‹ˆë‹¤. ë§ë…„ì— ì¢‹ì•„ì§€ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì¬ëŠ¥ì´ ìˆê³  ëˆì„ ì˜ ë²•ë‹ˆë‹¤.'},
'ä¸™æˆŒ':{t:'ä¸™æˆŒ(ë³‘ìˆ )ì¼ì£¼ - ì‚° ìœ„ì˜ ë´‰í™”ë¶ˆ',d:'ìˆ í† ê°€ í™”ë¥¼ ì„¤ê¸°í•˜ì—¬ ì•ˆì •ì ì…ë‹ˆë‹¤. ì‹ ì¤‘í•˜ê³  ì±…ì„ê°ì´ ìˆìœ¼ë©° ì‹ ë¢°ë°›ìŠµë‹ˆë‹¤. ì¢…êµ, ì² í•™ì— ê´€ì‹¬ì´ ë§ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë“¬ì§í•˜ê³  ë¯¿ìŒì§í•©ë‹ˆë‹¤. ëŠ¦ì€ ê²°í˜¼ì´ ì¢‹ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
'ä¸ä¸‘':{t:'ä¸ä¸‘(ì •ì¶•)ì¼ì£¼ - ë“±ë¶ˆ',d:'ì¶•í† ê°€ í™”ë¥¼ ì„¤ê¸°í•˜ì—¬ ì°¨ë¶„í•©ë‹ˆë‹¤. ë‚´ì„±ì ì´ì§€ë§Œ ë”°ëœ»í•œ ë§ˆìŒì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. ê¾¸ì¤€íˆ ë…¸ë ¥í•˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì„±ì‹¤í•˜ê³  ê°€ì •ì ì…ë‹ˆë‹¤. ì•ˆì •ì ì¸ ê²°í˜¼ìƒí™œì…ë‹ˆë‹¤.'},
'ä¸å¯':{t:'ä¸å¯(ì •ë¬˜)ì¼ì£¼ - ìˆ²ì†ì˜ ë°˜ë”§ë¶ˆ',d:'ëª©ìƒí™”ë¡œ ì¬ëŠ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ì˜ˆìˆ ì  ê°ê°ì´ ìˆê³  ì„¬ì„¸í•©ë‹ˆë‹¤. ê·€ì¸ì˜ ë„ì›€ì„ ë°›ê¸° ì‰½ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë‹¤ì •í•˜ê³  ì˜ˆìˆ ì ì…ë‹ˆë‹¤.'},
'ä¸å·³':{t:'ä¸å·³(ì •ì‚¬)ì¼ì£¼ - íƒ€ì˜¤ë¥´ëŠ” ì´›ë¶ˆ',d:'í™”ì˜ ê¸°ìš´ì´ ê°•í•´ ì—´ì •ì ì…ë‹ˆë‹¤. ì§‘ì¤‘ë ¥ì´ ì¢‹ê³  í•œ ë¶„ì•¼ì—ì„œ ì„±ê³µí•˜ê¸° ì‰½ìŠµë‹ˆë‹¤. ì„±ê²©ì´ ê¸‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì—´ì •ì ì´ê³  í™œë™ì ì…ë‹ˆë‹¤.'},
'ä¸æœª':{t:'ä¸æœª(ì •ë¯¸)ì¼ì£¼ - ì €ë…ë…¸ì„',d:'í™”ìƒí† ë¡œ ìì‹ìš´ì´ ì¢‹ìŠµë‹ˆë‹¤. ë”°ëœ»í•˜ê³  í¬ìš©ë ¥ì´ ìˆìœ¼ë©° ë‚¨ì„ ì˜ ëŒë´…ë‹ˆë‹¤. ì¢…êµ, ë´‰ì‚¬ì— ê´€ì‹¬ì´ ë§ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ìˆœí•˜ê³  ê°€ì •ì ì…ë‹ˆë‹¤.'},
'ä¸é…‰':{t:'ä¸é…‰(ì •ìœ )ì¼ì£¼ - ë³´ì„ì„ ë…¹ì´ëŠ” ë¶ˆê½ƒ',d:'í™”ê·¹ê¸ˆìœ¼ë¡œ ì¬ë¬¼ì„ ë‹¤ë£¨ëŠ” ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤. ì†ì¬ì£¼ê°€ ì¢‹ê³  ê¸°ìˆ ì§ì— ì í•©í•©ë‹ˆë‹¤. ê¹Œë‹¤ë¡­ê³  ì™„ë²½ì£¼ì˜ì…ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì¬ëŠ¥ì´ ìˆì§€ë§Œ ì„±ê²© ë§ì¶”ê¸°ê°€ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
'ä¸äº¥':{t:'ä¸äº¥(ì •í•´)ì¼ì£¼ - ë°”ë‹¤ ìœ„ì˜ ë“±ëŒ€',d:'ìˆ˜ê·¹í™”ë¡œ ì‹œë ¨ì´ ìˆì§€ë§Œ ì‚¬ëŒë“¤ì—ê²Œ í¬ë§ì„ ì£¼ëŠ” ì¡´ì¬ì…ë‹ˆë‹¤. ì§€í˜œë¡­ê³  ê¹Šì€ ìƒê°ì„ í•©ë‹ˆë‹¤.',s:'ë°°ìš°ìì™€ ì„±ê²© ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
'æˆŠå­':{t:'æˆŠå­(ë¬´ì)ì¼ì£¼ - ë¬¼ê°€ì˜ ë‘‘',d:'í† ê·¹ìˆ˜ë¡œ ì¬ë¬¼ì„ ì·¨í•©ë‹ˆë‹¤. ì‚¬ì—… ìˆ˜ì™„ì´ ì¢‹ê³  ì¬ë¬¼ìš´ì´ ìˆìŠµë‹ˆë‹¤. í˜„ì‹¤ì ì´ê³  ê³„ì‚°ì´ ë¹ ë¦…ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì§€ì ì´ê³  ìƒí™œë ¥ì´ ìˆìŠµë‹ˆë‹¤.'},
'æˆŠå¯…':{t:'æˆŠå¯…(ë¬´ì¸)ì¼ì£¼ - ìˆ²ì†ì˜ ì‚°',d:'ëª©ê·¹í† ì´ì§€ë§Œ ë¿Œë¦¬ê°€ ì‚°ì„ ê°ì‹¸ì•ˆìŠµë‹ˆë‹¤. ì¸ë•ì´ ìˆê³  ê·€ì¸ì˜ ë„ì›€ì„ ë°›ìŠµë‹ˆë‹¤. í•™ë¬¸ì— ì¬ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë˜‘ë˜‘í•˜ê³  ëŠ¥ë ¥ìˆìŠµë‹ˆë‹¤.'},
'æˆŠè¾°':{t:'æˆŠè¾°(ë¬´ì§„)ì¼ì£¼ - ìš©ì´ ê¹ƒë“  ì‚°',d:'í† ì˜ ê¸°ìš´ì´ ê°•í•´ ë“¬ì§í•˜ê³  ì‹ ë¢°ë°›ìŠµë‹ˆë‹¤. ì•¼ë§ì´ í¬ê³  ì¶œì„¸ìš•ì´ ìˆìŠµë‹ˆë‹¤. ì¬ë¬¼ìš´ê³¼ ê´€ì§ìš´ì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë¯¿ìŒì§í•˜ê³  ì•ˆì •ì ì…ë‹ˆë‹¤.'},
'æˆŠåˆ':{t:'æˆŠåˆ(ë¬´ì˜¤)ì¼ì£¼ - íƒœì–‘ ë¹› ë°›ëŠ” ëŒ€ì§€',d:'í™”ìƒí† ë¡œ ì—ë„ˆì§€ê°€ ë„˜ì¹©ë‹ˆë‹¤. í™œë°œí•˜ê³  ì‚¬êµì ì´ë©° ì¸ê¸°ê°€ ë§ìŠµë‹ˆë‹¤. ì¼ì° ì„±ê³µí•˜ê¸° ì‰½ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë°ê³  í™œê¸°ì°¹ë‹ˆë‹¤.'},
'æˆŠç”³':{t:'æˆŠç”³(ë¬´ì‹ )ì¼ì£¼ - ê´‘ì‚°ì˜ ì‚°',d:'í† ìƒê¸ˆìœ¼ë¡œ ì¬ë¬¼ì„ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤. ì‚¬ì—… ìˆ˜ì™„ì´ ì¢‹ê³  ì¬í…Œí¬ ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤. ì‹¤ìš©ì ì´ê³  í˜„ì‹¤ì ì…ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì´ëª…í•˜ê³  ëŠ¥ë ¥ìˆìŠµë‹ˆë‹¤.'},
'æˆŠæˆŒ':{t:'æˆŠæˆŒ(ë¬´ìˆ )ì¼ì£¼ - ë†’ì€ ì‚°',d:'í† ì˜ ê¸°ìš´ì´ ê·¹ì— ë‹¬í•´ ê³ ì§‘ì´ ì„¸ê³  ëšì‹¬ì´ ìˆìŠµë‹ˆë‹¤. í•œë²ˆ ê²°ì‹¬í•˜ë©´ ëê¹Œì§€ ë°€ê³  ë‚˜ê°‘ë‹ˆë‹¤.',s:'ë°°ìš°ìì™€ ê³ ì§‘ ì‹¸ì›€ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì–‘ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.'},
'å·±ä¸‘':{t:'å·±ä¸‘(ê¸°ì¶•)ì¼ì£¼ - ë¹„ì˜¥í•œ ì „ë‹µ',d:'í† ì˜ ê¸°ìš´ì´ ë‘ ë°°ë¡œ ì•ˆì •ì ì´ê³  ì°©ì‹¤í•©ë‹ˆë‹¤. ë¶€ë™ì‚°ìš´ì´ ìˆê³  ì €ì¶•ì„ ì˜í•©ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì„±ì‹¤í•˜ê³  ê°€ì •ì ì…ë‹ˆë‹¤.'},
'å·±å¯':{t:'å·±å¯(ê¸°ë¬˜)ì¼ì£¼ - ì •ì›ì˜ í™',d:'ëª©ê·¹í† ì´ì§€ë§Œ í™”ì´ˆë¥¼ ê¸°ë¥´ëŠ” ì¢‹ì€ í™ì…ë‹ˆë‹¤. ìì‹ìš´ì´ ì¢‹ê³  ì¸ë•ì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë˜‘ë˜‘í•˜ê³  ëŠ¥ë ¥ìˆìŠµë‹ˆë‹¤.'},
'å·±å·³':{t:'å·±å·³(ê¸°ì‚¬)ì¼ì£¼ - ë”°ëœ»í•œ ëŒ€ì§€',d:'í™”ìƒí† ë¡œ ê·€ì¸ì˜ ë„ì›€ì„ ë°›ìŠµë‹ˆë‹¤. ì´ëª…í•˜ê³  ì¬ëŠ¥ì´ ë§ìŠµë‹ˆë‹¤. ì¸ê¸°ê°€ ìˆê³  ì‚¬êµì„±ì´ ì¢‹ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë°ê³  í™œë°œí•©ë‹ˆë‹¤.'},
'å·±æœª':{t:'å·±æœª(ê¸°ë¯¸)ì¼ì£¼ - ì—¬ë¦„ ì •ì›',d:'í† ì˜ ê¸°ìš´ì´ ë‘ ë°°ë¡œ ì°©ì‹¤í•©ë‹ˆë‹¤. ë¶€ë™ì‚°ìš´ì´ ì¢‹ê³  ë§ë…„ì´ í¸ì•ˆí•©ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ìˆœí•˜ê³  ê°€ì •ì ì…ë‹ˆë‹¤.'},
'å·±é…‰':{t:'å·±é…‰(ê¸°ìœ )ì¼ì£¼ - ê°€ì„ ë“¤íŒ',d:'í† ìƒê¸ˆìœ¼ë¡œ ì¬ë¬¼ì„ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤. ì¬ëŠ¥ì´ ìˆê³  ì˜ˆìˆ ì  ê°ê°ì´ ìˆìŠµë‹ˆë‹¤. ê²°ì‹¤ì„ ë§ºê¸° ì¢‹ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì´ëª…í•˜ê³  ëŠ¥ë ¥ìˆìŠµë‹ˆë‹¤.'},
'å·±äº¥':{t:'å·±äº¥(ê¸°í•´)ì¼ì£¼ - ë¬¼ê°€ì˜ ë‘‘',d:'í† ê·¹ìˆ˜ë¡œ ì¬ë¬¼ì„ ì·¨í•©ë‹ˆë‹¤. ì§€í˜œë¡­ê³  ê³„ì‚°ì´ ë¹ ë¦…ë‹ˆë‹¤. ì¥ì‚¬ ìˆ˜ì™„ì´ ì¢‹ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ìƒí™œë ¥ì´ ê°•í•©ë‹ˆë‹¤.'},
'åºšå­':{t:'åºšå­(ê²½ì)ì¼ì£¼ - ê²¨ìš¸ ë°”ë‹¤ì˜ ë°”ìœ„',d:'ê¸ˆìƒìˆ˜ë¡œ ì§€í˜œê°€ ë›°ì–´ë‚©ë‹ˆë‹¤. ë¨¸ë¦¬ê°€ ì¢‹ê³  í•™ë¬¸ì— ì¬ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤. ëƒ‰ì² í•˜ê³  ë¶„ì„ì ì…ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì§€ì ì´ê³  ì´ëª…í•©ë‹ˆë‹¤.'},
'åºšå¯…':{t:'åºšå¯…(ê²½ì¸)ì¼ì£¼ - ìˆ²ì†ì˜ ë°”ìœ„',d:'ê¸ˆê·¹ëª©ìœ¼ë¡œ ëˆì„ ë²„ëŠ” ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤. ê²°ë‹¨ë ¥ì´ ìˆê³  ì¶”ì§„ë ¥ì´ ê°•í•©ë‹ˆë‹¤.',s:'ë°°ìš°ìì™€ ë¶€ë”ªí ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë¡œ ì–‘ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.'},
'åºšè¾°':{t:'åºšè¾°(ê²½ì§„)ì¼ì£¼ - ìš©ì„ íƒ„ ê²€ê°',d:'í† ìƒê¸ˆìœ¼ë¡œ ê·€ì¸ì˜ ë„ì›€ì„ ë°›ìŠµë‹ˆë‹¤. ì¶œì„¸ìš´ì´ ìˆê³  ì‚¬íšŒì ìœ¼ë¡œ ì„±ê³µí•˜ê¸° ì‰½ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë¯¿ìŒì§í•˜ê³  ë“ ë“ í•©ë‹ˆë‹¤.'},
'åºšåˆ':{t:'åºšåˆ(ê²½ì˜¤)ì¼ì£¼ - ë¶ˆì— ë‹¬êµ° ì‡ ',d:'í™”ê·¹ê¸ˆìœ¼ë¡œ ì—°ë‹¨ì„ ê±°ì¹˜ë©´ ê°•í•´ì§‘ë‹ˆë‹¤. ì‹œë ¨ì„ ê·¹ë³µí•˜ë©´ í° ì„±ê³µì„ ì´ë£¹ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ í™œë°œí•˜ì§€ë§Œ ì¶©ëŒì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
'åºšç”³':{t:'åºšç”³(ê²½ì‹ )ì¼ì£¼ - ê°•ì² ',d:'ê¸ˆì˜ ê¸°ìš´ì´ ê·¹ì— ë‹¬í•´ ê°•ì¸í•©ë‹ˆë‹¤. ê²°ë‹¨ë ¥ê³¼ ì‹¤í–‰ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ë¬´ì¸ ê¸°ì§ˆì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìë„ ê°•í•œ ì„±ê²©ì…ë‹ˆë‹¤. ì„œë¡œ ì¡´ì¤‘í•´ì•¼ í•©ë‹ˆë‹¤.'},
'åºšæˆŒ':{t:'åºšæˆŒ(ê²½ìˆ )ì¼ì£¼ - ì‚°ì†ì˜ ê´‘ì„',d:'í† ìƒê¸ˆìœ¼ë¡œ ë¿Œë¦¬ê°€ ê¹ŠìŠµë‹ˆë‹¤. ëŠ¦ê²Œ í”¼ì§€ë§Œ í° ì„±ê³µì„ ì´ë£¹ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë“¬ì§í•˜ê³  ì•ˆì •ì ì…ë‹ˆë‹¤.'},
'è¾›ä¸‘':{t:'è¾›ä¸‘(ì‹ ì¶•)ì¼ì£¼ - ë•…ì†ì˜ ë³´ì„',d:'í† ìƒê¸ˆìœ¼ë¡œ ê·€í•œ ì¬ëŠ¥ì´ ë¬»í˜€ ìˆìŠµë‹ˆë‹¤. ëŠ¦ê²Œ ì¸ì •ë°›ì§€ë§Œ ëì— ë¹›ë‚©ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì„±ì‹¤í•˜ê³  ê°€ì •ì ì…ë‹ˆë‹¤.'},
'è¾›å¯':{t:'è¾›å¯(ì‹ ë¬˜)ì¼ì£¼ - ë‚˜ë¬´ì— ê±¸ë¦° ë³´ì„',d:'ê¸ˆê·¹ëª©ìœ¼ë¡œ ëˆì„ ë²„ëŠ” ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤. ì„¬ì„¸í•˜ê³  ì˜ˆìˆ ì  ê°ê°ì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë‹¤ì •í•˜ì§€ë§Œ ê°ˆë“±ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
'è¾›å·³':{t:'è¾›å·³(ì‹ ì‚¬)ì¼ì£¼ - ìš©ê´‘ë¡œì˜ ê¸ˆ',d:'í™”ê·¹ê¸ˆìœ¼ë¡œ ì—°ë‹¨ì„ ê±°ì¹©ë‹ˆë‹¤. ì‹œë ¨ì„ ê·¹ë³µí•˜ë©´ ë¹›ë‚˜ëŠ” ë³´ì„ì´ ë©ë‹ˆë‹¤. ê·€ì¸ì˜ ë„ì›€ì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì—´ì •ì ì´ì§€ë§Œ ì¶©ëŒì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
'è¾›æœª':{t:'è¾›æœª(ì‹ ë¯¸)ì¼ì£¼ - ì—¬ë¦„ í’€ë°­ì˜ ì´ìŠ¬',d:'í† ìƒê¸ˆìœ¼ë¡œ ì•ˆì •ì ì…ë‹ˆë‹¤. ì˜ˆìˆ ì  ê°ê°ì´ ìˆê³  ê°ì„±ì´ í’ë¶€í•©ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ìˆœí•˜ê³  ê°€ì •ì ì…ë‹ˆë‹¤.'},
'è¾›é…‰':{t:'è¾›é…‰(ì‹ ìœ )ì¼ì£¼ - ì™„ë²½í•œ ë³´ì„',d:'ê¸ˆì˜ ê¸°ìš´ì´ ë‘ ë°°ë¡œ ì˜ˆë¦¬í•©ë‹ˆë‹¤. ì™„ë²½ì£¼ì˜ìì´ê³  ì‹¬ë¯¸ì•ˆì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ì˜ˆìˆ , ê¸°ìˆ ì— ì¬ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìë„ ê¹Œë‹¤ë¡œìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§ì¶°ê°€ëŠ” ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.'},
'è¾›äº¥':{t:'è¾›äº¥(ì‹ í•´)ì¼ì£¼ - ë°”ë‹¤ ì† ì§„ì£¼',d:'ê¸ˆìƒìˆ˜ë¡œ ì§€í˜œê°€ ìƒ˜ì†ŸìŠµë‹ˆë‹¤. ì´ëª…í•˜ê³  ê°ì„±ì´ í’ë¶€í•©ë‹ˆë‹¤. ì˜ˆìˆ ì  ì¬ëŠ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì§€ì ì´ê³  ê°ì„±ì ì…ë‹ˆë‹¤.'},
'å£¬å­':{t:'å£¬å­(ì„ì)ì¼ì£¼ - ê¹Šì€ ë°”ë‹¤',d:'ìˆ˜ì˜ ê¸°ìš´ì´ ê·¹ì— ë‹¬í•´ ì§€í˜œê°€ ê¹ŠìŠµë‹ˆë‹¤. ë¨¸ë¦¬ê°€ ë¹„ìƒí•˜ê³  í•™ë¬¸ì— ì¬ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì´ëª…í•©ë‹ˆë‹¤. ê¹Šì€ ëŒ€í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.'},
'å£¬å¯…':{t:'å£¬å¯…(ì„ì¸)ì¼ì£¼ - ë´„ë¹„',d:'ìˆ˜ìƒëª©ìœ¼ë¡œ ë§Œë¬¼ì„ ì†Œìƒì‹œí‚µë‹ˆë‹¤. ì¸ë•ì´ ìˆê³  ë² í‘¸ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ê·€ì¸ì˜ ë„ì›€ì„ ë°›ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë“ ë“ í•˜ê³  ëŠ¥ë ¥ìˆìŠµë‹ˆë‹¤.'},
'å£¬è¾°':{t:'å£¬è¾°(ì„ì§„)ì¼ì£¼ - ìš©ì´ ê¹ƒë“  ë¬¼',d:'í† ê·¹ìˆ˜ì´ì§€ë§Œ ìš©ì´ ë¬¼ì„ íƒ€ê³  ìŠ¹ì²œí•©ë‹ˆë‹¤. ì•¼ë§ì´ í¬ê³  ì¶œì„¸ìš´ì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë“¬ì§í•˜ê³  ì¬ë¬¼ìš´ì´ ìˆìŠµë‹ˆë‹¤.'},
'å£¬åˆ':{t:'å£¬åˆ(ì„ì˜¤)ì¼ì£¼ - ì—¬ë¦„ ì†Œë‚˜ê¸°',d:'ìˆ˜ê·¹í™”ë¡œ ì‹œë ¨ì´ ìˆì§€ë§Œ ì´ë¥¼ ê·¹ë³µí•˜ëŠ” í˜ì´ ìˆìŠµë‹ˆë‹¤. ê°ì • ê¸°ë³µì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìì™€ ì„±ê²© ì°¨ì´ê°€ ìˆì§€ë§Œ ë³´ì™„í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.'},
'å£¬ç”³':{t:'å£¬ç”³(ì„ì‹ )ì¼ì£¼ - ê³„ê³¡ì˜ ë¬¼',d:'ê¸ˆìƒìˆ˜ë¡œ ë§‘ê³  ì´ëª…í•©ë‹ˆë‹¤. ë¨¸ë¦¬ê°€ ì¢‹ê³  ê¸°ìˆ ì  ì¬ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤. ì–¸ë³€ì´ ì¢‹ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì´ëª…í•˜ê³  ëŠ¥ë ¥ìˆìŠµë‹ˆë‹¤.'},
'å£¬æˆŒ':{t:'å£¬æˆŒ(ì„ìˆ )ì¼ì£¼ - ì œë°©ì— ë§‰íŒ ë¬¼',d:'í† ê·¹ìˆ˜ë¡œ ë§‰íˆëŠ” ë“¯í•˜ì§€ë§Œ ê²°êµ­ í„°ì§‘ë‹ˆë‹¤. ì¸ë‚´í•˜ë©´ í° ì„±ê³µì„ ì´ë£¹ë‹ˆë‹¤.',s:'ë°°ìš°ìì™€ ê°ˆë“±ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
'ç™¸ä¸‘':{t:'ç™¸ä¸‘(ê³„ì¶•)ì¼ì£¼ - ì–¼ì–´ë¶™ì€ ìƒ˜',d:'ì¶•í†  ì†ì— ìˆ˜ê¸°ê°€ ìˆ¨ì–´ ìˆìŠµë‹ˆë‹¤. ì¡°ìš©í•˜ì§€ë§Œ ê¹Šì€ ìƒê°ì„ í•©ë‹ˆë‹¤. ëŠ¦ê²Œ í”¼ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì„±ì‹¤í•˜ê³  ê°€ì •ì ì…ë‹ˆë‹¤.'},
'ç™¸å¯':{t:'ç™¸å¯(ê³„ë¬˜)ì¼ì£¼ - ìƒˆë²½ì´ìŠ¬',d:'ìˆ˜ìƒëª©ìœ¼ë¡œ ë§Œë¬¼ì„ í‚¤ì›ë‹ˆë‹¤. ì¸ë•ì´ ìˆê³  ìì‹ìš´ì´ ì¢‹ìŠµë‹ˆë‹¤. ì„¬ì„¸í•˜ê³  ê°ì„±ì ì…ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ë‹¤ì •í•˜ê³  ì˜ˆìˆ ì ì…ë‹ˆë‹¤.'},
'ç™¸å·³':{t:'ç™¸å·³(ê³„ì‚¬)ì¼ì£¼ - ëœ¨ê±°ìš´ ì¦ê¸°',d:'ìˆ˜ê·¹í™”ë¡œ ë³€í™”ê°€ ë§ìŠµë‹ˆë‹¤. ì ì‘ë ¥ì´ ì¢‹ê³  ìƒí™© íŒë‹¨ì´ ë¹ ë¦…ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ í™œë°œí•˜ê³  ì—´ì •ì ì…ë‹ˆë‹¤.'},
'ç™¸æœª':{t:'ç™¸æœª(ê³„ë¯¸)ì¼ì£¼ - ì—¬ë¦„ ì €ë…ë¹„',d:'í† ê·¹ìˆ˜ì´ì§€ë§Œ ëŒ€ì§€ë¥¼ ì´‰ì´‰ì´ ì ì‹­ë‹ˆë‹¤. í¬ìš©ë ¥ì´ ìˆê³  ë‚¨ì„ ì˜ ëŒë´…ë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ìˆœí•˜ê³  ê°€ì •ì ì…ë‹ˆë‹¤.'},
'ç™¸é…‰':{t:'ç™¸é…‰(ê³„ìœ )ì¼ì£¼ - ë§‘ì€ ìƒ˜ë¬¼',d:'ê¸ˆìƒìˆ˜ë¡œ ì´ëª…í•˜ê³  ì˜ˆìˆ ì ì…ë‹ˆë‹¤. ì‹¬ë¯¸ì•ˆì´ ë›°ì–´ë‚˜ê³  ê°ê°ì´ ì¢‹ìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì„¬ì„¸í•˜ê³  ì˜ˆìˆ ì ì…ë‹ˆë‹¤.'},
'ç™¸äº¥':{t:'ç™¸äº¥(ê³„í•´)ì¼ì£¼ - ê¹Šì€ ë°”ë‹¤',d:'ìˆ˜ì˜ ê¸°ìš´ì´ ê·¹ì— ë‹¬í•´ ì§€í˜œê°€ ê¹ŠìŠµë‹ˆë‹¤. ì§ê´€ë ¥ì´ ë›°ì–´ë‚˜ê³  ì˜ì ì¸ ë©´ì´ ìˆìŠµë‹ˆë‹¤.',s:'ë°°ìš°ìê°€ ì§€ì ì´ê³  ê¹Šì€ ëŒ€í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.'}};const key = ds.c + db.c;if (iljuData[key]) {return { title: iljuData[key].t, desc: iljuData[key].d, spouse: iljuData[key].s };}
const stemDesc = {'ç”²':'ì§„ì·¨ì ì´ê³  ë¦¬ë”ì‹­ ìˆëŠ”','ä¹™':'ìœ ì—°í•˜ê³  ì ì‘ë ¥ ì¢‹ì€','ä¸™':'ë°ê³  ì—´ì •ì ì¸','ä¸':'ë”°ëœ»í•˜ê³  ì„¬ì„¸í•œ','æˆŠ':'ë“¬ì§í•˜ê³  ì•ˆì •ì ì¸','å·±':'í¬ìš©ë ¥ ìˆê³  í˜„ì‹¤ì ì¸','åºš':'ê²°ë‹¨ë ¥ ìˆê³  ê°•ì¸í•œ','è¾›':'ì„¬ì„¸í•˜ê³  ì˜ˆë¯¼í•œ','å£¬':'ì§€í˜œë¡­ê³  ìœ ë™ì ì¸','ç™¸':'ì§ê´€ì ì´ê³  ê°ì„±ì ì¸'};const branchTrait = ['í™œë°œ','ì„±ì‹¤','ì§„ì·¨ì ','ì„¬ì„¸','ìœµí†µì„±','ì˜ë¦¬','ì—´ì •ì ','í—Œì‹ ì ','ë‹¹ë‹¹','ê°ê°ì ','ì¶©ì§','í˜„ëª…'];return {title: `${ds.c}${db.c}ì¼ì£¼`,
desc: `${stemDesc[ds.c]} ì„±ê²©ì…ë‹ˆë‹¤. ${ELEMENT[ds.e].k}(${ds.c}) ì¼ê°„ì´ ${db.c}(${db.a}ë )ì— ì•‰ì•„ ìˆì–´ ${branchTrait[BRANCH.indexOf(db)]}í•œ ì„±í–¥ì´ ë‚´ì¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.`,
spouse: `ë°°ìš°ìê°€ ${db.a}ë ì²˜ëŸ¼ ${branchTrait[BRANCH.indexOf(db)]}í•©ë‹ˆë‹¤. ${db.a}ë  í•´ì— ì¢‹ì€ ì¸ì—°ì„ ë§Œë‚  ìˆ˜ ìˆì–´ìš”.`};}
const TERM_NAMES = {0: {k: 'ì…ì¶˜', e: 'Ipchun', m: 2},
1: {k: 'ê²½ì¹©', e: 'Gyeongchip', m: 3},
2: {k: 'ì²­ëª…', e: 'Cheongmyeong', m: 4},
3: {k: 'ì…í•˜', e: 'Ipha', m: 5},
4: {k: 'ë§ì¢…', e: 'Mangjong', m: 6},
5: {k: 'ì†Œì„œ', e: 'Soseo', m: 7},
6: {k: 'ì…ì¶”', e: 'Ipchu', m: 8},
7: {k: 'ë°±ë¡œ', e: 'Baekro', m: 9},
8: {k: 'í•œë¡œ', e: 'Hallo', m: 10},
9: {k: 'ì…ë™', e: 'Ipdong', m: 11},
10: {k: 'ëŒ€ì„¤', e: 'Daeseol', m: 12},
11: {k: 'ì†Œí•œ', e: 'Sohan', m: 1}};function calcPreciseDaeunStart(saju, birthYear, birthMonth, birthDay, birthHour, gender) {const isYang = saju.year.s.y;const isMale = gender === 'm';const forward = (isYang && isMale) || (!isYang && !isMale);const mbi = BRANCH.indexOf(saju.month.b);const monthBranchToTermIdx = {2:0, 3:1, 4:2, 5:3, 6:4, 7:5, 8:6, 9:7, 10:8, 11:9, 0:10, 1:11};const currentTermIdx = monthBranchToTermIdx[mbi];let result = {firstAge: 3,
firstAgeExact: 3.0,
startYear: birthYear + 3,
startMonth: birthMonth,
startDay: birthDay,
daysToTerm: 9,
direction: forward ? 'ìˆœí–‰(é †è¡Œ)' : 'ì—­í–‰(é€†è¡Œ)',
directionShort: forward ? 'ìˆœí–‰' : 'ì—­í–‰',
targetTerm: null,
calculationMethod: 'default'};if (!birthMonth || !birthDay) return result;let birthHourNum = 12, birthMinNum = 0;if (typeof birthHour === 'number') {if (birthHour >= 0 && birthHour <= 11) {const hourMap = [0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22];birthHourNum = hourMap[birthHour] || 12;} else if (birthHour >= 0 && birthHour <= 23) {birthHourNum = birthHour;}}
try {let targetTermIdx, targetYear, searchYear;if (forward) {targetTermIdx = (currentTermIdx + 1) % 12;searchYear = birthYear;if (targetTermIdx === 0 && currentTermIdx >= 10) {searchYear = birthYear + 1;} else if (targetTermIdx <= currentTermIdx && currentTermIdx !== 11) {searchYear = birthYear + 1;}
if (birthMonth === 1 && currentTermIdx === 11) {searchYear = birthYear;}} else {targetTermIdx = currentTermIdx;searchYear = birthYear;if (birthMonth === 1 && currentTermIdx === 10) {searchYear = birthYear - 1;}}
const termTime = getSolarTermTime(searchYear, targetTermIdx);if (!termTime) return result;const birthDate = new Date(birthYear, birthMonth - 1, birthDay, birthHourNum, birthMinNum);const termDate = new Date(searchYear, termTime.m - 1, termTime.d, termTime.h, termTime.n);let msDiff;if (forward) {msDiff = termDate - birthDate;} else {msDiff = birthDate - termDate;}
if (msDiff < 0) {if (forward) {const newTermTime = getSolarTermTime(searchYear + 1, targetTermIdx);if (newTermTime) {const newTermDate = new Date(searchYear + 1, newTermTime.m - 1, newTermTime.d, newTermTime.h, newTermTime.n);msDiff = newTermDate - birthDate;searchYear++;}} else {const newTermTime = getSolarTermTime(searchYear - 1, targetTermIdx);if (newTermTime) {const newTermDate = new Date(searchYear - 1, newTermTime.m - 1, newTermTime.d, newTermTime.h, newTermTime.n);msDiff = birthDate - newTermDate;searchYear--;}}}
const daysDiff = msDiff / (1000 * 60 * 60 * 24);const exactAge = daysDiff / 3;const roundedAge = Math.round(exactAge);const finalAge = Math.max(1, Math.min(10, roundedAge));const startYear = birthYear + finalAge;const startDate = new Date(birthDate);startDate.setFullYear(startYear);result = {firstAge: finalAge,
firstAgeExact: Math.round(exactAge * 10) / 10,
startYear: startYear,
startMonth: startDate.getMonth() + 1,
startDay: startDate.getDate(),
daysToTerm: Math.round(daysDiff * 10) / 10,
direction: forward ? 'ìˆœí–‰(é †è¡Œ)' : 'ì—­í–‰(é€†è¡Œ)',
directionShort: forward ? 'ìˆœí–‰' : 'ì—­í–‰',
targetTerm: TERM_NAMES[targetTermIdx],
targetTermYear: searchYear,
calculationMethod: 'precise'};} catch (e) {console.warn('ëŒ€ìš´ ê³„ì‚° ì˜¤ë¥˜:', e);}
return result;}
function analyzeGyoungiPrecise(periods, birthYear, currentYear) {const gyoungiList = [];const currentAge = currentYear - birthYear;for (let i = 0; i < periods.length; i++) {const period = periods[i];const transitionAge = period.startAge;const transitionYear = birthYear + transitionAge;const isNearTransition = Math.abs(currentAge - transitionAge) <= 1;const yearsToTransition = transitionAge - currentAge;if (isNearTransition || (yearsToTransition > 0 && yearsToTransition <= 3)) {const nextPeriod = periods[i];const prevPeriod = i > 0 ? periods[i - 1] : null;let warning = '';let severity = 'info';if (yearsToTransition === 0) {warning = `ğŸ”„ ì˜¬í•´ êµìš´ê¸°! ${nextPeriod.s.c}${nextPeriod.b.c} ëŒ€ìš´ ì‹œì‘`;severity = 'major';} else if (yearsToTransition === 1) {warning = `â³ ë‚´ë…„ êµìš´ê¸° ì§„ì… (${nextPeriod.s.c}${nextPeriod.b.c} ëŒ€ìš´)`;severity = 'warning';} else if (yearsToTransition === -1) {warning = `ğŸŒŸ ì‘ë…„ ìƒˆ ëŒ€ìš´ ì‹œì‘ - ì ì‘ê¸°`;severity = 'info';}
if (prevPeriod && nextPeriod) {const scoreDiff = nextPeriod.score - prevPeriod.score;if (scoreDiff >= 3) {warning += ' | ê¸¸ìš´(å‰é‹) ì§„ì…! ë°œë³µ ì‹œì‘';} else if (scoreDiff <= -3) {warning += ' | ì£¼ì˜ í•„ìš” - ì•ˆì • ì¶”êµ¬';}}
gyoungiList.push({year: transitionYear,
age: transitionAge,
period: nextPeriod,
warning,
severity,
yearsAway: yearsToTransition});}}
return gyoungiList;}
function calcLuck(saju, birthYear, gender, gods, birthMonth, birthDay, birthHour) {const isYang = saju.year.s.y;const isMale = gender === 'm';const forward = (isYang && isMale) || (!isYang && !isMale);const periods = [];const msi = STEM.indexOf(saju.month.s);const mbi = BRANCH.indexOf(saju.month.b);const curYear = new Date().getFullYear();const curAge = curYear - birthYear;const daeunStart = calcPreciseDaeunStart(saju, birthYear, birthMonth, birthDay, birthHour, gender);const firstAge = daeunStart.firstAge;for (let i = 0; i < 10; i++) {const si = forward ? (msi + i + 1) % 10 : (msi - i - 1 + 10) % 10;const bi = forward ? (mbi + i + 1) % 12 : (mbi - i - 1 + 12) % 12;const age = firstAge + i * 10;const isCur = curAge >= age && curAge < age + 10;const s = STEM[si], b = BRANCH[bi];let score = 0;let climateClash = false;if ([s.e, b.e].includes(gods.yong)) score += 2;if ([s.e, b.e].includes(gods.hee)) score += 1;if ([s.e, b.e].includes(gods.gi)) score -= 2;if (gods.climate) {const daeunEls = [s.e, b.e];if ((gods.climate.type.includes('ê±´ì¡°') || gods.climate.type.includes('ë”ì›€')) &&
daeunEls.filter(e => e === 'fire').length >= 1) {score -= 2;climateClash = true;}
if ((gods.climate.type.includes('ì¶”ì›€') || gods.climate.type.includes('ê·¹í•œ')) &&
daeunEls.filter(e => e === 'water').length >= 1) {score -= 2;climateClash = true;}}
const startYear = birthYear + age;const endYear = birthYear + age + 9;periods.push({s, b,
startAge: age,
endAge: age + 9,
startYear,
endYear,
isCur,
climateClash,
rating: score >= 2 ? 'good' : score <= -1 ? 'bad' : 'neutral',
score,
daeunInfo: i === 0 ? daeunStart : null});}
periods.meta = {direction: forward ? 'forward' : 'backward',
directionK: forward ? 'ìˆœí–‰' : 'ì—­í–‰',
firstAgeExact: daeunStart.firstAgeExact,
daysToTerm: daeunStart.daysToTerm,
targetTerm: daeunStart.targetTerm,
calculationMethod: daeunStart.calculationMethod};return periods;}
function calcYearLuck(year, saju, gods) {const yp = calcYearPillar(year, 6, 1);const dm = saju.day.s;const god = getTenGod(yp.s, dm);const state = getTwelveState(dm, yp.b);let score = 0;let warnings = [];if ([yp.s.e, yp.b.e].includes(gods.yong)) score += 3;if ([yp.s.e, yp.b.e].includes(gods.hee)) score += 2;if ([yp.s.e, yp.b.e].includes(gods.gi)) score -= 3;if (state.l >= 10) score += 1;else if (state.l <= 3) score -= 1;const yearEls = [yp.s.e, yp.b.e];if (gods.yong === 'metal' && yearEls.includes('fire')) {score -= 3;warnings.push('âš ï¸ í™”ê·¹ê¸ˆ(ç«å…‹é‡‘): ìš©ì‹ (é‡‘)ì´ ì„¸ìš´ì˜ ç«ì— íŒŒê´´ë¨');}
if (gods.yong === 'fire' && yearEls.includes('water')) {score -= 3;warnings.push('âš ï¸ ìˆ˜ê·¹í™”(æ°´å…‹ç«): ìš©ì‹ (ç«)ì´ ì„¸ìš´ì˜ æ°´ì— íŒŒê´´ë¨');}
if (gods.yong === 'wood' && yearEls.includes('metal')) {score -= 3;warnings.push('âš ï¸ ê¸ˆê·¹ëª©(é‡‘å…‹æœ¨): ìš©ì‹ (æœ¨)ì´ ì„¸ìš´ì˜ é‡‘ì— íŒŒê´´ë¨');}
if (gods.yong === 'earth' && yearEls.includes('wood')) {score -= 3;warnings.push('âš ï¸ ëª©ê·¹í† (æœ¨å…‹åœŸ): ìš©ì‹ (åœŸ)ì´ ì„¸ìš´ì˜ æœ¨ì— íŒŒê´´ë¨');}
if (gods.yong === 'water' && yearEls.includes('earth')) {score -= 3;warnings.push('âš ï¸ í† ê·¹ìˆ˜(åœŸå…‹æ°´): ìš©ì‹ (æ°´)ì´ ì„¸ìš´ì˜ åœŸì— íŒŒê´´ë¨');}
const ec = countElements(saju);const fireCount = ec.fire || 0;if (fireCount >= 3 && yearEls.includes('fire')) {score -= 2;warnings.push('ğŸ”¥ í™”ì—¼ì¡°í† : ë¶ˆë°”ë‹¤ ì‚¬ì£¼ì— ç« ìš´ì´ ì™€ì„œ ê³¼ì—´ ìœ„í—˜');}
const sajuBranches = [saju.year.b, saju.month.b, saju.day.b];if (saju.hour) sajuBranches.push(saju.hour.b);const sajuBranchIdxs = sajuBranches.map(b => BRANCH.indexOf(b));const yearBranchIdx = BRANCH.indexOf(yp.b);const wangjiClash = [
{a: 0, b: 6, name: 'ìì˜¤ì¶©(å­åˆæ²–)', desc: 'ìˆ˜í™”ìƒì „! ì‹¬í˜ˆê´€ vs ì‹ ì¥/ë°©ê´‘ ê±´ê°• ì£¼ì˜'},
{a: 3, b: 9, name: 'ë¬˜ìœ ì¶©(å¯é…‰æ²–)', desc: 'ê¸ˆëª©êµì „! ê°„/ë‹´ vs í/ëŒ€ì¥ ê±´ê°• ì£¼ì˜'}
];for (const clash of wangjiClash) {if (yearBranchIdx === clash.a && sajuBranchIdxs.includes(clash.b)) {score -= 3;const positions = sajuBranchIdxs.map((idx, i) => idx === clash.b ? ['ë…„ì§€','ì›”ì§€','ì¼ì§€','ì‹œì§€'][i] : null).filter(p => p);warnings.push(`âš¡ ${clash.name}: ì„¸ìš´ ${BRANCH[clash.a].c}ì™€ ì›êµ­ ${positions.join('/')} ${BRANCH[clash.b].c} ì¶©ëŒ! ${clash.desc}`);}
if (yearBranchIdx === clash.b && sajuBranchIdxs.includes(clash.a)) {score -= 3;const positions = sajuBranchIdxs.map((idx, i) => idx === clash.a ? ['ë…„ì§€','ì›”ì§€','ì¼ì§€','ì‹œì§€'][i] : null).filter(p => p);warnings.push(`âš¡ ${clash.name}: ì„¸ìš´ ${BRANCH[clash.b].c}ì™€ ì›êµ­ ${positions.join('/')} ${BRANCH[clash.a].c} ì¶©ëŒ! ${clash.desc}`);}}
const waterCount = ec.water || 0;const dmEl = dm.e;if (dmEl === 'fire' && waterCount >= 3 && (ec.fire || 0) <= 1) {if (yearEls.includes('water')) {score -= 2;warnings.push('ğŸ’§ ìˆ˜ë‹¤í™”ì‹(æ°´å¤šç«ç†„): ë¬¼ì´ ë¶ˆì„ ë„ëŠ” í˜•êµ­! æ°´ ìš´ì— ê±´ê°•/í™œë ¥ ì €í•˜ ì£¼ì˜');}
if (yearEls.includes('fire') || yearEls.includes('wood')) {score += 2;warnings.push('ğŸ”¥ ìˆ˜ë‹¤í™”ì‹ ì‚¬ì£¼ì— ç«/æœ¨ ìš´! êº¼ì ¸ê°€ë˜ ë¶ˆì´ ì‚´ì•„ë‚˜ëŠ” ì¢‹ì€ ì‹œê¸°');}}
const baihuIlju = ['ç”²è¾°','ä¹™æœª','ä¸™æˆŒ','ä¸ä¸‘','æˆŠè¾°','å·±æœª','åºšæˆŒ','è¾›ä¸‘','å£¬è¾°','ç™¸æœª'];const ilju = saju.day.s.c + saju.day.b.c;if (baihuIlju.includes(ilju) && yearEls.includes('fire')) {score -= 1;warnings.push('ğŸ… ë°±í˜¸ëŒ€ì‚´ ì¼ì£¼ì— ç« ìš´! ìˆ˜ìˆ , ì‚¬ê³ , í”¼ ë³´ëŠ” ì¼ì— ì£¼ì˜. ê±´ê°•ê²€ì§„ í•„ìˆ˜');}
const wangji = {0: 'å­', 3: 'å¯', 6: 'åˆ', 9: 'é…‰'};const wangjiEl = {0: 'water', 3: 'wood', 6: 'fire', 9: 'metal'};const wangjiHealth = {0: 'ì‹ ì¥/ë°©ê´‘ ì‘ê¸‰! ë¬¼ë‚œë¦¬ ì‚¬ì£¼ì— æ°´ ì„¸ìš´',
3: 'ê°„/ë‹´ ì‘ê¸‰! ë¶„ë…¸ í­ë°œ ì£¼ì˜',
6: 'ì‹¬í˜ˆê´€/ë‡Œì¶œí˜ˆ ì‘ê¸‰! ë¶ˆë°”ë‹¤ ì‚¬ì£¼ì— ç« ì„¸ìš´ - ì“°ëŸ¬ì§ˆ ìˆ˜ ìˆìŒ',
9: 'í/í˜¸í¡ê¸° ì‘ê¸‰! ê¸ˆì† ì¤‘ë… ì£¼ì˜'};if (wangji[yearBranchIdx]) {const wangjiCount = sajuBranchIdxs.filter(b => b === yearBranchIdx).length;if (wangjiCount >= 2) {score -= 3;warnings.push(`ğŸš¨ ì™•ì§€í­ë°œ(${wangji[yearBranchIdx]}Ã—${wangjiCount+1}): ${wangjiHealth[yearBranchIdx]}`);}}
const yongEl = gods.yong;const giEl = gods.gi;const yongCount = ec[yongEl] || 0;const giCount = ec[giEl] || 0;if (yearEls.includes(yongEl) && giCount >= 3 && yongCount <= 1) {score -= 2;const elKor = {wood:'æœ¨', fire:'ç«', earth:'åœŸ', metal:'é‡‘', water:'æ°´'};warnings.push(`âš ï¸ ì‡ ì‹ ì¶©ì™•(è¡°ç¥æ²–æ—º): ìš©ì‹ (${elKor[yongEl]}) ìœ ì…ì´ë‚˜ ê¸°ì‹ (${elKor[giEl]}) ${giCount}ê°œì— ì••ë„ë¨. ê¸°íšŒê°€ ì™€ë„ ê²½ìŸì/ë°©í•´ìê°€ ê°€ë¡œì±”. í™•ì¥ ê¸ˆì§€!`);}
const elKor = {wood:'æœ¨', fire:'ç«', earth:'åœŸ', metal:'é‡‘', water:'æ°´'};const elHealth = {wood: 'ê°„/ë‹´/ëˆˆ/ì‹ ê²½',
fire: 'ì‹¬ì¥/í˜ˆê´€/ë‡Œ',
earth: 'ë¹„ì¥/ìœ„/ì†Œí™”ê¸°',
metal: 'í/ëŒ€ì¥/í”¼ë¶€',
water: 'ì‹ ì¥/ë°©ê´‘/ìƒì‹ê¸°'};const keukRelation = {fire: 'metal',
metal: 'wood',
wood: 'earth',
earth: 'water',
water: 'fire'};for (const [attackEl, victimEl] of Object.entries(keukRelation)) {const victimCount = ec[victimEl] || 0;const attackCount = ec[attackEl] || 0;if (victimCount >= 4 && attackCount <= 1 && yearEls.includes(attackEl)) {score -= 2;warnings.push(`âš”ï¸ ì™•ìì¶©ë°œ(æ—ºè€…æ²–ç™¼): ${elKor[attackEl]} ìš´ì´ íƒœì™•í•œ ${elKor[victimEl]}(${victimCount}ê°œ)ë¥¼ ê³µê²©í•˜ë‚˜ ì—­ìŠµë‹¹í•¨! ${elKor[attackEl]}ê°€ ${elKor[victimEl]}ì— ì‚¼ì¼œì§. ${elHealth[attackEl]} ì†ìƒ ì£¼ì˜!`);}}
if ((sajuBranchIdxs.includes(0) && yearBranchIdx === 6) ||
(sajuBranchIdxs.includes(6) && yearBranchIdx === 0)) {const waterPower = ec.water || 0;const firePower = ec.fire || 0;if (waterPower > firePower + 1) {warnings.push(`ğŸ’§ ìì˜¤ì¶© ìŠ¹íŒ¨: æ°´(${waterPower}ê°œ) > ç«(${firePower}ê°œ) â†’ ç«ê°€ êº¼ì§! ${elHealth.fire} ì†ìƒ, ì—´ì •/ì˜ìš• ì €í•˜ ì£¼ì˜`);} else if (firePower > waterPower + 1) {warnings.push(`ğŸ”¥ ìì˜¤ì¶© ìŠ¹íŒ¨: ç«(${firePower}ê°œ) > æ°´(${waterPower}ê°œ) â†’ æ°´ê°€ ë§ˆë¦„! ${elHealth.water} ì†ìƒ, ì‹ ì¥/ë°©ê´‘ ì£¼ì˜`);} else {warnings.push(`âš¡ ìì˜¤ì¶© ê²©ì „: æ°´(${waterPower}ê°œ) â‰ˆ ç«(${firePower}ê°œ) â†’ ì–‘ìª½ ëª¨ë‘ ì†ìƒ! ì‹¬í˜ˆê´€+ì‹ ì¥ ëª¨ë‘ ì£¼ì˜`);}}
if ((sajuBranchIdxs.includes(3) && yearBranchIdx === 9) ||
(sajuBranchIdxs.includes(9) && yearBranchIdx === 3)) {const woodPower = ec.wood || 0;const metalPower = ec.metal || 0;if (metalPower > woodPower + 1) {warnings.push(`ğŸª“ ë¬˜ìœ ì¶© ìŠ¹íŒ¨: é‡‘(${metalPower}ê°œ) > æœ¨(${woodPower}ê°œ) â†’ æœ¨ì´ ì˜ë¦¼! ${elHealth.wood} ì†ìƒ, ê°„ë‹´/ì‹ ê²½ ì£¼ì˜`);} else if (woodPower > metalPower + 1) {warnings.push(`ğŸŒ³ ë¬˜ìœ ì¶© ìŠ¹íŒ¨: æœ¨(${woodPower}ê°œ) > é‡‘(${metalPower}ê°œ) â†’ ë„ë¼ê°€ ë¶€ëŸ¬ì§! ${elHealth.metal} ì†ìƒ ëŒ€ì‹  æœ¨ì˜ ë°˜ê²©`);} else {warnings.push(`âš¡ ë¬˜ìœ ì¶© ê²©ì „: æœ¨(${woodPower}ê°œ) â‰ˆ é‡‘(${metalPower}ê°œ) â†’ ì–‘ìª½ ëª¨ë‘ ì†ìƒ! ê°„ë‹´+í ëª¨ë‘ ì£¼ì˜`);}}
return {year,
pillar: yp,
god,
state,
score,
warnings,
rating: score >= 3 ? 'great' : score >= 1 ? 'good' : score <= -2 ? 'bad' : 'neutral'};}
function checkYongOverwhelmed(saju, gods) {const elCount = {wood:0, fire:0, earth:0, metal:0, water:0};[saju.year, saju.month, saju.day, saju.hour].forEach(p => {if (p?.s) elCount[p.s.e]++;if (p?.b) elCount[p.b.e]++;});const yongCount = elCount[gods.yong] || 0;const giCount = elCount[gods.gi] || 0;if (giCount >= 3 && yongCount <= 1 && giCount >= yongCount * 3) {return { active: true, score: -2, desc: `âš ï¸ ì‡ ì‹ ì¶©ì™•(è¡°ç¥æ²–æ—º): ê¸°ì‹ (${ELEMENT[gods.gi].k}) ${giCount}ê°œ vs ìš©ì‹ (${ELEMENT[gods.yong].k}) ${yongCount}ê°œ â†’ ìš©ì‹ ì´ ì™€ë„ ì••ë„ë¨!` };}
return { active: false, score: 0, desc: '' };}
function checkPyunInDoShik(saju, gods) {const dm = saju.day.s;const monthBi = BRANCH.findIndex(b => b.c === saju.month.b.c);const shikShinEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 1) % 5];const pyunInEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 4) % 5];if (saju.month.b.e !== shikShinEl) return { active: false, score: 0, desc: '' };const clashPairs = [[0,6],[1,7],[2,8],[3,9],[4,10],[5,11]];const branches = [saju.year.b, saju.month.b, saju.day.b, saju.hour?.b].filter(b => b);let found = false, detail = '';branches.forEach(b => {if (b.e === pyunInEl) {const bi = BRANCH.findIndex(br => br.c === b.c);clashPairs.forEach(([a, c]) => {if ((bi === a && monthBi === c) || (bi === c && monthBi === a)) {found = true;detail = `${b.c}(í¸ì¸)â†”${saju.month.b.c}(ì‹ì‹ )`;}});}});if (found) {return { active: true, score: -2, desc: `âš ï¸ í¸ì¸ë„ì‹(åå°å€’é£Ÿ): ${detail} ì¶© â†’ ì¬ëŠ¥ì€ ìˆìœ¼ë‚˜ ì˜ˆë¯¼í•¨ ë•Œë¬¸ì— ê¸°íšŒë¥¼ ê±·ì–´ì°¨ëŠ” í˜•êµ­!` };}
return { active: false, score: 0, desc: '' };}
function checkWangShinChungBal(yp, saju) {const elCount = {wood:0, fire:0, earth:0, metal:0, water:0};[saju.year, saju.month, saju.day, saju.hour].forEach(p => {if (p?.s) elCount[p.s.e]++;if (p?.b) elCount[p.b.e]++;});const wangElements = Object.entries(elCount).filter(([el, cnt]) => cnt >= 4);if (wangElements.length === 0) return { active: false, score: 0, desc: '' };const clashPairs = {'å­':'åˆ','åˆ':'å­','ä¸‘':'æœª','æœª':'ä¸‘','å¯…':'ç”³','ç”³':'å¯…','å¯':'é…‰','é…‰':'å¯','è¾°':'æˆŒ','æˆŒ':'è¾°','å·³':'äº¥','äº¥':'å·³'};const yearBranch = yp.b.c;const clashTarget = clashPairs[yearBranch];if (!clashTarget) return { active: false, score: 0, desc: '' };const branches = [saju.year.b, saju.month.b, saju.day.b, saju.hour?.b].filter(b => b);const targetBranches = branches.filter(b => b.c === clashTarget);if (targetBranches.length === 0) return { active: false, score: 0, desc: '' };const targetEl = targetBranches[0].e;const isWang = wangElements.some(([el]) => el === targetEl);if (isWang) {const wangCount = elCount[targetEl];return { active: true, score: -3, desc: `ğŸš¨ ì™•ì‹ ì¶©ë°œ(æ—ºç¥æ²–ç™¼): ${yearBranch}(ì„¸ìš´)ì´ ${clashTarget}(ì›êµ­)ì„ ì¶©! ${ELEMENT[targetEl].k}ì´ ${wangCount}ê°œë¡œ ì™•í•œë° ê±´ë“œë¦¼ â†’ ëŒ€ê²©ë³€/ì‚¬ê³ /íŒŒì¬ ê·¹ë„ ì£¼ì˜!` };}
return { active: false, score: 0, desc: '' };}
function determineYearRating(yearLuck, saju, gods) {const yp = yearLuck.pillar;const wangChk = checkWangShinChungBal(yp, saju);const yongChk = checkYongOverwhelmed(saju, gods);const pyunChk = checkPyunInDoShik(saju, gods);if (wangChk.active) return { rating: 'wang_shin_chung_bal', warning: wangChk };if (yongChk.active) return { rating: 'yong_overwhelmed', warning: yongChk };if (pyunChk.active) return { rating: 'pyunin_doshik', warning: pyunChk };return { rating: yearLuck.rating, warning: null };}
function analyzeLuckCross(saju, birthYear, gender, gods, targetYear, birthMonth, birthDay, birthHour) {const luck = calcLuck(saju, birthYear, gender, gods, birthMonth, birthDay, birthHour);const curAge = targetYear - birthYear;const curDaeun = luck.find(l => curAge >= l.startAge && curAge < l.endAge) || luck[0];const yearLuck = calcYearLuck(targetYear, saju, gods);const result = {daeun: curDaeun,
saeun: yearLuck,
analysis: []};const dEl = [curDaeun.s.e, curDaeun.b.e];const sEl = [yearLuck.pillar.s.e, yearLuck.pillar.b.e];const ganHap = [[0,5],[1,6],[2,7],[3,8],[4,9]];const dsi = STEM.indexOf(curDaeun.s), ssi = STEM.indexOf(yearLuck.pillar.s);for (let [a,b] of ganHap) {if ((dsi===a && ssi===b) || (dsi===b && ssi===a)) {result.analysis.push({type:'good', text:'ëŒ€ìš´-ì„¸ìš´ ì²œê°„í•©! ìš´ì´ ì¡°í™”ë¡­ê²Œ í˜ëŸ¬ìš”.'});}}
const dbi = BRANCH.indexOf(curDaeun.b), sbi = BRANCH.indexOf(yearLuck.pillar.b);if (Math.abs(dbi - sbi) === 6 || Math.abs(dbi - sbi) === 6) {result.analysis.push({type:'bad', text:'ëŒ€ìš´-ì„¸ìš´ ì§€ì§€ì¶©! ë³€í™”ì™€ ì‹œë ¨ì´ ìˆì„ ìˆ˜ ìˆì–´ìš”.'});}
const allBi = [BRANCH.indexOf(saju.year.b), BRANCH.indexOf(saju.month.b), BRANCH.indexOf(saju.day.b)];if (saju.hour) allBi.push(BRANCH.indexOf(saju.hour.b));allBi.forEach((bi, idx) => {const positions = ['ë…„ì§€','ì›”ì§€','ì¼ì§€','ì‹œì§€'];if (Math.abs(bi - sbi) === 6) {const isWangjiClash = (bi === 0 && sbi === 6) || (bi === 6 && sbi === 0) ||
(bi === 3 && sbi === 9) || (bi === 9 && sbi === 3);if (isWangjiClash) {const clashName = (bi === 0 || sbi === 0) ? 'ìì˜¤ì¶©(å­åˆæ²–)' : 'ë¬˜ìœ ì¶©(å¯é…‰æ²–)';const healthWarning = (bi === 0 || sbi === 0)
? 'ì‹¬í˜ˆê´€(ç«)ê³¼ ì‹ ì¥/ìƒì‹ê¸°(æ°´)ê°€ ì¶©ëŒí•©ë‹ˆë‹¤!'
: 'ê°„(æœ¨)ê³¼ í/ì‹ ê²½(é‡‘)ì´ ì¶©ëŒí•©ë‹ˆë‹¤!';result.analysis.push({type: 'danger',
text: `ğŸš¨ ${clashName} ë°œë™! ì™•ì§€ë¼ë¦¬ì˜ ì •ë©´ì¶©ëŒì…ë‹ˆë‹¤. ${healthWarning} ${idx === 3 ? 'ì‹œì§€(ìë…€ê¶/ë§ë…„) ì¶©ëŒë¡œ ìˆ˜ìˆ , ì‚¬ê³ , ìë…€ ë¬¸ì œì— íŠ¹íˆ ì£¼ì˜í•˜ì„¸ìš”!' : idx === 2 ? 'ì¼ì§€(ë°°ìš°ìê¶) ì¶©ëŒë¡œ ë°°ìš°ì ê±´ê°•ê³¼ ë¶€ë¶€ê´€ê³„ì— ê²©ë™ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!' : ''}`,});result.wangjiClash = true;} else {result.analysis.push({type:'warning', text:`ì„¸ìš´ì´ ${positions[idx]}ì™€ ì¶©! ${idx===2 ? 'ë°°ìš°ìë‚˜ ê±´ê°• ì£¼ì˜!' : idx===0 ? 'ì§‘ì•ˆ ì–´ë¥¸ ê´€ë ¨ ì¼ ìˆì„ ìˆ˜ ìˆì–´ìš”.' : idx===1 ? 'ì§ì¥ì´ë‚˜ ì‚¬ì—…ì— ë³€í™” ìˆì„ ìˆ˜ ìˆì–´ìš”.' : 'ìë…€ë‚˜ í›„ë°° ê´€ë ¨ ì¼ ìˆì„ ìˆ˜ ìˆì–´ìš”.'}`});}}
if ((bi === 1 && sbi === 6) || (bi === 6 && sbi === 1)) {result.analysis.push({type: 'warning',
text: `âš ï¸ ì¶•ì˜¤(ä¸‘åˆ) ì›ì§„! ${positions[idx]}ì™€ ì„¸ìš´ì´ ê·€ë¬¸/íƒ•í™” ê´€ê³„ì…ë‹ˆë‹¤. ì •ì‹ ì  ìŠ¤íŠ¸ë ˆìŠ¤ì™€ ê°ì • ê¸°ë³µì— ì£¼ì˜í•˜ì„¸ìš”.`});}});result.totalScore = curDaeun.score + yearLuck.score;result.totalRating = result.totalScore >= 4 ? 'excellent' :
result.totalScore >= 2 ? 'good' :
result.totalScore >= 0 ? 'neutral' :
result.totalScore >= -2 ? 'caution' : 'difficult';if (yearLuck.warnings && yearLuck.warnings.length > 0) {yearLuck.warnings.forEach(w => {result.analysis.push({type: 'danger', text: w});});}
const tanghwaCheck = () => {const hasChu = allBi.includes(1);const hasO = allBi.includes(6);const hasIn = allBi.includes(2);const hasSa = allBi.includes(5);const hasChuOTanghwa = hasChu && hasO;const hasInSaTanghwa = hasIn && hasSa;const saeunBi = sbi;if (hasChuOTanghwa && saeunBi === 6) {result.analysis.push({type: 'danger',
text: 'âš ï¸ ìŒíƒ•í™”(é›™æ¹¯ç«) ê²½ê³ ! ì›êµ­ì˜ ì¶•ì˜¤ íƒ•í™”ì— ì„¸ìš´ åˆê°€ ì¤‘ì²©ë©ë‹ˆë‹¤. ê°ì • í­ë°œ, í™”ë³‘, ì •ì‹ ì  ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ê·¹ì— ë‹¬í•  ìˆ˜ ìˆì–´ìš”. ë¶„ë…¸ ì¡°ì ˆê³¼ ë©˜íƒˆ ê´€ë¦¬ê°€ íŠ¹íˆ ì¤‘ìš”í•©ë‹ˆë‹¤!'});result.tanghwaWarning = true;}
if (hasInSaTanghwa && saeunBi === 5) {result.analysis.push({type: 'danger',
text: 'âš ï¸ ìŒíƒ•í™”(é›™æ¹¯ç«) ê²½ê³ ! ì›êµ­ì˜ ì¸ì‚¬ íƒ•í™”ì— ì„¸ìš´ å·³ê°€ ì¤‘ì²©ë©ë‹ˆë‹¤. í™”ìƒ, ì—´ë³‘, ì•½ë¬¼ ë¶€ì‘ìš©ì— íŠ¹íˆ ì¡°ì‹¬í•˜ì„¸ìš”!'});result.tanghwaWarning = true;}
if (hasChuOTanghwa && saeunBi === 5) {result.analysis.push({type: 'warning',
text: 'ğŸ”¥ íƒ•í™”ì‚´ ê°€ì¤‘! ì„¸ìš´ì˜ ç« ê¸°ìš´ì´ ì›êµ­ íƒ•í™”ë¥¼ ìê·¹í•©ë‹ˆë‹¤. í™”ê¸° ì·¨ê¸‰ ì£¼ì˜!'});}};tanghwaCheck();const selfPunishBranches = [4, 6, 9, 11];if (dbi === sbi && selfPunishBranches.includes(dbi)) {const branchNames = {4:'è¾°è¾°', 6:'åˆåˆ', 9:'é…‰é…‰', 11:'äº¥äº¥'};const healthWarnings = {4: 'ë¹„ì¥/ìœ„ì¥ ì§ˆí™˜, ì†Œí™”ë¶ˆëŸ‰',
6: 'ì‹¬í˜ˆê´€ ì§ˆí™˜, ë‡Œì¶œí˜ˆ, ì •ì‹ ì  í­ë°œ',
9: 'í/í˜¸í¡ê¸° ì§ˆí™˜, ìš°ìš¸ì¦',
11: 'ì‹ ì¥/ë°©ê´‘ ì§ˆí™˜, ìí•´ ì¶©ë™'};result.analysis.push({type: 'danger',
text: `ğŸš¨ ëŒ€ìš´+ì„¸ìš´ ìí˜•(${branchNames[dbi]}è‡ªåˆ‘)! ìê¸° ìì‹ ì„ ê³µê²©í•˜ëŠ” í˜•êµ­ì…ë‹ˆë‹¤. ${healthWarnings[dbi]} ì£¼ì˜! ë¬´ë¦¬í•˜ì§€ ë§ê³  ìê¸° ê´€ë¦¬ì— ì§‘ì¤‘í•˜ì„¸ìš”.`});result.daeunSaeunJahyung = true;}
return result;}
function analyzeDaeunDetail(daeun, saju, gods, startYear) {const dm = saju.day.s;const stemGod = getTenGod(daeun.s, dm);const stemAnalysis = {period: 'ì „ë°˜ 5ë…„',
dominant: 'ì²œê°„',
pillar: daeun.s.c,
god: stemGod.k,
element: daeun.s.e,
isYong: daeun.s.e === gods.yong,
isGi: daeun.s.e === gods.gi,
desc: `${stemGod.k}ì˜ ê¸°ìš´ì´ ì§€ë°°í•˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.`};const branchGod = getTenGod({e: daeun.b.e, y: true, c: '', k: ''}, dm);const branchAnalysis = {period: 'í›„ë°˜ 5ë…„',
dominant: 'ì§€ì§€',
pillar: daeun.b.c,
element: daeun.b.e,
isYong: daeun.b.e === gods.yong,
isGi: daeun.b.e === gods.gi,
state: getTwelveState(dm, daeun.b),
desc: `${ELEMENT[daeun.b.e].k}(${daeun.b.c}) ê¸°ìš´ê³¼ ${getTwelveState(dm, daeun.b).k}ì˜ ì—ë„ˆì§€ê°€ ì‘ìš©í•©ë‹ˆë‹¤.`};return { stem: stemAnalysis, branch: branchAnalysis };}
function getNext10Years(saju, birthYear, gender, gods) {const curYear = new Date().getFullYear();const years = [];for (let i = 0; i < 10; i++) {const year = curYear + i;const cross = analyzeLuckCross(saju, birthYear, gender, gods, year);years.push({year,
age: year - birthYear,
rating: cross.totalRating,
score: cross.totalScore,
daeun: cross.daeun,
saeun: cross.saeun});}
const bestYear = years.reduce((a, b) => a.score > b.score ? a : b);const worstYear = years.reduce((a, b) => a.score < b.score ? a : b);return { years, bestYear, worstYear };}
function calcMonthLuck(year, month, saju, gods) {const mp = calcMonthPillar(year, month, 15);const dm = saju.day.s;const god = getTenGod(mp.s, dm);let score = 0;if ([mp.s.e, mp.b.e].includes(gods.yong)) score += 2;if ([mp.s.e, mp.b.e].includes(gods.hee)) score += 1;if ([mp.s.e, mp.b.e].includes(gods.gi)) score -= 2;return {month,
pillar: mp,
god,
score,
rating: score >= 2 ? 'good' : score <= -1 ? 'bad' : 'neutral'};}
function getYearlyMonthLuck(year, saju, gods) {const months = [];for (let m = 1; m <= 12; m++) {months.push(calcMonthLuck(year, m, saju, gods));}
const best = months.reduce((a, b) => a.score > b.score ? a : b);const worst = months.reduce((a, b) => a.score < b.score ? a : b);return { months, best, worst };}
function calcSinsal(saju) {const ss = [];const dmi = STEM.indexOf(saju.day.s);const ybi = BRANCH.indexOf(saju.year.b);const dbi = BRANCH.indexOf(saju.day.b);const mbi = BRANCH.indexOf(saju.month.b);const hbi = saju.hour ? BRANCH.indexOf(saju.hour.b) : -1;const brs = [ybi, mbi, dbi];if (hbi >= 0) brs.push(hbi);const ysi = STEM.indexOf(saju.year.s);const msi = STEM.indexOf(saju.month.s);const hsi = saju.hour ? STEM.indexOf(saju.hour.s) : -1;const guiren = {0:[1,7],1:[0,8],2:[11,9],3:[11,9],4:[1,7],5:[0,8],6:[7,1],7:[6,2],8:[5,3],9:[5,3]};if (guiren[dmi] && brs.some(b => guiren[dmi].includes(b))) ss.push({n:'ì²œì„ê·€ì¸(å¤©ä¹™è²´äºº)',t:'good',d:'ìµœê³ ì˜ ê¸¸ì‹ ! ìœ„ê¸°ì— ê¼­ ê·€ì¸ì´ ë‚˜íƒ€ë‚˜ìš”. ê´€ì§ìš´, ì‹œí—˜ìš´ì´ ì¢‹ê³  ìœ„í—˜ì„ í”¼í•´ê°€ìš”.',i:'ğŸ‘¼',lv:'ìµœìƒ'});const tiande = [9,8,7,6,5,4,3,2,1,0,9,8];if (mbi < 12 && (dmi === tiande[mbi] || brs.some(b => b === tiande[mbi]))) ss.push({n:'ì²œë•ê·€ì¸(å¤©å¾·è²´äºº)',t:'good',d:'í•˜ëŠ˜ì˜ ë•ì´ ìˆì–´ìš”! ì°©í•˜ê²Œ ì‚´ë©´ ë³µì´ ì™€ìš”. í‰í•œ ì¼ë„ ê¸¸í•˜ê²Œ ë°”ë€Œì–´ìš”.',i:'ğŸŒŸ',lv:'ìƒ'});const yuede = [2,6,2,6,4,8,4,8,0,6,0,6];if (mbi < 12 && dmi === yuede[mbi]) ss.push({n:'ì›”ë•ê·€ì¸(æœˆå¾·è²´äºº)',t:'good',d:'ë‹¬ì˜ ë•ì´ ìˆì–´ìš”! ì¸ê¸°ê°€ ë§ê³  ì‚¬ëŒë“¤ì—ê²Œ ì‹ ë¢°ë°›ì•„ìš”. ê³µì§ì— ìœ ë¦¬í•´ìš”.',i:'ğŸŒ™',lv:'ìƒ'});const munchang = {0:5,1:6,2:8,3:9,4:8,5:9,6:11,7:0,8:2,9:3};if (brs.includes(munchang[dmi])) ss.push({n:'ë¬¸ì°½ê·€ì¸(æ–‡æ˜Œè²´äºº)',t:'good',d:'ê³µë¶€ ë¨¸ë¦¬ ìµœê³ ! ì‹œí—˜ìš´, ìê²©ì¦ìš´, í•™ìœ„ìš´ì´ ì¢‹ì•„ìš”. ê¸€ì“°ê¸°ë„ ì˜í•´ìš”.',i:'ğŸ“š',lv:'ìƒ'});const xuetang = {0:11,1:6,2:2,3:9,4:2,5:9,6:5,7:0,8:8,9:3};if (brs.includes(xuetang[dmi])) ss.push({n:'í•™ë‹¹ê·€ì¸(å­¸å ‚è²´äºº)',t:'good',d:'í•™ì ê¸°ì§ˆ! ì—°êµ¬, êµìœ¡ ë¶„ì•¼ì—ì„œ ì„±ê³µí•´ìš”. êµìˆ˜, ë°•ì‚¬, ì „ë¬¸ê°€ì— ë”±!',i:'ğŸ“',lv:'ìƒ'});const jiangx = {0:0,1:9,2:6,3:3,4:0,5:9,6:6,7:3,8:0,9:9,10:6,11:3};if (brs.includes(jiangx[ybi])) ss.push({n:'ì¥ì„±(å°‡æ˜Ÿ)',t:'good',d:'ì¥êµ° ê¸°ì§ˆ! ë¦¬ë”ì‹­ì´ ë›°ì–´ë‚˜ê³  ì‚¬ëŒë“¤ì´ ë”°ë¼ìš”. ì¡°ì§ì˜ ìˆ˜ì¥ì´ ë  ìˆ˜ ìˆì–´ìš”.',i:'ğŸ–ï¸',lv:'ìƒ'});const jinyu = {0:4,1:5,2:7,3:8,4:7,5:8,6:10,7:11,8:1,9:2};if (brs.includes(jinyu[dmi])) ss.push({n:'ê¸ˆì—¬(é‡‘è¼¿)',t:'good',d:'ë°°ìš°ìë³µ ìµœê³ ! ê²°í˜¼í•˜ë©´ ìš´ì´ íŠ¸ì´ê³ , ì¢‹ì€ ì§ì„ ë§Œë‚˜ìš”.',i:'ğŸ’',lv:'ìƒ'});const fuxing = {0:2,1:3,2:5,3:6,4:5,5:6,6:8,7:9,8:11,9:0};if (brs.includes(fuxing[dmi])) ss.push({n:'ë³µì„±ê·€ì¸(ç¦æ˜Ÿè²´äºº)',t:'good',d:'ë³µì´ ë§ì€ ì‚¬ì£¼! ì˜ì‹ì£¼ ê±±ì • ì—†ê³  í‰ìƒ ë¨¹ê³  ì‚´ ë³µì´ ìˆì–´ìš”.',i:'ğŸ€',lv:'ìƒ'});const anlu = {0:11,1:10,2:1,3:0,4:1,5:0,6:3,7:2,8:5,9:4};if (brs.includes(anlu[dmi])) ss.push({n:'ì•”ë¡(æš—ç¥¿)',t:'good',d:'ìˆ¨ì€ ë³µì´ ìˆì–´ìš”! ëˆˆì— ì•ˆ ë³´ì´ëŠ” ê³³ì—ì„œ ë„ì›€ì„ ë°›ì•„ìš”.',i:'ğŸ',lv:'ì¤‘'});const jianlu = {0:2,1:3,2:5,3:6,4:5,5:6,6:8,7:9,8:11,9:0};if (brs.includes(jianlu[dmi])) ss.push({n:'ê±´ë¡(å»ºç¥¿)',t:'good',d:'ììˆ˜ì„±ê°€í˜•! ìŠ¤ìŠ¤ë¡œ ì¼ì–´ì„œì„œ ì„±ê³µí•˜ëŠ” íƒ€ì…. ì§ì—… ì•ˆì •ì ì´ì—ìš”.',i:'ğŸ ',lv:'ìƒ'});const tianyi = [11,0,1,2,3,4,5,6,7,8,9,10];if (mbi < 12 && brs.includes(tianyi[mbi])) ss.push({n:'ì²œì˜ì„±(å¤©é†«æ˜Ÿ)',t:'good',d:'ì˜ë£Œ ì ì„±! ì˜ì‚¬, ê°„í˜¸ì‚¬, ì•½ì‚¬ì— ë”± ë§ì•„ìš”. ê±´ê°• ê´€ë ¨ ì§ì—… ëŒ€ê¸¸!',i:'ğŸ’Š',lv:'ì¤‘'});const yima = {0:2,1:11,2:8,3:5,4:2,5:11,6:8,7:5,8:2,9:11,10:8,11:5};if (brs.includes(yima[ybi])) ss.push({n:'ì—­ë§ˆì‚´(é©›é¦¬æ®º)',t:'neutral',d:'ì›€ì§ì—¬ì•¼ ìš´ì´ íŠ¸ì—¬ìš”! ì—¬í–‰, ì¶œì¥, ì´ì‚¬, í•´ì™¸ ë°œë ¹... ê°€ë§Œíˆ ìˆìœ¼ë©´ ë‹µë‹µí•´ìš”.',i:'ğŸ',lv:'ì¤‘'});const taohua = {0:9,1:6,2:3,3:0,4:9,5:6,6:3,7:0,8:9,9:6,10:3,11:0};if (brs.includes(taohua[ybi])) ss.push({n:'ë„í™”ì‚´(æ¡ƒèŠ±æ®º)',t:'neutral',d:'ë§¤ë ¥ í­ë°œ! ì´ì„±ì—ê²Œ ì¸ê¸° ë§ì•„ìš”. ì—°ì˜ˆì¸ ê¸°ì§ˆ! ë‹¨, ë°”ëŒê¸° ì¡°ì‹¬.',i:'ğŸŒ¸',lv:'ì¤‘'});const huagai = {0:4,1:1,2:10,3:7,4:4,5:1,6:10,7:7,8:4,9:1,10:10,11:7};if (brs.includes(huagai[ybi])) ss.push({n:'í™”ê°œì‚´(è¯è“‹æ®º)',t:'neutral',d:'ì˜ˆìˆ ê°€ ê¸°ì§ˆ! ìŒì•…, ê·¸ë¦¼, ê¸€ì“°ê¸° ì¬ëŠ¥. ì¢…êµ, ì² í•™ì— ê´€ì‹¬ ë§ì•„ìš”.',i:'ğŸ¨',lv:'ì¤‘'});const hongyan = {0:6,1:5,2:8,3:7,4:8,5:7,6:9,7:8,8:11,9:10};if (brs.includes(hongyan[dmi])) ss.push({n:'í™ì—¼ì‚´(ç´…è‰¶æ®º)',t:'neutral',d:'ì„¹ì‹œí•œ ë§¤ë ¥! ì´ì„±ì„ ë„ëŠ” í˜ì´ ìˆì–´ìš”. ì—°ì˜ˆê³„ ì ì„±, ë°”ëŒê¸° ì£¼ì˜!',i:'ğŸ’‹',lv:'ì¤‘'});const kuigang = [[6,4],[],[6,4],[],[6,10],[],[6,10],[],[],[]];if (kuigang[dmi] && kuigang[dmi].includes(dbi)) ss.push({n:'ê´´ê°•ì‚´(é­ç½¡æ®º)',t:'bad',d:'ì„±ê²©ì´ ë¶ˆ ê°™ì•„ìš”! ì¹´ë¦¬ìŠ¤ë§ˆ ìˆê³  ë¦¬ë” ìì§ˆ, í•˜ì§€ë§Œ ë…ë‹¨ì ì¼ ìˆ˜ ìˆì–´ìš”.',i:'âš¡',lv:'ìƒ'});const yangren = {0:3,1:2,2:6,3:5,4:6,5:5,6:9,7:8,8:0,9:11};if (dbi === yangren[dmi]) ss.push({n:'ì–‘ì¸ì‚´(ç¾Šåˆƒæ®º)',t:'bad',d:'ì¹¼ë‚  ê°™ì€ ê¸°ìš´! ê²°ë‹¨ë ¥ ìˆì§€ë§Œ ë‚ ì¹´ë¡œì›Œìš”. êµ°ì¸, ì™¸ê³¼ì˜, ë²•ì¡°ì¸ì— ì í•©.',i:'ğŸ—¡ï¸',lv:'ìƒ'});const baihu = [6,7,8,9,10,11,0,1,2,3,4,5];if (mbi < 12 && brs.includes(baihu[mbi])) ss.push({n:'ë°±í˜¸ì‚´(ç™½è™æ®º)',t:'bad',d:'ì‚¬ê³ , ìˆ˜ìˆ  ì£¼ì˜! í•˜ì§€ë§Œ ì˜ë£Œì¸, ìš”ë¦¬ì‚¬ ë“± í”¼ ë³´ëŠ” ì§ì—…ì€ ì˜¤íˆë ¤ ì¢‹ì•„ìš”.',i:'ğŸ¯',lv:'ì¤‘'});const baihuDaeSal = [
[0, 4],
[1, 7],
[2, 10],
[3, 1],
[4, 4],
[5, 1],
[6, 10],
[7, 7],
[8, 4],
[9, 1]
];const isBaihuDaeSal = baihuDaeSal.some(([s, b]) => s === dmi && b === dbi);if (isBaihuDaeSal) {ss.push({n:'ë°±í˜¸ëŒ€ì‚´(ç™½è™å¤§æ®º)',t:'bad',d:'ì¼ì£¼ì— ë°±í˜¸ê°€ ìˆì–´ìš”! ê²‰ìœ¼ë¡œëŠ” ì˜¨ìˆœí•´ ë³´ì—¬ë„ ì†ì— ê°•í•œ ê¸°ìš´ì´ ìˆìŠµë‹ˆë‹¤. ë°°ìš°ìê¶ì— ë°±í˜¸ê°€ ìˆìœ¼ë‹ˆ ë°°ìš°ìì˜ ê¸°ê°€ ì„¸ê±°ë‚˜, ê±´ê°• ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆì–´ìš”. ì˜ë£Œ, êµ°ê²½, ìš”ë¦¬ ë“± í”¼ë¥¼ ë‹¤ë£¨ëŠ” ì§ì—…ì´ ì˜¤íˆë ¤ ì¢‹ì•„ìš”.',i:'ğŸ…',lv:'ìƒ'});}
const jiesha = {0:5,1:2,2:11,3:8,4:5,5:2,6:11,7:8,8:5,9:2,10:11,11:8};if (brs.includes(jiesha[ybi])) ss.push({n:'ê²ì‚´(åŠ«æ®º)',t:'bad',d:'ëˆ ìƒê¸° ì‰¬ì›Œìš”! ë„ë‚œ, ì‚¬ê¸°, íˆ¬ì ì‹¤íŒ¨ ì£¼ì˜. ë³´ì¦ ì ˆëŒ€ ì•ˆ ë¼ìš”!',i:'ğŸ’¸',lv:'ì¤‘'});const wangshen = {0:9,1:6,2:3,3:0,4:9,5:6,6:3,7:0,8:9,9:6,10:3,11:0};if (brs.includes(wangshen[ybi]) && wangshen[ybi] !== taohua[ybi]) ss.push({n:'ë§ì‹ ì‚´(äº¡ç¥æ®º)',t:'bad',d:'ë§ì‹ ë‹¹í•˜ê¸° ì‰¬ì›Œìš”! SNS ì¡°ì‹¬, ìˆ ìë¦¬ ì‹¤ìˆ˜ ì£¼ì˜í•˜ì„¸ìš”.',i:'ğŸ˜°',lv:'ì¤‘'});const yuanchen = [[7],[6],[5],[4],[3],[2],[1],[0],[11],[10],[9],[8]];if (yuanchen[ybi] && brs.some(b => yuanchen[ybi].includes(b))) ss.push({n:'ì›ì§„ì‚´(æ€¨å—”æ®º)',t:'bad',d:'ë¯¸ì›Œë„ ë–¨ì–´ì§ˆ ìˆ˜ ì—†ëŠ” ì¸ì—°ì´ ìˆì–´ìš”. ê°€ê¹Œìš´ ì‚¬ëŒê³¼ ê°ˆë“± ì¡°ì‹¬.',i:'ğŸ’”',lv:'ì¤‘'});const guimen = [[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,0],[0,1],[1,2],[2,3],[3,4],[4,5]];if (guimen[ybi] && brs.some(b => guimen[ybi].includes(b))) ss.push({n:'ê·€ë¬¸ê´€ì‚´(é¬¼é–€é—œæ®º)',t:'bad',d:'ì •ì‹ ì  ê³ í†µì´ ìˆì„ ìˆ˜ ìˆì–´ìš”. ìš°ìš¸, ë¶ˆì•ˆ ì¡°ì‹¬. ëª…ìƒ, ì¢…êµê°€ ë„ì›€ ë¼ìš”.',i:'ğŸ‘»',lv:'ì¤‘'});if ([0,7].includes(dmi)) ss.push({n:'í˜„ì¹¨ì‚´(æ‡¸é‡æ®º)',t:'bad',d:'ë°”ëŠ˜ì²˜ëŸ¼ ë‚ ì¹´ë¡œìš´ ê¸°ìš´! ë¹„íŒì ì´ê³  ì™„ë²½ì£¼ì˜. ì¹¨ìˆ , ë´‰ì œì— ì¬ëŠ¥.',i:'ğŸ“',lv:'í•˜'});const liuhai = [[7],[6],[5],[4],[3],[2],[1],[0],[11],[10],[9],[8]];if (liuhai[dbi] && brs.some(b => liuhai[dbi].includes(b) && b !== dbi)) ss.push({n:'ìœ¡í•´ì‚´(å…­å®³æ®º)',t:'bad',d:'ê°€ê¹Œìš´ ì‚¬ëŒì—ê²Œ í•´ë¥¼ ì…ì„ ìˆ˜ ìˆì–´ìš”. ë°°ìš°ì, í˜•ì œ ê´€ê³„ ì£¼ì˜.',i:'âš ï¸',lv:'ì¤‘'});const tianluodiwang = (dbi === 10 && [5,6].includes(mbi)) || (dbi === 11 && [9,10].includes(mbi));if (tianluodiwang) ss.push({n:'ì²œë¼ì§€ë§(å¤©ç¾…åœ°ç¶²)',t:'bad',d:'í•˜ëŠ˜ ê·¸ë¬¼ì— ê±¸ë¦° í˜•ìƒ. êµ¬ì„¤, ì†Œì†¡ ì£¼ì˜. ê°‡íŒ ëŠë‚Œì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”.',i:'ğŸ•¸ï¸',lv:'ì¤‘'});const guluanM = [[0,2],[1,3],[2,5],[3,6],[4,5],[5,6],[6,8],[7,9],[8,11],[9,0]];const guluanF = [[1,3],[0,2],[3,6],[2,5],[3,6],[2,5],[7,9],[6,8],[9,0],[8,11]];const guluanCheck = GENDER === 'm' ? guluanM : guluanF;if (guluanCheck[dmi] && guluanCheck[dmi][1] === dbi) ss.push({n:'ê³ ë€ì‚´(å­¤é¸æ®º)',t:'bad',d:'ì™¸ë¡œìš´ ê¸°ìš´ì´ ìˆì–´ìš”. ê²°í˜¼ì´ ëŠ¦ê±°ë‚˜ ë…ì‹  ê²½í–¥. í˜¼ì ìˆëŠ” ì‹œê°„ì´ ë§ì•„ìš”.',i:'ğŸ¦¢',lv:'í•˜'});const sanzai = {0:[2,3,4],
1:[11,0,1],
2:[8,9,10],
3:[5,6,7],
4:[2,3,4],
5:[11,0,1],
6:[8,9,10],
7:[5,6,7],
8:[2,3,4],
9:[11,0,1],
10:[8,9,10],
11:[5,6,7]};const curYear = new Date().getFullYear();const curYearBranch = (curYear - 4) % 12;if (sanzai[ybi] && sanzai[ybi].includes(curYearBranch)) ss.push({n:'ì‚¼ì¬(ä¸‰ç½) ê¸°ê°„',t:'bad',d:'í˜„ì¬ ì‚¼ì¬ ê¸°ê°„ì´ì—ìš”! 3ë…„ê°„ ì¡°ì‹¬í•˜ì„¸ìš”. ë¬´ë¦¬í•œ í™•ì¥, ì´ì‚¬, ìˆ˜ìˆ  í”¼í•˜ì„¸ìš”.',i:'ğŸ”¥',lv:'ì¤‘'});const panan = {0:2,1:3,2:5,3:6,4:5,5:6,6:8,7:9,8:11,9:0};if (brs.includes(panan[dmi])) ss.push({n:'ë°˜ì•ˆì‚´(æ”€éæ®º)',t:'good',d:'ì§ì¥ìš´ ì¢‹ì•„ìš”! ì•ˆì •ì ì¸ ì¡°ì§ì—ì„œ ìŠ¹ì§„í•˜ëŠ” íƒ€ì…. ê³µê¸°ì—…, ëŒ€ê¸°ì—…ì— ì í•©.',i:'ğŸ’º',lv:'ì¤‘'});const tianchu = {0:5,1:6,2:8,3:9,4:8,5:9,6:11,7:0,8:2,9:3};if (brs.includes(tianchu[dmi])) ss.push({n:'ì²œì£¼ê·€ì¸(å¤©å»šè²´äºº)',t:'good',d:'ë¨¹ëŠ” ë³µì´ ìˆì–´ìš”! í‰ìƒ êµ¶ì„ ì¼ ì—†ì–´ìš”. ìš”ì‹ì—…ì—ë„ ì¬ëŠ¥!',i:'ğŸ½ï¸',lv:'ì¤‘'});const tiansha = [[2,0],[3,1],[5,2],[6,3],[8,4],[9,5],[11,6],[0,7],[2,8],[3,9]];if (tiansha.some(ts => dbi === ts[0] && dmi === ts[1])) ss.push({n:'ì²œì‚¬ì¼(å¤©èµ¦æ—¥) ì¶œìƒ',t:'good',d:'í•˜ëŠ˜ì´ ìš©ì„œí•˜ëŠ” ë‚ ì— íƒœì–´ë‚¬ì–´ìš”! ì£„ë¥¼ ì§€ì–´ë„ í’€ë¦¬ê³ , í‰ì´ ê¸¸ë¡œ ë°”ë€Œì–´ìš”.',i:'ğŸ•Šï¸',lv:'ìƒ'});const tanghuaPairs = [[1,6],[6,1],[2,5],[5,2]];for (let i = 0; i < brs.length; i++) {for (let j = i + 1; j < brs.length; j++) {if (tanghuaPairs.some(p => (brs[i] === p[0] && brs[j] === p[1]))) {ss.push({n:'íƒ•í™”ì‚´(æ¹¯ç«æ®º)',t:'bad',d:'í™”ìƒ, ì—´ë³‘, ì•½ë¬¼ ë¶€ì‘ìš© ì£¼ì˜! í™”ë³‘ì´ë‚˜ ì •ì‹ ì  ìŠ¤íŠ¸ë ˆìŠ¤ì—ë„ ì·¨ì•½í•´ìš”. ëœ¨ê±°ìš´ ìŒì‹, í™”ê¸°ë¥¼ ë‹¤ë£° ë•Œ ì¡°ì‹¬í•˜ì„¸ìš”.',i:'ğŸ”¥',lv:'ìƒ'});break;}}}
const stemIdxs = [STEM.indexOf(saju.year.s), STEM.indexOf(saju.month.s), STEM.indexOf(saju.day.s)];if (saju.hour) stemIdxs.push(STEM.indexOf(saju.hour.s));const stemGods = stemIdxs.map(s => getTenGod(STEM[s], saju.day.s));const hasJungJae = stemGods.some(g => g && g.k === 'ì •ì¬');const hasPyunJae = stemGods.some(g => g && g.k === 'í¸ì¬');if (hasJungJae && hasPyunJae) {ss.push({n:'ì •í¸ì¬ í˜¼ì¡(è²¡æ··)',t:'bad',d:'ì •ì¬ì™€ í¸ì¬ê°€ ëª¨ë‘ ì²œê°„ì— ìˆì–´ìš”. ì´ì„± ê´€ê³„ê°€ ë³µì¡í•´ì§€ê¸° ì‰¬ì›Œìš”. ì¬ë¬¼ì˜ ì…ì¶œë„ ë¹ˆë²ˆí•©ë‹ˆë‹¤. í•œ ìš°ë¬¼ì„ íŒŒëŠ” ê²Œ ì¢‹ì•„ìš”.',i:'ğŸ’”',lv:'ì¤‘'});}
const hasShangGuan = stemGods.some(g => g && g.k === 'ìƒê´€');const hasPyunGwan = stemGods.some(g => g && g.k === 'í¸ê´€');const tianganHap = [[0,5],[1,6],[2,7],[3,8],[4,9]];let hasShangGuanHapSal = false;for (let i = 0; i < stemIdxs.length; i++) {for (let j = i+1; j < stemIdxs.length; j++) {const godI = stemGods[i];const godJ = stemGods[j];if (godI && godJ) {const isHap = tianganHap.some(([a,b]) =>
(stemIdxs[i] === a && stemIdxs[j] === b) || (stemIdxs[i] === b && stemIdxs[j] === a)
);if (isHap &&
((godI.k === 'ìƒê´€' && godJ.k === 'í¸ê´€') || (godI.k === 'í¸ê´€' && godJ.k === 'ìƒê´€'))) {hasShangGuanHapSal = true;}}}}
if (hasShangGuanHapSal) {ss.push({n:'ìƒê´€í•©ì‚´(å‚·å®˜åˆæ®º)',t:'good',d:'ìœ„ê¸°ë¥¼ ê¸°íšŒë¡œ ë°”ê¾¸ëŠ” í˜‘ìƒê°€ ì¬ëŠ¥! ìƒê´€(ì–¸ë³€/ê¸°ìˆ )ì´ í¸ê´€(ìœ„í—˜/ì )ì„ í•©ìœ¼ë¡œ ì œì–´í•´ìš”. ë¡œë¹„ìŠ¤íŠ¸, í˜‘ìƒê°€, ì¤‘ì¬ì, í•´ê²°ì‚¬ì— íƒì›”í•´ìš”.',i:'ğŸ¤',lv:'ìƒ'});}
return ss.length ? ss : [{n:'íŠ¹ì´ì‹ ì‚´ ì—†ìŒ',t:'neutral',d:'íŠ¹ë³„í•œ ì‹ ì‚´ì´ ì—†ì–´ìš”. í‰ì˜¨í•˜ê³  ì•ˆì •ì ì¸ ì‚¬ì£¼ì˜ˆìš”!',i:'â˜¯ï¸',lv:'ì¤‘'}];}
function calcInteractions(saju) {const res = [];const stems = [STEM.indexOf(saju.year.s), STEM.indexOf(saju.month.s), STEM.indexOf(saju.day.s)];const brs = [BRANCH.indexOf(saju.year.b), BRANCH.indexOf(saju.month.b), BRANCH.indexOf(saju.day.b)];if (saju.hour) { stems.push(STEM.indexOf(saju.hour.s)); brs.push(BRANCH.indexOf(saju.hour.b)); }
const stComb = [[0,5,'ê°‘ê¸°í•©í† '],[1,6,'ì„ê²½í•©ê¸ˆ'],[2,7,'ë³‘ì‹ í•©ìˆ˜'],[3,8,'ì •ì„í•©ëª©'],[4,9,'ë¬´ê³„í•©í™”']];const positions = ['ë…„ê°„','ì›”ê°„','ì¼ê°„','ì‹œê°„'];for (let [a,b,n] of stComb) {for (let i = 0; i < stems.length; i++) {for (let j = i+1; j < stems.length; j++) {if ((stems[i]===a && stems[j]===b) || (stems[i]===b && stems[j]===a)) {if (j - i === 1) {res.push({t:'å¤©åˆ',c:`${STEM[a].c}+${STEM[b].c}`,m:n,d:`${positions[i]}-${positions[j]} ì¸ì ‘í•©. ìƒˆë¡œìš´ ê¸°ìš´ì„ ë§Œë“¤ì–´ìš”!`});} else {res.push({t:'æ°£çµ†',c:`${STEM[a].c}~${STEM[b].c}`,m:`${n}(ê¸°ë°˜)`,d:`${positions[i]}-${positions[j]} ì›ê±°ë¦¬. ëœ»ì€ ìˆìœ¼ë‚˜ í•©ë ¥ì´ ì•½í•´ìš”.`});}}}}}
const stClash = [
[0,6,'ê°‘ê²½ì¶©','ê°•í•œ ê²°ë‹¨ë ¥ì´ì§€ë§Œ ì¶©ëŒì´ ë§ì•„ìš”. ë¦¬ë”ì‹­ê³¼ ê¶Œìœ„ì˜ ê°ˆë“±!'],
[1,7,'ì„ì‹ ì¶©','ë‚´ë©´ì˜ ê°ˆë“±. ìœ ì—°í•¨ê³¼ ê°•í•¨ì´ ë¶€ë”ªí˜€ìš”.'],
[2,8,'ë³‘ì„ì¶©','ì—´ì •ê³¼ ì§€í˜œê°€ ì¶©ëŒ. ì„±ê¸‰í•¨ ì¡°ì‹¬!'],
[3,9,'ì •ê³„ì¶©','ê°ì„±ê³¼ ì´ì„±ì´ ì¶©ëŒ. ê°ì • ê¸°ë³µì´ ìˆì–´ìš”.'],
[4,4,'ë¬´ë¬´ë¹„ê²¬','ê³ ì§‘ì´ ì„¸ê³  ìê¸°ì£¼ì¥ì´ ê°•í•´ìš”.'],
[5,5,'ê¸°ê¸°ë¹„ê²¬','ìˆœìˆ˜í•˜ì§€ë§Œ ìš°ìœ ë¶€ë‹¨í•  ìˆ˜ ìˆì–´ìš”.']
];for (let [a,b,n,desc] of stClash) {for (let i = 0; i < stems.length; i++) {for (let j = i+1; j < stems.length; j++) {if ((stems[i]===a && stems[j]===b) || (stems[i]===b && stems[j]===a)) {res.push({t:'å¤©æ²–',c:`${STEM[a].c}â†”${STEM[b].c}`,m:n,d:desc});}}}}
const hap = [[0,1,'ìì¶•í•©í† '],[2,11,'ì¸í•´í•©ëª©'],[3,10,'ë¬˜ìˆ í•©í™”'],[4,9,'ì§„ìœ í•©ê¸ˆ'],[5,8,'ì‚¬ì‹ í•©ìˆ˜'],[6,7,'ì˜¤ë¯¸í•©í™”']];for (let [a,b,n] of hap) {if (brs.includes(a) && brs.includes(b)) res.push({t:'å…­åˆ',c:`${BRANCH[a].c}+${BRANCH[b].c}`,m:n,d:'ì§€ì§€ê°€ í•©í•˜ì—¬ í™”í•©í•˜ëŠ” ê¸°ìš´! ì¢‹ì€ ì¸ì—°!'});}
const samhap = [[2,6,10,'ì¸ì˜¤ìˆ  í™”êµ­'],[5,9,1,'ì‚¬ìœ ì¶• ê¸ˆêµ­'],[8,0,4,'ì‹ ìì§„ ìˆ˜êµ­'],[11,3,7,'í•´ë¬˜ë¯¸ ëª©êµ­']];for (let [a,b,c,n] of samhap) {const has = [brs.includes(a), brs.includes(b), brs.includes(c)];if (has.filter(x=>x).length === 3) res.push({t:'ä¸‰åˆ',c:`${BRANCH[a].c}${BRANCH[b].c}${BRANCH[c].c}`,m:n,d:'ì™„ì „í•œ ì‚¼í•©! ê°•ë ¥í•œ ê¸°ìš´ì´ í˜•ì„±ë¼ìš”!'});else if (has.filter(x=>x).length === 2 && has[1]) res.push({t:'åŠåˆ',c:has[0]?`${BRANCH[a].c}${BRANCH[b].c}`:has[2]?`${BRANCH[b].c}${BRANCH[c].c}`:'',m:n.split(' ')[0]+' ë°˜í•©',d:'ë°˜ìª½ ì‚¼í•©. ë¶€ë¶„ì ìœ¼ë¡œ ê¸°ìš´ì´ í˜•ì„±ë¼ìš”.'});}
const wangjiChung = [[0,6,'ìì˜¤ì¶©'],[3,9,'ë¬˜ìœ ì¶©']];const clash = [
[0,6,'ìì˜¤ì¶©','ìˆ˜í™”ìƒì „(æ°´ç«ç›¸æˆ°)! ì‹¬í˜ˆê´€/ì‹ ì¥ ê±´ê°•ê³¼ ì •ì‹ ì  ê°ˆë“±ì— ì£¼ì˜í•˜ì„¸ìš”.'],
[1,7,'ì¶•ë¯¸ì¶©','ì¬ë¬¼ ê´€ë ¨ ë³€ë™ì´ ìˆì–´ìš”. ë¶€ë™ì‚°ì´ë‚˜ ê³„ì•½ ì¡°ì‹¬!'],
[2,8,'ì¸ì‹ ì¶©','í™œë™ëŸ‰ ë§ì•„ì§€ê³  ë°”ë¹ ì ¸ìš”. êµí†µì‚¬ê³ , ìˆ˜ìˆ  ì£¼ì˜!'],
[3,9,'ë¬˜ìœ ì¶©','ë¬¸ì„œ, ê³„ì•½ ë¬¸ì œ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”. ê°„/í ê±´ê°• ì£¼ì˜!'],
[4,10,'ì§„ìˆ ì¶©','ê³ ì§‘ ë•Œë¬¸ì— ì¶©ëŒí•´ìš”. ì†Œì†¡, ê´€ì¬ ì£¼ì˜!'],
[5,11,'ì‚¬í•´ì¶©','ê³„íšëŒ€ë¡œ ì•ˆ ë  ìˆ˜ ìˆì–´ìš”. ì‹¬í˜ˆê´€/ë¹„ë‡¨ê¸° ê±´ê°• ì£¼ì˜!']
];for (let [a,b,n,desc] of clash) {const ia = brs.indexOf(a), ib = brs.indexOf(b);if (ia >= 0 && ib >= 0) {const dist = Math.abs(ia - ib);const isWangji = wangjiChung.some(([wa, wb]) => (a === wa && b === wb) || (a === wb && b === wa));const strength = isWangji ? 'âš¡ì™•ì§€ ì¶©ëŒ' : dist === 1 ? 'âš¡ê°•í•œ ì¶©' : dist === 2 ? 'ë³´í†µ ì¶©' : 'ì•½í•œ ì¶©';res.push({t:'æ²–',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:`${n} (${strength})`,d:desc});}}
if (brs.includes(2) && brs.includes(5) && brs.includes(8)) {res.push({t:'ä¸‰åˆ‘',c:'å¯…å·³ç”³',m:'ë¬´ì€ì§€í˜•(ç„¡æ©ä¹‹åˆ‘)',d:'ì€í˜œë¥¼ ëª¨ë¥´ëŠ” í˜•! ë°°ì€ë§ë• ì¡°ì‹¬. í° ì‚¬ê³ , ê´€ì¬ ì£¼ì˜!'});}
if (brs.includes(1) && brs.includes(10) && brs.includes(7)) {res.push({t:'ä¸‰åˆ‘',c:'ä¸‘æˆŒæœª',m:'ë¬´ë¡€ì§€í˜•(ç„¡ç¦®ä¹‹åˆ‘)',d:'ì˜ˆì˜ ì—†ëŠ” í˜•! ê³ ì§‘ ì„¸ê³  ë¶ˆí™”. ëŒ€ì¸ê´€ê³„ ì¡°ì‹¬!'});}
const brHyung = [
[2,5,'ì¸ì‚¬í˜•(å¯…å·³åˆ‘)','ë¬´ì€ì§€í˜• ë¶€ë¶„. ë°°ì‹ , êµ¬ì„¤ ì¡°ì‹¬!'],
[5,8,'ì‚¬ì‹ í˜•(å·³ç”³åˆ‘)','ë¬´ì€ì§€í˜• ë¶€ë¶„. ëƒ‰ì •í•˜ê³  ê°ˆë“± ë§ì•„ìš”.'],
[2,8,'ì¸ì‹ í˜•(å¯…ç”³åˆ‘)','ì¶©ëŒí•˜ë©´ì„œë„ ëŒë¦¬ëŠ” ê´€ê³„. êµí†µì‚¬ê³  ì£¼ì˜!'],
[1,10,'ì¶•ìˆ í˜•(ä¸‘æˆŒåˆ‘)','ë¬´ë¡€ì§€í˜• ë¶€ë¶„. ê³ ì§‘ìœ¼ë¡œ ì¶©ëŒ!'],
[10,7,'ìˆ ë¯¸í˜•(æˆŒæœªåˆ‘)','ë¬´ë¡€ì§€í˜• ë¶€ë¶„. í† ë¼ë¦¬ ë‹¤íˆ¼!'],
[1,7,'ì¶•ë¯¸í˜•(ä¸‘æœªåˆ‘)','ë¬´ë¡€ì§€í˜• ë¶€ë¶„. ì¬ë¬¼ ë‹¤íˆ¼!'],
[0,3,'ìë¬˜í˜•(å­å¯åˆ‘)','ë¬´ë¡€ì§€í˜•. ì˜ˆì˜ ìƒê¸° ì‰¬ì›Œìš”. ë§ì‹¤ìˆ˜ ì¡°ì‹¬!']
];for (let [a,b,n,desc] of brHyung) {const ia = brs.indexOf(a), ib = brs.indexOf(b);if (ia >= 0 && ib >= 0) {if (!(brs.includes(2) && brs.includes(5) && brs.includes(8) && [2,5,8].includes(a) && [2,5,8].includes(b)) &&
!(brs.includes(1) && brs.includes(10) && brs.includes(7) && [1,10,7].includes(a) && [1,10,7].includes(b))) {res.push({t:'åˆ‘',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:n,d:desc});}}}
const selfPunish = {4:'ì§„ì§„ìí˜•(è¾°è¾°è‡ªåˆ‘)',6:'ì˜¤ì˜¤ìí˜•(åˆåˆè‡ªåˆ‘)',9:'ìœ ìœ ìí˜•(é…‰é…‰è‡ªåˆ‘)',11:'í•´í•´ìí˜•(äº¥äº¥è‡ªåˆ‘)'};for (let i = 0; i < brs.length; i++) {for (let j = i+1; j < brs.length; j++) {if (brs[i] === brs[j] && selfPunish[brs[i]]) {res.push({t:'è‡ªåˆ‘',c:`${BRANCH[brs[i]].c}+${BRANCH[brs[j]].c}`,m:selfPunish[brs[i]],d:'ìê¸° ìì‹ ì„ í•´ì¹˜ëŠ” í˜•. ìì±…, ìš°ìš¸ ì¡°ì‹¬! ìŠ¤ìŠ¤ë¡œë¥¼ ì‚¬ë‘í•˜ì„¸ìš”.'});}}}
const brPa = [[0,9,'ììœ íŒŒ','ê´€ê³„ ê¹¨ì§€ê¸° ì‰¬ì›Œìš”.'],[3,6,'ë¬˜ì˜¤íŒŒ','ê³„íš í‹€ì–´ì ¸ìš”.'],[2,11,'ì¸í•´íŒŒ','ë§ˆë¬´ë¦¬ ì˜ í•˜ì„¸ìš”.'],[4,1,'ì§„ì¶•íŒŒ','ê¸°ë°˜ í”ë“¤ë ¤ìš”.']];for (let [a,b,n,desc] of brPa) {if (brs.includes(a) && brs.includes(b)) res.push({t:'ç ´',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:n,d:desc});}
const brHae = [[0,7,'ìë¯¸í•´','ê°€ê¹Œìš´ ì‚¬ëŒì´ ë°œëª© ì¡ì•„ìš”.'],[1,6,'ì¶•ì˜¤í•´','ë™ì—… ì¡°ì‹¬!'],[2,5,'ì¸ì‚¬í•´','ì‹œê¸°ë°›ì•„ìš”. ë„ˆë¬´ ë“œëŸ¬ë‚´ì§€ ë§ˆì„¸ìš”.'],[3,4,'ë¬˜ì§„í•´','ì‚¬ì†Œí•œ ì¼ë¡œ í° ì‹¸ì›€ ë‚˜ìš”.']];for (let [a,b,n,desc] of brHae) {if (brs.includes(a) && brs.includes(b)) res.push({t:'å®³',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:n,d:desc});}
const wonJin = [[0,7,'ìë¯¸ì›ì§„'],[1,6,'ì¶•ì˜¤ì›ì§„'],[2,5,'ì¸ì‚¬ì›ì§„'],[3,4,'ë¬˜ì§„ì›ì§„'],[4,3,'ì§„ë¬˜ì›ì§„'],[5,2,'ì‚¬ì¸ì›ì§„'],[6,1,'ì˜¤ì¶•ì›ì§„'],[7,0,'ë¯¸ìì›ì§„'],[8,11,'ì‹ í•´ì›ì§„'],[9,10,'ìœ ìˆ ì›ì§„'],[10,9,'ìˆ ìœ ì›ì§„'],[11,8,'í•´ì‹ ì›ì§„']];for (let [a,b,n] of wonJin) {if (brs.includes(a) && brs.includes(b)) {res.push({t:'æ€¨å—”',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:n,d:'ë¯¸ì›Œë„ ë–¨ì–´ì§ˆ ìˆ˜ ì—†ëŠ” ì•…ì—°. ë¶€ë¶€ ì‚¬ì´ë©´ ê°ˆë“±ì´ ê¹Šì–´ìš”.'});}}
const guiMen = [[2,7,'ì¸ë¯¸ê·€ë¬¸'],[3,8,'ë¬˜ì‹ ê·€ë¬¸'],[4,9,'ì§„ìœ ê·€ë¬¸'],[5,10,'ì‚¬ìˆ ê·€ë¬¸'],[6,11,'ì˜¤í•´ê·€ë¬¸'],[1,6,'ì¶•ì˜¤ê·€ë¬¸']];const hapGuiMen = [[4,9,'ì§„ìœ ']];for (let [a,b,n] of guiMen) {if (brs.includes(a) && brs.includes(b)) {const isHapGuiMen = hapGuiMen.some(([ha,hb]) => (a===ha && b===hb) || (a===hb && b===ha));if (isHapGuiMen) {res.push({t:'é¬¼é–€',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:n + '(í•©ê·€ë¬¸)',
d:'í•©ì´ë©´ì„œ ê·€ë¬¸! ê²‰ìœ¼ë¡œëŠ” ì¢‹ì•„ ë³´ì´ì§€ë§Œ ì†ìœ¼ë¡œ ë³‘ë“œëŠ” ê´€ê³„. ì§ì¥/ì¡°ì§ì—ì„œ ìŠ¤íŠ¸ë ˆìŠ¤ ëˆ„ì  ì£¼ì˜.'});} else {res.push({t:'é¬¼é–€',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:n,d:'ê·€ì‹ ì˜ ë¬¸. ì •ì‹ ì  ë¶ˆì•ˆ, ìš°ìš¸ì¦ ì£¼ì˜. ëª…ìƒê³¼ íœ´ì‹ì´ í•„ìš”í•´ìš”.'});}}}
return res.length ? res : [{t:'-',c:'ì—†ìŒ',m:'íŠ¹ë³„í•œ í•©ì¶©í˜•íŒŒí•´ ì—†ìŒ',d:'ì‚¬ì£¼ ë‚´ íŠ¹ë³„í•œ ì‘ìš©ì´ ì—†ì–´ìš”. í‰ì˜¨í•œ ì‚¬ì£¼!'}];}
function calcGongmang(saju) {const stemIdx = STEM.indexOf(saju.day.s);const branchIdx = BRANCH.indexOf(saju.day.b);const distFromGap = stemIdx;const xunHeadBranch = (branchIdx - distFromGap + 12) % 12;const GONGMANG_MAP = {0: [10, 11],
10: [8, 9],
8: [6, 7],
6: [4, 5],
4: [2, 3],
2: [0, 1]};const gm = GONGMANG_MAP[xunHeadBranch] || [10, 11];const names = [BRANCH[gm[0]].c, BRANCH[gm[1]].c];const affected = [];const pillars = ['ë…„ì§€','ì›”ì§€','ì¼ì§€','ì‹œì§€'];const brs = [BRANCH.indexOf(saju.year.b), BRANCH.indexOf(saju.month.b), BRANCH.indexOf(saju.day.b)];if (saju.hour) brs.push(BRANCH.indexOf(saju.hour.b));brs.forEach((b, i) => { if (gm.includes(b)) affected.push(pillars[i]); });return { gm, names, affected };}
function analyzeYukChinRon(saju, gender) {const dm = saju.day.s;const result = {father: null,
mother: null,
sibling: null,
spouse: null,
children: null};const godCount = {};const godPositions = {};const pillars = [
{name: 'ë…„ì£¼', pillar: saju.year},
{name: 'ì›”ì£¼', pillar: saju.month},
{name: 'ì¼ì£¼', pillar: saju.day},
];if (saju.hour) pillars.push({name: 'ì‹œì£¼', pillar: saju.hour});pillars.forEach(p => {if (p.name === 'ì¼ì£¼') return;const sGod = getTenGod(p.pillar.s, dm);const branchIdx = BRANCH.findIndex(br => br.c === p.pillar.b.c);const hiddenMain = HIDDEN_STEMS[branchIdx];const mainStem = hiddenMain && hiddenMain.length > 0 ? STEM[hiddenMain[hiddenMain.length - 1].stem] : null;const bGod = mainStem ? getTenGod(mainStem, dm) : null;[sGod, bGod].forEach(god => {if (god && god.k) {if (!godCount[god.k]) godCount[god.k] = 0;if (!godPositions[god.k]) godPositions[god.k] = [];godCount[god.k]++;godPositions[god.k].push(p.name);}});});const fatherGod = 'í¸ì¬';const fatherCount = godCount[fatherGod] || 0;if (fatherCount >= 2) {result.father = {status: 'strong', desc: 'ì•„ë²„ì§€ì™€ ì¸ì—°ì´ ê¹Šì–´ìš”. ì•„ë²„ì§€ì˜ ë„ì›€ì„ ë°›ì•„ìš”.', icon: 'ğŸ‘¨â€ğŸ‘¦'};} else if (fatherCount === 1) {result.father = {status: 'normal', desc: 'ì•„ë²„ì§€ì™€ í‰ë²”í•œ ê´€ê³„ì˜ˆìš”. ì ë‹¹í•œ ê±°ë¦¬ê°ì´ ì¢‹ì•„ìš”.', icon: 'ğŸ‘¨'};} else {result.father = {status: 'weak', desc: 'ì•„ë²„ì§€ì™€ ì¸ì—°ì´ ì•½í•˜ê±°ë‚˜ ì¼ì° ë–¨ì–´ì ¸ ì‚´ ìˆ˜ ìˆì–´ìš”.', icon: 'ğŸ‘¤'};}
const motherCount = (godCount['ì •ì¸'] || 0) + (godCount['í¸ì¸'] || 0);if (motherCount >= 2) {result.mother = {status: 'strong', desc: 'ì–´ë¨¸ë‹ˆì™€ ì¸ì—°ì´ ê¹Šì–´ìš”. ì–´ë¨¸ë‹ˆì˜ ì‚¬ë‘ì„ ë§ì´ ë°›ì•„ìš”.', icon: 'ğŸ‘©â€ğŸ‘¦'};} else if (motherCount === 1) {result.mother = {status: 'normal', desc: 'ì–´ë¨¸ë‹ˆì™€ í‰ë²”í•œ ê´€ê³„ì˜ˆìš”.', icon: 'ğŸ‘©'};} else {result.mother = {status: 'weak', desc: 'ì–´ë¨¸ë‹ˆì™€ ì¸ì—°ì´ ì•½í•˜ê±°ë‚˜ ë…ë¦½ì´ ë¹ ë¥¼ ìˆ˜ ìˆì–´ìš”.', icon: 'ğŸ‘¤'};}
const siblingCount = (godCount['ë¹„ê²¬'] || 0) + (godCount['ê²ì¬'] || 0);if (siblingCount >= 2) {result.sibling = {status: 'strong', desc: 'í˜•ì œ ìë§¤ê°€ ë§ê±°ë‚˜ ì¸ì—°ì´ ê¹Šì–´ìš”. ê²½ìŸë„ ìˆì„ ìˆ˜ ìˆì–´ìš”.', icon: 'ğŸ‘«'};} else if (siblingCount === 1) {result.sibling = {status: 'normal', desc: 'í˜•ì œ ìë§¤ì™€ í‰ë²”í•œ ê´€ê³„ì˜ˆìš”.', icon: 'ğŸ§‘â€ğŸ¤â€ğŸ§‘'};} else {result.sibling = {status: 'weak', desc: 'í˜•ì œ ìë§¤ê°€ ì ê±°ë‚˜ ì¸ì—°ì´ ì•½í•´ìš”. ë…ë¦½ì‹¬ì´ ê°•í•´ìš”.', icon: 'ğŸ§'};}
let spouseCount, spouseGods;if (gender === 'm') {spouseCount = (godCount['ì •ì¬'] || 0) + (godCount['í¸ì¬'] || 0);spouseGods = ['ì •ì¬', 'í¸ì¬'];} else {spouseCount = (godCount['ì •ê´€'] || 0) + (godCount['í¸ê´€'] || 0);spouseGods = ['ì •ê´€', 'í¸ê´€'];}
const dayBranchIdx = BRANCH.findIndex(br => br.c === saju.day.b.c);const dayHiddenMain = HIDDEN_STEMS[dayBranchIdx];const dayMainStem = dayHiddenMain && dayHiddenMain.length > 0 ? STEM[dayHiddenMain[dayHiddenMain.length - 1].stem] : null;const spouseGod = dayMainStem ? getTenGod(dayMainStem, dm) : null;const spouseGodMatch = spouseGod && spouseGod.k && spouseGods.includes(spouseGod.k);if (spouseCount >= 2 && spouseGodMatch) {result.spouse = {status: 'excellent', desc: 'ë°°ìš°ì ë³µì´ ì•„ì£¼ ì¢‹ì•„ìš”! ì¢‹ì€ ì§ì„ ë§Œë‚˜ìš”.', icon: 'ğŸ’‘'};} else if (spouseCount >= 1 || spouseGodMatch) {result.spouse = {status: 'good', desc: 'ë°°ìš°ì ìš´ì´ ì¢‹ì€ í¸ì´ì—ìš”. ê²°í˜¼í•˜ë©´ ì•ˆì •ë¼ìš”.', icon: 'ğŸ’'};} else {result.spouse = {status: 'normal', desc: 'ë°°ìš°ì ì¸ì—°ì€ í‰ë²”í•´ìš”. ëŠ¦ê²Œ ë§Œë‚˜ë„ ê´œì°®ì•„ìš”.', icon: 'ğŸ’’'};}
let childCount;if (gender === 'm') {childCount = (godCount['ì •ê´€'] || 0) + (godCount['í¸ê´€'] || 0);} else {childCount = (godCount['ì‹ì‹ '] || 0) + (godCount['ìƒê´€'] || 0);}
const hasHour = !!saju.hour;if (childCount >= 2) {result.children = {status: 'strong', desc: 'ìë…€ ë³µì´ ì¢‹ì•„ìš”! ìë…€ê°€ ë¶€ëª¨ë¥¼ ë¹›ë‚´ì¤˜ìš”.', icon: 'ğŸ‘¶ğŸ‘¶'};} else if (childCount === 1) {result.children = {status: 'normal', desc: 'ìë…€ì™€ í‰ë²”í•œ ì¸ì—°ì´ì—ìš”. 1-2ëª… ì •ë„ê°€ ì¢‹ì•„ìš”.', icon: 'ğŸ‘¶'};} else {result.children = {status: 'weak', desc: 'ìë…€ ì¸ì—°ì´ ì•½í•˜ê±°ë‚˜ ëŠ¦ì„ ìˆ˜ ìˆì–´ìš”. ë…¸ë ¥ì´ í•„ìš”í•´ìš”.', icon: 'ğŸ¼'};}
return result;}
function analyzeHealth(saju, gods) {const result = {strong: [],
weak: [],
advice: []};const elCount = {wood:0, fire:0, earth:0, metal:0, water:0};[saju.year, saju.month, saju.day, saju.hour].forEach(p => {if (p && p.s) elCount[p.s.e]++;if (p && p.b) elCount[p.b.e]++;});const healthMap = {wood: {organ: 'ê°„ì¥(è‚), ë‹´ë‚­, ëˆˆ, ê·¼ìœ¡, ì†í†±',
excess: 'ë‘í†µ, ëˆˆ ì¶©í˜ˆ, ê·¼ìœ¡ ê²½ë ¨, í™”ë¥¼ ì˜ ëƒ„',
deficient: 'ì‹œë ¥ ì €í•˜, í”¼ë¡œ, ê·¼ë ¥ ì•½í™”, ì†í†± ê°ˆë¼ì§',
advice: 'í‘¸ë¥¸ ì±„ì†Œ ì„­ì·¨, ëˆˆ íœ´ì‹, ìŠ¤íŠ¸ë ˆì¹­'},
fire: {organ: 'ì‹¬ì¥(å¿ƒ), ì†Œì¥, í˜€, í˜ˆê´€',
excess: 'ë¶ˆë©´ì¦, ê°€ìŠ´ ë‘ê·¼ê±°ë¦¼, í˜€ ì—¼ì¦, ê³ í˜ˆì••',
deficient: 'ì €í˜ˆì••, ì†ë°œ ì°¨ê°€ì›€, ìš°ìš¸ì¦, ë¬´ê¸°ë ¥',
advice: 'ë¶‰ì€ ìŒì‹(í† ë§ˆí† , ëŒ€ì¶”), ìœ ì‚°ì†Œ ìš´ë™, ëª…ìƒ'},
earth: {organ: 'ë¹„ì¥(è„¾), ìœ„ì¥, ì…ìˆ , ì‚´',
excess: 'ì†Œí™”ë¶ˆëŸ‰, ë¹„ë§Œ, ì…ìˆ  íŠ¸ê¸°, ê±±ì • ê³¼ë‹¤',
deficient: 'ì‹ìš•ë¶€ì§„, ë§ˆë¦„, ì†Œí™”ë ¥ ì•½í•¨, ë¬´ë ¥ê°',
advice: 'ë…¸ë€ ìŒì‹(ê³ êµ¬ë§ˆ, í˜¸ë°•), ê·œì¹™ì  ì‹ì‚¬, ê³¼ì‹ ê¸ˆì§€'},
metal: {organ: 'í(è‚º), ëŒ€ì¥, ì½”, í”¼ë¶€, í„¸',
excess: 'í”¼ë¶€ íŠ¸ëŸ¬ë¸”, ë³€ë¹„, í˜¸í¡ê¸° ê³¼ë¯¼',
deficient: 'ê°ê¸° ì¦ìŒ, í”¼ë¶€ ê±´ì¡°, ëŒ€ì¥ ì•½í•¨, ìŠ¬í”” ë§ìŒ',
advice: 'í° ìŒì‹(ë¬´, ë°°, ë„ë¼ì§€), í˜¸í¡ ìš´ë™, í”¼ë¶€ ë³´ìŠµ'},
water: {organ: 'ì‹ ì¥(è…), ë°©ê´‘, ê·€, ë¼ˆ, ë¨¸ë¦¬ì¹´ë½',
excess: 'ë¶€ì¢…, ì•¼ë‡¨ì¦, ë‘ë ¤ì›€ ê³¼ë‹¤',
deficient: 'í—ˆë¦¬ ì•½í•¨, íƒˆëª¨, ì´ëª…, ì •ë ¥ ì €í•˜, ë¼ˆ ì•½í•¨',
advice: 'ê²€ì€ ìŒì‹(ê²€ì€ì½©, ë¯¸ì—­), ì¶©ë¶„í•œ ìˆ˜ë¶„, í—ˆë¦¬ ìš´ë™'}};const elNames = {wood:'ëª©(æœ¨)', fire:'í™”(ç«)', earth:'í† (åœŸ)', metal:'ê¸ˆ(é‡‘)', water:'ìˆ˜(æ°´)'};for (const el in elCount) {const count = elCount[el];const info = healthMap[el];if (count >= 3) {result.strong.push({element: elNames[el],
count: count,
organ: info.organ,
symptom: info.excess,
icon: 'âš ï¸'});} else if (count === 0) {result.weak.push({element: elNames[el],
count: count,
organ: info.organ,
symptom: info.deficient,
icon: 'â—'});}}
if (gods.yong) {const yongInfo = healthMap[gods.yong];if (yongInfo) {result.advice.push({title: `ìš©ì‹ (${elNames[gods.yong]}) ë³´ê°•`,
desc: yongInfo.advice,
icon: 'ğŸ’ª'});}}
let minEl = null, minCount = 10;for (const el in elCount) {if (elCount[el] < minCount) {minCount = elCount[el];minEl = el;}}
if (minEl && healthMap[minEl]) {result.advice.push({title: `ë¶€ì¡±í•œ ${elNames[minEl]} ë³´ê°•`,
desc: healthMap[minEl].advice,
icon: 'ğŸ©º'});}
const monthEl = saju.month.b.e;if (monthEl === 'water' || monthEl === 'metal') {result.advice.push({title: 'ì°¨ê°€ìš´ ê¸°ìš´ ì£¼ì˜',
desc: 'ê°€ì„/ê²¨ìš¸ì— íƒœì–´ë‚˜ ëª¸ì´ ì°° ìˆ˜ ìˆì–´ìš”. ë”°ëœ»í•˜ê²Œ!',
icon: 'ğŸ”¥'});} else if (monthEl === 'fire') {result.advice.push({title: 'ë”ìš´ ê¸°ìš´ ì£¼ì˜',
desc: 'ì—¬ë¦„ì— íƒœì–´ë‚˜ ì—´ì´ ë§ì„ ìˆ˜ ìˆì–´ìš”. ì‹œì›í•˜ê²Œ!',
icon: 'â„ï¸'});}
return result;}
function analyzeGungwi(saju, birthYear) {const dm = saju.day.s;const curAge = new Date().getFullYear() - birthYear;const gongmang = calcGongmang(saju);const gmBranches = gongmang.gm;const gungwi = [
{name: 'ë…„ì£¼(å¹´æŸ±)',
alias: 'ì¡°ìƒê¶Â·ì‚¬íšŒê¶',
pillar: saju.year,
ageRange: '1-15ì„¸',
represents: 'ì¡°ìƒ, ë¶€ëª¨ì˜ ë¶€ëª¨, ì‚¬íšŒì  í™˜ê²½, ì´ˆë…„ìš´',
bodyPart: 'ë¨¸ë¦¬, ì–¼êµ´',
relationM: 'ì¡°ë¶€, ì™¸ê°€',
relationF: 'ì¡°ëª¨, ì™¸ê°€'},
{name: 'ì›”ì£¼(æœˆæŸ±)',
alias: 'ë¶€ëª¨ê¶Â·ì§ì—…ê¶',
pillar: saju.month,
ageRange: '16-30ì„¸',
represents: 'ë¶€ëª¨, í˜•ì œ, ì§ì—…, ì‚¬ì—…, ì²­ë…„ìš´',
bodyPart: 'ê°€ìŠ´, ì–´ê¹¨',
relationM: 'ë¶€ì¹œ, í˜•ì œ',
relationF: 'ëª¨ì¹œ, ìë§¤'},
{name: 'ì¼ì£¼(æ—¥æŸ±)',
alias: 'ë°°ìš°ìê¶Â·ë³¸ì¸ê¶',
pillar: saju.day,
ageRange: '31-45ì„¸',
represents: 'ë³¸ì¸, ë°°ìš°ì, ê°€ì •, ì¤‘ë…„ìš´',
bodyPart: 'í—ˆë¦¬, ë³µë¶€',
relationM: 'ì²˜, ìê¸°ìì‹ ',
relationF: 'ë¶€, ìê¸°ìì‹ '},
{name: 'ì‹œì£¼(æ™‚æŸ±)',
alias: 'ìë…€ê¶Â·ë§ë…„ê¶',
pillar: saju.hour,
ageRange: '46ì„¸ ì´í›„',
represents: 'ìë…€, ì œì, í›„ë°°, ë§ë…„ìš´, ê²°ê³¼',
bodyPart: 'ë‹¤ë¦¬, ë°œ',
relationM: 'ìë…€, í›„ë°°',
relationF: 'ìë…€, í›„ë°°'}
];return gungwi.map((g, idx) => {if (!g.pillar) return {...g, analysis: 'ì‹œì£¼ ì—†ìŒ', god: null, state: null};const god = idx !== 2 ? getTenGod(g.pillar.s, dm) : null;const state = getTwelveState(dm, g.pillar.b);let analysis = '';let rating = 'neutral';const bi = BRANCH.indexOf(g.pillar.b);const isVoid = gmBranches.includes(bi);if (isVoid) {analysis = 'ê³µë§(ç©ºäº¡)ì´ë¼ ê¸°ìš´ì´ ë¹„ì–´ìˆì–´ìš”. í•´ë‹¹ ì‹œê¸°ì— ìŠ¤ìŠ¤ë¡œ ê°œì²™í•´ì•¼ í•´ìš”.';rating = 'neutral';} else if (state.l >= 9) {analysis = 'ì´ ì‹œê¸°ì— ì—ë„ˆì§€ê°€ ê°•í•´ìš”! í™œë°œí•˜ê²Œ ì›€ì§ì´ëŠ” ì‹œê¸°.';rating = 'good';} else if (state.l >= 6) {analysis = 'ì•ˆì •ì ì¸ ì—ë„ˆì§€ì˜ˆìš”. ìˆœíƒ„í•œ ì‹œê¸°.';rating = 'good';} else if (state.l >= 3) {analysis = 'ë³´í†µì˜ ì—ë„ˆì§€ì˜ˆìš”. ë…¸ë ¥ì´ í•„ìš”í•œ ì‹œê¸°.';rating = 'neutral';} else {analysis = 'ì—ë„ˆì§€ê°€ ì•½í•œ ì‹œê¸°. ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”.';rating = 'bad';}
if (god) {if (['ì •ê´€','ì •ì¬','ì •ì¸'].includes(god.k)) {analysis += ` ${god.k}ì´ ìˆì–´ì„œ ì•ˆì •ì ì´ì—ìš”.`;rating = 'good';} else if (['í¸ê´€','ê²ì¬'].includes(god.k)) {analysis += ` ${god.k}ì´ ìˆì–´ì„œ ë³€í™”ì™€ ë„ì „ì´ ìˆì–´ìš”.`;}}
let isCurrent = false;if (idx === 0 && curAge <= 15) isCurrent = true;else if (idx === 1 && curAge >= 16 && curAge <= 30) isCurrent = true;else if (idx === 2 && curAge >= 31 && curAge <= 45) isCurrent = true;else if (idx === 3 && curAge >= 46) isCurrent = true;return {...g,
god,
state,
analysis,
rating,
isCurrent};});}
function analyzeTwelveStates(saju) {const dm = saju.day.s;const result = {pillars: [],
summary: '',
dominant: null,
lifeFlow: []};const pillarNames = ['ë…„ì£¼', 'ì›”ì£¼', 'ì¼ì£¼', 'ì‹œì£¼'];const pillars = [saju.year, saju.month, saju.day, saju.hour];pillars.forEach((p, idx) => {if (!p) return;const state = getTwelveState(dm, p.b);result.pillars.push({name: pillarNames[idx],
branch: p.b,
state: state,
energy: state.l});});const lifeStages = [
{stage: 'ì¥ìƒ(é•·ç”Ÿ)', desc: 'ìƒˆë¡œìš´ ì‹œì‘, í¬ë§ê³¼ ê°€ëŠ¥ì„±', life: 'ìœ ì•„ê¸°'},
{stage: 'ëª©ìš•(æ²æµ´)', desc: 'ë³€í™”ì™€ ë¶ˆì•ˆì •, ìƒˆë¡œìš´ í™˜ê²½', life: 'ì²­ì†Œë…„ê¸°'},
{stage: 'ê´€ëŒ€(å† å¸¶)', desc: 'ì„±ì¥ê³¼ ë°œì „, ìë¦½', life: 'ì²­ë…„ê¸°'},
{stage: 'ê±´ë¡(å»ºç¥¿)', desc: 'ì•ˆì •ê³¼ ë²ˆì˜, ì „ì„±ê¸°', life: 'ì¥ë…„ê¸°'},
{stage: 'ì œì™•(å¸æ—º)', desc: 'ì •ì , ìµœê³ ì¡°, ê¶Œë ¥', life: 'ì¤‘ë…„ê¸°'},
{stage: 'ì‡ (è¡°)', desc: 'í•˜ë½ì˜ ì‹œì‘, ì •ë¦¬', life: 'ì¤‘ë…„í›„ê¸°'},
{stage: 'ë³‘(ç—…)', desc: 'ì•½í™”, ê±´ê°• ì£¼ì˜', life: 'ë…¸ë…„ì´ˆê¸°'},
{stage: 'ì‚¬(æ­»)', desc: 'ë§ˆë¬´ë¦¬, ë', life: 'ë…¸ë…„ê¸°'},
{stage: 'ë¬˜(å¢“)', desc: 'ì €ì¥, ì¶•ì , ì€í‡´', life: 'ë…¸ë…„í›„ê¸°'},
{stage: 'ì ˆ(çµ¶)', desc: 'ê³µë°±, ë‹¨ì ˆ', life: 'ë§ë…„'},
{stage: 'íƒœ(èƒ)', desc: 'ì‰íƒœ, ì¤€ë¹„', life: 'ìƒˆë¡œìš´ ì¤€ë¹„'},
{stage: 'ì–‘(é¤Š)', desc: 'ì–‘ìœ¡, ë³´í˜¸', life: 'íšŒë³µê¸°'}
];const dayState = getTwelveState(dm, saju.day.b);if (dayState.l >= 10) {result.summary = 'ê¸°ë³¸ ì—ë„ˆì§€ê°€ ë§¤ìš° ê°•í•´ìš”! í™œë ¥ì´ ë„˜ì¹˜ê³  ì¶”ì§„ë ¥ ìˆì–´ìš”.';result.dominant = 'strong';} else if (dayState.l >= 7) {result.summary = 'ê¸°ë³¸ ì—ë„ˆì§€ê°€ ì¢‹ì•„ìš”. ì•ˆì •ì ì´ê³  ê¾¸ì¤€í•´ìš”.';result.dominant = 'good';} else if (dayState.l >= 4) {result.summary = 'ê¸°ë³¸ ì—ë„ˆì§€ê°€ ë³´í†µì´ì—ìš”. ë…¸ë ¥ìœ¼ë¡œ ë³´ì™„í•˜ì„¸ìš”.';result.dominant = 'neutral';} else {result.summary = 'ê¸°ë³¸ ì—ë„ˆì§€ê°€ ì•½í•´ìš”. ì²´ë ¥ ê´€ë¦¬ê°€ ì¤‘ìš”í•´ìš”.';result.dominant = 'weak';}
result.lifeFlow = result.pillars.map((p, idx) => {const ageRange = ['ì´ˆë…„(1-15)', 'ì²­ë…„(16-30)', 'ì¤‘ë…„(31-45)', 'ë§ë…„(46+)'][idx];return {period: ageRange,
state: p.state.k,
energy: p.energy,
advice: p.energy >= 8 ? 'í™œë°œí•œ ì‹œê¸°!' : p.energy >= 5 ? 'ì•ˆì •ì ì¸ ì‹œê¸°' : p.energy >= 3 ? 'ì¸ë‚´ì˜ ì‹œê¸°' : 'íšŒë³µì˜ ì‹œê¸°'};});return result;}
function analyzeAdvancedInteractions(saju) {const result = {hapHwa: [],
chungHaeso: [],
samhapGuk: [],
warnings: []};const mbi = BRANCH.indexOf(saju.month.b);const season = SEASON[mbi];const stems = [saju.year?.s, saju.month?.s, saju.day?.s, saju.hour?.s].filter(s => s);const stemIdxs = stems.map(s => STEM.indexOf(s));const brs = [BRANCH.indexOf(saju.year.b), BRANCH.indexOf(saju.month.b), BRANCH.indexOf(saju.day.b)];if (saju.hour) brs.push(BRANCH.indexOf(saju.hour.b));const ganHap = [
{pair: [0,5], result: 'earth', name: 'ê°‘ê¸°í•©í† (ç”²å·±åˆåœŸ)', condition: 'í† ì›”(è¾°æˆŒä¸‘æœªæœˆ) ë˜ëŠ” í† ê°€ ì™•ì„±í•  ë•Œ'},
{pair: [1,6], result: 'metal', name: 'ì„ê²½í•©ê¸ˆ(ä¹™åºšåˆé‡‘)', condition: 'ê¸ˆì›”(ç”³é…‰æœˆ) ë˜ëŠ” ê¸ˆì´ ì™•ì„±í•  ë•Œ'},
{pair: [2,7], result: 'water', name: 'ë³‘ì‹ í•©ìˆ˜(ä¸™è¾›åˆæ°´)', condition: 'ìˆ˜ì›”(äº¥å­æœˆ) ë˜ëŠ” ìˆ˜ê°€ ì™•ì„±í•  ë•Œ'},
{pair: [3,8], result: 'wood', name: 'ì •ì„í•©ëª©(ä¸å£¬åˆæœ¨)', condition: 'ëª©ì›”(å¯…å¯æœˆ) ë˜ëŠ” ëª©ì´ ì™•ì„±í•  ë•Œ'},
{pair: [4,9], result: 'fire', name: 'ë¬´ê³„í•©í™”(æˆŠç™¸åˆç«)', condition: 'í™”ì›”(å·³åˆæœˆ) ë˜ëŠ” í™”ê°€ ì™•ì„±í•  ë•Œ'}
];for (let gh of ganHap) {if (stemIdxs.includes(gh.pair[0]) && stemIdxs.includes(gh.pair[1])) {const resultEl = gh.result;let isHwa = false;let reason = '';const seasonEl = {spring:'wood', summer:'fire', autumn:'metal', winter:'water'};if (seasonEl[season] === resultEl) {isHwa = true;reason = `ì›”ë ¹ì´ ${ELEMENT[resultEl].k}ì´ë¼ í•©í™” ì„±ë¦½!`;}
const resultElCount = brs.filter(b => BRANCH[b].e === resultEl).length;if (resultElCount >= 2) {isHwa = true;reason = `ì§€ì§€ì— ${ELEMENT[resultEl].k}ì´ ${resultElCount}ê°œë¼ í•©í™” ì„±ë¦½!`;}
result.hapHwa.push({name: gh.name,
stems: `${STEM[gh.pair[0]].c}+${STEM[gh.pair[1]].c}`,
result: isHwa ? ELEMENT[resultEl].k : null,
isHwa,
reason: isHwa ? reason : 'í•©ì€ ìˆìœ¼ë‚˜ í™”(åŒ–)ë˜ì§€ ì•ŠìŒ - í•©ê±°(åˆå») ìƒíƒœ'});}}
const samhap = [
{branches: [2,6,10], result: 'fire', name: 'ì¸ì˜¤ìˆ  í™”êµ­(å¯…åˆæˆŒ ç«å±€)'},
{branches: [5,9,1], result: 'metal', name: 'ì‚¬ìœ ì¶• ê¸ˆêµ­(å·³é…‰ä¸‘ é‡‘å±€)'},
{branches: [8,0,4], result: 'water', name: 'ì‹ ìì§„ ìˆ˜êµ­(ç”³å­è¾° æ°´å±€)'},
{branches: [11,3,7], result: 'wood', name: 'í•´ë¬˜ë¯¸ ëª©êµ­(äº¥å¯æœª æœ¨å±€)'}
];for (let sh of samhap) {const presentBranches = sh.branches.filter(b => brs.includes(b));const hasCount = presentBranches.length;if (hasCount >= 2) {const hasCenter = brs.includes(sh.branches[1]);const branchChars = presentBranches.map(b => BRANCH[b].c).join('');const displayName = hasCount === 3 ? sh.name : branchChars + ' ë°˜í•©(' + sh.name.split('(')[0] + ')';result.samhapGuk.push({name: displayName,
complete: hasCount === 3,
hasCenter,
result: ELEMENT[sh.result].k,
desc: hasCount === 3 ?
`ì™„ì „í•œ ${sh.name} ì„±ë¦½! ${ELEMENT[sh.result].k} ê¸°ìš´ì´ ê°•í•´ìš”.` :
hasCenter ?
`${branchChars} ë°˜í•©. ì™•ì§€(${BRANCH[sh.branches[1]].c})ê°€ ìˆì–´ì„œ í˜ì´ ìˆì–´ìš”.` :
`${branchChars} ë°˜í•©ì´ì§€ë§Œ ì™•ì§€ê°€ ì—†ì–´ì„œ í˜ì´ ì•½í•´ìš”.`});}}
const clashPairs = [[0,6],[1,7],[2,8],[3,9],[4,10],[5,11]];for (let [a,b] of clashPairs) {if (brs.includes(a) && brs.includes(b)) {let isResolved = false;let resolveReason = '';const hapPairs = [[0,1],[2,11],[3,10],[4,9],[5,8],[6,7]];for (let [ha, hb] of hapPairs) {if ((brs.includes(a) && (brs.includes(ha) && a === hb) || (brs.includes(hb) && a === ha)) ||
(brs.includes(b) && (brs.includes(ha) && b === hb) || (brs.includes(hb) && b === ha))) {isResolved = true;resolveReason = 'í•©(åˆ)ì´ ìˆì–´ì„œ ì¶©ì´ ì™„í™”ë¨';}}
result.chungHaeso.push({clash: `${BRANCH[a].c}${BRANCH[b].c} ì¶©`,
isResolved,
reason: isResolved ? resolveReason : 'ì¶©ì´ í•´ì†Œë˜ì§€ ì•ŠìŒ - ì£¼ì˜ í•„ìš”'});}}
const dm = saju.day.s;const godCounts = {};stems.forEach((s, idx) => {if (idx === 2) return;const god = getTenGod(s, dm);godCounts[god.k] = (godCounts[god.k] || 0) + 1;});if (godCounts['ìƒê´€'] && godCounts['ì •ê´€']) {result.warnings.push({type: 'ìƒê´€ê²¬ê´€(å‚·å®˜è¦‹å®˜)',
desc: 'ìƒê´€ì´ ì •ê´€ì„ ê·¹í•©ë‹ˆë‹¤. ì§ì¥, ëª…ì˜ˆì— ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”. ê´€ì§ë³´ë‹¤ ì‚¬ì—…ì´ ì¢‹ì•„ìš”.'});}
if (godCounts['í¸ì¸'] && godCounts['ì‹ì‹ ']) {result.warnings.push({type: 'íš¨ì‹ íƒˆì‹(æ¢Ÿç¥å¥ªé£Ÿ)',
desc: 'í¸ì¸ì´ ì‹ì‹ ì„ ê·¹í•©ë‹ˆë‹¤. ì¬ëŠ¥ ë°œíœ˜ê°€ ë§‰í ìˆ˜ ìˆì–´ìš”. ìš°ìš¸ì¦ ì£¼ì˜!'});}
return result;}
function getJijanggan(branch) {const bi = BRANCH.indexOf(branch);return JIJANGGAN[bi] || [];}
function hasHiddenStem(branch, stemIdx) {const jj = getJijanggan(branch);return jj.some(j => j.stem === stemIdx);}
function analyzeRoot(dayStem, branch) {const jj = getJijanggan(branch);const dsEl = dayStem.e;const roots = [];jj.forEach(j => {const hiddenStem = STEM[j.stem];if (hiddenStem.e === dsEl) {const strength = j.days >= 16 ? 'strong' : j.days >= 7 ? 'medium' : 'weak';roots.push({stem: hiddenStem,
days: j.days,
type: j.type,
strength,
name: j.name});}});return roots;}
function analyzeTougan(saju) {const result = [];const allStems = [
{pillar: 'ë…„ê°„', stem: saju.year.s},
{pillar: 'ì›”ê°„', stem: saju.month.s},
{pillar: 'ì¼ê°„', stem: saju.day.s},
];if (saju.hour) allStems.push({pillar: 'ì‹œê°„', stem: saju.hour.s});const allBranches = [
{pillar: 'ë…„ì§€', branch: saju.year.b},
{pillar: 'ì›”ì§€', branch: saju.month.b},
{pillar: 'ì¼ì§€', branch: saju.day.b},
];if (saju.hour) allBranches.push({pillar: 'ì‹œì§€', branch: saju.hour.b});allStems.forEach(st => {const si = STEM.indexOf(st.stem);allBranches.forEach(br => {const jj = getJijanggan(br.branch);jj.forEach(j => {if (j.stem === si) {result.push({stem: st.stem,
stemPillar: st.pillar,
branch: br.branch,
branchPillar: br.pillar,
days: j.days,
type: j.type,
desc: `${st.stem.c}(${st.pillar})ì´ ${br.branch.c}(${br.pillar})ì— ë¿Œë¦¬ë‚´ë¦¼`});}});});});return result;}
function analyzeAllRoots(saju) {const dm = saju.day.s;const branches = [
{name: 'ë…„ì§€', branch: saju.year.b},
{name: 'ì›”ì§€', branch: saju.month.b},
{name: 'ì¼ì§€', branch: saju.day.b}
];if (saju.hour) branches.push({name: 'ì‹œì§€', branch: saju.hour.b});const allRoots = [];let totalScore = 0;branches.forEach(b => {const roots = analyzeRoot(dm, b.branch);roots.forEach(r => {let score = 0;if (r.strength === 'strong') score = 3;else if (r.strength === 'medium') score = 2;else score = 1;if (b.name === 'ì›”ì§€') score *= 2;if (b.name === 'ì¼ì§€') score *= 1.5;totalScore += score;allRoots.push({...r,
position: b.name,
branch: b.branch,
score});});});return { roots: allRoots, totalScore };}
function countElementsAdvanced(saju) {const ec = {wood:0, fire:0, earth:0, metal:0, water:0};const details = {wood:[], fire:[], earth:[], metal:[], water:[]};const stems = [
{pos:'ë…„ê°„', s:saju.year.s},
{pos:'ì›”ê°„', s:saju.month.s},
{pos:'ì¼ê°„', s:saju.day.s}
];if (saju.hour) stems.push({pos:'ì‹œê°„', s:saju.hour.s});stems.forEach(st => {ec[st.s.e] += 1;details[st.s.e].push(`${st.s.c}(${st.pos}) 1.0`);});const branches = [
{pos:'ë…„ì§€', b:saju.year.b},
{pos:'ì›”ì§€', b:saju.month.b},
{pos:'ì¼ì§€', b:saju.day.b}
];if (saju.hour) branches.push({pos:'ì‹œì§€', b:saju.hour.b});branches.forEach(br => {ec[br.b.e] += 1;details[br.b.e].push(`${br.b.c}(${br.pos}) 1.0`);});branches.forEach(br => {const bi = BRANCH.indexOf(br.b);const jj = JIJANGGAN[bi] || [];jj.forEach(j => {const hiddenStem = STEM[j.stem];const ratio = j.days / 30;ec[hiddenStem.e] += ratio * 0.5;details[hiddenStem.e].push(`${hiddenStem.c}(${br.pos}è—) ${(ratio*0.5).toFixed(2)}`);});});return { counts: ec, details };}
function countElements(saju) {const ec = {wood:0, fire:0, earth:0, metal:0, water:0};[saju.year, saju.month, saju.day, saju.hour].forEach(p => {if (!p) return;ec[p.s.e]++;ec[p.b.e]++;});return ec;}
function genTodayFortune(saju, gods) {const now = new Date();const ty = now.getFullYear(), tm = now.getMonth() + 1, td = now.getDate();const dp = calcDayPillar(ty, tm, td);const dm = saju.day.s;const god = getTenGod(dp.s, dm);const state = getTwelveState(dm, dp.b);const godMeaning = {'ë¹„ê²¬': {r:3, l:'ğŸ¥Š ê²½ìŸì˜ ë‚ ', d:'ì˜¤ëŠ˜ì€ ë‚˜ì™€ ë¹„ìŠ·í•œ ì‚¬ëŒë“¤ì´ ë§ì´ ë³´ì´ëŠ” ë‚ . ê²½ìŸìê°€ ë‚˜íƒ€ë‚˜ê±°ë‚˜ ë‚´ ì˜ê²¬ì„ ê°•í•˜ê²Œ ì£¼ì¥í•˜ê²Œ ë  ìˆ˜ ìˆì–´ìš”.<br><br><strong>ğŸ’¡ íŒ:</strong> í˜¼ì í•  ìˆ˜ ìˆëŠ” ì¼ì— ì§‘ì¤‘í•˜ì„¸ìš”.'},
'ê²ì¬': {r:2, l:'ğŸ’¸ ì§€ì¶œ ì£¼ì˜ë³´', d:'ì˜¤ëŠ˜ì€ ëˆì´ ë¹ ì ¸ë‚˜ê°€ê¸° ì‰¬ìš´ ë‚ ! ì¶©ë™êµ¬ë§¤, ì¹œêµ¬í•œí…Œ ëˆ ë¹Œë ¤ì£¼ê¸° í”¼í•˜ì„¸ìš”.<br><br><strong>ğŸ’¡ íŒ:</strong> "ë‚´ì¼ ë‹¤ì‹œ ìƒê°í•´ë³¼ê²Œ"ê°€ ì˜¤ëŠ˜ì˜ ë§ˆë²• ì£¼ë¬¸!'},
'ì‹ì‹ ': {r:4, l:'ğŸ½ï¸ ë§›ìˆëŠ” í•˜ë£¨', d:'ë­˜ í•´ë„ ì—¬ìœ ë¡­ê³  ê¸°ë¶„ ì¢‹ì€ ë‚ ! ë§›ìˆëŠ” ê±° ë¨¹ê³  ì·¨ë¯¸ í™œë™ë„ ì¢‹ì•„ìš”.<br><br><strong>ğŸ’¡ íŒ:</strong> ì¢‹ì•„í•˜ëŠ” ìŒì‹ ë¨¹ìœ¼ë©´ì„œ ì˜ê°ì„ ì–»ì–´ë³´ì„¸ìš”.'},
'ìƒê´€': {r:3, l:'ğŸ¤ í‘œí˜„ë ¥ UP', d:'ë§ì´ ìˆ ìˆ  ë‚˜ì˜¤ëŠ” ë‚ ! í”„ë ˆì  í…Œì´ì…˜ì´ë‚˜ ë°œí‘œê°€ ìˆë‹¤ë©´ ì˜ ë  ê±°ì˜ˆìš”. ë‹¤ë§Œ ìœ—ì‚¬ëŒí•œí…Œ ëŒ€ë“¤ê³  ì‹¶ì–´ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜!<br><br><strong>ğŸ’¡ íŒ:</strong> ë§í•˜ê¸° ì „ì— 3ì´ˆë§Œ ìƒê°í•˜ì„¸ìš”.'},
'í¸ì¬': {r:4, l:'ğŸ’° ëœ»ë°–ì˜ í–‰ìš´', d:'ì˜ˆìƒ ëª» í•œ ëˆì´ ë“¤ì–´ì˜¤ê±°ë‚˜ ì¢‹ì€ ê¸°íšŒê°€ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”!<br><br><strong>ğŸ’¡ íŒ:</strong> ì ê·¹ì ìœ¼ë¡œ ì›€ì§ì´ì„¸ìš”. ì§‘ì— ìˆìœ¼ë©´ ê¸°íšŒê°€ ì•ˆ ì™€ìš”!'},
'ì •ì¬': {r:4, l:'ğŸ’µ ì•ˆì •ì ì¸ ë‚ ', d:'ëˆ ê´€ë ¨ ì¼ì´ ìˆœì¡°ë¡œì›Œìš”. ê³„ì•½ì´ë‚˜ ê±°ë˜ë„ ì¢‹ì•„ìš”.<br><br><strong>ğŸ’¡ íŒ:</strong> ì €ì¶• ì‹œì‘í•˜ê¸° ì¢‹ì€ ë‚ ì´ì—ìš”.'},
'í¸ê´€': {r:2, l:'ğŸ˜° ê¸´ì¥ë˜ëŠ” ë‚ ', d:'ê°‘ìê¸° ì¼ì´ ìƒê¸°ê±°ë‚˜ ì••ë°•ì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”. ì˜ˆìƒ ëª» í•œ ì—…ë¬´ê°€ ë–¨ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.<br><br><strong>ğŸ’¡ íŒ:</strong> ì»¨ë””ì…˜ ê´€ë¦¬ê°€ ì¤‘ìš”í•´ìš”. ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”.'},
'ì •ê´€': {r:5, l:'ğŸ† ì¸ì •ë°›ëŠ” ë‚ ', d:'ìµœê³ ì˜ ë‚ ! ë…¸ë ¥í•œ ê²Œ ì¸ì •ë°›ê±°ë‚˜ ì¹­ì°¬ì„ ë“¤ì„ ìˆ˜ ìˆì–´ìš”.<br><br><strong>ğŸ’¡ íŒ:</strong> ì¤‘ìš”í•œ ë¯¸íŒ…ì´ë‚˜ ì•½ì†ì€ ì˜¤ëŠ˜ ì¡ìœ¼ì„¸ìš”.'},
'í¸ì¸': {r:3, l:'ğŸ“š í˜¼ìë§Œì˜ ì‹œê°„', d:'ì‚¬ëŒ ë§ì€ ê³³ë³´ë‹¤ í˜¼ì ìˆê³  ì‹¶ì€ ë‚ . ê³µë¶€ë‚˜ ë…ì„œì— ë”±!<br><br><strong>ğŸ’¡ íŒ:</strong> ì¹´í˜ì—ì„œ í˜¼ì ì±… ì½ê¸° ì–´ë•Œìš”?'},
'ì •ì¸': {r:4, l:'ğŸ¤ ë„ì›€ë°›ëŠ” ë‚ ', d:'ëˆ„êµ°ê°€ì˜ ë„ì›€ì„ ë°›ê¸° ì¢‹ì€ ë‚ ! ëª¨ë¥´ëŠ” ê±° ìˆìœ¼ë©´ ë¬¼ì–´ë³´ì„¸ìš”.<br><br><strong>ğŸ’¡ íŒ:</strong> ê³„ì•½ì„œ, ì„œë¥˜ ì‘ì—…í•˜ê¸° ì¢‹ì•„ìš”.'}};const info = godMeaning[god.k] || {r:3, l:'â˜€ï¸ í‰ì˜¨í•œ ë‚ ', d:'íŠ¹ë³„í•œ ì¼ ì—†ì´ ë¬´ë‚œí•œ í•˜ë£¨ì˜ˆìš”.'};let bonus = '';if ([dp.s.e, dp.b.e].includes(gods.yong)) {info.r = Math.min(5, info.r + 1);bonus = '<div class="info-box good" style="margin-top:12px;"><p>âœ¨ <strong>ì˜¤ëŠ˜ í–‰ìš´ì˜ ê¸°ìš´ì´ ë“¤ì–´ì™€ìš”!</strong> í‰ì†Œë³´ë‹¤ ì¼ì´ ì˜ í’€ë¦´ ê±°ì˜ˆìš”!</p></div>';} else if ([dp.s.e, dp.b.e].includes(gods.gi)) {info.r = Math.max(1, info.r - 1);bonus = '<div class="info-box warn" style="margin-top:12px;"><p>âš ï¸ <strong>ì˜¤ëŠ˜ì€ ì¡°ì‹¬í•˜ëŠ” ê²Œ ì¢‹ì•„ìš”!</strong> í° ê²°ì •ì€ ë‚´ì¼ë¡œ ë¯¸ë£¨ì„¸ìš”.</p></div>';}
const goodH = [], badH = [];const hourNames = ['ë°¤ 11ì‹œ~ìƒˆë²½ 1ì‹œ','ìƒˆë²½ 1~3ì‹œ','ìƒˆë²½ 3~5ì‹œ','ì•„ì¹¨ 5~7ì‹œ','ì•„ì¹¨ 7~9ì‹œ','ì˜¤ì „ 9~11ì‹œ','ë‚® 11ì‹œ~ì˜¤í›„ 1ì‹œ','ì˜¤í›„ 1~3ì‹œ','ì˜¤í›„ 3~5ì‹œ','ì €ë… 5~7ì‹œ','ì €ë… 7~9ì‹œ','ë°¤ 9~11ì‹œ'];for (let i = 0; i < 12; i++) {const hEl = BRANCH[i].e;if (hEl === gods.yong) goodH.push(hourNames[i]);else if (hEl === gods.gi) badH.push(hourNames[i]);}
return `
<div class="info-box gold"><p><strong>ğŸ“… ${tm}ì›” ${td}ì¼ ì˜¤ëŠ˜ì˜ ìš´ì„¸</strong></p><p style="font-size:0.85rem;color:var(--gray);margin-top:5px;">ì˜¤ëŠ˜ì˜ ê¸°ìš´: ${dp.s.c}${dp.b.c} (${dp.b.m} ${dp.b.a}ì¼)</p></div><div style="text-align:center;margin:15px 0;"><span style="font-size:2rem;">${'â­'.repeat(info.r)}${'â˜†'.repeat(5-info.r)}</span></div><div class="info-box"><p><strong>${info.l}</strong></p><p style="margin-top:10px;line-height:1.8;">${info.d}</p></div>
${bonus}
<div class="info-box good" style="margin-top:12px;"><p><strong>â° í–‰ìš´ì˜ ì‹œê°„</strong><br>${goodH.length ? goodH.join(', ') : 'íŠ¹ë³„íˆ ì—†ì–´ìš”'}</p></div><div class="info-box warn" style="margin-top:12px;"><p><strong>â° ì¡°ì‹¬í•  ì‹œê°„</strong><br>${badH.length ? badH.join(', ') : 'íŠ¹ë³„íˆ ì—†ì–´ìš”'}</p></div><div class="info-box" style="margin-top:12px;"><p><strong>ğŸ“Œ ì˜¤ëŠ˜ì˜ ì—ë„ˆì§€: ${state.k}</strong><br>${state.d}</p></div>`;}
function genYearFortune(saju, gods, year) {const yp = calcYearPillar(year, 2, 5);const dm = saju.day.s;const god = getTenGod(yp.s, dm);const state = getTwelveState(dm, yp.b);let rating = 3, desc = '';if ([yp.s.e, yp.b.e].includes(gods.yong)) { rating = 5; desc = 'ìš©ì‹ ì´ ë“¤ì–´ì˜¤ëŠ” ëŒ€ê¸¸í•œ í•´! ì ê·¹ì ìœ¼ë¡œ ì›€ì§ì´ì„¸ìš”!'; }
else if ([yp.s.e, yp.b.e].includes(gods.hee)) { rating = 4; desc = 'í¬ì‹ ì´ ë„ì™€ì£¼ëŠ” ì¢‹ì€ í•´! ìˆœíƒ„í•˜ê²Œ í’€ë ¤ìš”.'; }
else if ([yp.s.e, yp.b.e].includes(gods.gi)) { rating = 2; desc = 'ê¸°ì‹ ì´ ë“¤ì–´ì˜¤ëŠ” ì¡°ì‹¬í•´ì•¼ í•  í•´. ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”.'; }
else { desc = 'í‰íƒ„í•œ í•´ì˜ˆìš”. ê¾¸ì¤€íˆ ë…¸ë ¥í•˜ì„¸ìš”.'; }
if (state.l >= 9) { rating = Math.min(5, rating + 1); desc += ' 12ìš´ì„±ì´ ê°•í•´ì„œ ì—ë„ˆì§€ê°€ ë„˜ì³ìš”!'; }
else if (state.l <= 3) { rating = Math.max(1, rating - 1); desc += ' 12ìš´ì„±ì´ ì•½í•´ì„œ ì²´ë ¥ ê´€ë¦¬ê°€ í•„ìš”í•´ìš”.'; }
const months = [];for (let m = 1; m <= 12; m++) {const mp = calcMonthPillar(year, m, 15);const mGod = getTenGod(mp.s, dm);let tip = '';if (['ì •ê´€','ì •ì¬'].includes(mGod.k)) tip = 'ğŸŸ¢ ì¢‹ìŒ';else if (['í¸ê´€','ê²ì¬'].includes(mGod.k)) tip = 'ğŸ”´ ì£¼ì˜';else tip = 'ğŸŸ¡ ë³´í†µ';months.push(`<span style="display:inline-block;margin:3px;padding:5px 8px;background:rgba(255,255,255,0.05);border-radius:5px;font-size:0.75rem;">${m}ì›” ${tip}</span>`);}
return `
<div class="info-box gold"><p><strong>ğŸ“† ${year}ë…„ ìš´ì„¸</strong></p><p style="font-size:0.85rem;color:var(--gray);margin-top:5px;">${yp.s.c}${yp.b.c}ë…„ (${yp.b.m} ${yp.b.a}ì˜ í•´)</p></div><div style="text-align:center;margin:15px 0;"><span style="font-size:2rem;">${'â­'.repeat(rating)}${'â˜†'.repeat(5-rating)}</span></div><div class="info-box"><p><strong>ì˜¬í•´ì˜ ì‹­ì‹ : ${god.k}</strong></p><p style="margin-top:10px;line-height:1.8;">${desc}</p></div><div class="info-box" style="margin-top:12px;"><p><strong>ğŸ“Œ ì˜¬í•´ì˜ ì—ë„ˆì§€: ${state.k}</strong><br>${state.d}</p></div><div class="info-box" style="margin-top:12px;"><p><strong>ğŸ—“ï¸ ì›”ë³„ í¬ì¸íŠ¸</strong></p><div style="margin-top:10px;">${months.join('')}</div></div>`;}
function genCareerFortune(saju, str, gods) {const dm = saju.day.s;const ec = countElements(saju);const jaeEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 2) % 5];const gwanEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 3) % 5];const sikEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 1) % 5];let rating = 3, style = '', advice = '';if (str.type === 'strong' && ec[jaeEl] >= 2) {rating = 5; style = 'ì‚¬ì¥ë‹˜ ìŠ¤íƒ€ì¼';advice = 'ì‹ ê°•í•˜ê³  ì¬ì„±ì´ ë§ì•„ì„œ ì‚¬ì—…ê°€ ìì§ˆì´ ìˆì–´ìš”! ëˆì„ ë‹¤ë£¨ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ê³  ì§ì ‘ ì‚¬ì—…ì„ í•˜ë©´ í¬ê²Œ ì„±ê³µí•  ìˆ˜ ìˆì–´ìš”.';} else if (str.type === 'strong' && ec[gwanEl] >= 2) {rating = 4; style = 'ë†’ì€ ìë¦¬ ê°ˆ ìƒ';advice = 'ì‹ ê°•í•˜ê³  ê´€ì„±ì´ ë§ì•„ì„œ ì¡°ì§ì—ì„œ ì¶œì„¸í•´ìš”! ê³µë¬´ì›, ëŒ€ê¸°ì—…, ì •ì¹˜ ìª½ì—ì„œ ë†’ì€ ìë¦¬ê¹Œì§€ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆì–´ìš”.';} else if (str.type === 'weak') {rating = 3; style = 'ì „ë¬¸ê°€ ìŠ¤íƒ€ì¼';advice = 'ì‹ ì•½í•´ì„œ í˜¼ìë³´ë‹¤ëŠ” íŒ€ì—ì„œ ì¼í•˜ëŠ” ê²Œ ì¢‹ì•„ìš”. ì „ë¬¸ ë¶„ì•¼ë¥¼ ê¹Šì´ íŒŒë©´ ì¸ì •ë°›ëŠ” ì „ë¬¸ê°€ê°€ ë  ìˆ˜ ìˆì–´ìš”.';} else {rating = 4; style = 'ë­ë“  ì˜í•˜ëŠ” ìŠ¤íƒ€ì¼';advice = 'ì¤‘í™”ë˜ì–´ ê· í˜• ì¡í˜”ì–´ìš”! ì–´ë–¤ ë¶„ì•¼ì—ì„œë“  ì˜ ì ì‘í•˜ê³  ì„±ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆì–´ìš”.';}
if (ec[sikEl] >= 2) {advice += '<br><br>âœ¨ <strong>ì‹ì‹ ì´ ë§ì•„ì„œ ì¬ëŠ¥ìœ¼ë¡œ ëˆ ë²„ëŠ” êµ¬ì¡°ì˜ˆìš”!</strong> ì˜ˆìˆ , ê¸°ìˆ , ì°½ì‘ ë¶„ì•¼ì—ì„œ ë¹›ì„ ë°œí•´ìš”.';}
const careerByElement = {wood: 'êµìœ¡, ì¶œíŒ, ì˜ë¥˜, ê°€êµ¬, ì¡°ê²½, ë†ì—…, í•œì˜í•™',
fire: 'ì—°ì˜ˆ, ë°©ì†¡, ì˜ˆìˆ , IT, ì „ê¸°, ì¡°ëª…, ìŒì‹',
earth: 'ë¶€ë™ì‚°, ê±´ì¶•, ë†ì—…, ì¤‘ê°œ, ìœ í†µ, ì°½ê³ ì—…',
metal: 'ê¸ˆìœµ, ì œì¡°, ìë™ì°¨, ê¸°ê³„, ì˜ë£Œê¸°ê¸°, ë²•ì¡°',
water: 'ë¬´ì—­, ìœ í†µ, ê´€ê´‘, ì–´ì—…, ìŒë£Œ, ë¬¼ë¥˜, ì²­ì†Œ'};return `
<div class="info-box gold"><p><strong>ğŸ’¼ ì§ì—…ìš´ ë¶„ì„</strong></p></div><div style="text-align:center;margin:15px 0;"><span style="font-size:2rem;">${'â­'.repeat(rating)}${'â˜†'.repeat(5-rating)}</span><p style="margin-top:10px;font-size:1.1rem;color:var(--gold);">${style}</p></div><div class="info-box"><p style="line-height:1.8;">${advice}</p></div><div class="info-box good" style="margin-top:12px;"><p><strong>ğŸ¯ ìš©ì‹ (${ELEMENT[gods.yong].k}) ê´€ë ¨ ì§ì—…</strong></p><p style="margin-top:8px;">${careerByElement[gods.yong]}</p></div>`;}
function genLoveFortune(saju, str, gods) {const dm = saju.day.s;const dbi = BRANCH.indexOf(saju.day.b);const ec = countElements(saju);const spouseEl = GENDER === 'm' ?
EL_ORDER[(EL_ORDER.indexOf(dm.e) + 2) % 5] :
EL_ORDER[(EL_ORDER.indexOf(dm.e) + 3) % 5];const spouseCount = ec[spouseEl];let rating = 3, desc = '';if (spouseCount === 0) {rating = 2;desc = 'ë°°ìš°ì ìë¦¬ì— ê¸°ìš´ì´ ì•½í•´ìš”. ì¸ì—°ì´ ëŠ¦ê±°ë‚˜, ë§Œë‚˜ë„ ì˜¤ë˜ ëª» ê°€ëŠ” ê²½ìš°ê°€ ìˆì„ ìˆ˜ ìˆì–´ìš”. ë„ˆë¬´ ì¡°ê¸‰í•´í•˜ì§€ ë§ˆì„¸ìš”!';} else if (spouseCount === 1) {rating = 4;desc = 'ë°°ìš°ì ì¸ì—°ì´ ë”± í•˜ë‚˜! ê·¸ ì‚¬ëŒì´ ì§„ì§œ ì¸ì—°ì´ì—ìš”. ì†Œì¤‘íˆ ëŒ€í•˜ì„¸ìš”.';} else if (spouseCount === 2) {rating = 3;desc = 'ë°°ìš°ì ì¸ì—°ì´ ë‘ ê°œ... ì¬í˜¼ìˆ˜ê°€ ìˆê±°ë‚˜, ë‘ ì‚¬ëŒ ì‚¬ì´ì—ì„œ ê³ ë¯¼í•  ìˆ˜ ìˆì–´ìš”.';} else {rating = 2;desc = 'ë°°ìš°ì ì¸ì—°ì´ ë§ì•„ìš”. ë°”ëŒê¸° ì¡°ì‹¬! í•œ ì‚¬ëŒì—ê²Œ ì§‘ì¤‘í•˜ì„¸ìš”.';}
const spouseByBranch = {0: 'ë°°ìš°ìê°€ ë˜‘ë˜‘í•˜ê³  ëˆˆì¹˜ê°€ ë¹¨ë¼ìš”. ê³µë¶€ë„ ì˜í•˜ê³  ìƒê°ì´ ê¹Šì–´ìš”. ë‹¤ë§Œ ê±±ì •ì´ ë§ì„ ìˆ˜ ìˆì–´ìš”.',
1: 'ë°°ìš°ìê°€ ì°©ì‹¤í•˜ê³  ì„±ì‹¤í•´ìš”. ì²œì²œíˆ ê¾¸ì¤€íˆ í•˜ëŠ” íƒ€ì…ì´ì—ìš”. ë¯¿ìŒì§í•´ìš”.',
2: 'ë°°ìš°ìê°€ í™œë°œí•˜ê³  ë„ì „ì ì´ì—ìš”. í˜¸ê¸°ì‹¬ì´ ë§ê³  ì—ë„ˆì§€ê°€ ë„˜ì³ìš”!',
3: 'ë°°ìš°ìê°€ ì˜ˆë¯¼í•˜ê³  ì„¬ì„¸í•´ìš”. ì˜ˆìˆ ì  ê°ê°ì´ ìˆê³  ì†ì¬ì£¼ë„ ì¢‹ì•„ìš”.',
4: 'ë°°ìš°ìê°€ í¬ìš©ë ¥ ìˆê³  ì‚¬êµì ì´ì—ìš”. ì¹œêµ¬ê°€ ë§ê³  ë¦¬ë”ì‹­ë„ ìˆì–´ìš”.',
5: 'ë°°ìš°ìê°€ ì˜ë¦¬í•˜ê³  ë§ì„ ì˜í•´ìš”. ëˆˆì¹˜ê°€ ë¹ ë¥´ê³  ì‚¬ëŒ ë‹¤ë£¨ëŠ” ì¬ì£¼ê°€ ìˆì–´ìš”.',
6: 'ë°°ìš°ìê°€ ë°ê³  ì—´ì •ì ì´ì—ìš”. ì„±ê²©ì´ ê¸‰í•  ìˆ˜ ìˆì§€ë§Œ ì—ë„ˆì§€ ë„˜ì³ìš”!',
7: 'ë°°ìš°ìê°€ ìˆœí•˜ê³  ì •ì´ ë§ì•„ìš”. ë°°ë ¤ì‹¬ ê¹Šê³  ì°©í•´ìš”.',
8: 'ë°°ìš°ìê°€ ë˜‘ë¶€ëŸ¬ì§€ê³  ë‹¹ë‹¹í•´ìš”. ê²°ë‹¨ë ¥ ìˆê³  ë…ë¦½ì‹¬ì´ ê°•í•´ìš”.',
9: 'ë°°ìš°ìê°€ ê¹”ë”í•˜ê³  ê°ê°ì ì´ì—ìš”. ì˜ˆìˆ ì´ë‚˜ ë¯¸ìš© ìª½ì— ì¬ëŠ¥ì´ ìˆì„ ìˆ˜ ìˆì–´ìš”.',
10: 'ë°°ìš°ìê°€ ê³ ì§‘ ì„¸ì§€ë§Œ ì˜ë¦¬ ìˆì–´ìš”. í•œë²ˆ ì •í•˜ë©´ ëê¹Œì§€ í•´ìš”.',
11: 'ë°°ìš°ìê°€ í˜„ëª…í•˜ê³  ì ì‘ë ¥ ì¢‹ì•„ìš”. ì–´ë””ì„œë“  ì˜ ì§€ë‚´ê³  ìœµí†µì„±ì´ ìˆì–´ìš”.'};return `
<div class="info-box gold"><p><strong>ğŸ’• ì—°ì• ìš´/ê²°í˜¼ìš´ ë¶„ì„</strong></p></div><div style="text-align:center;margin:15px 0;"><span style="font-size:2rem;">${'â­'.repeat(rating)}${'â˜†'.repeat(5-rating)}</span></div><div class="info-box"><p style="line-height:1.8;">${desc}</p></div><div class="info-box" style="margin-top:12px;background:rgba(255,182,193,0.15);"><p><strong>ğŸ’‘ ì¼ì§€ë¡œ ë³´ëŠ” ë°°ìš°ììƒ</strong></p><p style="margin-top:10px;line-height:1.8;">${spouseByBranch[dbi]}</p></div>`;}
function genWealthFortune(saju, str, gods) {const dm = saju.day.s;const ec = countElements(saju);const jaeEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 2) % 5];const sikEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 1) % 5];const jaeCount = ec[jaeEl];const sikCount = ec[sikEl];let rating = 3, desc = '';if (str.type === 'strong' && jaeCount >= 2) {rating = 5;desc = 'ëˆ ë³µì´ ë§ì•„ìš”! ì‹ ê°•í•˜ë©´ì„œ ì¬ì„±ì´ ë§ìœ¼ë‹ˆ ëˆì„ ë²Œ ëŠ¥ë ¥ê³¼ ë³µì´ ëª¨ë‘ ìˆì–´ìš”. ì‚¬ì—…ì´ë‚˜ íˆ¬ìì—ì„œ í¬ê²Œ ì„±ê³µí•  ìˆ˜ ìˆì–´ìš”!';} else if (str.type === 'strong' && jaeCount === 1) {rating = 4;desc = 'ê¾¸ì¤€íˆ ë²„ëŠ” íƒ€ì…ì´ì—ìš”. í•œ ë²ˆì— í° ëˆë³´ë‹¤ ì›”ê¸‰ì²˜ëŸ¼ ì•ˆì •ì ì¸ ìˆ˜ì…ì´ ì¢‹ì•„ìš”.';} else if (str.type === 'weak' && jaeCount >= 2) {rating = 2;desc = 'ëˆì´ ë“¤ì–´ì™€ë„ ë‚˜ê°€ê¸° ì‰¬ì›Œìš”. ì‹ ì•½í•œë° ì¬ì„±ì´ ë§ìœ¼ë©´ ê°ë‹¹ì´ ì•ˆ ë¼ìš”. ì €ì¶• ìŠµê´€ì„ ë“¤ì´ì„¸ìš”!';} else if (jaeCount === 0) {rating = 2;desc = 'ì¬ì„±ì´ ì—†ì–´ì„œ ëˆì— ê´€ì‹¬ì´ ì ê±°ë‚˜, ëˆ ë²„ëŠ” ê²Œ í˜ë“¤ ìˆ˜ ìˆì–´ìš”. ì „ë¬¸ ê¸°ìˆ ì„ ìµíˆì„¸ìš”.';} else {rating = 3;desc = 'í‰ë²”í•œ ì¬ë¬¼ìš´ì´ì—ìš”. ê¾¸ì¤€íˆ ë…¸ë ¥í•˜ë©´ ì¤‘ì‚°ì¸µ ì´ìƒì˜ ì‚¶ì„ ì‚´ ìˆ˜ ìˆì–´ìš”.';}
if (sikCount >= 2) {rating = Math.min(5, rating + 1);desc += '<br><br>âœ¨ <strong>ì‹ì‹ ì´ ë§ì•„ì„œ ì¬ëŠ¥ìœ¼ë¡œ ëˆ ë²„ëŠ” êµ¬ì¡°!</strong> ê¸°ìˆ , ì˜ˆìˆ , ì°½ì‘ìœ¼ë¡œ ë¶€ì ë  ìˆ˜ ìˆì–´ìš”.';}
return `
<div class="info-box gold"><p><strong>ğŸ’° ì¬ë¬¼ìš´ ë¶„ì„</strong></p></div><div style="text-align:center;margin:15px 0;"><span style="font-size:2rem;">${'â­'.repeat(rating)}${'â˜†'.repeat(5-rating)}</span></div><div class="info-box"><p style="line-height:1.8;">${desc}</p></div><div class="info-box good" style="margin-top:12px;"><p><strong>ğŸ¯ ì¬ë¬¼ ìš´ ì˜¬ë¦¬ëŠ” ë²•</strong></p><p style="margin-top:8px;">ìš©ì‹ ì¸ <strong>${ELEMENT[gods.yong].k}</strong> ê¸°ìš´ì„ í™œìš©í•˜ì„¸ìš”!<br>í–‰ìš´ì˜ ìˆ«ì: ${ELEMENT[gods.yong].nums.slice(0,5).join(', ')}</p></div>`;}
function genHealthFortune(saju, str, gods) {const dm = saju.day.s;const ec = countElements(saju);const healthData = {wood: {o:'ê°„, ë‹´ë‚­, ëˆˆ', s:'í”¼ë¡œ, ì‹œë ¥ ì €í•˜, ê·¼ìœ¡ ê²½ë ¨, ì†í†± ê°ˆë¼ì§', a:'ë…¹ìƒ‰ ì±„ì†Œ ì„­ì·¨, ìŠ¤íŠ¸ë ˆì¹­, ëˆˆ íœ´ì‹'},
fire: {o:'ì‹¬ì¥, ì†Œì¥, í˜€', s:'ê°€ìŠ´ ë‘ê·¼ê±°ë¦¼, ë¶ˆë©´ì¦, í˜€ ì—¼ì¦', a:'ê·œì¹™ì ì¸ ìˆ˜ë©´, ëª…ìƒ, ë¶‰ì€ ìŒì‹'},
earth: {o:'ìœ„ì¥, ë¹„ì¥, ì…ìˆ ', s:'ì†Œí™”ë¶ˆëŸ‰, ë³µë¶€ íŒ½ë§Œ, ì…ìˆ  íŠ¸ëŠ” ê²ƒ', a:'ê·œì¹™ì ì¸ ì‹ì‚¬, ë…¸ë€ ìŒì‹, ê±·ê¸°'},
metal: {o:'í, ëŒ€ì¥, ì½”', s:'í˜¸í¡ê¸° ì§ˆí™˜, í”¼ë¶€ íŠ¸ëŸ¬ë¸”, ë³€ë¹„', a:'ì‹¬í˜¸í¡, ë“±ì‚°, í°ìƒ‰ ìŒì‹, ìœ ì‚°ê· '},
water: {o:'ì‹ ì¥, ë°©ê´‘, ê·€', s:'ë¶€ì¢…, ìš”í†µ, ìƒì‹ê¸° ë¬¸ì œ, ì²­ë ¥ ì €í•˜', a:'ì¶©ë¶„í•œ ìˆ˜ë¶„, ê²€ì€ì½©, ë°˜ì‹ ìš•'}};const sorted = Object.entries(ec).sort((a,b) => a[1] - b[1]);const weakest = sorted[0];const strongest = Object.entries(ec).sort((a,b) => b[1] - a[1])[0];let rating = str.type === 'weak' ? 3 : 4;return `
<div class="info-box gold"><p><strong>ğŸ¥ ê±´ê°•ìš´ ë¶„ì„</strong></p></div><div style="text-align:center;margin:15px 0;"><span style="font-size:2rem;">${'â­'.repeat(rating)}${'â˜†'.repeat(5-rating)}</span></div><div class="info-box"><p><strong>ì•½í•œ ì¥ê¸°:</strong> ${healthData[dm.e].o}</p><p style="margin-top:10px;"><strong>ì£¼ì˜ ì¦ìƒ:</strong><br>${healthData[dm.e].s}</p><p style="margin-top:10px;"><strong>ê±´ê°• ê´€ë¦¬ë²•:</strong><br>${healthData[dm.e].a}</p></div>
${weakest[1] === 0 ? `<div class="info-box warn" style="margin-top:12px;"><p><strong>âš ï¸ ${ELEMENT[weakest[0]].k} ê¸°ìš´ì´ ì—†ì–´ìš”!</strong><br>${healthData[weakest[0]].o} ê´€ë ¨ ê±´ê°•ì— íŠ¹íˆ ì‹ ê²½ ì“°ì„¸ìš”!<br><br>${healthData[weakest[0]].a}</p></div>` : ''}
${strongest[1] >= 4 ? `<div class="info-box" style="margin-top:12px;"><p><strong>ğŸ“Œ ${ELEMENT[strongest[0]].k} ê¸°ìš´ì´ ë„ˆë¬´ ë§ì•„ìš”</strong><br>${healthData[strongest[0]].o} ê´€ë ¨ ì¥ê¸°ì— ë¬´ë¦¬ ê°ˆ ìˆ˜ ìˆì–´ìš”. ê· í˜•ì´ ì¤‘ìš”í•´ìš”!</p></div>` : ''}
<div class="info-box good" style="margin-top:12px;"><p><strong>ğŸ—“ï¸ ê³„ì ˆë³„ ê±´ê°• ê´€ë¦¬</strong></p><p style="margin-top:8px;line-height:1.8;">
â€¢ ë´„: ê°„, ëˆˆ ê´€ë¦¬ / ìŠ¤íŠ¸ë ˆì¹­<br>
â€¢ ì—¬ë¦„: ì‹¬ì¥, í˜ˆê´€ / ë¬¼ ë§ì´ ë§ˆì‹œê¸°<br>
â€¢ í™˜ì ˆê¸°: ì†Œí™”ê¸° / ê·œì¹™ì ì¸ ì‹ì‚¬<br>
â€¢ ê°€ì„: í, í˜¸í¡ê¸° / ë“±ì‚°, ì‹¬í˜¸í¡<br>
â€¢ ê²¨ìš¸: ì‹ ì¥, ë¼ˆ / ë³´ì˜¨, ë°˜ì‹ ìš•
</p></div>`;}
function runMatch() {if (!SAJU) { toast('ë¨¼ì € ë‚´ ì‚¬ì£¼ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”!'); return; }
let py = +document.getElementById('partner-year').value;let pm = +document.getElementById('partner-month').value;let pd = +document.getElementById('partner-day').value;const pH = +document.getElementById('partner-hour').value;if (!py || !pm || !pd) { toast('ìƒëŒ€ë°© ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”'); return; }
if (PARTNER_CALENDAR === 'lunar') {const conv = lunarToSolar(py, pm, pd);if (!conv || !conv.year) { toast('ìŒë ¥ ë³€í™˜ ì˜¤ë¥˜. ì–‘ë ¥ìœ¼ë¡œ ì‹œë„í•˜ì„¸ìš”'); return; }py = conv.year; pm = conv.month; pd = conv.day;}
const pDayPillar = calcDayPillar(py, pm, pd);let pHourPillar = null;if (pH >= 0) { pHourPillar = calcHourPillar(pDayPillar, pH); }
const pSaju = {year: calcYearPillar(py, pm, pd),
month: calcMonthPillar(py, pm, pd),
day: pDayPillar,
hour: pHourPillar};let score = 50, details = [];const myDm = STEM.findIndex(s => s.c === SAJU.day.s.c), pDm = STEM.findIndex(s => s.c === pSaju.day.s.c);const ganHap = [[0,5],[1,6],[2,7],[3,8],[4,9]];let ganMatch = false;for (let [a,b] of ganHap) if ((myDm===a && pDm===b) || (myDm===b && pDm===a)) { ganMatch = true; break; }
if (ganMatch) { score += 20; details.push({t:'good', txt:'ğŸ’• ì²œê°„í•©! ë‘ ì‚¬ëŒì˜ ì¼ê°„ì´ ì²œìƒì—°ë¶„ì´ì—ìš”!'}); }
const myDb = BRANCH.indexOf(SAJU.day.b), pDb = BRANCH.indexOf(pSaju.day.b);const jiHap = [[0,1],[2,11],[3,10],[4,9],[5,8],[6,7]];const jiChung = [[0,6],[1,7],[2,8],[3,9],[4,10],[5,11]];for (let [a,b] of jiHap) if ((myDb===a && pDb===b) || (myDb===b && pDb===a)) { score += 15; details.push({t:'good', txt:'ğŸ¤ ì¼ì§€ ìœ¡í•©! í•¨ê»˜ ìˆìœ¼ë©´ í¸ì•ˆí•˜ê³  ì•ˆì •ê°ì„ ëŠê»´ìš”.'}); break; }
for (let [a,b] of jiChung) if ((myDb===a && pDb===b) || (myDb===b && pDb===a)) { score -= 15; details.push({t:'bad', txt:'ğŸ’¥ ì¼ì§€ ì¶©! ì„œë¡œ ë¶€ë”ªíˆê¸° ì‰¬ì›Œìš”. ì–‘ë³´ê°€ í•„ìš”í•´ìš”.'}); break; }
const myEl = EL_ORDER.indexOf(SAJU.day.s.e), pEl = EL_ORDER.indexOf(pSaju.day.s.e);const saeng = [[0,2],[2,1],[1,3],[3,4],[4,0]];const keuk = [[0,3],[3,1],[1,4],[4,2],[2,0]];for (let [a,b] of saeng) if ((myEl===a && pEl===b) || (myEl===b && pEl===a)) { score += 10; details.push({t:'good', txt:`ğŸŒ± ì˜¤í–‰ ìƒìƒ! ${ELEMENT[SAJU.day.s.e].k}ê³¼ ${ELEMENT[pSaju.day.s.e].k}ì´ ì„œë¡œ ë„ì™€ì£¼ëŠ” ê´€ê³„ì˜ˆìš”.`}); break; }
for (let [a,b] of keuk) if ((myEl===a && pEl===b) || (myEl===b && pEl===a)) { score -= 10; details.push({t:'bad', txt:`âš”ï¸ ì˜¤í–‰ ìƒê·¹! ì„œë¡œ ë§ì¶°ê°€ëŠ” ë…¸ë ¥ì´ í•„ìš”í•´ìš”.`}); break; }
if (SAJU.day.s.e === pSaju.day.s.e) { score += 5; details.push({t:'neutral', txt:`ğŸ”„ ê°™ì€ ${ELEMENT[SAJU.day.s.e].k} ì˜¤í–‰! ë¹„ìŠ·í•œ ì„±í–¥ì´ë¼ í†µí•´ìš”.`}); }
const myTti = BRANCH.indexOf(SAJU.year.b), pTti = BRANCH.indexOf(pSaju.year.b);for (let [a,b] of jiHap) if ((myTti===a && pTti===b) || (myTti===b && pTti===a)) { score += 5; details.push({t:'good', txt:`ğŸ¾ ë  ìœ¡í•©! ${BRANCH[myTti].a}ë ì™€ ${BRANCH[pTti].a}ë ëŠ” ì˜ ë§ì•„ìš”.`}); break; }
for (let [a,b] of jiChung) if ((myTti===a && pTti===b) || (myTti===b && pTti===a)) { score -= 5; details.push({t:'bad', txt:`ğŸ¾ ë  ì¶©! ${BRANCH[myTti].a}ë ì™€ ${BRANCH[pTti].a}ë ëŠ” ë¶€ë”ªí ìˆ˜ ìˆì–´ìš”.`}); break; }
score = Math.max(0, Math.min(100, score));let grade, color, summary;if (score >= 80) { grade = 'ğŸ’– ì²œìƒì—°ë¶„'; color = '#e91e63'; summary = 'ë‘ ë¶„ì€ ì •ë§ ì˜ ë§ì•„ìš”! ìµœê³ ì˜ ê¶í•©ì´ì—ìš”.'; }
else if (score >= 65) { grade = 'ğŸ’• ì¢‹ì€ ê¶í•©'; color = '#9c27b0'; summary = 'ì˜ ë§ëŠ” í¸ì´ì—ìš”! ì•½ê°„ì˜ ë…¸ë ¥ë§Œ ìˆìœ¼ë©´ í–‰ë³µí•´ìš”.'; }
else if (score >= 50) { grade = 'ğŸ’› ë³´í†µ ê¶í•©'; color = '#ff9800'; summary = 'í‰ë²”í•œ ê¶í•©ì´ì—ìš”. ì„œë¡œ ë‹¤ë¥¸ ì ì„ ì¸ì •í•˜ë©´ ì¢‹ì•„ì ¸ìš”.'; }
else if (score >= 35) { grade = 'ğŸ’” ë…¸ë ¥ í•„ìš”'; color = '#ff5722'; summary = 'ë¶€ë”ªíˆëŠ” ë¶€ë¶„ì´ ìˆì–´ìš”. ì–‘ë³´ì™€ ì´í•´ê°€ ë§ì´ í•„ìš”í•´ìš”.'; }
else { grade = 'ğŸ˜¢ ìƒê·¹ ê¶í•©'; color = '#f44336'; summary = 'ì‰½ì§€ ì•Šì€ ê¶í•©ì´ì—ìš”. í•˜ì§€ë§Œ ì‚¬ë‘ìœ¼ë¡œ ê·¹ë³µ ê°€ëŠ¥í•´ìš”!'; }
document.getElementById('match-result').innerHTML = `
<div class="info-box" style="text-align:center;"><p style="font-size:2rem;color:${color}">${grade}</p><p style="font-size:1.5rem;font-weight:bold;margin-top:10px;">${score}ì </p><div style="background:#333;border-radius:10px;height:20px;margin:15px 0;"><div style="background:linear-gradient(90deg,#ff6b6b,#ee5a24);height:100%;border-radius:10px;width:${score}%"></div></div><p>${summary}</p></div><div class="info-box" style="margin-top:15px;"><p><strong>ğŸ“Š ìƒì„¸ ë¶„ì„</strong></p><p style="margin-top:8px;"><strong>ë‚˜:</strong> ${SAJU.day.s.c}${SAJU.day.b.c}ì¼ì£¼ (${ELEMENT[SAJU.day.s.e].k})</p><p><strong>ìƒëŒ€:</strong> ${pSaju.day.s.c}${pSaju.day.b.c}ì¼ì£¼ (${ELEMENT[pSaju.day.s.e].k})</p></div>
${details.map(d => `<div class="info-box ${d.t === 'good' ? 'good' : d.t === 'bad' ? 'warn' : ''}" style="margin-top:10px;"><p>${d.txt}</p></div>`).join('')}
<div class="info-box" style="margin-top:15px;"><p><strong>ğŸ’¡ ê¶í•© íŒ</strong></p><p style="margin-top:8px;">${score >= 65 ? 'ì„œë¡œì˜ ì¥ì ì„ ì¹­ì°¬í•´ì£¼ì„¸ìš”!' : score >= 50 ? 'ì„œë¡œ ë‹¤ë¥¸ ì ì„ ì¸ì •í•˜ê³  ì¡´ì¤‘í•˜ì„¸ìš”.' : 'ëŒ€í™”ë¥¼ ë§ì´ í•˜ì„¸ìš”. ì„œë¡œì˜ ê³µê°„ë„ ì¡´ì¤‘í•´ì£¼ì„¸ìš”.'}</p></div>`;}
let wheelRotation = 0;let isWheelSpinning = false;function spinZodiacWheel(targetIndex, callback) {if (isWheelSpinning) return;isWheelSpinning = true;const container = document.getElementById('zodiac-wheel-container');const wheel = document.getElementById('zodiacWheel');const glow = document.getElementById('wheelGlow');const sparkle = document.getElementById('sparkleOverlay');const loading = document.getElementById('zodiacLoading');const resultText = document.getElementById('zodiacResultText');container.style.display = 'block';resultText.style.opacity = '0';resultText.textContent = '';loading.style.display = 'block';glow.classList.add('active');sparkle.classList.add('active');const targetPos = ((12 - targetIndex) % 12) * 30 + 15;const currentPos = wheelRotation % 360;let diff = targetPos - currentPos;if (diff <= 0) diff += 360;wheelRotation = wheelRotation + 720 + diff;setTimeout(() => {wheel.style.transform = `rotate(${wheelRotation}deg)`;}, 50);setTimeout(() => {loading.style.display = 'none';glow.classList.remove('active');sparkle.classList.remove('active');const animal = BRANCH[targetIndex];resultText.textContent = `âœ¨ ${animal.a}ë  (${animal.c}) âœ¨`;resultText.style.opacity = '1';isWheelSpinning = false;if (callback) callback();}, 1550);}
function analyzeSaju() {try {const y = +document.getElementById('birth-year').value;const m = +document.getElementById('birth-month').value;const d = +document.getElementById('birth-day').value;const h = +document.getElementById('birth-hour').value;if (!y || !m || !d) { toast('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”'); return; }
if (y < 1900 || y > 2100) { toast('ì—°ë„ëŠ” 1900~2100 ì‚¬ì´ë¡œ ì…ë ¥í•˜ì„¸ìš”'); return; }
if (m < 1 || m > 12) { toast('ì›”ì€ 1~12 ì‚¬ì´ë¡œ ì…ë ¥í•˜ì„¸ìš”'); return; }
if (d < 1 || d > 31) { toast('ì¼ì€ 1~31 ì‚¬ì´ë¡œ ì…ë ¥í•˜ì„¸ìš”'); return; }
let sy = y, sm = m, sd = d;if (CALENDAR === 'lunar') {ORIGINAL_LUNAR_YEAR = y;ORIGINAL_LUNAR_MONTH = m;ORIGINAL_LUNAR_DAY = d;const conv = lunarToSolar(y, m, d);if (!conv || !conv.year) { toast('ìŒë ¥ ë³€í™˜ ì˜¤ë¥˜. ì–‘ë ¥ìœ¼ë¡œ ì‹œë„í•˜ì„¸ìš”'); return; }
sy = conv.year; sm = conv.month; sd = conv.day;} else {ORIGINAL_LUNAR_YEAR = null;ORIGINAL_LUNAR_MONTH = null;ORIGINAL_LUNAR_DAY = null;}
const adj = adjustTime(sy, sm, sd, h);if (!adj || !adj.y) { toast('ì‹œê°„ ë³´ì • ì˜¤ë¥˜'); return; }
SAJU = {year: calcYearPillar(adj.y, adj.m, adj.d, adj.hour, adj.minute),
month: calcMonthPillar(adj.y, adj.m, adj.d, adj.hour !== undefined ? adj.hour : 12, adj.minute || 0),
day: calcDayPillar(adj.y, adj.m, adj.d),
hour: h >= 0 ? calcHourPillar(calcDayPillar(adj.y, adj.m, adj.d).s, adj.h) : null};if (!SAJU.year || !SAJU.month || !SAJU.day) {toast('ì‚¬ì£¼ ê³„ì‚° ì˜¤ë¥˜. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”');return;}
BIRTH_YEAR = y;BIRTH_MONTH = sm;BIRTH_DAY = sd;BIRTH_HOUR = h;const str = calcStrength(SAJU);if (!str) { toast('ì‹ ê°•/ì‹ ì•½ ê³„ì‚° ì˜¤ë¥˜'); return; }
STRENGTH = str;GODS = fullAnalysis(SAJU, str);if (!GODS) { toast('ìš©ì‹  ê³„ì‚° ì˜¤ë¥˜'); return; }
renderSaju(str);document.getElementById('saju-result').style.display = 'block';document.getElementById('my-info-display').innerHTML = `<p style="color:var(--gold);">${SAJU.day.s.c}${SAJU.day.b.c}ì¼ì£¼ (${ELEMENT[SAJU.day.s.e].k})</p>`;toast('ì‚¬ì£¼ ë¶„ì„ ì™„ë£Œ!');} catch (error) {console.error('ì‚¬ì£¼ ë¶„ì„ ì˜¤ë¥˜:', error);toast('ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì…ë ¥ê°’ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');}}
function renderSaju(str) {try {const pillars = ['hour','day','month','year'];const labels = ['ì‹œì£¼','ì¼ì£¼','ì›”ì£¼','ì—°ì£¼'];document.getElementById('pillars').innerHTML = pillars.map((p, i) => {const pillar = SAJU[p];if (!pillar) return `<div class="pillar"><div class="pillar-label">${labels[i]}</div><div class="pillar-stem">-</div><div class="pillar-branch">-</div></div>`;const god = p !== 'day' ? getTenGod(pillar.s, SAJU.day.s) : null;return `<div class="pillar ${p === 'day' ? 'dm' : ''}"><div class="pillar-label">${labels[i]}</div><div class="pillar-stem el-${pillar.s.e}">${pillar.s.c}</div><div class="pillar-branch el-${pillar.b.e}">${pillar.b.c}</div><div class="pillar-sub">${pillar.s.k}${pillar.b.k}</div>
${god ? `<div class="pillar-god">${god.k}</div>` : '<div class="pillar-god">ì¼ê°„</div>'}
</div>`;}).join('');const un12 = getTwelveState(SAJU.day.s, SAJU.day.b);document.getElementById('twelve-states').innerHTML = `<div class="info-box"><p><strong>ì¼ì§€ 12ìš´ì„±:</strong> ${un12.k} (ì—ë„ˆì§€ ${un12.l}/12)</p></div>`;const typeLabel = {strong:'ì‹ ê°•',weak:'ì‹ ì•½',balanced:'ì¤‘í™”'};document.getElementById('strength-box').innerHTML = `
<div class="strength-header"><span class="strength-title">ì¼ê°„ ê°•ì•½</span><span class="strength-badge ${str.type}">${typeLabel[str.type]}${str.extreme ? ` (${str.extreme})` : ''}</span></div><div class="strength-bar"><div class="strength-fill ${str.type}" style="width:${str.pct}%"></div></div><div class="factors">${str.factors.map(f => `<div class="factor"><span class="factor-label">${f.l}</span><span class="factor-value ${f.p ? 'pos' : 'neg'}">${f.v}</span></div>`).join('')}</div>
`;const dayNapeum = calcNapeum(SAJU.day.s, SAJU.day.b);const yearNapeum = calcNapeum(SAJU.year.s, SAJU.year.b);const myunggung = SAJU.hour ? calcMyunggung(SAJU.month.b, SAJU.hour.b) : null;const taewon = calcTaewon(SAJU.year.s, SAJU.month.s, SAJU.month.b);document.getElementById('napeum-myunggung').innerHTML = `
<div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸµ ë‚©ìŒì˜¤í–‰(ç´éŸ³äº”è¡Œ)</strong></p><p style="font-size:0.85rem;color:var(--gray);margin-top:5px;">60ê°‘ìì˜ ìŒë¥ ì— ë”°ë¥¸ ì˜¤í–‰</p><div style="margin-top:12px;display:grid;grid-template-columns:1fr 1fr;gap:10px;"><div style="padding:12px;background:rgba(255,255,255,0.05);border-radius:8px;"><p style="font-size:0.8rem;color:var(--gray);">ì¼ì£¼ ë‚©ìŒ</p><p style="font-weight:bold;margin-top:5px;color:var(--gold);">${SAJU.day.s.c}${SAJU.day.b.c} â†’ ${dayNapeum.name}</p><p style="font-size:0.85rem;margin-top:5px;">${dayNapeum.desc}</p></div><div style="padding:12px;background:rgba(255,255,255,0.05);border-radius:8px;"><p style="font-size:0.8rem;color:var(--gray);">ì—°ì£¼ ë‚©ìŒ</p><p style="font-weight:bold;margin-top:5px;">${SAJU.year.s.c}${SAJU.year.b.c} â†’ ${yearNapeum.name}</p><p style="font-size:0.85rem;margin-top:5px;">${yearNapeum.desc}</p></div></div></div>
${myunggung ? `
<div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸ  ëª…ê¶(å‘½å®®)</strong></p><p style="font-size:0.85rem;color:var(--gray);margin-top:5px;">ì›”ì§€+ì‹œì§€ë¡œ ê³„ì‚°í•œ ì¸ìƒì˜ ë°©í–¥</p><div style="margin-top:12px;padding:15px;background:rgba(253,216,53,0.1);border-radius:8px;border-left:3px solid var(--gold);"><p style="font-weight:bold;font-size:1.1rem;color:var(--gold);">${myunggung.name} (${myunggung.branch.c}${myunggung.branch.k})</p><p style="margin-top:8px;"><strong>ì„±í–¥:</strong> ${myunggung.trait}</p><p style="margin-top:5px;"><strong>ì í•© ë¶„ì•¼:</strong> ${myunggung.career}</p></div></div>
` : '<div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸ  ëª…ê¶(å‘½å®®)</strong></p><p style="color:var(--gray);margin-top:5px;">ì‹œì£¼ë¥¼ ëª¨ë¥´ë©´ ëª…ê¶ì„ ê³„ì‚°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p></div>'}
<div class="info-box"><p><strong>ğŸŒ± íƒœì›(èƒå…ƒ)</strong></p><p style="font-size:0.85rem;color:var(--gray);margin-top:5px;">ì‰íƒœ ì‹œì ì˜ ê°„ì§€ (ì›”ê°„+1, ì›”ì§€+3)</p><div style="margin-top:12px;padding:15px;background:rgba(255,255,255,0.05);border-radius:8px;"><p style="font-weight:bold;font-size:1.1rem;">${taewon.pillar} (${taewon.stem.k}${taewon.branch.k})</p><p style="margin-top:8px;">ë‚©ìŒ: ${taewon.napeum.name} (${taewon.napeum.elementK})</p><p style="margin-top:5px;font-size:0.9rem;color:var(--gray);">${taewon.desc}</p></div></div>
`;const jjAnalysis = analyzeJijanggan(SAJU);document.getElementById('jijanggan-analysis').innerHTML = `
<div class="info-box"><p style="margin-bottom:10px;font-size:0.85rem;color:var(--gray);">ì§€ì§€(åœ°æ”¯) ì†ì— ìˆ¨ì€ ì²œê°„(å¤©å¹²)ì„ ë¶„ì„í•©ë‹ˆë‹¤</p>
${jjAnalysis.pillars.map(p => `
<div style="margin-bottom:15px;padding:12px;background:rgba(255,255,255,0.03);border-radius:8px;"><p style="font-weight:bold;color:var(--gold);">${p.name}: ${p.branch.c}(${p.branch.k})</p><div style="margin-top:8px;display:flex;flex-wrap:wrap;gap:8px;">
${p.hidden.map(h => `
<span style="padding:4px 10px;border-radius:15px;font-size:0.8rem;background:${h.type === 'ì •ê¸°' ? 'rgba(76,175,80,0.3)' : h.type === 'ì¤‘ê¸°' ? 'rgba(255,152,0,0.3)' : 'rgba(158,158,158,0.3)'};border:1px solid ${h.type === 'ì •ê¸°' ? 'var(--wood)' : h.type === 'ì¤‘ê¸°' ? 'var(--earth)' : 'var(--metal)'};">
${h.stem.c}(${h.stem.k}) Â· ${h.type} Â· ${h.days}ì¼ Â· ${h.god.k}
${h.tougan ? '<span style="color:var(--gold);">â˜…íˆ¬ê°„</span>' : ''}
</span>
`).join('')}
</div></div>
`).join('')}
</div><div class="info-box" style="margin-top:10px;"><p><strong>ğŸ“Š ì§€ì¥ê°„ ì˜¤í–‰ ë¶„í¬</strong></p><div style="margin-top:10px;display:flex;justify-content:space-around;">
${EL_ORDER.map(e => `
<div style="text-align:center;"><div class="el-${e}" style="font-size:1.2rem;">${ELEMENT[e].c}</div><div style="font-size:0.9rem;margin-top:3px;">${jjAnalysis.summary.elements[e].toFixed(1)}</div></div>
`).join('')}
</div></div>
`;const ttAnalysis = analyzeTonggeunTougan(SAJU);document.getElementById('tonggeun-analysis').innerHTML = `
<div class="info-box"><p><strong>ğŸŒ³ í†µê·¼(é€šæ ¹)</strong> - ì²œê°„ì´ ì§€ì§€ì— ë¿Œë¦¬ ë‚´ë¦° ìƒíƒœ</p><div style="margin-top:10px;">
${ttAnalysis.tonggeun.length ? ttAnalysis.tonggeun.map(t => `
<div style="padding:8px;margin:5px 0;background:rgba(76,175,80,0.1);border-radius:6px;border-left:3px solid var(--wood);"><span style="font-weight:bold;">${t.pillar} ${t.stem}</span> (${t.god}) â†’
${t.roots.map(r => `<span style="margin-left:5px;padding:2px 6px;background:rgba(255,255,255,0.1);border-radius:4px;font-size:0.8rem;">${r.pillar}${r.branch} ${r.type}(${r.strength})</span>`).join('')}
</div>
`).join('') : '<p style="color:var(--gray);font-size:0.9rem;">í†µê·¼í•œ ì²œê°„ì´ ì—†ìŠµë‹ˆë‹¤. ë¿Œë¦¬ê°€ ì•½í•´ìš”.</p>'}
</div></div><div class="info-box" style="margin-top:10px;"><p><strong>â˜€ï¸ íˆ¬ê°„(é€å¹²)</strong> - ì§€ì¥ê°„ì´ ì²œê°„ì— ë“œëŸ¬ë‚œ ìƒíƒœ</p><div style="margin-top:10px;">
${ttAnalysis.tougan.length ? ttAnalysis.tougan.map(t => `
<div style="padding:8px;margin:5px 0;background:rgba(253,216,53,0.1);border-radius:6px;border-left:3px solid var(--gold);"><span style="font-weight:bold;">${t.stem}</span> (${t.god}) - ${t.pillar}ì—ì„œ ${t.from}ì˜ ê¸°ìš´ì´ ë“œëŸ¬ë‚¨
</div>
`).join('') : '<p style="color:var(--gray);font-size:0.9rem;">íˆ¬ê°„í•œ ì§€ì¥ê°„ì´ ì—†ìŠµë‹ˆë‹¤.</p>'}
</div></div>
`;document.getElementById('gods').innerHTML = `
<div class="god yong"><div class="god-title">ìš©ì‹ (ç”¨ç¥)</div><div class="god-element el-${GODS.yong}">${ELEMENT[GODS.yong].c}</div><div class="god-name">${ELEMENT[GODS.yong].k} - ${ELEMENT[GODS.yong].n}</div></div><div class="god hee"><div class="god-title">í¬ì‹ (å–œç¥)</div><div class="god-element el-${GODS.hee}">${ELEMENT[GODS.hee].c}</div><div class="god-name">${ELEMENT[GODS.hee].k} - ${ELEMENT[GODS.hee].n}</div></div><div class="god gi"><div class="god-title">ê¸°ì‹ (å¿Œç¥)</div><div class="god-element el-${GODS.gi}">${ELEMENT[GODS.gi].c}</div><div class="god-name">${ELEMENT[GODS.gi].k} - ${ELEMENT[GODS.gi].n}</div></div>
`;let godsDetailHtml = `<div class="info-box gold"><p>${ELEMENT[GODS.yong].n} ê¸°ìš´ì´ ë‹¹ì‹ ì—ê²Œ í–‰ìš´ì„ ê°€ì ¸ë‹¤ì¤ë‹ˆë‹¤.</p></div>`;if (GODS.johu) {godsDetailHtml += `
<div class="info-box" style="margin-top:10px;"><p><strong>ğŸŒ¡ï¸ ì¡°í›„(èª¿å€™) ë¶„ì„</strong></p><p style="margin-top:8px;font-size:0.9rem;">${GODS.johuDesc || 'ê³„ì ˆì— ë§ëŠ” ì¡°í›„ìš©ì‹ ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.'}</p>
${GODS.sub ? `<p style="margin-top:5px;font-size:0.85rem;color:var(--gray);">ë³´ì¡°ìš©ì‹ : ${ELEMENT[GODS.sub].k}(${ELEMENT[GODS.sub].c})</p>` : ''}
</div>
`;}
if (GODS.climate) {godsDetailHtml += `
<div class="info-box ${GODS.climate.needs.length ? 'warn' : ''}" style="margin-top:10px;"><p><strong>ğŸŒ¡ï¸ í•œë‚œì¡°ìŠµ(å¯’æš–ç‡¥æ¿•): ${GODS.climate.type}</strong></p><p style="margin-top:8px;font-size:0.9rem;">${GODS.climate.desc}</p>
${GODS.climate.needs.length ? `<p style="margin-top:5px;font-size:0.85rem;">í•„ìš”í•œ ê¸°ìš´: ${GODS.climate.needs.map(e => ELEMENT[e].k).join(', ')}</p>` : ''}
</div>
`;}
if (GODS.byungYak && GODS.byungYak.byung) {godsDetailHtml += `
<div class="info-box" style="margin-top:10px;"><p><strong>ğŸ’Š ë³‘ì•½(ç—…è—¥) ë¶„ì„</strong></p><p style="margin-top:8px;font-size:0.9rem;">
ë³‘(ç—…): ${ELEMENT[GODS.byungYak.byung].k}(${ELEMENT[GODS.byungYak.byung].c}) ê³¼ë‹¤<br>
ì•½(è—¥): ${ELEMENT[GODS.byungYak.yak].k}(${ELEMENT[GODS.byungYak.yak].c})ìœ¼ë¡œ ì œì–´
</p></div>
`;}
document.getElementById('gods-detail').innerHTML = godsDetailHtml;const yukcheon = analyzeYukcheon(SAJU, GENDER);document.getElementById('yukcheon-analysis').innerHTML = `
<div class="info-box" style="margin-bottom:10px;"><p style="font-size:0.85rem;color:var(--gray);">ì‚¬ì£¼ì˜ ì‹­ì‹ ìœ¼ë¡œ ê°€ì¡±, ì¸ê°„ê´€ê³„ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤</p></div><!-- ìœ„ì¹˜ë³„ ìœ¡ì¹œ --><div style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:15px;">
${yukcheon.positions.map(p => `
<div style="padding:12px;background:rgba(255,255,255,0.05);border-radius:8px;"><p style="font-size:0.8rem;color:var(--gray);">${p.posName}</p><p style="font-weight:bold;margin:5px 0;">${p.stem.c}${p.branch.c}</p><p style="font-size:0.9rem;">ì²œê°„: <span style="color:var(--gold);">${p.stemGod}</span></p>
${p.branchGod ? `<p style="font-size:0.85rem;color:var(--gray);">ì§€ì§€: ${p.branchGod}</p>` : ''}
<p style="font-size:0.8rem;margin-top:5px;">${p.relation}</p></div>
`).join('')}
</div><!-- ë°°ìš°ì ë¶„ì„ --><div class="info-box ${yukcheon.spouse.count > 0 ? 'good' : 'warn'}" style="margin-bottom:10px;"><p><strong>ğŸ’• ë°°ìš°ì ë¶„ì„</strong></p><p style="margin-top:8px;font-size:0.9rem;">
ë°°ìš°ìì„±(${yukcheon.spouse.god}): ${yukcheon.spouse.count > 0 ? yukcheon.spouse.count + 'ê°œ' : 'ì—†ìŒ'}<br>
ì¼ì§€ 12ìš´ì„±: ${yukcheon.spouse.dayBranch.k}
</p><p style="margin-top:5px;font-size:0.85rem;">${yukcheon.spouse.analysis}</p></div><!-- ìë…€ ë¶„ì„ --><div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸ‘¶ ìë…€ ë¶„ì„</strong></p><p style="margin-top:8px;font-size:0.9rem;">
ìë…€ì„±(${yukcheon.children.gods.join('/')}): ${yukcheon.children.count > 0 ? yukcheon.children.count.toFixed(1) + 'ê°œ' : 'ì—†ìŒ'}
</p><p style="margin-top:5px;font-size:0.85rem;">${yukcheon.children.analysis}</p></div><!-- ë¶€ëª¨ ë¶„ì„ --><div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ë¶€ëª¨ ë¶„ì„</strong></p><p style="margin-top:8px;font-size:0.9rem;">
ì•„ë²„ì§€(í¸ì¬): ${yukcheon.parents.father.count > 0 ? 'ìˆìŒ' : 'ì—†ìŒ'} - ${yukcheon.parents.father.analysis}<br>
ì–´ë¨¸ë‹ˆ(ì •ì¸): ${yukcheon.parents.mother.count > 0 ? 'ìˆìŒ' : 'ì—†ìŒ'} - ${yukcheon.parents.mother.analysis}
</p></div><!-- ìœ¡ì¹œ íŠ¹ì´ì‚¬í•­ -->
${yukcheon.analysis.length ? `
<div class="info-box warn"><p><strong>ğŸ“Œ ìœ¡ì¹œ íŠ¹ì´ì‚¬í•­</strong></p>
${yukcheon.analysis.slice(0, 5).map(a => `
<p style="margin-top:8px;font-size:0.85rem;">
${a.type === 'many' ? 'âš¡' : 'â­•'} ${a.meaning}
</p>
`).join('')}
</div>
` : ''}
`;const fmt = calcFormat(SAJU, null, GODS.samhap);document.getElementById('format').innerHTML = `
<div class="info-box gold"><p><strong>${fmt.n}</strong></p><p style="margin-top:10px;line-height:1.8;">${fmt.d}</p><p style="margin-top:10px;color:var(--gold);">ğŸ’¼ <strong>ì í•© ë¶„ì•¼:</strong> ${fmt.b}</p></div>`;const ilju = getIljuDesc(SAJU.day.s, SAJU.day.b);document.getElementById('ilju').innerHTML = `
<div class="info-box"><p><strong style="font-size:16px;">${ilju.title}</strong></p><p style="margin-top:12px;line-height:1.8;">${ilju.desc}</p><div style="margin-top:15px;padding:12px;background:rgba(255,182,193,0.15);border-radius:8px;"><p>ğŸ’• <strong>ë°°ìš°ììš´</strong></p><p style="margin-top:8px;line-height:1.6;">${ilju.spouse}</p></div></div>`;const gungwi = analyzeGungwi(SAJU, BIRTH_YEAR);document.getElementById('gungwi-analysis').innerHTML = `
<div class="info-box" style="margin-bottom:10px;"><p style="font-size:0.85rem;color:var(--gray);">ì‚¬ì£¼ 4ì£¼ëŠ” ê°ê° ì¸ìƒì˜ ë‹¤ë¥¸ ì‹œê¸°ì™€ ê´€ê³„ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤</p></div>
${gungwi.map(g => `
<div class="info-box ${g.rating === 'good' ? 'good' : g.rating === 'bad' ? 'warn' : ''}" style="margin-bottom:10px;${g.isCurrent ? 'border:2px solid var(--gold);' : ''}"><div style="display:flex;justify-content:space-between;align-items:center;"><p><strong>${g.name}</strong><span style="color:var(--gray);font-size:0.85rem;">${g.alias}</span></p>
${g.isCurrent ? '<span style="background:var(--gold);color:#000;padding:2px 8px;border-radius:10px;font-size:0.7rem;">í˜„ì¬</span>' : ''}
</div><p style="margin-top:8px;font-size:0.85rem;">
ğŸ“… <strong>${g.ageRange}</strong> Â·
${g.pillar ? `${g.pillar.s.c}${g.pillar.b.c}` : '-'} Â·
${g.god ? g.god.k : 'ì¼ê°„'} Â·
${g.state ? g.state.k : '-'}
</p><p style="margin-top:5px;font-size:0.85rem;color:var(--gray);">
ğŸ‘¤ ${GENDER === 'm' ? g.relationM : g.relationF} Â· ğŸ¦´ ${g.bodyPart}
</p><p style="margin-top:8px;line-height:1.6;">${g.analysis}</p></div>
`).join('')}
`;const ts = analyzeTwelveStates(SAJU);document.getElementById('twelve-states-full').innerHTML = `
<div class="info-box ${ts.dominant === 'strong' ? 'good' : ts.dominant === 'weak' ? 'warn' : ''}"><p><strong>ğŸ“Š ê¸°ë³¸ ì—ë„ˆì§€ ìƒíƒœ</strong></p><p style="margin-top:8px;">${ts.summary}</p></div><div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin:15px 0;">
${ts.pillars.map(p => `
<div style="text-align:center;padding:12px;background:rgba(255,255,255,0.05);border-radius:8px;border-bottom:3px solid ${p.energy >= 9 ? 'var(--wood)' : p.energy >= 6 ? 'var(--gold)' : p.energy >= 3 ? 'var(--earth)' : 'var(--fire)'};"><div style="font-size:0.8rem;color:var(--gray);">${p.name}</div><div style="font-size:1.3rem;margin:8px 0;">${p.state.k}</div><div style="font-size:0.9rem;">âš¡ ${p.energy}/12</div></div>
`).join('')}
</div><div class="info-box"><p><strong>ğŸ”„ ì¸ìƒ ì—ë„ˆì§€ íë¦„</strong></p><div style="margin-top:10px;">
${ts.lifeFlow.map(lf => `
<div style="display:flex;align-items:center;padding:8px;margin:5px 0;background:rgba(255,255,255,0.03);border-radius:6px;"><div style="width:80px;font-size:0.8rem;color:var(--gray);">${lf.period}</div><div style="width:60px;font-weight:bold;">${lf.state}</div><div style="flex:1;font-size:0.85rem;">${lf.advice}</div><div>${'â­'.repeat(Math.ceil(lf.energy/3))}${'â˜†'.repeat(4-Math.ceil(lf.energy/3))}</div></div>
`).join('')}
</div></div>
`;const luck = calcLuck(SAJU, BIRTH_YEAR, GENDER, GODS, BIRTH_MONTH, BIRTH_DAY, BIRTH_HOUR);let luckMetaHtml = '';if (luck.meta) {const meta = luck.meta;luckMetaHtml = `
<div style="margin-bottom:12px;padding:10px 12px;background:rgba(212,175,55,0.1);border:1px solid rgba(212,175,55,0.3);border-radius:8px;"><div style="display:flex;flex-wrap:wrap;gap:10px;font-size:0.8rem;align-items:center;"><span style="font-weight:600;color:var(--gold);">ğŸ“Š ëŒ€ìš´ì •ë³´</span><span>ğŸ”„ ${meta.directionK}</span><span>ğŸ“… ${meta.firstAgeExact}ì„¸</span>
${meta.targetTerm ? `<span>ğŸ—“ï¸ ${meta.targetTerm.k}</span>` : ''}
<span>âš™ï¸ ${meta.calculationMethod === 'precise' ? 'ì •ë°€' : 'ê¸°ë³¸'}</span></div></div>
`;}
const luckMetaEl = document.getElementById('luck-meta');if (luckMetaEl) luckMetaEl.innerHTML = luckMetaHtml;document.getElementById('luck-timeline').innerHTML = luck.map((l, idx) => `
<div class="luck-item ${l.isCur ? 'current' : ''} ${l.rating}" title="${l.startYear}-${l.endYear}ë…„"><div class="luck-age">${l.startAge}-${l.endAge}ì„¸</div><div style="font-size:0.65rem;color:var(--gray);">${l.startYear}-${l.endYear}</div><div class="luck-pillar el-${l.s.e}">${l.s.c}${l.b.c}</div><div class="luck-rating">${l.rating === 'good' ? 'ğŸ˜Š' : l.rating === 'bad' ? 'ğŸ˜°' : 'ğŸ˜'}</div>
${l.climateClash ? '<div style="font-size:0.6rem;color:#ff6b6b;">ğŸŒ¡ï¸ì—­ìš´</div>' : ''}
</div>
`).join('');const curLuck = luck.find(l => l.isCur);if (curLuck) {const curYear = new Date().getFullYear();const yearsInCycle = curYear - curLuck.startYear;const yearsRemaining = curLuck.endYear - curYear;document.getElementById('luck-detail').innerHTML = `
<div class="info-box ${curLuck.rating === 'good' ? 'good' : curLuck.rating === 'bad' ? 'warn' : ''}"><p><strong>í˜„ì¬ ëŒ€ìš´ (${curLuck.startAge}-${curLuck.endAge}ì„¸): ${curLuck.s.c}${curLuck.b.c}</strong></p><p style="margin-top:8px;font-size:0.9rem;">
ğŸ“… ê¸°ê°„: ${curLuck.startYear} ~ ${curLuck.endYear}ë…„<br>
â³ ì§„í–‰: ${yearsInCycle + 1}ë…„ì°¨ (${yearsRemaining}ë…„ ë‚¨ìŒ)
</p><p style="margin-top:8px;">
${curLuck.rating === 'good' ? 'ğŸŒŸ ì¢‹ì€ ìš´ì´ ë“¤ì–´ì˜¤ëŠ” ì‹œê¸°ì˜ˆìš”! ì ê·¹ì ìœ¼ë¡œ ì›€ì§ì´ì„¸ìš”.' :
curLuck.rating === 'bad' ? 'âš ï¸ ì¡°ì‹¬í•´ì•¼ í•  ì‹œê¸°ì˜ˆìš”. ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”.' :
'ğŸ˜Œ í‰íƒ„í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ê¾¸ì¤€íˆ ë…¸ë ¥í•˜ì„¸ìš”.'}
</p>
${curLuck.climateClash ? '<p style="margin-top:8px;color:#ff6b6b;font-size:0.85rem;">ğŸŒ¡ï¸ ì¡°í›„ ì—­ìš´ - ê³„ì ˆ ì—ë„ˆì§€ ê· í˜•ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>' : ''}
</div>
`;}
const gyoungi = analyzeGyoungi(luck, BIRTH_YEAR, new Date().getFullYear());document.getElementById('gyoungi-analysis').innerHTML = gyoungi.length ? `
<div class="info-box" style="margin-bottom:10px;"><p style="font-size:0.85rem;color:var(--gray);">ëŒ€ìš´ì´ ë°”ë€ŒëŠ” ì‹œì ì„ ë¯¸ë¦¬ ì•Œë©´ ì¸ìƒì˜ ì „í™˜ì ì„ ì¤€ë¹„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div>
${gyoungi.map(g => `
<div class="info-box ${g.intensity === 'strong' ? 'warn' : ''} ${g.isCurrent ? 'gold' : ''}" style="margin-bottom:10px;"><div style="display:flex;justify-content:space-between;align-items:center;"><p><strong>ğŸ”„ ${g.transitionAge}ì„¸ êµìš´ê¸°</strong> (${g.transitionYear}ë…„)</p>
${g.isCurrent ? '<span style="background:var(--gold);color:#000;padding:2px 8px;border-radius:10px;font-size:0.7rem;">í˜„ì¬ êµìš´ê¸°!</span>' : ''}
</div><p style="margin-top:10px;font-size:1.1rem;text-align:center;"><span style="color:var(--gray);">${g.from}</span><span style="margin:0 10px;">â†’</span><span style="color:var(--gold);">${g.to}</span></p><p style="margin-top:10px;line-height:1.6;">${g.warning}</p><p style="margin-top:8px;font-size:0.9rem;color:var(--gray);">ğŸ’¡ ${g.advice}</p></div>
`).join('')}
` : `<div class="info-box"><p style="color:var(--gray);">í˜„ì¬ ë‚˜ì´ ê¸°ì¤€ìœ¼ë¡œ ê°€ê¹Œìš´ êµìš´ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</p></div>`;const next10 = getNext10Years(SAJU, BIRTH_YEAR, GENDER, GODS);const ratingEmoji = {excellent:'ğŸŒŸ',good:'ğŸ˜Š',neutral:'ğŸ˜',caution:'âš ï¸',difficult:'ğŸ˜°'};const ratingClass = {excellent:'good',good:'good',neutral:'',caution:'warn',difficult:'warn'};document.getElementById('ten-years-luck').innerHTML = `
<div style="display:flex;flex-wrap:wrap;gap:8px;margin-bottom:15px;">
${next10.years.map(y => `
<div style="flex:1;min-width:60px;padding:8px;text-align:center;background:rgba(255,255,255,0.05);border-radius:8px;border:1px solid ${y.rating === 'excellent' || y.rating === 'good' ? 'var(--wood)' : y.rating === 'difficult' || y.rating === 'caution' ? 'var(--fire)' : 'transparent'};"><div style="font-size:0.75rem;color:var(--gray);">${y.year}</div><div style="font-size:1.1rem;">${ratingEmoji[y.rating]}</div><div style="font-size:0.7rem;color:var(--gray);">${y.age}ì„¸</div></div>
`).join('')}
</div><div class="info-box good"><p>ğŸŒŸ <strong>ìµœê³ ì˜ í•´: ${next10.bestYear.year}ë…„</strong> (${next10.bestYear.age}ì„¸)<br>
${next10.bestYear.saeun.pillar.s.c}${next10.bestYear.saeun.pillar.b.c}ë…„, ${next10.bestYear.saeun.god.k}ì˜ ê¸°ìš´</p></div><div class="info-box warn" style="margin-top:10px;"><p>âš ï¸ <strong>ì¡°ì‹¬í•  í•´: ${next10.worstYear.year}ë…„</strong> (${next10.worstYear.age}ì„¸)<br>
${next10.worstYear.saeun.pillar.s.c}${next10.worstYear.saeun.pillar.b.c}ë…„ - ë¬´ë¦¬í•˜ì§€ ë§ê³  ê±´ê°• ê´€ë¦¬!</p></div>
`;const curYear = new Date().getFullYear();const monthlyLuck = getYearlyMonthLuck(curYear, SAJU, GODS);document.getElementById('monthly-luck').innerHTML = `
<div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:15px;">
${monthlyLuck.months.map(m => `
<div style="padding:10px;text-align:center;background:rgba(255,255,255,0.05);border-radius:8px;border:1px solid ${m.rating === 'good' ? 'var(--wood)' : m.rating === 'bad' ? 'var(--fire)' : 'transparent'};"><div style="font-weight:bold;">${m.month}ì›”</div><div style="font-size:1.2rem;margin:5px 0;">${m.rating === 'good' ? 'ğŸ˜Š' : m.rating === 'bad' ? 'ğŸ˜°' : 'ğŸ˜'}</div><div style="font-size:0.7rem;color:var(--gray);">${m.pillar.s.c}${m.pillar.b.c}</div><div style="font-size:0.7rem;color:var(--gray);">${m.god.k}</div></div>
`).join('')}
</div><div class="info-box good"><p>ğŸŒŸ <strong>ìµœê³ ì˜ ë‹¬: ${monthlyLuck.best.month}ì›”</strong><br>${monthlyLuck.best.god.k}ì˜ ê¸°ìš´ìœ¼ë¡œ ì¢‹ì€ ì¼ì´ ìƒê²¨ìš”!</p></div><div class="info-box warn" style="margin-top:10px;"><p>âš ï¸ <strong>ì¡°ì‹¬í•  ë‹¬: ${monthlyLuck.worst.month}ì›”</strong><br>${monthlyLuck.worst.god.k}ì˜ ê¸°ìš´ - ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”.</p></div>
`;const ints = calcInteractions(SAJU);document.getElementById('interactions').innerHTML = ints.length ? ints.map(i => `<div class="int-item"><div class="int-type">${i.t}</div><div><div class="int-chars">${i.c}</div><div class="int-meaning">${i.m} - ${i.d}</div></div></div>`).join('') : '<p style="color:var(--gray);">ì‚¬ì£¼ ë‚´ íŠ¹ë³„í•œ í•©ì¶©ì´ ì—†ìŠµë‹ˆë‹¤.</p>';const banghap = analyzeDirectionalHarmony(SAJU);const amhap = analyzeHiddenHarmony(SAJU);document.getElementById('banghap-amhap').innerHTML = `
<div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸŒ€ ë°©í•©(æ–¹åˆ)</strong> - ê°™ì€ ë°©í–¥ ì§€ì§€ê°€ ëª¨ì—¬ ê°•ë ¥í•œ ì˜¤í–‰ í˜•ì„±</p>
${banghap.length ? banghap.map(b => `
<div style="margin-top:10px;padding:12px;background:rgba(${b.type === 'complete' ? '76,175,80' : '255,152,0'},0.1);border-radius:8px;border-left:3px solid ${b.type === 'complete' ? 'var(--wood)' : 'var(--earth)'};"><p style="font-weight:bold;color:${b.type === 'complete' ? 'var(--wood)' : 'var(--earth)'};">${b.name} (${b.branches})</p><p style="margin-top:5px;font-size:0.9rem;">${b.dir}</p><p style="margin-top:5px;font-size:0.85rem;">${b.desc}</p>
${b.type === 'partial' ? `<p style="margin-top:5px;font-size:0.8rem;color:var(--gray);">ğŸ’¡ ${b.missing}(ì´)ê°€ ì˜¤ë©´ ì™„ì„±!</p>` : ''}
</div>
`).join('') : '<p style="margin-top:10px;color:var(--gray);font-size:0.9rem;">ë°©í•©ì´ ì—†ìŠµë‹ˆë‹¤.</p>'}
</div><div class="info-box"><p><strong>ğŸ¤« ì•”í•©(æš—åˆ)</strong> - ì§€ì¥ê°„ë¼ë¦¬ì˜ ìˆ¨ì€ í•© (ê²‰ìœ¼ë¡œ ì•ˆ ë“œëŸ¬ë‚¨)</p>
${amhap.length ? amhap.map(a => `
<div style="margin-top:10px;padding:12px;background:rgba(156,39,176,0.1);border-radius:8px;border-left:3px solid #9C27B0;"><p style="font-weight:bold;color:#9C27B0;">${a.name}</p><p style="margin-top:5px;font-size:0.9rem;">${a.positions}</p><p style="margin-top:5px;font-size:0.85rem;">${a.desc}</p><p style="margin-top:5px;font-size:0.8rem;color:var(--gray);">ğŸ’« ${a.meaning}</p></div>
`).join('') : '<p style="margin-top:10px;color:var(--gray);font-size:0.9rem;">ì•”í•©ì´ ì—†ìŠµë‹ˆë‹¤.</p>'}
</div>
`;const advInt = analyzeAdvancedInteractions(SAJU);document.getElementById('advanced-interactions').innerHTML = `
${advInt.hapHwa.length ? `
<div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸ”® ì²œê°„ í•©í™”(åˆåŒ–) ë¶„ì„</strong></p>
${advInt.hapHwa.map(h => `
<div style="margin-top:10px;padding:10px;background:rgba(255,255,255,0.05);border-radius:6px;border-left:3px solid ${h.isHwa ? 'var(--gold)' : 'var(--gray)'};"><p><strong>${h.name}</strong> (${h.stems})</p><p style="font-size:0.85rem;color:${h.isHwa ? 'var(--gold)' : 'var(--gray)'};margin-top:5px;">
${h.isHwa ? `âœ¨ ${h.result}ìœ¼ë¡œ í•©í™” ì„±ë¦½! ${h.reason}` : `âšª ${h.reason}`}
</p></div>
`).join('')}
</div>
` : ''}
${advInt.samhapGuk.length ? `
<div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸŒ€ ì‚¼í•©êµ­(ä¸‰åˆå±€) ë¶„ì„</strong></p>
${advInt.samhapGuk.map(s => `
<div style="margin-top:10px;padding:10px;background:rgba(255,255,255,0.05);border-radius:6px;border-left:3px solid ${s.complete ? 'var(--wood)' : 'var(--earth)'};"><p><strong>${s.name}</strong> â†’ ${s.result} ê¸°ìš´</p><p style="font-size:0.85rem;margin-top:5px;">${s.desc}</p></div>
`).join('')}
</div>
` : ''}
${advInt.chungHaeso.length ? `
<div class="info-box ${advInt.chungHaeso.some(c => !c.isResolved) ? 'warn' : ''}" style="margin-bottom:10px;"><p><strong>âš¡ ì¶©(æ²–) í•´ì†Œ ë¶„ì„</strong></p>
${advInt.chungHaeso.map(c => `
<div style="margin-top:10px;padding:10px;background:rgba(255,255,255,0.05);border-radius:6px;border-left:3px solid ${c.isResolved ? 'var(--wood)' : 'var(--fire)'};"><p><strong>${c.clash}</strong></p><p style="font-size:0.85rem;color:${c.isResolved ? 'var(--wood)' : 'var(--fire)'};margin-top:5px;">${c.reason}</p></div>
`).join('')}
</div>
` : ''}
${advInt.warnings.length ? `
<div class="info-box warn"><p><strong>âš ï¸ íŠ¹ë³„ ì£¼ì˜ì‚¬í•­</strong></p>
${advInt.warnings.map(w => `
<div style="margin-top:10px;"><p><strong>${w.type}</strong></p><p style="font-size:0.85rem;margin-top:5px;">${w.desc}</p></div>
`).join('')}
</div>
` : ''}
${!advInt.hapHwa.length && !advInt.samhapGuk.length && !advInt.chungHaeso.length && !advInt.warnings.length ?
'<p style="color:var(--gray);">íŠ¹ë³„í•œ í•©í™”ë‚˜ ì¶© ê´€ê³„ê°€ ì—†ì–´ìš”. í‰ì˜¨í•œ ì‚¬ì£¼!</p>' : ''}
`;const gm = calcGongmang(SAJU);document.getElementById('gongmang').innerHTML = `<div class="info-box"><p><strong>ê³µë§:</strong> ${gm.names.join(', ')}<br>${gm.affected.length ? `âš ï¸ ${gm.affected.join(', ')}ì— ê³µë§ì´ ìˆì–´ìš”. í•´ë‹¹ ë¶€ë¶„ì˜ ê¸°ìš´ì´ ì•½í•©ë‹ˆë‹¤.` : 'ì‚¬ì£¼ ë‚´ ê³µë§ì´ ì—†ì–´ìš”!'}</p></div>`;const gmHaeso = analyzeGongmangHaeso(SAJU, gm);document.getElementById('gongmang-haeso').innerHTML = gmHaeso.hasGongmang ? `
${gmHaeso.results.map(r => `
<div class="info-box ${r.resolved ? 'good' : 'warn'}" style="margin-bottom:10px;"><p><strong>${r.position} ê³µë§ (${r.branch})</strong></p><p style="margin-top:8px;font-size:0.9rem;">
${r.resolved ?
`âœ… í•´ì†Œë¨: ${r.method}` :
`âŒ í•´ì†Œë˜ì§€ ì•ŠìŒ`}
</p><p style="margin-top:5px;font-size:0.85rem;color:var(--gray);">${r.effect}</p></div>
`).join('')}
<div class="info-box" style="margin-top:10px;"><p><strong>ğŸ’¡ ê³µë§ í•´ì†Œ ì¡°ê±´</strong></p><p style="margin-top:8px;font-size:0.85rem;line-height:1.6;">
1. ì¶©(æ²–)ìœ¼ë¡œ í•´ì†Œ: ê³µë§ ì§€ì§€ì˜ ë°˜ëŒ€í¸ ì§€ì§€ê°€ ìˆìœ¼ë©´ í•´ì†Œ<br>
2. ì‚¼í•©ìœ¼ë¡œ í•´ì†Œ: ì‚¼í•©ì˜ ë‚˜ë¨¸ì§€ ë‘ ì§€ì§€ê°€ ëª¨ë‘ ìˆìœ¼ë©´ í•´ì†Œ<br>
3. ëŒ€ìš´/ì„¸ìš´ì—ì„œ í•´ì†Œ: ìš´ì—ì„œ í•´ë‹¹ ì¡°ê±´ì´ ì¶©ì¡±ë˜ë©´ ì¼ì‹œì  í•´ì†Œ
</p></div>
` : '<div class="info-box"><p style="color:var(--gray);">ì‚¬ì£¼ ë‚´ ê³µë§ì´ ì—†ì–´ í•´ì†Œ ë¶„ì„ì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤. ğŸ‘</p></div>';const sinsal = calcSinsal(SAJU);document.getElementById('sinsal').innerHTML = sinsal.length ? sinsal.map(s => `<div class="sinsal ${s.t}"><div class="sinsal-icon">${s.i}</div><div><div class="sinsal-name">${s.n}</div><div class="sinsal-desc">${s.d}</div></div></div>`).join('') : '<p style="color:var(--gray);">íŠ¹ë³„í•œ ì‹ ì‚´ì´ ì—†ìŠµë‹ˆë‹¤.</p>';const sinsalPos = analyzeSinsalPosition(SAJU);document.getElementById('sinsal-position').innerHTML = sinsalPos.length ? `
<div class="info-box" style="margin-bottom:10px;"><p style="font-size:0.85rem;color:var(--gray);">ê°™ì€ ì‹ ì‚´ë„ ì–´ëŠ ìë¦¬ì— ìˆëŠëƒì— ë”°ë¼ ì˜ë¯¸ê°€ ë‹¬ë¼ì§‘ë‹ˆë‹¤.</p></div>
${sinsalPos.map(sp => `
<div class="info-box" style="margin-bottom:10px;border-left:3px solid ${sp.sinsal.includes('ë„í™”') ? '#e91e63' : sp.sinsal.includes('ì—­ë§ˆ') ? '#ff9800' : '#9c27b0'};"><p><strong>${sp.sinsal}</strong> - ${sp.position}</p><p style="margin-top:8px;font-size:0.9rem;">${sp.interpretation}</p><p style="margin-top:5px;font-size:0.85rem;color:var(--gold);">ğŸ’¡ ${sp.advice}</p></div>
`).join('')}
` : '<div class="info-box"><p style="color:var(--gray);">ìœ„ì¹˜ë³„ë¡œ ë¶„ì„í•  ì£¼ìš” ì‹ ì‚´ì´ ì—†ìŠµë‹ˆë‹¤.</p></div>';document.getElementById('ai-interpretation').innerHTML = generateAIInterpretation(SAJU, GODS, BIRTH_YEAR, GENDER);renderFortune('total');} catch (error) {console.error('ì‚¬ì£¼ ë Œë”ë§ ì˜¤ë¥˜:', error);toast('ê²°ê³¼ í‘œì‹œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');}}
function renderFortune(type) {const el = document.getElementById('fortune-content');if (!SAJU) { el.innerHTML = '<p>ë¨¼ì € ì‚¬ì£¼ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”.</p>'; return; }
const str = calcStrength(SAJU);if (type === 'today') {el.innerHTML = genTodayFortune(SAJU, GODS);return;}
if (type === 'year') {const cy = new Date().getFullYear();el.innerHTML = genYearFortune(SAJU, GODS, cy);return;}
if (type === 'career') {el.innerHTML = genCareerFortune(SAJU, str, GODS);return;}
if (type === 'love') {el.innerHTML = genLoveFortune(SAJU, str, GODS);return;}
if (type === 'wealth') {el.innerHTML = genWealthFortune(SAJU, str, GODS);return;}
if (type === 'health') {el.innerHTML = genHealthFortune(SAJU, str, GODS);return;}
const dm = SAJU.day.s;const yongEl = ELEMENT[GODS.yong];const colorAdvice = {wood: { color: 'ì´ˆë¡ìƒ‰, ì²­ë¡ìƒ‰', dir: 'ë™ìª½', num: '3, 8', item: 'ë‚˜ë¬´ ì†Œí’ˆ, ì‹ë¬¼, ì±…' },
fire: { color: 'ë¹¨ê°„ìƒ‰, ë³´ë¼ìƒ‰', dir: 'ë‚¨ìª½', num: '2, 7', item: 'ì¡°ëª…, ìº”ë“¤, ì „ìê¸°ê¸°' },
earth: { color: 'ë…¸ë€ìƒ‰, ê°ˆìƒ‰', dir: 'ì¤‘ì•™', num: '5, 10', item: 'ë„ìê¸°, í¬ë¦¬ìŠ¤íƒˆ, ë¶€ë™ì‚°' },
metal: { color: 'í°ìƒ‰, ê¸ˆìƒ‰, ì€ìƒ‰', dir: 'ì„œìª½', num: '4, 9', item: 'ê¸ˆì† ì•¡ì„¸ì„œë¦¬, ì‹œê³„, ìë™ì°¨' },
water: { color: 'ê²€ì€ìƒ‰, íŒŒë€ìƒ‰', dir: 'ë¶ìª½', num: '1, 6', item: 'ìˆ˜ì¡±ê´€, ë¶„ìˆ˜, ê·¸ë¦¼' }};const yongAdvice = colorAdvice[GODS.yong];const typeDesc = {strong: `<strong>ğŸ”¥ ê¸°ìš´ì´ ê°•í•œ ì‚¬ì£¼!</strong><br><br>ìê¸° ì£¼ì¥ì´ í™•ì‹¤í•˜ê³  ë‚¨ì—ê²Œ íœ˜ë‘˜ë¦¬ì§€ ì•ŠëŠ” íƒ€ì…ì´ì—ìš”.<br><br><strong>ì¥ì :</strong> ë¦¬ë”ì‹­, ë¹ ë¥¸ ê²°ì •ë ¥, ë…ë¦½ì‹¬, ì¶”ì§„ë ¥<br><strong>ì£¼ì˜:</strong> ë„ˆë¬´ ê°•í•˜ë©´ "ê³ ì§‘ìŸì´"ë¡œ ë³´ì—¬ìš”. ê°€ë” ë‚¨ì˜ ë§ë„ ë“¤ì–´ì£¼ì„¸ìš”!`,
weak: `<strong>ğŸ’§ ë¶€ë“œëŸ¬ìš´ ê¸°ìš´ì˜ ì‚¬ì£¼!</strong><br><br>í˜‘ë ¥ ì˜í•˜ê³  ì¡°í™”ë¡­ê²Œ ì§€ë‚´ëŠ” íƒ€ì…ì´ì—ìš”.<br><br><strong>ì¥ì :</strong> ëˆˆì¹˜ ë¹ ë¦„, ì ì‘ë ¥, ë°°ë ¤ì‹¬, ê·€ì¸ìš´<br><strong>ì£¼ì˜:</strong> ë„ˆë¬´ ëˆˆì¹˜ ë³´ë©´ ìê¸° ì˜ê²¬ ëª» ë§í•´ìš”. ë‹¹ë‹¹í•˜ê²Œ!`,
balanced: `<strong>âš–ï¸ ê· í˜• ì¡íŒ ì‚¬ì£¼!</strong><br><br>ê°•í•  ë•Œ ê°•í•˜ê³ , ë¶€ë“œëŸ¬ìš¸ ë•Œ ë¶€ë“œëŸ¬ìš´ ë§ŒëŠ¥ íƒ€ì…! ì‚¬ì£¼ì—ì„œ ê°€ì¥ ì¢‹ì€ ìƒíƒœì˜ˆìš”!<br><br><strong>ì¥ì :</strong> ìƒí™© íŒë‹¨ ë¹ ë¦„, ì ì‘ë ¥ ìµœê³ , ì–´ë””ì„œë“  ì˜ ì‚´ì•„ë‚¨ì•„ìš”`};el.innerHTML = `
<div class="info-box gold"><p><strong>ğŸ“Š ì´ìš´ ë¶„ì„</strong></p></div><div class="info-box" style="margin-top:12px;"><p style="line-height:1.8;">${typeDesc[GODS.type]}</p></div>
${str.extreme ? `<div class="info-box warn" style="margin-top:12px;"><p><strong>âš¡ ${str.extreme} ì‚¬ì£¼!</strong><br>${str.extreme === 'ê·¹ì‹ ê°•' ? 'ê¸°ìš´ì´ ë§¤ìš° ê°•í•´ì„œ ì¢…ê²©(ì¢…ì™•ê²©, ì¢…ê°•ê²©)ì¼ ìˆ˜ ìˆì–´ìš”. ìê¸° ëœ»ëŒ€ë¡œ ì‚¬ëŠ” ê²Œ ì¢‹ì•„ìš”!' : 'ê¸°ìš´ì´ ë§¤ìš° ì•½í•´ì„œ ì¢…ê²©(ì¢…ì•„ê²©, ì¢…ì¬ê²©, ì¢…ì‚´ê²©)ì¼ ìˆ˜ ìˆì–´ìš”. ë‚¨ì„ ì˜ ë”°ë¥´ê³  í˜‘ì¡°í•˜ëŠ” ê²Œ ì¢‹ì•„ìš”!'}</p></div>` : ''}
<div class="info-box good" style="margin-top:15px;"><p><strong>ğŸ¯ ìš©ì‹  í™œìš©ë²•</strong></p><p style="margin-top:8px;">ìš©ì‹ ì¸ <strong>${yongEl.n}(${yongEl.k})</strong> ê¸°ìš´ì„ ê°€ê¹Œì´ í•˜ì„¸ìš”!</p><ul style="margin-top:10px;margin-left:15px;line-height:1.8;"><li>ğŸ¨ í–‰ìš´ì˜ ìƒ‰: ${yongAdvice.color}</li><li>ğŸ§­ í–‰ìš´ì˜ ë°©í–¥: ${yongAdvice.dir}</li><li>ğŸ”¢ í–‰ìš´ì˜ ìˆ«ì: ${yongAdvice.num}</li><li>âœ¨ í–‰ìš´ì˜ ì•„ì´í…œ: ${yongAdvice.item}</li></ul></div>`;}
function getTodayFortune() {const today = new Date();const dp = calcDayPillar(today.getFullYear(), today.getMonth() + 1, today.getDate());const god = getTenGod(dp.s, SAJU.day.s);const isYong = [dp.s.e, dp.b.e].includes(GODS.yong);const isHee = [dp.s.e, dp.b.e].includes(GODS.hee);const isGi = [dp.s.e, dp.b.e].includes(GODS.gi);let rating, advice;if (isYong) {rating = 'âœ¨ ëŒ€ê¸¸(å¤§å‰)';advice = 'ì˜¤ëŠ˜ì€ ìš©ì‹ ì˜ ê¸°ìš´ì´ ê°•í•˜ê²Œ ë“¤ì–´ì˜¤ëŠ” ë‚ ! ì¤‘ìš”í•œ ì¼ì„ ì¶”ì§„í•˜ì„¸ìš”. ì ê·¹ì ìœ¼ë¡œ ì›€ì§ì´ë©´ ì¢‹ì€ ê²°ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.';} else if (isHee) {rating = 'ğŸ˜Š ê¸¸(å‰)';advice = 'í¬ì‹ ì˜ ê¸°ìš´ì´ ë„ì™€ì£¼ëŠ” ë‚ ì…ë‹ˆë‹¤. ê³„íší•œ ì¼ë“¤ì´ ìˆœì¡°ë¡­ê²Œ ì§„í–‰ë©ë‹ˆë‹¤. ìƒˆë¡œìš´ ì‹œë„ë„ ì¢‹ìŠµë‹ˆë‹¤.';} else if (isGi) {rating = 'âš ï¸ ì¡°ì‹¬';advice = 'ê¸°ì‹ ì˜ ê¸°ìš´ì´ ê°•í•œ ë‚ ì´ë‹ˆ ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”. ì¤‘ìš”í•œ ê²°ì •ì€ ë¯¸ë£¨ê³ , ê¸°ì¡´ì— í•˜ë˜ ì¼ì— ì§‘ì¤‘í•˜ì„¸ìš”.';} else {rating = 'ğŸ˜ í‰ì˜¨';advice = 'í‰ë²”í•œ í•˜ë£¨ì…ë‹ˆë‹¤. ê¾¸ì¤€íˆ ì¼ìƒì„ ìœ ì§€í•˜ë©´ì„œ ì‘ì€ í–‰ë³µì„ ì°¾ìœ¼ì„¸ìš”.';}
return `<div class="info-box"><p><strong>ğŸ“… ì˜¤ëŠ˜ì˜ ìš´ì„¸</strong><span style="color:var(--gold);">(${dp.s.c}${dp.b.c}ì¼)</span></p><div style="margin-top:12px;text-align:center;font-size:18px;">${rating}</div><p style="margin-top:12px;line-height:1.8;">
ì˜¤ëŠ˜ì˜ ì¼ì§„: <strong>${dp.s.c}${dp.b.c}</strong> (${ELEMENT[dp.s.e].k}${ELEMENT[dp.b.e].k})<br>
ì˜¤ëŠ˜ì˜ ì‹­ì‹ : <strong>${god.k}</strong> - ${god.d}
</p><div style="margin-top:15px;padding:12px;background:rgba(255,255,255,0.05);border-radius:8px;"><p><strong>ğŸ’¡ ì˜¤ëŠ˜ì˜ ì¡°ì–¸</strong></p><p style="margin-top:8px;line-height:1.6;">${advice}</p></div></div>`;}
function getYearFortune() {const cy = new Date().getFullYear();const yp = calcYearPillar(cy, 6, 1);const god = getTenGod(yp.s, SAJU.day.s);const isYong = [yp.s.e, yp.b.e].includes(GODS.yong);const isHee = [yp.s.e, yp.b.e].includes(GODS.hee);const isGi = [yp.s.e, yp.b.e].includes(GODS.gi);const isDoubleGi = yp.s.e === GODS.gi && yp.b.e === GODS.gi;const mbi = SAJU.month ? BRANCH.indexOf(SAJU.month.b) : -1;const isSummerBorn = [5, 6, 7].includes(mbi);const isJoryeol = isSummerBorn && GODS.gi === 'fire';let rating, advice;if (isYong) {rating = 'ğŸŒŸ ëŒ€ê¸¸ë…„(å¤§å‰å¹´)';advice = 'ì˜¬í•´ëŠ” ìš©ì‹ ì˜ í•´! 10ë…„ì— í•œ ë²ˆ ì˜¤ëŠ” ê¸°íšŒì˜ í•´ì…ë‹ˆë‹¤. ì ê·¹ì ìœ¼ë¡œ ë„ì „í•˜ê³  í™•ì¥í•˜ì„¸ìš”. ì´ì§, ì°½ì—…, ê²°í˜¼ ë“± í° ê²°ì •ì— ì¢‹ìŠµë‹ˆë‹¤.';} else if (isHee) {rating = 'ğŸ˜Š ê¸¸ë…„(å‰å¹´)';advice = 'í¬ì‹ ì˜ ê¸°ìš´ì´ ë„ì™€ì£¼ëŠ” í•´ì…ë‹ˆë‹¤. í•˜ëŠ” ì¼ì´ ìˆœì¡°ë¡­ê³  ì£¼ë³€ì˜ ë„ì›€ì„ ë°›ê¸° ì‰½ìŠµë‹ˆë‹¤. ì¸ë§¥ì„ ë„“íˆê³  ë°°ì›€ì— íˆ¬ìí•˜ì„¸ìš”.';} else if (isDoubleGi) {rating = 'ğŸš¨ íŠ¹ë³„ ì£¼ì˜í•´ì•¼ í•  í•´';advice = `ì²œê°„(${yp.s.c})ê³¼ ì§€ì§€(${yp.b.c}) ëª¨ë‘ ê¸°ì‹ (${ELEMENT[GODS.gi].k}) ì˜¤í–‰ì…ë‹ˆë‹¤! ê¸°ì‹ ì´ 2ë°°ë¡œ ê°•í•˜ê²Œ ë“¤ì–´ì˜¤ëŠ” í•´ì´ë‹ˆ ê±´ê°•, ì¬ë¬¼, ì¸ê°„ê´€ê³„ ëª¨ë‘ ê°ë³„íˆ ì¡°ì‹¬í•˜ì„¸ìš”. ë¬´ë¦¬í•œ í™•ì¥, íˆ¬ì, ì´ì§ì€ í”¼í•˜ê³  ìˆ˜ë¹„ ëª¨ë“œë¡œ ì „í™˜í•˜ì„¸ìš”.${isJoryeol ? ' íŠ¹íˆ ì—¬ë¦„ìƒìœ¼ë¡œ ì¡°ì—´(ç‡¥ç†±)í•œ ì‚¬ì£¼ì¸ë° ç«ê°€ 2ë°°ë¡œ ë“¤ì–´ì˜¤ë©´ ì‹¬í˜ˆê´€, ì•ˆêµ¬, ì—¼ì¦ ì§ˆí™˜ì— ê°ë³„íˆ ì£¼ì˜í•˜ì„¸ìš”!' : ''}`;} else if (isGi) {rating = 'âš ï¸ ì¡°ì‹¬í•´ì•¼ í•  í•´';advice = 'ê¸°ì‹ ì˜ í•´ì´ë‹ˆ ë¬´ë¦¬í•œ í™•ì¥ì´ë‚˜ íˆ¬ìëŠ” í”¼í•˜ì„¸ìš”. ê±´ê°• ê´€ë¦¬ì— ì‹ ê²½ ì“°ê³ , ì•ˆì •ì„ ìœ ì§€í•˜ë©´ì„œ ë‚´ì‹¤ì„ ë‹¤ì§€ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.';} else {rating = 'ğŸ˜ í‰ë…„(å¹³å¹´)';advice = 'í° ë³€í™” ì—†ì´ í‰íƒ„í•œ í•´ì…ë‹ˆë‹¤. ë¬µë¬µíˆ ìê¸° ì¼ì— ì¶©ì‹¤í•˜ë©´ì„œ ë‹¤ìŒ ê¸°íšŒë¥¼ ì¤€ë¹„í•˜ì„¸ìš”.';}
return `<div class="info-box"><p><strong>ğŸ“† ${cy}ë…„ ìš´ì„¸</strong><span style="color:var(--gold);">(${yp.s.c}${yp.b.c}ë…„)</span></p><div style="margin-top:12px;text-align:center;font-size:18px;">${rating}</div><p style="margin-top:12px;line-height:1.8;">
ì˜¬í•´ì˜ ì„¸ìš´: <strong>${yp.s.c}${yp.b.c}</strong> (${ELEMENT[yp.s.e].k}${ELEMENT[yp.b.e].k})<br>
ì˜¬í•´ì˜ ì‹­ì‹ : <strong>${god.k}</strong> - ${god.d}
</p><div style="margin-top:15px;padding:12px;background:rgba(255,255,255,0.05);border-radius:8px;"><p><strong>ğŸ’¡ ì˜¬í•´ì˜ ì¡°ì–¸</strong></p><p style="margin-top:8px;line-height:1.6;">${advice}</p></div><div style="margin-top:12px;padding:12px;background:rgba(253,216,53,0.1);border-radius:8px;"><p><strong>ğŸ“… ì˜¬í•´ ì¢‹ì€ ë‹¬</strong></p><p style="margin-top:8px;">ìš©ì‹ (${ELEMENT[GODS.yong].k})ì´ ê°•í•œ ë‹¬: ${getGoodMonths()}</p></div></div>`;}
function getGoodMonths() {const monthElements = ['water','water','wood','wood','earth','fire','fire','earth','metal','metal','earth','water'];const goodMonths = [];monthElements.forEach((el, i) => {if (el === GODS.yong || el === GODS.hee) goodMonths.push((i + 1) + 'ì›”');});return goodMonths.length ? goodMonths.join(', ') : 'ìƒë°˜ê¸°ë³´ë‹¤ í•˜ë°˜ê¸°ê°€ ì¢‹ìŠµë‹ˆë‹¤';}
function generateAIInterpretation(saju, gods, birthYear, gender) {const dm = saju.day.s;const str = calcStrength(saju);const currentYear = new Date().getFullYear();const age = currentYear - birthYear + 1;const interactions = calcInteractions(saju);const samhap = gods?.samhap || analyzeSamhapBureau(saju);const format = calcFormat(saju, null, samhap);const sinsal = calcSinsal(saju);const gongmang = calcGongmang(saju);const luck = calcLuck(saju, birthYear, gender, gods, BIRTH_MONTH, BIRTH_DAY, BIRTH_HOUR);const curLuck = luck.find(l => l.isCur);const elCount = {wood:0, fire:0, earth:0, metal:0, water:0};[saju.year, saju.month, saju.day, saju.hour].forEach(p => {if(p && p.s) elCount[p.s.e]++;if(p && p.b) elCount[p.b.e]++;});const maxEl = Object.entries(elCount).reduce((a,b) => b[1] > a[1] ? b : a);const minEl = Object.entries(elCount).filter(e => e[1] === 0);const hasGoodHap = interactions.some(i => i.t.includes('í•©'));const hasBadChung = interactions.some(i => i.t.includes('ì¶©'));const goodSinsal = sinsal.filter(s => s.t === 'good');const badSinsal = sinsal.filter(s => s.t === 'bad');let coreMessage = '';let priority = [];const dmName = `${dm.k}${ELEMENT[dm.e].k}`;const dmHanja = `${dm.c}${ELEMENT[dm.e].c}`;if (str.type === 'strong') {coreMessage = `<strong>${dmName}(${dmHanja})</strong> ì¼ê°„ì´ ${str.pct}%ë¡œ <span style="color:var(--fire);">ì‹ ê°•(èº«å¼º)</span>í•œ ì‚¬ì£¼ì…ë‹ˆë‹¤. ìì‹ ì˜ ì˜ì§€ê°€ ê°•í•˜ê³  ì£¼ë„ì ìœ¼ë¡œ ì‚´ì•„ê°€ëŠ” íƒ€ì…ì´ì—ìš”.`;priority.push('ìì‹ ë§Œì˜ ê¸¸ì„ ê°œì²™í•˜ëŠ” ê²ƒì´ ìœ ë¦¬');} else if (str.type === 'weak') {coreMessage = `<strong>${dmName}(${dmHanja})</strong> ì¼ê°„ì´ ${str.pct}%ë¡œ <span style="color:var(--water);">ì‹ ì•½(èº«å¼±)</span>í•œ ì‚¬ì£¼ì…ë‹ˆë‹¤. í˜‘ë ¥ê³¼ ì¡°í™”ë¥¼ í†µí•´ ë¹›ë‚˜ëŠ” íƒ€ì…ì´ì—ìš”.`;priority.push('ì¢‹ì€ íŒŒíŠ¸ë„ˆì™€ í•¨ê»˜í•˜ëŠ” ê²ƒì´ ì¤‘ìš”');} else {coreMessage = `<strong>${dmName}(${dmHanja})</strong> ì¼ê°„ì´ ${str.pct}%ë¡œ <span style="color:var(--gold);">ê· í˜• ì¡íŒ</span> ì‚¬ì£¼ì…ë‹ˆë‹¤. ìƒí™©ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•  ìˆ˜ ìˆì–´ìš”.`;priority.push('ì–´ë–¤ í™˜ê²½ì—ì„œë“  ì ì‘ ê°€ëŠ¥');}
let conflictAnalysis = [];if (hasBadChung && hasGoodHap) {conflictAnalysis.push({type: 'resolved',
msg: 'ì‚¬ì£¼ì— ì¶©(æ²–)ì´ ìˆì§€ë§Œ í•©(åˆ)ì´ í•¨ê»˜ ìˆì–´ ê·¸ ì˜í–¥ì´ ì™„í™”ë©ë‹ˆë‹¤. ê°ˆë“± í›„ í™”í•´í•˜ëŠ” íŒ¨í„´ì´ ìˆì–´ìš”.'});} else if (hasBadChung) {conflictAnalysis.push({type: 'caution',
msg: 'ì‚¬ì£¼ì— ì¶©(æ²–)ì´ ìˆì–´ ë³€í™”ì™€ ê°ˆë“±ì´ ë§ì„ ìˆ˜ ìˆì–´ìš”. í•˜ì§€ë§Œ ì´ëŠ” ì„±ì¥ì˜ ê¸°íšŒê°€ ë˜ê¸°ë„ í•©ë‹ˆë‹¤.'});}
if (minEl.length >= 2) {conflictAnalysis.push({type: 'missing',
msg: `${minEl.map(e => ELEMENT[e[0]].k).join(', ')} ì˜¤í–‰ì´ ì—†ì–´ í•´ë‹¹ ê¸°ìš´ì„ ë³´ì™„í•˜ë©´ ì¢‹ì•„ìš”. ìš©ì‹ (${ELEMENT[gods.yong].k})ìœ¼ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ë³´ì™„ë©ë‹ˆë‹¤.`});}
if (str.extreme) {conflictAnalysis.push({type: 'extreme',
msg: `${str.extreme} ì‚¬ì£¼ë¡œ, ì¼ë°˜ì ì¸ í•´ì„ë³´ë‹¤ ì¢…ê²©(å¾æ ¼)ìœ¼ë¡œ ë³´ëŠ” ê²ƒì´ ë” ë§ì„ ìˆ˜ ìˆì–´ìš”. ${str.extreme === 'ê·¹ì‹ ê°•' ? 'ìê¸° ëœ»ëŒ€ë¡œ ë°€ê³  ë‚˜ê°€ëŠ” ê²Œ ì˜¤íˆë ¤ ì¢‹ì•„ìš”.' : 'í˜‘ë ¥í•˜ê³  ë§¡ê¸°ëŠ” ê²Œ ì„±ê³µì˜ ì—´ì‡ ì…ë‹ˆë‹¤.'}`});}
let timingGuide = '';const yearPillar = calcYearPillar(currentYear, 6, 1);const isYongYear = [yearPillar.s.e, yearPillar.b.e].includes(gods.yong);const isGiYear = [yearPillar.s.e, yearPillar.b.e].includes(gods.gi);if (curLuck) {const isGoodLuck = curLuck.rating === 'good';const luckEl = ELEMENT[curLuck.s.e].k;if (isGoodLuck && isYongYear) {timingGuide = `ğŸŒŸ <strong>ì§€ê¸ˆì´ ìµœê³ ì˜ ì‹œê¸°!</strong><br>ëŒ€ìš´ê³¼ ì˜¬í•´ ìš´ì´ ëª¨ë‘ ì¢‹ìŠµë‹ˆë‹¤. ${curLuck.startAge}~${curLuck.endAge}ì„¸ ëŒ€ìš´(${curLuck.s.c}${curLuck.b.c})ì—ì„œ ${luckEl} ê¸°ìš´ì´ ë„ì™€ì£¼ê³ , ${currentYear}ë…„ë„ ìš©ì‹ ì˜ í•´ì˜ˆìš”. <span style="color:var(--gold);">ì ê·¹ì ìœ¼ë¡œ ë„ì „í•˜ì„¸ìš”!</span>`;} else if (isGoodLuck && isGiYear) {timingGuide = `âš–ï¸ <strong>ê¸°íšŒì™€ ì‹œí—˜ì´ ê³µì¡´</strong><br>ëŒ€ìš´ì€ ì¢‹ì§€ë§Œ ì˜¬í•´ëŠ” ê¸°ì‹ ì˜ í•´ì…ë‹ˆë‹¤. í° í‹€ì—ì„œëŠ” ìƒìŠ¹ ì¤‘ì´ë‹ˆ ë‹¹ì¥ì˜ ì–´ë ¤ì›€ì— í”ë“¤ë¦¬ì§€ ë§ˆì„¸ìš”. <span style="color:var(--earth);">ë‚´ë…„ì„ ìœ„í•œ ê¸°ë°˜ì„ ë‹¤ì§€ì„¸ìš”.</span>`;} else if (!isGoodLuck && isYongYear) {timingGuide = `ğŸ’« <strong>ë°˜ì „ì˜ í•´!</strong><br>ëŒ€ìš´ì´ ì•½í•œ ì‹œê¸°ì§€ë§Œ ì˜¬í•´ëŠ” ìš©ì‹ ì˜ í•´ì…ë‹ˆë‹¤. ì´ ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”! <span style="color:var(--gold);">ì§€ê¸ˆ ì›€ì§ì´ë©´ ì¢‹ì€ ê²°ê³¼ê°€ ìˆì–´ìš”.</span>`;} else if (!isGoodLuck && isGiYear) {timingGuide = `ğŸ›¡ï¸ <strong>ì¸ë‚´ì˜ ì‹œê¸°</strong><br>ëŒ€ìš´ê³¼ ì„¸ìš´ ëª¨ë‘ ì¡°ì‹¬í•´ì•¼ í•  ë•Œì…ë‹ˆë‹¤. ë¬´ë¦¬í•œ í™•ì¥ë³´ë‹¤ <span style="color:var(--water);">ë‚´ì‹¤ì„ ë‹¤ì§€ê³  ê±´ê°•ì„ ì±™ê¸°ì„¸ìš”.</span> ê³§ ì¢‹ì€ ìš´ì´ ì˜µë‹ˆë‹¤.`;} else {timingGuide = `ğŸ˜Š <strong>í‰ì˜¨í•œ íë¦„</strong><br>${curLuck.startAge}~${curLuck.endAge}ì„¸ ëŒ€ìš´(${curLuck.s.c}${curLuck.b.c})ì„ ë³´ë‚´ê³  ìˆì–´ìš”. ê¾¸ì¤€í•¨ì´ ë‹µì…ë‹ˆë‹¤.`;}}
let personalAdvice = [];if (age < 30) {personalAdvice.push({icon:'ğŸ“š', title:'20ëŒ€ ì¡°ì–¸', msg:`${ELEMENT[gods.yong].k} ê´€ë ¨ ë¶„ì•¼ë¥¼ ê³µë¶€í•˜ê±°ë‚˜ ê²½í—˜í•˜ì„¸ìš”. í‰ìƒì˜ ìì‚°ì´ ë©ë‹ˆë‹¤.`});} else if (age < 40) {personalAdvice.push({icon:'ğŸš€', title:'30ëŒ€ ì¡°ì–¸', msg:`ì§€ê¸ˆ ìŒ“ëŠ” ê²ƒë“¤ì´ 40ëŒ€ì˜ ì—´ë§¤ê°€ ë©ë‹ˆë‹¤. ${format.b.split(',')[0]} ë¶„ì•¼ì—ì„œ ì „ë¬¸ì„±ì„ í‚¤ìš°ì„¸ìš”.`});} else if (age < 50) {personalAdvice.push({icon:'ğŸ¯', title:'40ëŒ€ ì¡°ì–¸', msg:'ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ë¦¬ë”ì‹­ì„ ë°œíœ˜í•  ë•Œì…ë‹ˆë‹¤. í›„ë°° ì–‘ì„±ë„ ì¢‹ì•„ìš”.'});} else {personalAdvice.push({icon:'ğŸŒ³', title:'ì¸ìƒ í›„ë°˜ ì¡°ì–¸', msg:'ì§€í˜œë¥¼ ë‚˜ëˆ„ê³  ê±´ê°•ì„ ì±™ê¸°ì„¸ìš”. ì •ì‹ ì  í’ìš”ê°€ ì§„ì •í•œ í–‰ë³µì…ë‹ˆë‹¤.'});}
const yongAdvice = {wood: {actions:['ë™ìª½ìœ¼ë¡œ ì´ì‚¬/ì—¬í–‰', 'ì•„ì¹¨ ìš´ë™', 'ì´ˆë¡ìƒ‰ ì¸í…Œë¦¬ì–´', 'ë…ì„œ/ê³µë¶€', 'ìƒˆë¡œìš´ ì‹œì‘'], avoid:'ê³¼ë„í•œ ê²½ìŸ, ê¸ˆì† ì¸í…Œë¦¬ì–´'},
fire: {actions:['ë‚¨ìª½ ë°©í–¥', 'ì‚¬ëŒ ë§ì€ ê³³', 'ë¹¨ê°„ìƒ‰ í¬ì¸íŠ¸', 'SNS í™œë™', 'ë°œí‘œ/ê°•ì—°'], avoid:'ì–´ë‘ìš´ í™˜ê²½, í˜¼ì ìˆê¸°'},
earth: {actions:['ì¤‘ì‹¬ë¶€ ìœ„ì¹˜', 'ë¶€ë™ì‚° ê´€ì‹¬', 'ë…¸ë€ìƒ‰/ê°ˆìƒ‰', 'ì‹ ë¢° ìŒ“ê¸°', 'ì•ˆì •ì  íˆ¬ì'], avoid:'ì¦ì€ ì´ì‚¬, ê¸‰í•œ ë³€í™”'},
metal: {actions:['ì„œìª½ ë°©í–¥', 'ê¸ˆìœµ/íˆ¬ì', 'í°ìƒ‰/ê¸ˆìƒ‰', 'ì›ì¹™ ì„¸ìš°ê¸°', 'ì •ë¦¬ì •ëˆ'], avoid:'ìš°ìœ ë¶€ë‹¨í•¨, ì–´ìˆ˜ì„ í•œ í™˜ê²½'},
water: {actions:['ë¶ìª½ ë°©í–¥', 'ìœ ì—°í•œ ì‚¬ê³ ', 'ê²€ì€ìƒ‰/íŒŒë€ìƒ‰', 'ë„¤íŠ¸ì›Œí‚¹', 'ì—¬í–‰'], avoid:'ê³ ì§‘, í•œ ê³³ì— ë¨¸ë¬´ë¥´ê¸°'}};const yongAction = yongAdvice[gods.yong];personalAdvice.push({icon:'âœ¨',
title:`ìš©ì‹ (${ELEMENT[gods.yong].k}) í™œìš©ë²•`,
msg:`ì¶”ì²œ: ${yongAction.actions.slice(0,3).join(', ')}<br>í”¼í•´ì•¼ í•  ê²ƒ: ${yongAction.avoid}`});personalAdvice.push({icon:'ğŸ’¼',
title:'ì ì„± ë¶„ì•¼',
msg:`${format.n}ì— ë§ëŠ” ë¶„ì•¼: ${format.b}`});if (goodSinsal.length > 0) {personalAdvice.push({icon:'ğŸŒŸ',
title:'ê¸¸ì‹  í™œìš©',
msg:`${goodSinsal.map(s => s.n).join(', ')}ì´ ìˆì–´ìš”. ì´ ê¸°ìš´ì„ ë¯¿ê³  ë„ì „í•˜ì„¸ìš”!`});}
let html = `
<div style="padding:15px;background:linear-gradient(135deg,rgba(156,39,176,0.1),rgba(103,58,183,0.05));border-radius:12px;margin-bottom:15px;"><p style="font-size:0.85rem;color:var(--gray);margin-bottom:10px;">ğŸ§  AIê°€ ë‹¹ì‹ ì˜ ì‚¬ì£¼ë¥¼ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í–ˆìŠµë‹ˆë‹¤</p><p style="line-height:1.8;font-size:1rem;">${coreMessage}</p></div>
`;if (conflictAnalysis.length > 0) {html += `
<div class="info-box ${conflictAnalysis.some(c => c.type === 'caution' || c.type === 'extreme') ? 'warn' : ''}" style="margin-bottom:15px;"><p style="margin-bottom:10px;"><strong>âš–ï¸ ìƒì¶© ìš”ì†Œ ë¶„ì„</strong></p>
${conflictAnalysis.map(c => `
<div style="padding:10px;margin:8px 0;background:rgba(255,255,255,0.05);border-radius:8px;border-left:3px solid ${c.type === 'caution' ? 'var(--fire)' : c.type === 'resolved' ? 'var(--wood)' : 'var(--gold)'};"><p style="font-size:0.9rem;line-height:1.6;">${c.msg}</p></div>
`).join('')}
</div>
`;}
html += `
<div class="info-box gold" style="margin-bottom:15px;"><p style="margin-bottom:10px;"><strong>ğŸ“… ì§€ê¸ˆ ì´ ì‹œê¸° ê°€ì´ë“œ (${currentYear}ë…„, ${age}ì„¸)</strong></p><p style="line-height:1.8;font-size:0.95rem;">${timingGuide}</p></div>
`;html += `
<div class="info-box" style="margin-bottom:15px;"><p style="margin-bottom:12px;"><strong>ğŸ’¡ ë§ì¶¤ ì¡°ì–¸</strong></p>
${personalAdvice.map(a => `
<div style="padding:12px;margin:8px 0;background:rgba(255,255,255,0.05);border-radius:8px;"><p style="font-weight:bold;margin-bottom:5px;">${a.icon} ${a.title}</p><p style="font-size:0.9rem;line-height:1.6;color:var(--gray);">${a.msg}</p></div>
`).join('')}
</div>
`;if (priority.length > 0) {html += `
<div style="padding:15px;background:linear-gradient(135deg,var(--gold),var(--gold-dark));border-radius:12px;color:var(--red-dark);text-align:center;"><p style="font-weight:bold;font-size:1.1rem;">ğŸ¯ í•µì‹¬ ë©”ì‹œì§€</p><p style="margin-top:8px;font-size:0.95rem;">"${priority[0]}"</p></div>
`;}
return html;}
function showTodayFortune() {const el = document.getElementById('today-fortune');el.style.display = 'block';document.getElementById('today-fortune-content').innerHTML = getTodayFortune();}
function copySajuForAI() {if (!SAJU) { toast('ë¨¼ì € ì‚¬ì£¼ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”'); return; }
try {const str = calcStrength(SAJU);const dm = SAJU.day.s;const samhap = GODS?.samhap || analyzeSamhapBureau(SAJU);const format = calcFormat(SAJU, str, samhap);const interactions = calcInteractions(SAJU) || [];const sinsal = calcSinsal(SAJU) || [];const gongmang = calcGongmang(SAJU);const luck = calcLuck(SAJU, BIRTH_YEAR, GENDER, GODS, BIRTH_MONTH, BIRTH_DAY, BIRTH_HOUR) || [];const curLuck = luck.find(l => l.isCur);const currentYear = new Date().getFullYear();const age = currentYear - BIRTH_YEAR + 1;const ilju = getIljuDesc(SAJU.day.s, SAJU.day.b);const yearGodObj = getTenGod(SAJU.year.s, dm);const yearBranchIdx = BRANCH.findIndex(b => b.c === SAJU.year.b.c);const hasSikSangWithRoot = yearGodObj && ['ìƒê´€','ì‹ì‹ '].includes(yearGodObj.k) &&
[5, 6].includes(yearBranchIdx);const canBeJonggeok = str.extreme && !hasSikSangWithRoot;const elCount = {wood:0, fire:0, earth:0, metal:0, water:0};[SAJU.year, SAJU.month, SAJU.day, SAJU.hour].forEach(p => {if(p && p.s) elCount[p.s.e]++;if(p && p.b) elCount[p.b.e]++;});const yearGod = getTenGod(SAJU.year.s, dm);const monthGod = getTenGod(SAJU.month.s, dm);const hourGod = SAJU.hour ? getTenGod(SAJU.hour.s, dm) : null;const getBranchYang = (branch) => {const idx = BRANCH.findIndex(b => b.c === branch.c);return idx % 2 === 0;};const yearBranchYang = getBranchYang(SAJU.year.b) ? 'é™½' : 'é™°';const monthBranchYang = getBranchYang(SAJU.month.b) ? 'é™½' : 'é™°';const dayBranchYang = getBranchYang(SAJU.day.b) ? 'é™½' : 'é™°';const hourBranchYang = SAJU.hour ? (getBranchYang(SAJU.hour.b) ? 'é™½' : 'é™°') : '';const yearBranchGod = getTenGod({e: SAJU.year.b.e, y: getBranchYang(SAJU.year.b)}, dm);const monthBranchGod = getTenGod({e: SAJU.month.b.e, y: getBranchYang(SAJU.month.b)}, dm);const dayBranchGod = getTenGod({e: SAJU.day.b.e, y: getBranchYang(SAJU.day.b)}, dm);const hourBranchGod = SAJU.hour ? getTenGod({e: SAJU.hour.b.e, y: getBranchYang(SAJU.hour.b)}, dm) : null;const dmEl = dm.e;const elOrder = ['wood', 'fire', 'earth', 'metal', 'water'];const dmIdx = elOrder.indexOf(dmEl);const tenGodMap = {peer: elOrder[dmIdx],
output: elOrder[(dmIdx + 1) % 5],
wealth: elOrder[(dmIdx + 2) % 5],
officer: elOrder[(dmIdx + 3) % 5],
seal: elOrder[(dmIdx + 4) % 5]};const mbi = BRANCH.findIndex(br => br.c === SAJU.month.b.c);const seasonMap = {0:'ê²¨ìš¸',1:'í† ì™•',2:'ë´„',3:'ë´„',4:'í† ì™•',5:'ì—¬ë¦„',6:'ì—¬ë¦„',7:'í† ì™•',8:'ê°€ì„',9:'ê°€ì„',10:'í† ì™•',11:'ê²¨ìš¸'};const elSeasonMapKr = {ë´„:'wood', ì—¬ë¦„:'fire', ê°€ì„:'metal', ê²¨ìš¸:'water', í† ì™•:'earth'};const monthSeason = seasonMap[mbi];const seasonEl = elSeasonMapKr[monthSeason];const deukRyung = (dmEl === seasonEl) || (tenGodMap.seal === seasonEl);const yearStemIdx = STEM.indexOf(SAJU.year.s);const yearIsYang = yearStemIdx % 2 === 0;const luckDirection = (yearIsYang && GENDER === 'm') || (!yearIsYang && GENDER === 'f') ? 'ìˆœí–‰(é †è¡Œ)' : 'ì—­í–‰(é€†è¡Œ)';const yearState = getTwelveState(dm, SAJU.year.b);const monthState = getTwelveState(dm, SAJU.month.b);const dayState = getTwelveState(dm, SAJU.day.b);const hourState = SAJU.hour ? getTwelveState(dm, SAJU.hour.b) : null;let jjText = '';try {const jjAnalysis = analyzeJijanggan(SAJU);if (jjAnalysis && jjAnalysis.pillars) {jjText = `â€¢ ë…„ì§€ ${SAJU.year.b.c}: ${jjAnalysis.pillars[0]?.hidden?.map(h => h.stem.c + '(' + h.stem.k + ',' + h.type + ',' + h.god.k + ')').join(', ') || '-'}
â€¢ ì›”ì§€ ${SAJU.month.b.c}: ${jjAnalysis.pillars[1]?.hidden?.map(h => h.stem.c + '(' + h.stem.k + ',' + h.type + ',' + h.god.k + ')').join(', ') || '-'}
â€¢ ì¼ì§€ ${SAJU.day.b.c}: ${jjAnalysis.pillars[2]?.hidden?.map(h => h.stem.c + '(' + h.stem.k + ',' + h.type + ',' + h.god.k + ')').join(', ') || '-'}`;if (SAJU.hour && jjAnalysis.pillars[3]) {jjText += `\nâ€¢ ì‹œì§€ ${SAJU.hour.b.c}: ${jjAnalysis.pillars[3]?.hidden?.map(h => h.stem.c + '(' + h.stem.k + ',' + h.type + ',' + h.god.k + ')').join(', ') || '-'}`;}}} catch(e) { jjText = 'â€¢ ì§€ì¥ê°„ ë¶„ì„ ë°ì´í„° ì—†ìŒ'; }
let ttText = '';try {const ttAnalysis = analyzeTonggeunTougan(SAJU);const tgText = ttAnalysis?.tonggeun?.length ?
ttAnalysis.tonggeun.map(t => t.stem + 'ì´ ' + (t.roots?.map(r => r.pillar + r.branch).join(',') || '')).join('; ') : 'í†µê·¼ ì—†ìŒ';const tuText = ttAnalysis?.tougan?.length ?
ttAnalysis.tougan.map(t => t.stem + '(' + t.god + ')').join(', ') : 'íˆ¬ê°„ ì—†ìŒ';ttText = `â€¢ í†µê·¼: ${tgText}\nâ€¢ íˆ¬ê°„: ${tuText}`;} catch(e) { ttText = 'â€¢ í†µê·¼/íˆ¬ê°„ ë¶„ì„ ë°ì´í„° ì—†ìŒ'; }
let ycText = '';try {const yukcheon = analyzeYukcheon(SAJU, GENDER);if (yukcheon) {ycText = `â€¢ ë°°ìš°ìì„±(${yukcheon.spouse?.god || '-'}): ${yukcheon.spouse?.count > 0 ? yukcheon.spouse.count + 'ê°œ ìˆìŒ' : 'ì—†ìŒ'} - ${yukcheon.spouse?.analysis || '-'}
â€¢ ìë…€ì„±(${yukcheon.children?.gods?.join('/') || '-'}): ${yukcheon.children?.count > 0 ? 'ìˆìŒ' : 'ì—†ìŒ'} - ${yukcheon.children?.analysis || '-'}
â€¢ ë¶€ì¹œ(í¸ì¬): ${yukcheon.parents?.father?.analysis || '-'}
â€¢ ëª¨ì¹œ(ì •ì¸): ${yukcheon.parents?.mother?.analysis || '-'}`;}} catch(e) { ycText = 'â€¢ ìœ¡ì¹œ ë¶„ì„ ë°ì´í„° ì—†ìŒ'; }
let gwText = '';try {const gungwi = analyzeGungwi(SAJU, BIRTH_YEAR);if (gungwi && Array.isArray(gungwi)) {gwText = gungwi.map(g => 'â€¢ ' + g.name + '(' + g.ageRange + '): ' + (g.analysis?.substring(0, 50) || '') + '...' + (g.isCurrent ? ' â—€ í˜„ì¬' : '')).join('\n');}} catch(e) { gwText = 'â€¢ ê¶ìœ„ ë¶„ì„ ë°ì´í„° ì—†ìŒ'; }
let next10Text = '';try {const next10 = getNext10Years(SAJU, BIRTH_YEAR, GENDER, GODS);if (next10) {next10Text = `â€¢ ìµœê³ ì˜ í•´: ${next10.bestYear?.year || '-'}ë…„ (${next10.bestYear?.age || '-'}ì„¸)
â€¢ ì¡°ì‹¬í•  í•´: ${next10.worstYear?.year || '-'}ë…„ (${next10.worstYear?.age || '-'}ì„¸)`;}} catch(e) { next10Text = 'â€¢ 10ë…„ ìš´ì„¸ ë°ì´í„° ì—†ìŒ'; }
let tanghwaWarningText = '';try {const currentYear = new Date().getFullYear();const yp = calcYearPillar(currentYear, 6, 1);const sbi = BRANCH.indexOf(yp.b);const allBi = [BRANCH.indexOf(SAJU.year.b), BRANCH.indexOf(SAJU.month.b), BRANCH.indexOf(SAJU.day.b)];if (SAJU.hour) allBi.push(BRANCH.indexOf(SAJU.hour.b));const hasChu = allBi.includes(1);const hasO = allBi.includes(6);const hasIn = allBi.includes(2);const hasSa = allBi.includes(5);if (hasChu && hasO && sbi === 6) {tanghwaWarningText = `\nâš ï¸ ${currentYear}ë…„ ìŒíƒ•í™”(é›™æ¹¯ç«) ê²½ê³ ! ì›êµ­ ì¶•ì˜¤ íƒ•í™” + ì„¸ìš´ åˆ ì¤‘ì²©. ê°ì • í­ë°œ, í™”ë³‘ íŠ¹ë³„ ì£¼ì˜!`;}
else if (hasChu && !hasO && sbi === 6) {tanghwaWarningText = `\nğŸ”¥ ${currentYear}ë…„ íƒ•í™”ì‚´(æ¹¯ç«æ®º) ë°œë™! ì›êµ­ì˜ ä¸‘ê³¼ ì„¸ìš´ åˆê°€ ë§Œë‚˜ ì¶•ì˜¤ íƒ•í™” í˜•ì„±. í™”ë³‘, ê°ì • í­ë°œ, ì •ì‹ ì  ìŠ¤íŠ¸ë ˆìŠ¤ ì£¼ì˜! íŠ¹íˆ ì¼ì§€ê°€ ì¶•(ä¸‘)ì´ë©´ ë°°ìš°ìê¶ì— ì§ì ‘ ì˜í–¥.`;}
else if (!hasChu && hasO && sbi === 1) {tanghwaWarningText = `\nğŸ”¥ ${currentYear}ë…„ íƒ•í™”ì‚´(æ¹¯ç«æ®º) ë°œë™! ì›êµ­ì˜ åˆì™€ ì„¸ìš´ ä¸‘ì´ ë§Œë‚˜ íƒ•í™” í˜•ì„±. í™”ê¸° ì·¨ê¸‰ ì£¼ì˜, ì—´ë³‘ ì¡°ì‹¬!`;}
if (hasIn && hasSa && sbi === 5) {tanghwaWarningText = `\nâš ï¸ ${currentYear}ë…„ ìŒíƒ•í™” ê²½ê³ ! ì›êµ­ ì¸ì‚¬ íƒ•í™” + ì„¸ìš´ å·³ ì¤‘ì²©. í™”ìƒ, ì—´ë³‘, ì•½ë¬¼ ë¶€ì‘ìš© ì£¼ì˜!`;}
else if (hasIn && !hasSa && sbi === 5) {tanghwaWarningText += `\nğŸ”¥ ${currentYear}ë…„ íƒ•í™”ì‚´ ë°œë™! ì›êµ­ì˜ å¯…ê³¼ ì„¸ìš´ å·³ê°€ ë§Œë‚˜ ì¸ì‚¬ íƒ•í™” í˜•ì„±. í™”ìƒ, ì—´ë³‘ ì£¼ì˜!`;}
else if (!hasIn && hasSa && sbi === 2) {tanghwaWarningText += `\nğŸ”¥ ${currentYear}ë…„ íƒ•í™”ì‚´ ë°œë™! ì›êµ­ì˜ å·³ì™€ ì„¸ìš´ å¯…ì´ ë§Œë‚˜ íƒ•í™” í˜•ì„±. í™”ê¸° ì·¨ê¸‰ ì£¼ì˜!`;}
if ((hasChu || hasO) && GODS.yong === 'fire' && yp.s.c === 'ä¸™' && yp.b.c === 'åˆ') {const gisinCount = GODS.elCount?.[GODS.gi] || 0;const yongsinCount = GODS.elCount?.[GODS.yong] || 0;if (gisinCount >= 3 && yongsinCount <= 1) {tanghwaWarningText += `\nâš ï¸ ${currentYear}ë…„ ì‡ ì‹ ì¶©ì™•(è¡°ç¥æ²–æ—º) ê²½ê³ ! ìš©ì‹ (ç«)ì´ ë“¤ì–´ì˜¤ë‚˜ ê¸°ì‹ (${GODS.gi === 'water' ? 'æ°´' : GODS.gi})ì´ ${gisinCount}ê°œë¡œ ì••ë„ì . ìš©ì‹ ì´ êº¼ì§ˆ ìœ„í—˜! í™•ì¥/íˆ¬ì ê¸ˆì§€, í˜„ê¸ˆ ì‚¬ìˆ˜ì˜ í•´.`;} else {tanghwaWarningText += `\nğŸ”¥ ${currentYear}ë…„ ìš©ì‹ (Fire) ìœ ì…! ê¸°íšŒì˜ í•´ì´ë‚˜ ê°ì • ì¡°ì ˆ í•„ìˆ˜.`;}}
const yearLuckResult = calcYearLuck(currentYear, SAJU, GODS);if (yearLuckResult.warnings && yearLuckResult.warnings.length > 0) {tanghwaWarningText += '\n' + yearLuckResult.warnings.join('\n');}
const yearRatingChk = determineYearRating(yearLuckResult, SAJU, GODS);if (yearRatingChk.warning && yearRatingChk.warning.active) {tanghwaWarningText += '\n' + yearRatingChk.warning.desc;}
try {const crossAnalysis = analyzeCrossLuck(curLuck, yearLuckResult, SAJU, GODS);if (crossAnalysis && crossAnalysis.analysis && crossAnalysis.analysis.length > 0) {const dangerAnalysis = crossAnalysis.analysis.filter(a => a.type === 'danger' || a.type === 'bad' || a.type === 'warning');if (dangerAnalysis.length > 0) {tanghwaWarningText += '\n\nã€ëŒ€ìš´-ì„¸ìš´ êµì°¨ ë¶„ì„ ê²½ê³ ã€‘\n' + dangerAnalysis.map(a => a.text).join('\n');}}} catch(e) { }} catch(e) { }
let monthText = '';try {const monthlyLuck = getYearlyMonthLuck(currentYear, SAJU, GODS);if (monthlyLuck) {monthText = `â€¢ ì¢‹ì€ ë‹¬: ${monthlyLuck.best?.month || '-'}ì›” (${monthlyLuck.best?.god?.k || '-'})
â€¢ ì¡°ì‹¬í•  ë‹¬: ${monthlyLuck.worst?.month || '-'}ì›” (${monthlyLuck.worst?.god?.k || '-'})`;}} catch(e) { monthText = 'â€¢ ì›”ë³„ ìš´ì„¸ ë°ì´í„° ì—†ìŒ'; }
let napeumText = '';try {const dayNapeum = calcNapeum(SAJU.day.s, SAJU.day.b);const yearNapeum = calcNapeum(SAJU.year.s, SAJU.year.b);napeumText = `â€¢ ì¼ì£¼ ë‚©ìŒ: ${SAJU.day.s.c}${SAJU.day.b.c} â†’ ${dayNapeum.name} (${dayNapeum.elementK}) - ${dayNapeum.desc}
â€¢ ì—°ì£¼ ë‚©ìŒ: ${SAJU.year.s.c}${SAJU.year.b.c} â†’ ${yearNapeum.name} (${yearNapeum.elementK})`;} catch(e) { napeumText = 'â€¢ ë‚©ìŒ ë°ì´í„° ì—†ìŒ'; }
let myunggungText = '';try {if (SAJU.hour) {const myunggung = calcMyunggung(SAJU.month.b, SAJU.hour.b);myunggungText = `â€¢ ëª…ê¶: ${myunggung.name} (${myunggung.branch.c})
â€¢ ì„±í–¥: ${myunggung.trait}
â€¢ ì í•© ë¶„ì•¼: ${myunggung.career}`;} else {myunggungText = 'â€¢ ëª…ê¶: ì‹œì£¼ ë¯¸ìƒìœ¼ë¡œ ê³„ì‚° ë¶ˆê°€';}} catch(e) { myunggungText = 'â€¢ ëª…ê¶ ë°ì´í„° ì—†ìŒ'; }
let taewonText = '';try {const taewon = calcTaewon(SAJU.year.s, SAJU.month.s, SAJU.month.b);taewonText = `â€¢ íƒœì›: ${taewon.pillar} (${taewon.stem.k}${taewon.branch.k})
â€¢ íƒœì› ë‚©ìŒ: ${taewon.napeum.name} (${taewon.napeum.elementK})`;} catch(e) { taewonText = 'â€¢ íƒœì› ë°ì´í„° ì—†ìŒ'; }
let banghapText = '';try {const banghap = analyzeDirectionalHarmony(SAJU);banghapText = banghap.length ? banghap.map(b =>
`â€¢ ${b.name} (${b.branches}): ${b.dir} ${b.type === 'complete' ? 'ì™„ì„±!' : 'ë¯¸ì™„ì„±'}`
).join('\n') : 'â€¢ ë°©í•© ì—†ìŒ';} catch(e) { banghapText = 'â€¢ ë°©í•© ë°ì´í„° ì—†ìŒ'; }
let amhapText = '';try {const amhap = analyzeHiddenHarmony(SAJU);amhapText = amhap.length ? amhap.map(a =>
`â€¢ ${a.name}: ${a.positions} - ${a.desc}`
).join('\n') : 'â€¢ ì•”í•© ì—†ìŒ';} catch(e) { amhapText = 'â€¢ ì•”í•© ë°ì´í„° ì—†ìŒ'; }
let samhapText = '';let samhapWarning = '';try {const advInt = analyzeAdvancedInteractions(SAJU);if (advInt && advInt.samhapGuk && advInt.samhapGuk.length) {const dmEl = dm.e;const dmIdx = EL_ORDER.indexOf(dmEl);const sealEl = EL_ORDER[(dmIdx + 4) % 5];const wealthEl = EL_ORDER[(dmIdx + 2) % 5];const officerEl = EL_ORDER[(dmIdx + 3) % 5];samhapText = advInt.samhapGuk.map(s => {let meaning = '';const resultEl = s.result;if (resultEl === sealEl) {meaning = ' â†’ ì¸ì„±(ë¬¸ì„œ/í•™ì—…/ë³´í˜¸ì)ìœ¼ë¡œ ë³€í™”. ëˆì´ ìê²©ì¦/í•™ìœ„ë¡œ!';} else if (resultEl === wealthEl) {meaning = ' â†’ ì¬ì„±(ëˆ/ì´ì„±)ìœ¼ë¡œ ë³€í™”. ì‹¤ì†ì„ ì±™ê¸°ëŠ” êµ¬ì¡°!';} else if (resultEl === officerEl) {meaning = ' â†’ ê´€ì‚´(ì§ì¥/ìŠ¤íŠ¸ë ˆìŠ¤)ë¡œ ë³€í™”. ì±…ì„ê³¼ ì••ë°• ì£¼ì˜!';} else if (resultEl === dmEl) {meaning = ' â†’ ë¹„ê²(í˜•ì œ/ì¹œêµ¬)ìœ¼ë¡œ ë³€í™”. ë™ë£Œì˜ ë„ì›€!';}
return `â€¢ ${s.name}: ${s.complete ? 'ì™„ì „ ì„±ë¦½!' : 'ë°˜í•©'} - ${s.desc}${meaning}`;}).join('\n');const completeSamhap = advInt.samhapGuk.filter(s => s.complete);if (completeSamhap.length > 0) {samhapWarning = `\n\nâš ï¸ [ì¤‘ìš”: ì‚¼í•©êµ­ ì™„ì „ ì„±ë¦½]\n${completeSamhap.map(s =>
`${s.name}ì´ ì™„ì„±ë˜ì–´ ì§€ì§€ì˜ ${s.result} ê¸°ìš´ì´ ë§¤ìš° ê°•í•´ì¡ŒìŠµë‹ˆë‹¤. ê²©êµ­ê³¼ ì‹ ê°•/ì‹ ì•½ íŒë‹¨ ì‹œ ì´ ì˜¤í–‰ ë³€í™”ë¥¼ ë°˜ë“œì‹œ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.`
).join('\n')}`;}} else {samhapText = 'â€¢ ì‚¼í•©êµ­ ì—†ìŒ';}} catch(e) { samhapText = 'â€¢ ì‚¼í•©êµ­ ë°ì´í„° ì—†ìŒ'; }
const hansinEl = elOrder[(elOrder.indexOf(GODS.gi) + 4) % 5];const HOUR_LABELS = [
'ìì‹œ(å­æ™‚, 23:30~01:29)',
'ì¶•ì‹œ(ä¸‘æ™‚, 01:30~03:29)',
'ì¸ì‹œ(å¯…æ™‚, 03:30~05:29)',
'ë¬˜ì‹œ(å¯æ™‚, 05:30~07:29)',
'ì§„ì‹œ(è¾°æ™‚, 07:30~09:29)',
'ì‚¬ì‹œ(å·³æ™‚, 09:30~11:29)',
'ì˜¤ì‹œ(åˆæ™‚, 11:30~13:29)',
'ë¯¸ì‹œ(æœªæ™‚, 13:30~15:29)',
'ì‹ ì‹œ(ç”³æ™‚, 15:30~17:29)',
'ìœ ì‹œ(é…‰æ™‚, 17:30~19:29)',
'ìˆ ì‹œ(æˆŒæ™‚, 19:30~21:29)',
'í•´ì‹œ(äº¥æ™‚, 21:30~23:29)'
];const inputHourLabel = (BIRTH_HOUR !== null && BIRTH_HOUR >= 0 && BIRTH_HOUR < 12) ? HOUR_LABELS[BIRTH_HOUR] : 'ì‹œê°„ ëª¨ë¦„';const actualBranchChar = SAJU.hour?.b?.c || '';const inputBranchChars = ['å­','ä¸‘','å¯…','å¯','è¾°','å·³','åˆ','æœª','ç”³','é…‰','æˆŒ','äº¥'];const inputBranchChar = (BIRTH_HOUR !== null && BIRTH_HOUR >= 0) ? inputBranchChars[BIRTH_HOUR] : '';const hourLabel = (actualBranchChar && inputBranchChar && inputBranchChar !== actualBranchChar) ? `${inputHourLabel} â†’ ë³´ì • í›„ ${actualBranchChar}æ™‚` : inputHourLabel;let birthDateText;if (CALENDAR === 'lunar' && ORIGINAL_LUNAR_YEAR) {birthDateText = `${BIRTH_YEAR}ë…„ ${BIRTH_MONTH}ì›” ${BIRTH_DAY}ì¼ ${hourLabel} (ì–‘ë ¥) â† ìŒë ¥ ${ORIGINAL_LUNAR_MONTH}ì›” ${ORIGINAL_LUNAR_DAY}ì¼ ë³€í™˜`;} else {birthDateText = `${BIRTH_YEAR}ë…„ ${BIRTH_MONTH}ì›” ${BIRTH_DAY}ì¼ ${hourLabel} (ì–‘ë ¥)`;}
const correctionInfo = [];if (TIME_CORRECTION_SETTINGS.useSummerTime && isInSummerTime(BIRTH_YEAR, BIRTH_MONTH, BIRTH_DAY, 12, 0)) {correctionInfo.push('ì„œë¨¸íƒ€ì„ -1ì‹œê°„ ì ìš©ë¨');}
if (TIME_CORRECTION_SETTINGS.useLongitude) {correctionInfo.push('ê²½ë„ë³´ì • -32ë¶„ ì ìš©ë¨');}
if (TIME_CORRECTION_SETTINGS.useYajasi) {correctionInfo.push('ì•¼ìì‹œ ë°©ì‹');} else {correctionInfo.push('ì¡°ìì‹œ ë°©ì‹');}
const correctionText = correctionInfo.length > 0 ? `\nâ€¢ ì‹œê°„ë³´ì •: ${correctionInfo.join(', ')}` : '';let text = `===== ì‚¬ì£¼íŒ”ì ë¶„ì„ ê²°ê³¼ =====
ã€ê¸°ë³¸ ì •ë³´ã€‘
â€¢ ìƒë…„ì›”ì¼ì‹œ: ${birthDateText}
â€¢ ì„±ë³„/ë‚˜ì´: ${GENDER === 'm' ? 'ë‚¨ì„±' : 'ì—¬ì„±'}, ë§Œ ${age-1}ì„¸${correctionText}
â€¢ ì¼ê°„: ${dm.k}${ELEMENT[dm.e].k}(${dm.c}${ELEMENT[dm.e].c})
ã€ì‚¬ì£¼ ì›êµ­ (ë…„/ì›”/ì¼/ì‹œ)ã€‘
â€¢ ì²œê°„: ${SAJU.year.s.c}(${SAJU.year.s.k}) ${SAJU.month.s.c}(${SAJU.month.s.k}) ${SAJU.day.s.c}(${SAJU.day.s.k}) ${SAJU.hour ? SAJU.hour.s.c+'('+SAJU.hour.s.k+')' : 'ë¯¸ìƒ'}
â€¢ ì§€ì§€: ${SAJU.year.b.c}(${SAJU.year.b.k}) ${SAJU.month.b.c}(${SAJU.month.b.k}) ${SAJU.day.b.c}(${SAJU.day.b.k}) ${SAJU.hour ? SAJU.hour.b.c+'('+SAJU.hour.b.k+')' : 'ë¯¸ìƒ'}
ã€âš¡ ì‹­ì‹  ë§¤í•‘í‘œ (ì¼ê°„ ${dm.c} ${ELEMENT[dm.e].k} ê¸°ì¤€) - AI í•„ìˆ˜ ì°¸ì¡°ã€‘
â€¢ ë¹„ê²(æ¯”åŠ«): ${ELEMENT[tenGodMap.peer].k} (${ELEMENT[tenGodMap.peer].c}) - ì¼ê°„ê³¼ ê°™ì€ ì˜¤í–‰
â€¢ ì‹ìƒ(é£Ÿå‚·): ${ELEMENT[tenGodMap.output].k} (${ELEMENT[tenGodMap.output].c}) - ì¼ê°„ì´ ìƒí•˜ëŠ” ì˜¤í–‰
â€¢ ì¬ì„±(è²¡æ˜Ÿ): ${ELEMENT[tenGodMap.wealth].k} (${ELEMENT[tenGodMap.wealth].c}) - ì¼ê°„ì´ ê·¹í•˜ëŠ” ì˜¤í–‰
â€¢ ê´€ì‚´(å®˜æ®º): ${ELEMENT[tenGodMap.officer].k} (${ELEMENT[tenGodMap.officer].c}) - ì¼ê°„ì„ ê·¹í•˜ëŠ” ì˜¤í–‰
â€¢ ì¸ì„±(å°æ˜Ÿ): ${ELEMENT[tenGodMap.seal].k} (${ELEMENT[tenGodMap.seal].c}) - ì¼ê°„ì„ ìƒí•˜ëŠ” ì˜¤í–‰
ã€ì‹­ì‹  - ì²œê°„ã€‘
â€¢ ë…„ê°„ ${SAJU.year.s.c}: ${yearGod.k} - ${yearGod.d}
â€¢ ì›”ê°„ ${SAJU.month.s.c}: ${monthGod.k} - ${monthGod.d}
â€¢ ì¼ê°„ ${SAJU.day.s.c}: ë³¸ì¸ (ì¼ì£¼)
${hourGod ? 'â€¢ ì‹œê°„ ' + SAJU.hour.s.c + ': ' + hourGod.k + ' - ' + hourGod.d : 'â€¢ ì‹œê°„: ë¯¸ìƒ'}
ã€ì‹­ì‹  - ì§€ì§€ âš ï¸ ì¤‘ìš”ã€‘
â€¢ ë…„ì§€ ${SAJU.year.b.c} (${ELEMENT[SAJU.year.b.e].k}, ${yearBranchYang}): ${yearBranchGod.k}
â€¢ ì›”ì§€ ${SAJU.month.b.c} (${ELEMENT[SAJU.month.b.e].k}, ${monthBranchYang}): ${monthBranchGod.k} â† ì›”ë ¹(æœˆä»¤)
â€¢ ì¼ì§€ ${SAJU.day.b.c} (${ELEMENT[SAJU.day.b.e].k}, ${dayBranchYang}): ${dayBranchGod.k} â† ë°°ìš°ìê¶
${SAJU.hour ? 'â€¢ ì‹œì§€ ' + SAJU.hour.b.c + ' (' + ELEMENT[SAJU.hour.b.e].k + ', ' + hourBranchYang + '): ' + hourBranchGod.k + ' â† ìë…€ê¶' : 'â€¢ ì‹œì§€: ë¯¸ìƒ'}
ã€ì›”ë ¹ ë“ë ¹/ì‹¤ë ¹ã€‘
â€¢ ì¶œìƒì›”: ${SAJU.month.b.k} (${monthSeason})
â€¢ ê³„ì ˆ ì˜¤í–‰: ${ELEMENT[seasonEl].k} (${ELEMENT[seasonEl].c})
â€¢ ì¼ê°„ ${dm.c} (${ELEMENT[dm.e].k}): ${deukRyung ? 'âœ… ë“ë ¹(å¾—ä»¤) - ì œì² ì´ë¼ í˜ì´ ìˆìŒ' : 'âŒ ì‹¤ë ¹(å¤±ä»¤) - ê³„ì ˆì„ ìƒì–´ ë„ì›€ í•„ìš”'}
ã€12ìš´ì„± (ì¼ê°„ ê¸°ì¤€)ã€‘
â€¢ ë…„ì§€ ${SAJU.year.b.c}: ${yearState.k} (ì—ë„ˆì§€ ${yearState.l}/12)
â€¢ ì›”ì§€ ${SAJU.month.b.c}: ${monthState.k} (ì—ë„ˆì§€ ${monthState.l}/12)
â€¢ ì¼ì§€ ${SAJU.day.b.c}: ${dayState.k} (ì—ë„ˆì§€ ${dayState.l}/12)
${hourState ? 'â€¢ ì‹œì§€ ' + SAJU.hour.b.c + ': ' + hourState.k + ' (ì—ë„ˆì§€ ' + hourState.l + '/12)' : 'â€¢ ì‹œì§€: ë¯¸ìƒ'}
ã€ì˜¤í–‰ ë¶„í¬ã€‘
â€¢ ëª©(æœ¨): ${elCount.wood}ê°œ
â€¢ í™”(ç«): ${elCount.fire}ê°œ
â€¢ í† (åœŸ): ${elCount.earth}ê°œ
â€¢ ê¸ˆ(é‡‘): ${elCount.metal}ê°œ
â€¢ ìˆ˜(æ°´): ${elCount.water}ê°œ
â€¢ ì—†ëŠ” ì˜¤í–‰: ${(() => {const missing = Object.entries(elCount).filter(e => e[1] === 0).map(e => e[0]);if (missing.length === 0) return 'ì—†ìŒ';const jijangInfo = {};const pillarNames = ['ë…„', 'ì›”', 'ì¼', 'ì‹œ'];[SAJU.year?.b, SAJU.month?.b, SAJU.day?.b, SAJU.hour?.b].forEach((b, idx) => {if (!b) return;const bi = BRANCH.indexOf(b);(JIJANGGAN[bi] || []).forEach(j => {const el = STEM[j.s].e;if (!jijangInfo[el]) jijangInfo[el] = [];jijangInfo[el].push(pillarNames[idx] + b.c + ':' + STEM[j.s].c);});});const result = [];missing.forEach(el => {if (jijangInfo[el] && jijangInfo[el].length > 0) {result.push(ELEMENT[el].k + '(â€»' + jijangInfo[el].join(', ') + ')');} else {result.push(ELEMENT[el].k + '(ì™„ì „ë¶€ì¬)');}});return result.join(', ');})()}
${(() => {const missing = Object.entries(elCount).filter(e => e[1] === 0).map(e => e[0]);if (missing.length === 0) return '';const healthWarnings = {wood: 'âš ï¸ ëª©(æœ¨) ë¶€ì¬ ê±´ê°•ê²½ê³ : ê°„/ë‹´ë‚­/ëˆˆ/ì‹ ê²½ê³„ ì·¨ì•½. ë¶„ë…¸ ì¡°ì ˆ ì–´ë ¤ì›€, ìš°ìœ ë¶€ë‹¨í•¨ ì£¼ì˜. ë…¹ìƒ‰ ì±„ì†Œ, ì‹ ë§› ìŒì‹, ë™ìª½ ë°©í–¥ ê¶Œì¥.',
fire: 'âš ï¸ í™”(ç«) ë¶€ì¬ ê±´ê°•ê²½ê³ : ì‹¬ì¥/ì†Œì¥/í˜ˆì••/ëˆˆ ì·¨ì•½. ìš°ìš¸ê°, ì˜ìš•ì €í•˜, ëƒ‰ì¦ ì£¼ì˜. ë¶‰ì€ìƒ‰, ì“´ë§› ìŒì‹, ë‚¨ìª½ ë°©í–¥, í–‡ë³• ì¬ê¸° ê¶Œì¥.',
earth: 'âš ï¸ í† (åœŸ) ë¶€ì¬ ê±´ê°•ê²½ê³ : ìœ„ì¥/ë¹„ì¥/ì†Œí™”ê¸° ì·¨ì•½. ê±±ì • ê³¼ë‹¤, ì‹ ë¢° ë¶€ì¡± ì£¼ì˜. í™©í† ìƒ‰, ë‹¨ë§› ìŒì‹, ì¤‘ì•™/ì•ˆì •ì  í™˜ê²½ ê¶Œì¥.',
metal: 'âš ï¸ ê¸ˆ(é‡‘) ë¶€ì¬ ê±´ê°•ê²½ê³ : í/ëŒ€ì¥/í”¼ë¶€/í˜¸í¡ê¸° ì·¨ì•½. ê²°ë‹¨ë ¥ ë¶€ì¡±, ìŠ¬í”” ì£¼ì˜. í°ìƒ‰, ë§¤ìš´ë§› ìŒì‹, ì„œìª½ ë°©í–¥ ê¶Œì¥.',
water: 'âš ï¸ ìˆ˜(æ°´) ë¶€ì¬ ê±´ê°•ê²½ê³ : ì‹ ì¥/ë°©ê´‘/ìƒì‹ê¸°/ë¼ˆ ì·¨ì•½. ë‘ë ¤ì›€ ê³¼ë‹¤, ì˜ì§€ë ¥ ë¶€ì¡± ì£¼ì˜. ê²€ì€ìƒ‰, ì§ ë§› ìŒì‹, ë¶ìª½ ë°©í–¥ ê¶Œì¥.'};return '\\n' + missing.map(el => healthWarnings[el]).join('\\n');})()}
ã€ì‹ ê°•/ì‹ ì•½ã€‘
â€¢ ì¼ê°„ ê°•ë„: ${str.pct}% (${str.type === 'strong' ? 'ì‹ ê°•' : str.type === 'weak' ? 'ì‹ ì•½' : 'ì¤‘í™”'})
${canBeJonggeok ? 'â€¢ íŠ¹ì´ì‚¬í•­: ' + str.extreme + ' ì‚¬ì£¼ (ì¢…ê²© ê°€ëŠ¥ì„±)' : (str.extreme ? 'â€¢ íŠ¹ì´ì‚¬í•­: ' + str.extreme + ' ì‚¬ì£¼' : '')}
ã€ìš©ì‹ /í¬ì‹ /ê¸°ì‹ ã€‘ â­ í•µì‹¬ (ë°˜ë“œì‹œ í•´ì„ì— ë°˜ì˜)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ìš©ì‹ (ç”¨ç¥): ${ELEMENT[GODS.yong].k}(${ELEMENT[GODS.yong].c}) - ê°€ì¥ í•„ìš”í•œ ì˜¤í–‰ â”‚
â”‚ í¬ì‹ (å–œç¥): ${ELEMENT[GODS.hee].k}(${ELEMENT[GODS.hee].c}) - ìš©ì‹ ì„ ë•ëŠ” ì˜¤í–‰ â”‚
â”‚ ê¸°ì‹ (å¿Œç¥): ${ELEMENT[GODS.gi].k}(${ELEMENT[GODS.gi].c}) - í”¼í•´ì•¼ í•  ì˜¤í–‰ â”‚
â”‚ í•œì‹ (é–‘ç¥): ${ELEMENT[hansinEl].k}(${ELEMENT[hansinEl].c}) - ê¸°ì‹ ì„ ë•ëŠ” ì˜¤í–‰ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
${GODS.yongReason ? 'â€¢ íŒë‹¨ê·¼ê±°: ' + GODS.yongReason : ''}
${GODS.yongWarning ? 'â€¢ ' + GODS.yongWarning : ''}
${GODS.sudaHwasik ? 'â€¢ ' + GODS.sudaHwasik : ''}
${GODS.hwadaGeumso ? 'â€¢ ' + GODS.hwadaGeumso : ''}
${GODS.hwadaSuBin ? 'â€¢ âš ï¸ ' + GODS.hwadaSuBin : ''}
${GODS.geumdaMokjeol ? 'â€¢ âš ï¸ ' + GODS.geumdaMokjeol : ''}
${GODS.todaGeummae ? 'â€¢ âš ï¸ ' + GODS.todaGeummae : ''}
${GODS.mokdaHwasik ? 'â€¢ âš ï¸ ' + GODS.mokdaHwasik : ''}
${GODS.gunbiJaengjae ? 'â€¢ âš ï¸ ' + GODS.gunbiJaengjae : ''}
${GODS.jaedaSinyak ? 'â€¢ ğŸ’¸ ' + GODS.jaedaSinyak : ''}
${GODS.wangjiChung ? 'â€¢ âš ï¸ ' + GODS.wangjiChung : ''}
${GODS.wangjiJungcheop ? 'â€¢ ğŸš¨ ' + GODS.wangjiJungcheop : ''}
${GODS.mugeunWarning ? 'â€¢ ğŸ’¨ ' + GODS.mugeunWarning : ''}
${GODS.pyeoninDosik ? 'â€¢ ğŸ½ï¸ ' + GODS.pyeoninDosik : ''}
${GODS.johu ? 'â€¢ ì¡°í›„ìš©ì‹ : ' + (GODS.johuDesc || '') : ''}
${GODS.climate ? 'â€¢ í•œë‚œì¡°ìŠµ: ' + GODS.climate.type + ' - ' + GODS.climate.desc : ''}
ã€ê²©êµ­ã€‘
â€¢ ${format.n}
â€¢ íŠ¹ì§•: ${format.d}
â€¢ ì í•© ë¶„ì•¼: ${format.b}
${format.formatReason ? 'â€¢ íŒì • ê·¼ê±°: ' + format.formatReason : ''}
ã€60ê°‘ì ì¼ì£¼ë¡  - ${SAJU.day.s.c}${SAJU.day.b.c}ì¼ì£¼ã€‘
â€¢ ${ilju.title}
â€¢ ì„±ê²©: ${ilju.desc?.substring(0, 100) || ''}...
â€¢ ë°°ìš°ììš´: ${ilju.spouse?.substring(0, 80) || ''}...
ã€ì§€ì¥ê°„ ë¶„ì„ã€‘
${jjText}
ã€ë‚©ìŒì˜¤í–‰(ç´éŸ³äº”è¡Œ)ã€‘
${napeumText}
ã€ëª…ê¶(å‘½å®®)ã€‘
${myunggungText}
ã€íƒœì›(èƒå…ƒ)ã€‘
${taewonText}
ã€í†µê·¼/íˆ¬ê°„ã€‘
${ttText}
ã€ìœ¡ì¹œ ë¶„ì„ã€‘
${ycText}
ã€ê¶ìœ„(å®®ä½) ë¶„ì„ - ì¸ìƒ ì‹œê¸°ë³„ã€‘
${gwText}
ã€í•©ì¶©í˜•íŒŒí•´ã€‘
${interactions.length ? interactions.map(i => 'â€¢ ' + i.t + ': ' + i.c + ' - ' + i.m).join('\n') : 'â€¢ íŠ¹ë³„í•œ í•©ì¶© ì—†ìŒ'}
ã€ë°©í•©(æ–¹åˆ)ã€‘
${banghapText}
ã€ì•”í•©(æš—åˆ)ã€‘
${amhapText}
ã€ì‚¼í•©êµ­(ä¸‰åˆå±€)ã€‘
${samhapText}${samhapWarning}
ã€ê³µë§ã€‘
â€¢ ${gongmang?.names?.join(', ') || ''}
${gongmang?.affected?.length ? 'â€¢ ì˜í–¥: ' + gongmang.affected.join(', ') + 'ì— ê³µë§' : 'â€¢ ì‚¬ì£¼ ë‚´ ê³µë§ ì—†ìŒ'}
ã€ì‹ ì‚´ã€‘
${sinsal.length ? sinsal.map(s => 'â€¢ ' + s.n + '(' + (s.t === 'good' ? 'ê¸¸' : s.t === 'bad' ? 'í‰' : 'ì¤‘') + '): ' + s.d).join('\n') : 'â€¢ íŠ¹ë³„í•œ ì‹ ì‚´ ì—†ìŒ'}
ã€ëŒ€ìš´ (10ë…„ ë‹¨ìœ„)ã€‘
â€¢ ë°©í–¥: ${luckDirection} (${yearIsYang ? 'ì–‘ë…„' : 'ìŒë…„'} ${GENDER === 'm' ? 'ë‚¨ëª…' : 'ì—¬ëª…'})
${luck.slice(0,8).map(l => {const lStemGod = getTenGod(l.s, dm);const lBranchGod = getTenGod({e: l.b.e, y: getBranchYang(l.b)}, dm);return 'â€¢ ' + l.startAge + '-' + l.endAge + 'ì„¸: ' + l.s.c + l.b.c + ' [' + lStemGod.k + '/' + lBranchGod.k + ']' + (l.isCur ? ' â—€ í˜„ì¬' : '');}).join('\n')}
ã€í˜„ì¬ ìš´ì„¸ã€‘
â€¢ í˜„ì¬ ëŒ€ìš´: ${curLuck ? (() => {const curStemGod = getTenGod(curLuck.s, dm);const curBranchGod = getTenGod({e: curLuck.b.e, y: getBranchYang(curLuck.b)}, dm);return curLuck.s.c + curLuck.b.c + ' [' + curStemGod.k + '/' + curBranchGod.k + '] (' + curLuck.startAge + '-' + curLuck.endAge + 'ì„¸)';})() : 'ê³„ì‚° ì¤‘'}
â€¢ ëŒ€ìš´ í‰ê°€: ${curLuck ? (curLuck.rating === 'good' ? 'ê¸¸ìš´' : curLuck.rating === 'bad' ? 'í‰ìš´' : 'í‰ìš´') : '-'}
â€¢ ${currentYear}ë…„ ì„¸ìš´: ${(() => {const yp = calcYearPillar(currentYear, 6, 1);const ypStemGod = getTenGod(yp.s, dm);const ypBranchGod = getTenGod({e: yp.b.e, y: getBranchYang(yp.b)}, dm);return yp.s.c + yp.b.c + ' [' + ypStemGod.k + '/' + ypBranchGod.k + '] (' + ELEMENT[yp.s.e].k + ELEMENT[yp.b.e].k + ')';})()}${tanghwaWarningText}
ã€ì˜¤ëŠ˜ì˜ ì¼ì§„ã€‘
${(() => {const today = new Date();const dp = calcDayPillar(today.getFullYear(), today.getMonth() + 1, today.getDate());const todayGod = getTenGod(dp.s, dm);const todayState = getTwelveState(dm, dp.b);const isYong = [dp.s.e, dp.b.e].includes(GODS.yong);const isHee = [dp.s.e, dp.b.e].includes(GODS.hee);const isGi = [dp.s.e, dp.b.e].includes(GODS.gi);const rating = isYong ? 'âœ… ìš©ì‹  ê¸°ìš´ - ì ê·¹ì ìœ¼ë¡œ ì›€ì§ì´ì„¸ìš”!' : isHee ? 'ğŸ˜Š í¬ì‹  ê¸°ìš´ - ìˆœì¡°ë¡œìš´ í•˜ë£¨' : isGi ? 'âš ï¸ ê¸°ì‹  ê¸°ìš´ - ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”' : 'ğŸ˜ í‰ì˜¨ - ì¼ìƒ ìœ ì§€';return `â€¢ ë‚ ì§œ: ${today.getFullYear()}ë…„ ${today.getMonth()+1}ì›” ${today.getDate()}ì¼
â€¢ ì¼ì§„: ${dp.s.c}${dp.b.c} (${ELEMENT[dp.s.e].k}${ELEMENT[dp.b.e].k})
â€¢ ì¼ì§„ ì‹­ì‹ : ${todayGod.k} - ${todayGod.d}
â€¢ ì¼ì§„ 12ìš´ì„±: ${todayState.k} (ì—ë„ˆì§€ ${todayState.l}/12)
â€¢ ì˜¤ëŠ˜ì˜ ê¸°ìš´: ${rating}`;})()}
ã€í–¥í›„ 10ë…„ ìš´ì„¸ ë¯¸ë¦¬ë³´ê¸°ã€‘
${next10Text}
ã€${currentYear}ë…„ ì›”ë³„ ìš´ì„¸ã€‘
${monthText}
===== AI í•´ì„ ìš”ì²­ =====
[ğŸ”¥ í•µì‹¬ 8ëŒ€ ì§€ì¹¨ (ë¹ ë¥¸ ì°¸ì¡°)]
â‘  ì‚¼í•©êµ­ ì™„ì„± ì‹œ ì§€ì§€ ì˜¤í–‰ ë³€í™” â†’ ê²©êµ­/ìš©ì‹ ì— ë°˜ë“œì‹œ ë°˜ì˜
â‘¡ ë°°ìš°ìì„±ì´ ì§€ì¥ê°„ì—ë§Œ ìˆìœ¼ë©´ 'ì•”ì¥(æš—è—)'ìœ¼ë¡œ í•´ì„
â‘¢ ì™•ì§€ ì¶©ëŒ(ìì˜¤ì¶©/ë¬˜ìœ ì¶©)ì€ 'ê²©ë™ì˜ í•´'ë¡œ ê°•ë ¥ ê²½ê³ 
â‘£ ì‹ ì•½ì¸ë° ë¹„ê²¬ê²©ì´ë©´ 'ì˜ˆë¯¼í•¨/ê°•ë°•', ì‹ ê°•ì¸ë° í¸ê´€ê²©ì´ë©´ 'ë¦¬ë”ì‹­'
â‘¤ 2026ë…„ ë³‘ì˜¤(ä¸™åˆ)ë…„ì€ ç« ê¸°ìš´ ê°•ë ¥ â†’ ì¡°í›„/ì–µë¶€ ê³ ë ¤í•´ ì¡°ì–¸
â‘¥ íƒ•í™”ì‚´(ì¶•ì˜¤/ì¸ì‚¬) + ì„¸ìš´ ì¤‘ì²© = 'ë©˜íƒˆ ë¶•ê´´/í™”ë³‘' íŠ¹ë³„ ì£¼ì˜
â‘¦ ìˆ˜ë‹¤í™”ì‹(æ°´å¤šç«ç†„) ì‚¬ì£¼ëŠ” ì¡°í›„ë³´ë‹¤ ì–µë¶€(ë¶ˆì„ ì‚´ë¦¬ëŠ” ê²ƒ) ìš°ì„ 
â‘§ ã€ì˜¤ëŠ˜ì˜ ì¼ì§„ã€‘ ì„¹ì…˜ì„ ë°˜ë“œì‹œ í•´ì„ â†’ ì˜¤ëŠ˜ í•˜ë£¨ êµ¬ì²´ì  ì¡°ì–¸ ì œê³µ
[í˜ë¥´ì†Œë‚˜ ì„¤ì •]
ë‹¹ì‹ ì€ 30ë…„ ê²½ë ¥ì˜ í˜„ëŒ€ì ì´ê³  ì„¸ë ¨ëœ ëª…ë¦¬í•™ìì…ë‹ˆë‹¤.
- ì „ë¬¸ ìš©ì–´(ë¹„ê²¬, í¸ì¬, ì‹ì‹ , ê±´ë¡, ê´€ëŒ€ ë“±)ë¥¼ ì‚¬ìš©í•˜ë˜, ë°˜ë“œì‹œ ê·¸ ë’¤ì— ì´ˆë“±í•™ìƒë„ ì´í•´í•  ìˆ˜ ìˆëŠ” ì‰¬ìš´ ë¹„ìœ ë¥¼ ì„ì–´ ì„¤ëª…í•´ì£¼ì„¸ìš”. ì˜ˆ: "ë¹„ê²¬(æ¯”è‚©)ì€ ë‚˜ì™€ ê°™ì€ ì—ë„ˆì§€ë¥¼ ê°€ì§„ í˜•ì œìë§¤ ê°™ì€ ì¡´ì¬ì˜ˆìš”."
- ë§íˆ¬ëŠ” ë”°ëœ»í•˜ê³  í¬ë§ì ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ë¶€ì •ì ì¸ ë‚´ìš©ë„ ë°˜ë“œì‹œ ê±´ì„¤ì ì¸ ì¡°ì–¸ê³¼ ê·¹ë³µ ë°©ë²•ê³¼ í•¨ê»˜ ì „ë‹¬í•´ì£¼ì„¸ìš”.
- "~ì…ë‹ˆë‹¤"ì²´ë¡œ ê²©ì‹ìˆê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”.
- ê° í•­ëª©ë‹¹ 2-3ë¬¸ë‹¨ì”© ìƒì„¸íˆ ì„œìˆ í•´ì£¼ì„¸ìš”.
[âš ï¸ ì¤‘ìš” í•´ì„ ì§€ì¹¨]
1. ì‚¼í•©êµ­(ä¸‰åˆå±€)ì´ ì™„ì „ ì„±ë¦½í–ˆë‹¤ë©´, ì§€ì§€ì˜ ì˜¤í–‰ì´ í•´ë‹¹ ì˜¤í–‰ìœ¼ë¡œ ê°•ë ¥í•˜ê²Œ ë³€í™”í•©ë‹ˆë‹¤. ì´ ì ì„ ê²©êµ­/ì‹ ê°•ì‹ ì•½/ìš©ì‹  íŒë‹¨ì— ë°˜ë“œì‹œ ë°˜ì˜í•˜ì„¸ìš”.
- ì¸ì˜¤ìˆ  í™”êµ­ â†’ ì§€ì§€ê°€ í™”(ç«) ê¸°ìš´ìœ¼ë¡œ
- ì‚¬ìœ ì¶• ê¸ˆêµ­ â†’ ì§€ì§€ê°€ ê¸ˆ(é‡‘) ê¸°ìš´ìœ¼ë¡œ
- ì‹ ìì§„ ìˆ˜êµ­ â†’ ì§€ì§€ê°€ ìˆ˜(æ°´) ê¸°ìš´ìœ¼ë¡œ
- í•´ë¬˜ë¯¸ ëª©êµ­ â†’ ì§€ì§€ê°€ ëª©(æœ¨) ê¸°ìš´ìœ¼ë¡œ
2. ë°°ìš°ìì„±ì´ ì²œê°„ì— ì—†ë”ë¼ë„ ì§€ì¥ê°„ì— ìˆ¨ì–´ìˆìœ¼ë©´ "ì—†ìŒ"ì´ ì•„ë‹ˆë¼ "ì•”ì¥(æš—è—)"ìœ¼ë¡œ í•´ì„í•˜ì„¸ìš”.
3. ëŒ€ìš´/ì„¸ìš´ì—ì„œ ì‚¼í•©ì´ ì™„ì„±ë˜ëŠ” í•´ëŠ” íŠ¹ë³„íˆ ê°•ì¡°í•´ì„œ í•´ì„í•˜ì„¸ìš”.
- ì˜ˆ: ì›êµ­ì— ì‹ +ì§„ì´ ìˆê³  ëŒ€ìš´ì—ì„œ ì(å­)ê°€ ì˜¤ë©´ â†’ "ì‹ ìì§„ ìˆ˜êµ­ ì™„ì„±! ëŒ€ìš´ ê¸°ê°„ ë‚´ë‚´ ë¬¼(ì¬ë¬¼/ìš•ë§)ì´ ì§€ë°°í•˜ëŠ” ì‹œê¸°"
4. ëŒ€ìš´ vs ì„¸ìš´ ì¶©ëŒ (ì™•ì§€ ì¶©ëŒ) ì£¼ì˜:
- ìì˜¤ì¶©(å­åˆæ²–), ë¬˜ìœ ì¶©(å¯é…‰æ²–) ë“± ì™•ì§€ë¼ë¦¬ì˜ ì¶©ëŒì€ ë§¤ìš° ê°•ë ¥í•©ë‹ˆë‹¤.
- ëŒ€ìš´ì˜ ì§€ì§€ì™€ ì„¸ìš´ì˜ ì§€ì§€ê°€ ì¶©ëŒí•˜ë©´ "ê²©ë™ì˜ í•´"ë¡œ í•´ì„í•˜ì„¸ìš”.
- ì˜ˆ: ëŒ€ìš´ ì(å­) + ì„¸ìš´ ì˜¤(åˆ) = ìˆ˜í™”ìƒì „(æ°´ç«ç›¸æˆ°). ì‹¬í˜ˆê´€/ì •ì‹  ê±´ê°• ì£¼ì˜.
5. ê²©êµ­ íŒë‹¨ ì‹œ ì£¼ì˜:
- ì›”ì§€ ì •ê¸°ë§Œ ë³´ì§€ ë§ê³ , ì›”ê°„ì— íˆ¬ì¶œëœ ì‹­ì‹ ì´ ê°•í•œ ì„¸ë ¥ì„ í˜•ì„±í•˜ë©´ ê·¸ê²ƒì´ ê²©êµ­ì…ë‹ˆë‹¤.
- ì˜ˆ: ì›”ì§€ê°€ ì¶•(í† )ì´ì§€ë§Œ ì›”ê°„ì— ì„ëª©(í¸ê´€)ì´ ìˆê³  í•´ë¬˜ ë°˜í•©ì´ ìˆìœ¼ë©´ â†’ í¸ê´€ê²©ìœ¼ë¡œ ë´ì•¼ í•¨
6. ì‹ ê°•/ì‹ ì•½ê³¼ ê²©êµ­ í•´ì„ì˜ ì¡°í™”:
- ì‹ ì•½(30% ì´í•˜)ì¸ë° ë¹„ê²¬ê²©ì´ë©´ "ê³ ì§‘ì´ ì„¸ë‹¤"ê°€ ì•„ë‹ˆë¼ "ê°•ë°•ì´ ìˆë‹¤/ì˜ˆë¯¼í•˜ë‹¤"ë¡œ í•´ì„
- ì‹ ê°•(70% ì´ìƒ)ì¸ë° í¸ê´€ê²©ì´ë©´ "ìŠ¤íŠ¸ë ˆìŠ¤"ê°€ ì•„ë‹ˆë¼ "ë¦¬ë”ì‹­/ì¹´ë¦¬ìŠ¤ë§ˆ"ë¡œ í•´ì„
7. íƒ•í™”ì‚´(æ¹¯ç«æ®º)ì´ ìˆì„ ë•Œ:
- ì›êµ­ì— ì¶•ì˜¤/ì¸ì‚¬ íƒ•í™”ê°€ ìˆëŠ”ë° ì„¸ìš´ì—ì„œ ì˜¤(åˆ)ë‚˜ ì‚¬(å·³)ê°€ ë˜ ë“¤ì–´ì˜¤ë©´ "ìŒíƒ•í™”" â†’ ë©˜íƒˆ ê±´ê°• íŠ¹ë³„ ê²½ê³ 
- "í™”ë³‘, ì•½ë¬¼ ë¶€ì‘ìš©, ê°ì • í­ë°œ"ì˜ ìœ„í—˜ì„±ì„ ë°˜ë“œì‹œ ì–¸ê¸‰
8. ìƒê´€í•©ì‚´(å‚·å®˜åˆæ®º)ì´ ìˆìœ¼ë©´:
- ë‹¨ìˆœíˆ "ë§ì¡°ì‹¬"ì´ ì•„ë‹ˆë¼ "ìœ„ê¸°ë¥¼ ê¸°íšŒë¡œ ë°”ê¾¸ëŠ” í˜‘ìƒê°€ ì¬ëŠ¥"ìœ¼ë¡œ ê¸ì • í•´ì„
9. ê·¹ì‹ ê°•(90% ì´ìƒ) ì‚¬ì£¼ í•´ì„:
- ì¼ê°„ ê°•ë„ê°€ 90% ì´ìƒì´ê³  í•œ ì˜¤í–‰ì´ ì§€ë°°ì ì´ë©´ "ì¢…ê²©(å¾æ ¼)" ê°€ëŠ¥ì„± ê²€í† 
- í™”(ç«)ê°€ ì§€ë°°ì ì´ë©´ "ì—¼ìƒê²©(ç‚ä¸Šæ ¼)" â†’ í™”/ëª© ìš´ì´ ì˜¤íˆë ¤ ì¢‹ê³ , ìˆ˜/ê¸ˆ ìš´ì´ ìœ„í—˜
- ì¢…ê²©ì´ë©´ ìš©ì‹  íŒë‹¨ì´ ì—­ì „ë¨ì„ ë°˜ë“œì‹œ ì–¸ê¸‰
- ì˜ˆ: í™”ê°€ 80% ì´ìƒì¸ë° ê±´ë¡ê²©ì´ë¼ê³ ë§Œ í•˜ë©´ ì•ˆ ë¨ â†’ "ì—¼ìƒê²© ë˜ëŠ” ì–‘ì¸ê²©ì— ì¤€í•¨"
10. ìí˜•(è‡ªåˆ‘) + ì„¸ìš´ ì¤‘ë³µ ì‹œ:
- ì›êµ­ì— ì˜¤ì˜¤(åˆåˆ), ìœ ìœ (é…‰é…‰) ë“± ìí˜•ì´ ìˆëŠ”ë° ì„¸ìš´ì—ì„œ ê°™ì€ ì§€ì§€ê°€ ë˜ ì˜¤ë©´ "íŠ¸ë¦¬í”Œ ìí˜•"
- ê±´ê°• ê²½ê³ : "ì‹¬í˜ˆê´€ ì§ˆí™˜, ì •ì‹ ì  í­ë°œ, ìí•´ ì¶©ë™" ìœ„í—˜ ê°•ì¡°
- ë‹¨ìˆœíˆ "ìì±…, ìš°ìš¸"ì´ ì•„ë‹ˆë¼ "ìƒëª…ì˜ ìœ„í—˜"ìœ¼ë¡œ ê²©ìƒí•´ì„œ ê²½ê³ 
11. ì§€ì¥ê°„ ì¬ì„±ì´ "ë…¹ì•„ë²„ë¦¼" ìƒíƒœ:
- ì¬ì„±(ê¸ˆ)ì´ í™”(ç«) ì§€ì§€(ì‚¬, ì˜¤, ë¯¸) ì† ì§€ì¥ê°„ì—ë§Œ ìˆìœ¼ë©´ "ë…¹ì•„ë²„ë¦° ì¬ì„±"
- í•´ì„: "ë°°ìš°ìê°€ ì•„í”„ê±°ë‚˜ ë‹¨ëª…í•  ìˆ˜ ìˆìŒ", "ëˆì´ ë“¤ì–´ì™€ë„ ë…¹ë“¯ì´ ë‚˜ê°"
- ë‹¨ìˆœíˆ "ì—†ìŒ"ì´ë‚˜ "ì•”ì¥"ê³¼ ë‹¤ë¥¸ ë‰˜ì•™ìŠ¤
12. ê±´ë¡ê²© vs ì–‘ì¸ê²© êµ¬ë¶„:
- ìŒê°„(ì„, ì •, ê¸°, ì‹ , ê³„)ì˜ ê²½ìš° ì›”ì§€ê°€ ì œì™•ì§€ë©´ ì–‘ì¸ì— ì¤€í•˜ëŠ” ì„±ì§ˆ
- ì§€ì§€ì— ê°™ì€ ì˜¤í–‰ì´ 3ê°œ ì´ìƒì´ë©´ ë‹¨ìˆœí•œ ê±´ë¡ê²©ì´ ì•„ë‹˜
- í•´ì„: "ì„±ì‹¤í•œ ê³µë¬´ì›"ì´ ì•„ë‹ˆë¼ "ìŠ¹ë¶€ì‚¬, ì¹¼ì„ ë“  ë¦¬ë”"
13. í™”ë‹¤ìˆ˜ë¹ˆ(ç«å¤šæ°´è²§) - ë¶ˆì´ ë¬¼ì„ ì¦ë°œì‹œí‚´:
- í™”(ç«)ê°€ 4ê°œ ì´ìƒì´ê³  ìˆ˜(æ°´)ê°€ 1ê°œë¿ì´ë©´ "í™”ë‹¤ìˆ˜ë¹ˆ" ìƒí™©
- ìš©ì‹ ì´ ìˆ˜(æ°´)ì¸ë° ë¶ˆì´ ë„ˆë¬´ ê°•í•˜ë©´ â†’ ì¬ë¬¼ì´ ë“¤ì–´ì™€ë„ ì¦ë°œí•¨
- í•´ì„: "ëˆì„ ì¥ê³  ìˆìœ¼ë©´ ë‹¤ ë‚˜ê°, ë¶€ë™ì‚°ì´ë‚˜ ìê²©ì¦ì— íˆ¬ìí•´ì•¼ ì•¡ë•œ"
- ê±´ê°•: ì‹ ì¥/ë°©ê´‘/ìê¶ ì§ˆí™˜ ì£¼ì˜
14. ì„¸ìš´ì—ì„œ ìí˜• ê¸€ìê°€ ë˜ ì˜¬ ë•Œ:
- ì›êµ­ì— ì˜¤ì˜¤(åˆåˆ) ìí˜•ì´ ìˆê³  ì„¸ìš´ì—ì„œ ì˜¤(åˆ)ê°€ ì˜¤ë©´ â†’ "íŠ¸ë¦¬í”Œ ìí˜•"
- ì´ê²ƒì€ ì´ë¯¸ í”„ë¡¬í”„íŠ¸ì— ìˆì§€ë§Œ, AIê°€ ë°˜ë“œì‹œ ê°•ì¡°í•´ì„œ ê²½ê³ í•´ì•¼ í•¨
- ë‹¨ìˆœíˆ "ì¡°ì‹¬í•˜ì„¸ìš”"ê°€ ì•„ë‹ˆë¼ "í™œí™”ì‚° í­ë°œ, ìš±í•´ì„œ ì €ì§€ë¥¸ ì¼ ìˆ˜ìŠµ ë¶ˆê°€"
15. ëŒ€ìš´+ì„¸ìš´ìœ¼ë¡œ ì‚¼í•©/ë°©í•© ì™„ì„±:
- ì›êµ­ì— ì˜¤ì˜¤(åˆåˆ)ê°€ ìˆê³  ëŒ€ìš´ì´ ì¸(å¯…)ì´ë©´ â†’ ì¸ì˜¤ ë°˜í•©
- ì—¬ê¸°ì— ì„¸ìš´ì—ì„œ ì˜¤(åˆ)ê°€ ì˜¤ë©´ â†’ ì¸ì˜¤ì˜¤(å¯…åˆåˆ) ë°©í•©ê¸‰ í™”êµ­ ì™„ì„±
- í•´ì„: "ë¶ˆì˜ ì œêµ­ì´ ì™„ì„±ë˜ì–´ ëª¨ë“  ê²ƒì„ íƒœì›€"
16. ê´€ì„±(ë°°ìš°ì)ì´ ë¶ˆ ì†ì— ê°‡íŒ ê²½ìš°:
- ì—¬ì„± ì‚¬ì£¼ì—ì„œ ê´€ì„±(ëª©)ì´ ì§€ì¥ê°„ì—ë§Œ ìˆëŠ”ë° ì£¼ë³€ì´ í™”(ç«) ì¼ìƒ‰ì´ë©´
- "ì•”ì¥ëœ ì‹¤ì†í˜• ë°°ìš°ì"ê°€ ì•„ë‹ˆë¼ "íƒ€ë²„ë¦° ë‚˜ë¬´, ìœ„íƒœë¡œìš´ ë°°ìš°ì"
- í•´ì„: "ë‚¨í¸ì´ ë¬´ëŠ¥í•˜ê±°ë‚˜ ì•„í”Œ ìˆ˜ ìˆìŒ, ë³¸ì¸ì´ ê°€ì¥ ì—­í•  í•´ì•¼ í•¨"
17. ê²©êµ­ê³¼ ì„¸ë ¥ì˜ ê´´ë¦¬ ë³´ì •:
- ë°ì´í„°ìƒ 'ë¹„ê²¬ê²©'ìœ¼ë¡œ ë˜ì–´ ìˆë”ë¼ë„, ê´€ì‚´(í¸ê´€)ì˜ ì„¸ë ¥ì´ ì›”ë“±íˆ ê°•í•˜ë‹¤ë©´(íˆ¬ì¶œ ë° í•©êµ­ ë“±) 'í¸ê´€ê²©'ì˜ ê´€ì ì—ì„œ í•´ì„í•˜ì„¸ìš”.
- ì¦‰, "ê³ ì§‘ì´ ì„¸ë‹¤"ë³´ë‹¤ëŠ” "ë§‰ì¤‘í•œ ì±…ì„ê°ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ê°ë‚´í•˜ê³  ìˆë‹¤"ë¡œ í•´ì„í•´ì•¼ í•©ë‹ˆë‹¤.
- ì˜ˆ: ì›”ê°„ ä¹™ëª© íˆ¬ì¶œ + í•´ë¬˜ ë°˜í•© ëª©êµ­ = í¸ê´€ì˜ ì„¸ë ¥ì´ ê°•í•¨ â†’ í¸ê´€ê²©ìœ¼ë¡œ ë´ì•¼ í•¨
18. ì¶•ì˜¤(ä¸‘åˆ) íƒ•í™”ì™€ ì„¸ìš´ì˜ ì¤‘ì²©:
- ì›êµ­ì— ì¶•ì˜¤ê°€ ìˆê³  ì„¸ìš´ì—ì„œ ì˜¤(åˆ)ê°€ ì˜¤ëŠ” í•´ëŠ” ê¸°ì¡´ì˜ ì¸ê°„ê´€ê³„ë‚˜ ì •ì‹ ì  ìŠ¤íŠ¸ë ˆìŠ¤ê°€ í­ë°œí•˜ê±°ë‚˜ ì¬ì¡°ì •ë˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.
- ê¸ì •ì ìœ¼ë¡œëŠ” 'ì˜¤ë˜ëœ ë¬¸ì œë¥¼ ìˆ˜ìˆ í•˜ë“¯ ë„ë ¤ë‚´ëŠ” í•´', ë¶€ì •ì ìœ¼ë¡œëŠ” 'ê°ì •ì  í­ë°œ'ë¡œ í•´ì„í•´ ì£¼ì„¸ìš”.
- ìš©ì‹ ì´ ç«ì¸ ì‚¬ì£¼ì—ê²Œ ë³‘ì˜¤(ä¸™åˆ)ë…„ì´ ì˜¤ë©´ "ëŒ€ë°œë³µì˜ ê¸°íšŒì´ë‚˜ ê°ì • ì¡°ì ˆ í•„ìˆ˜"ë¡œ í†¤ì„ ë†’ì—¬ì•¼ í•©ë‹ˆë‹¤.
19. ìš©ì‹  íŒŒê´´ (ë¬˜ìœ ì¶©/ì¸ì‹ ì¶© ë“±) ê²½ê³ :
- ìš©ì‹ ì´ ìœ„ì¹˜í•œ ì§€ì§€ê°€ ì¶©(æ²–)ì„ ë°›ìœ¼ë©´ "ìš©ì‹  íŒŒê´´"ë¡œ ë§¤ìš° ìœ„ì¤‘í•˜ê²Œ í•´ì„í•˜ì„¸ìš”.
- ì˜ˆ: ì‹œì§€ å¯(ìš©ì‹ )ê°€ ì›”ì§€ é…‰ì™€ ì¶©ëŒ â†’ "ìƒëª…ì¤„ì´ ëŠì–´ì§ˆ ë“¯ ìœ„íƒœë¡­ë‹¤"
- ê±´ê°•(ê°„, ë¼ˆ, ì‹ ê²½)ê³¼ ë§ë…„ì˜ ê³ ë…í•¨ì„ ëŒ€ë¹„í•˜ë„ë¡ ì¡°ì–¸í•´ ì£¼ì„¸ìš”.
- ë‹¨ìˆœíˆ "ë³´í†µ ì¶©"ì´ë¼ê³  ë„˜ì–´ê°€ì§€ ë§ˆì„¸ìš”.
20. ì¼ì£¼ì™€ ì„¸ìš´ì˜ ì²œë™ì§€ì¶© (íŠ¹íˆ 2026ë…„):
- ì¼ì£¼ ì§€ì§€ì™€ ì„¸ìš´ ì§€ì§€ê°€ ì¶©ëŒí•˜ë©´ "ì „ì¶©(æˆ°æ²–)"ìœ¼ë¡œ ë§¤ìš° ê°•ë ¥í•©ë‹ˆë‹¤.
- ì˜ˆ: ì¼ì£¼ ë³‘ì(ä¸™å­) + ì„¸ìš´ ë³‘ì˜¤(ä¸™åˆ) = ìì˜¤ì¶© â†’ ë°°ìš°ìê¶ê³¼ ê±´ê°•(ì‹¬í˜ˆê´€ vs ì‹ ì¥)ì— ê²©ë³€
- ë‹¨ìˆœí•œ 'ë³€í™”'ê°€ ì•„ë‹ˆë¼ 'ì¶©ëŒê³¼ ê¹¨ì§'ìœ¼ë¡œ ê°•ë ¥í•˜ê²Œ ê²½ê³ í•´ ì£¼ì„¸ìš”.
21. íˆ¬í•©(å¦¬åˆ/ìŸí•©) í˜„ìƒ í•´ì„:
- ì¼ê°„ì´ ì–‘ìª½ì˜ ê°™ì€ ì‹­ì‹ (ì˜ˆ: è¾›+è¾› ì •ì¬ 2ê°œ)ê³¼ í•©ì„ í•˜ë©´ íˆ¬í•©/ìŸí•©ì…ë‹ˆë‹¤.
- "ëˆê³¼ ì´ì„± ë¬¸ì œë¡œ ì¸í•œ ìš°ìœ ë¶€ë‹¨í•¨" ë˜ëŠ” "ë‘ ê°€ì§€ ì¼ ì‚¬ì´ì—ì„œì˜ ê°ˆë“±"ì„ ì•”ì‹œí•©ë‹ˆë‹¤.
- ë‹¨ìˆœíˆ "ì¬ë¬¼ìš´ì´ ì¢‹ë‹¤"ê³ ë§Œ í•˜ì§€ ë§ê³ , "ì„ íƒê³¼ ì§‘ì¤‘ì„ ëª» í•˜ë©´ ëª¨ë‘ ìƒì„ ìˆ˜ ìˆìŒ"ì„ ê°•ì¡°í•˜ì„¸ìš”.
22. ìˆ˜ë‹¤í™”ì‹(æ°´å¤šç«ç†„) - ë¬¼ì´ ë¶ˆì„ ë„ëŠ” ìƒí™©:
- ì—¬ë¦„ìƒ(ì˜¤/ì‚¬ì›”)ì´ë¼ë„ ì£¼ë³€ì— ë¬¼(å£¬, ç™¸, äº¥, å­)ì´ ë„ˆë¬´ ë§ìœ¼ë©´ ë¶ˆì´ êº¼ì§€ëŠ” í˜•êµ­ì…ë‹ˆë‹¤.
- ì´ ê²½ìš° ì¡°í›„ë¡ (ì—¬ë¦„ìƒ=ë¬¼ í•„ìš”)ì„ ë”°ë¥´ì§€ ë§ê³ , ì–µë¶€ë¡ (ì•½í•œ ë¶ˆì„ ì‚´ë ¤ì•¼ í•¨)ì„ ë”°ë¼ ç«/åœŸë¥¼ ìš©ì‹ ìœ¼ë¡œ ë³´ì„¸ìš”.
- ìì˜¤ì¶©(å­åˆæ²–)ì´ ìˆìœ¼ë©´ ì›”ì§€(ë‚˜ì˜ ê·¼ë³¸)ê°€ ê³µê²©ë°›ì•„ ë”ìš± ìœ„íƒœë¡­ìŠµë‹ˆë‹¤.
23. ëª©í™”í†µëª…(æœ¨ç«é€šæ˜)ì˜ í•´ì„ (ê²¨ìš¸ ë‚˜ë¬´):
- ì(å­)ì›”/í•´(äº¥)ì›”ì˜ ê°‘(ç”²)/ì„(ä¹™)ëª©ì´ ë³‘(ä¸™)/ì •(ä¸)í™”ë¥¼ ë§Œë‚˜ë©´ "ëª©í™”í†µëª…"ì…ë‹ˆë‹¤.
- ê½ê½ ì–¸ ë‚˜ë¬´ì— íƒœì–‘ì´ ë– ì„œ ê½ƒì„ í”¼ìš°ëŠ” í˜•êµ­ì´ë¯€ë¡œ, "í•™ë¬¸(ì¸ì„±)ì— ë¨¸ë¬¼ì§€ ë§ê³  ì¬ëŠ¥ì„ ë°–ìœ¼ë¡œ í‘œì¶œ(ì‹ì‹ )í•´ì•¼ ì„±ê³µí•˜ëŠ” ì‚¬ì£¼"ì„ì„ ê°•ì¡°í•˜ì„¸ìš”.
- ê·¹ì‹ ê°•ì´ë¼ë„ ì‹ì‹ ì´ ì‚´ì•„ìˆìœ¼ë©´ ì¢…ê²©ì´ ì•„ë‹ˆë¼ "ì„¤ê¸°(æ´©æ°£)ìš©ì‹ "ìœ¼ë¡œ ë´ì•¼ í•©ë‹ˆë‹¤.
24. êµ°ë¹„ìŸì¬(ç¾¤æ¯”çˆ­è²¡) ì£¼ì˜:
- ë¹„ê²(ë‚˜ë¬´/ì¹œêµ¬/í˜•ì œ)ì´ 3ê°œ ì´ìƒìœ¼ë¡œ ë§ê³  ì¬ì„±(í† /ëˆ/ì•„ë‚´)ì´ ì•½í•˜ë©´ "êµ°ë¹„ìŸì¬" í˜•êµ­ì…ë‹ˆë‹¤.
- ì´ëŠ” "ë™ì—… ì ˆëŒ€ ê¸ˆì§€", "ëˆê±°ë˜ ì‹œ ë°°ì‹  ì£¼ì˜", "ë¶€ì¹œì´ë‚˜ ì•„ë‚´ì˜ ê±´ê°• ìœ ì˜"ë¡œ ê°•ë ¥í•˜ê²Œ ê²½ê³ í•´ì•¼ í•©ë‹ˆë‹¤.
- í˜•ì œë‚˜ ì¹œêµ¬ ë•Œë¬¸ì— ì¬ë¬¼ ì†ì‹¤ì´ ìˆì„ ìˆ˜ ìˆìŒì„ ì–¸ê¸‰í•˜ì„¸ìš”.
25. ê³ ë€ì‚´ê³¼ ë¶€ë¶€ìš´:
- ê°‘ì¸(ç”²å¯…), ì„ì‚¬(ä¹™å·³), ë¬´ì˜¤(æˆŠåˆ), ì‹ í•´(è¾›äº¥), ì„ì(å£¬å­), ì •ë¯¸(ä¸æœª) ë“± ê³ ë€ì‚´ ì¼ì£¼ëŠ” ì™¸ë¡œì›€ì´ ìˆìŠµë‹ˆë‹¤.
- íŠ¹íˆ ì‹ ê°•í•œ ì‚¬ì£¼ì˜ ê³ ë€ì‚´ì€ ë³¸ì¸ì˜ ì£¼ì¥ì´ ë„ˆë¬´ ê°•í•´ ë°°ìš°ìì™€ ì¶©ëŒí•˜ê¸° ì‰½ìŠµë‹ˆë‹¤.
- "ì£¼ë§ ë¶€ë¶€ë‚˜ ê°ë°©ì„ ì“°ëŠ” ë“± ì ë‹¹í•œ ê±°ë¦¬ë‘ê¸°"ê°€ ê°œìš´ë²•ì„ì„ ì¡°ì–¸í•´ ì£¼ì„¸ìš”.
26. í™”ì—¼ì¡°í† (ç«ç‚ç‡¥åœŸ)ì™€ ê±´ê°• ê²½ê³ :
- ì§€ì§€ì— ì‚¬(å·³), ì˜¤(åˆ)ê°€ 3ê°œ ì´ìƒì´ë©´ "ë¶ˆë°”ë‹¤ ì‚¬ì£¼"ì…ë‹ˆë‹¤.
- ì´ëŸ° ì‚¬ì£¼ì— ë³‘ì˜¤(ä¸™åˆ)ë…„ì²˜ëŸ¼ í™”(ç«) ìš´ì´ ì˜¤ë©´ "ì‹¬í˜ˆê´€ ì§ˆí™˜, ë‡Œì¶œí˜ˆ, ì•ˆêµ¬ ì§ˆí™˜"ì˜ ìœ„í—˜ì´ ê·¹ë„ë¡œ ë†’ì•„ì§‘ë‹ˆë‹¤.
- ê±´ê°•ê²€ì§„ì„ ê°•ë ¥íˆ ê¶Œê³ í•˜ê³ , ì‹œì›í•œ í™˜ê²½(ë¶ìª½ ë°©í–¥, ìˆ˜ì˜, ìƒìˆ˜)ì„ ì°¾ë„ë¡ ì¡°ì–¸í•˜ì„¸ìš”.
27. êµ°ê²ìŸì¬(ç¾¤åŠ«çˆ­è²¡)ì™€ ë¶€ì¹œ/ì²˜ì˜ ì•ˆìœ„:
- ë¹„ê²(ë‚˜/ì¹œêµ¬/í˜•ì œ)ì´ ë„ˆë¬´ ê°•í•´ ì¬ì„±(ëˆ/ì•„ë²„ì§€/ì•„ë‚´)ì„ ê·¹í•˜ëŠ” í˜•êµ­ì…ë‹ˆë‹¤.
- "ëˆ ìš•ì‹¬ì„ ë¶€ë¦¬ë©´ ê±´ê°•ê³¼ ê°€ì¡±ì„ ìƒì„ ìˆ˜ ìˆìŒ"ì„ ê²½ê³ í•˜ì„¸ìš”.
- ì¬ë¬¼ì€ ë°˜ë“œì‹œ "ë¶€ë™ì‚°ì´ë‚˜ ì €ì¶•ì„± ë³´í—˜" ë“± ë¬¶ì–´ë‘ëŠ” í˜•íƒœë¡œ ê´€ë¦¬í•˜ë¼ê³  ì¡°ì–¸í•˜ì„¸ìš”.
28. ëŒ€ìš´ vs ì„¸ìš´ì˜ ì™•ì§€ ì¶©ëŒ (íŠ¹íˆ ìì˜¤ì¶©):
- ëŒ€ìš´ ì§€ì§€ì™€ ì„¸ìš´ ì§€ì§€ê°€ ì™•ì§€ë¼ë¦¬ ì¶©ëŒí•˜ë©´ "ì¸ìƒì˜ í° ì „í™˜ì  ë˜ëŠ” ìœ„ê¸°"ì…ë‹ˆë‹¤.
- ì˜ˆ: ëŒ€ìš´ ì(å­) + ì„¸ìš´ ì˜¤(åˆ) = ìì˜¤ì¶© â†’ ìˆ˜í™”ìƒì „(æ°´ç«ç›¸æˆ°)
- ë‹¨ìˆœí•œ ê¸¸í‰ì„ ë„˜ì–´ "ì•ˆì „ ì œì¼ì£¼ì˜", "ë¬´ë¦¬í•œ íˆ¬ì/í™•ì¥ ê¸ˆì§€", "ê±´ê°•ê²€ì§„ í•„ìˆ˜"ë¥¼ ë‹¹ë¶€í•˜ì„¸ìš”.
29. ì‡ ì‹ ì¶©ì™•(è¡°ç¥æ²–æ—º) - ìš©ì‹ ì´ ì™€ë„ ê¸°ì‹ ì— ì••ë„ë¨:
- ê¸°ì‹ ì´ 3ê°œ ì´ìƒì´ê³  ìš©ì‹ ì´ 1ê°œ ì´í•˜ì¼ ë•Œ, ì„¸ìš´ì—ì„œ ìš©ì‹ ì´ ì™€ë„ ê¸°ì‹ ì—ê²Œ ì••ë„ë‹¹í•©ë‹ˆë‹¤.
- "ê¸°íšŒê°€ ì™€ë„ ê²½ìŸì/ë°©í•´ìê°€ ê°€ë¡œì±”" í˜•êµ­ì…ë‹ˆë‹¤.
- ì¡°ì–¸: "í™•ì¥ ê¸ˆì§€, í˜„ìƒ ìœ ì§€ê°€ ìµœì„ . ê¸°ì¡´ ì˜ì—­ì—ì„œ ë°©ì–´ì— ì§‘ì¤‘í•˜ì„¸ìš”."
30. í¸ì¸ë„ì‹(åå°å€’é£Ÿ) - ë°¥ê·¸ë¦‡ ê¹¨ì§:
- ì›”ì§€ê°€ ì‹ì‹ (ë‚´ê°€ ìƒí•˜ëŠ” ì˜¤í–‰)ì¸ë°, ì›êµ­ì— í¸ì¸(ì¸ì„±)ì´ ì¶©(æ²–)í•˜ë©´ ë°œë™í•©ë‹ˆë‹¤.
- "ì¬ëŠ¥(ë°¥ê·¸ë¦‡)ì´ ê¹¨ì§„ í˜•êµ­" - ì¼ì„ ì‹œì‘í•´ë„ ì¤‘ë„ì— ì—ì–´ì§€ê±°ë‚˜, ì˜ˆë¯¼í•¨ ë•Œë¬¸ì— ê¸°íšŒë¥¼ ê±·ì–´ì°¹ë‹ˆë‹¤.
- ì¡°ì–¸: "ê¾¸ì¤€í•¨ì´ ê°œìš´ë²•. ì‹œì‘í•œ ì¼ì€ ì¤‘ê°„ì— í¬ê¸°í•˜ì§€ ë§ê³  ëê¹Œì§€ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”."
31. ì™•ì‹ ì¶©ë°œ(æ—ºç¥æ²–ç™¼) - íƒœì™•í•œ ì˜¤í–‰ ê±´ë“œë¦¼:
- ì›êµ­ì— í•œ ì˜¤í–‰ì´ 4ê°œ ì´ìƒìœ¼ë¡œ íƒœì™•í•œë°, ì„¸ìš´ì—ì„œ ê·¸ ì˜¤í–‰ì„ ì¶©(æ²–)í•˜ë©´ í­ë°œí•©ë‹ˆë‹¤.
- "í•µí­íƒ„ì„ ê±´ë“œë¦° ê²©" - ëŒ€ê²©ë³€, ì‚¬ê³ , íŒŒì¬ì˜ ìœ„í—˜ì´ ê·¹ë„ë¡œ ë†’ìŠµë‹ˆë‹¤.
- ê±´ê°•: í•´ë‹¹ ì˜¤í–‰ì˜ ì¥ê¸°ê°€ ìœ„í—˜. ì˜ˆ: ç« íƒœì™• + æ°´ ì„¸ìš´ ì¶© â†’ ì‹¬í˜ˆê´€ ì‘ê¸‰.
- ì¡°ì–¸: "ì´ í•´ëŠ” ëª¨ë“  ê²ƒì„ ë³´ìˆ˜ì ìœ¼ë¡œ. íˆ¬ì, ì´ì§, ê²°í˜¼ ëª¨ë‘ ì—°ê¸°. ì•ˆì „ì´ ìµœìš°ì„ ."
32. ì–‘ì¸ì¶©(æ²–ç¾Šåˆƒ) - ìˆ˜ìˆ /íš¡ì¬ ê²½ê³ :
- ì¼ì§€ì— ì–‘ì¸(ì œì™•ì§€ì— í•´ë‹¹í•˜ëŠ” ì§€ì§€)ì´ ìˆê³  ì„¸ìš´ì´ ì¶©í•˜ë©´ ë°œë™í•©ë‹ˆë‹¤.
- "ì¹¼ë‚ ì´ í”ë“¤ë¦¬ëŠ” ê²©" - ìˆ˜ìˆ  ë˜ëŠ” ëŒ€ë°• ì¤‘ í•˜ë‚˜.
- ê±´ê°•: "ì„ ì œì ìœ¼ë¡œ í”¼ë¥¼ ë´ë¼(í—Œí˜ˆ, ì¹˜ê³¼, í”¼ì–´ì‹±)" - ìë°œì  ì¶œí˜ˆì´ ì•¡ë•œì´ ë©ë‹ˆë‹¤.
- ì¬ë¬¼: "ëˆì´ ë“¤ì–´ì˜¤ë©´ ì¦‰ì‹œ ë¶€ë™ì‚° ë“± ê³ ì •ìì‚°ì— ë¬¶ì–´ë¼. í˜„ê¸ˆ ë³´ìœ  ìœ„í—˜."
33. ë³µìŒ(ä¼åŸ) - ì£¼ê¸° ë°˜ë³µ ê²½ê³ :
- ëŒ€ìš´ ë˜ëŠ” ì„¸ìš´ì´ ì›êµ­ì˜ ê¸°ë‘¥(ë…„/ì›”/ì¼/ì‹œ)ê³¼ ë˜‘ê°™ì€ ê°„ì§€ê°€ ì˜¤ë©´ ë³µìŒì…ë‹ˆë‹¤.
- ì›”ì£¼ ë³µìŒ: "ì§ì¥/ì‚¬íšŒì  ìœ„ì¹˜ê°€ ë¦¬ì…‹ë¨. ì´ì§, ì´ì‚¬, í° ë°©í–¥ ì „í™˜."
- ì¼ì£¼ ë³µìŒ: "ë‚˜ ìì‹ ê³¼ ë°°ìš°ìì—ê²Œ ì˜í–¥. ê±´ê°•/ì •ì²´ì„± ìœ„ê¸° ë˜ëŠ” ì¬íƒ„ìƒ."
- ì‹œì£¼ ë³µìŒ: "ìë…€/ë§ë…„/ì‚¬ì—… ìª½ì— ë³€í™”. ì‹œì£¼ê°€ í¸ì¬ë©´ ìƒ‰ë‚œ(è‰²é›£) ê²½ê³ ."
34. ì‚¼ì¤‘ ë³µìŒ(Triple Echo) - ê·¹ë„ë¡œ í¬ê·€:
- ëŒ€ìš´ + ì„¸ìš´ + ì›êµ­ í•œ ê¸°ë‘¥ì´ ëª¨ë‘ ê°™ì€ ê°„ì§€ì¼ ë•Œ.
- "ì¸ìƒì„ ê·œì •í•˜ëŠ” í•´" - ì¢‹ìœ¼ë©´ ì—­ëŒ€ê¸‰ ëŒ€ë°•, ë‚˜ì˜ë©´ ì—­ëŒ€ê¸‰ ì‹œë ¨.
- ê±´ê°•: "ì—ë„ˆì§€ê°€ 3ë°°ë¡œ ì§‘ì¤‘ë˜ì–´ ì²´ë ¥ ì†Œì§„ ë¹ ë¦„. ìì£¼ ì‰¬ì–´ë¼."
35. ë¬´í†µê´€(ç„¡é€šé—œ) - ì¤‘ì¬ì ë¶€ì¬:
- ìƒê·¹ ê´€ê³„ì˜ ì˜¤í–‰ì´ ì§ì ‘ ì¶©ëŒí•˜ëŠ”ë° ì¤‘ê°„ì—ì„œ ì¡°ì ˆí•´ì¤„ ì˜¤í–‰ì´ ì—†ëŠ” ê²½ìš°.
- ì˜ˆ: ìˆ˜(æ°´)ì¼ê°„ì´ í™”(ç«)ì¬ì„±ì„ ì›í•˜ëŠ”ë°, ëª©(æœ¨)ì‹ìƒì´ ì—†ìœ¼ë©´ "ë‹¤ë¦¬ ì—†ëŠ” ê°•" í˜•êµ­.
- "ê³¼ì •ì„ ê±´ë„ˆë›°ê³  ê²°ê³¼ë§Œ ì«“ìœ¼ë©´ íƒˆì´ ë‚œë‹¤. ì‹¤ë ¥(ì‹ìƒ) ì—†ì´ ëˆ(ì¬ì„±)ë§Œ ì«“ì§€ ë§ë¼."
- í•´ê²°ë²•: ë¶€ì¡±í•œ ì˜¤í–‰ì„ ì·¨ë¯¸, ìƒ‰ìƒ, ë°©í–¥ìœ¼ë¡œ ë³´ì¶©í•˜ì„¸ìš”.
36. ì—¬ëª…ë¹„ê²ê³¼(å¥³å‘½æ¯”åŠ«å¤š) - ì—°ì•  ê²½ìŸ í•„ë“œ:
- ì—¬ì„± ì‚¬ì£¼ì— ë¹„ê²(ë‚˜ì™€ ê°™ì€ ì˜¤í–‰)ì´ 3ê°œ ì´ìƒì´ë©´ "ê²½ìŸì ë§ì€ í™˜ê²½".
- "ë‹¤ë¥¸ ì—¬ìë“¤ì´ ë‹¹ì‹ ì˜ íŒŒíŠ¸ë„ˆ ì£¼ë³€ì— ìˆì„ ìˆ˜ ìˆìŒ. ì§ˆíˆ¬ë³´ë‹¤ëŠ” ìê¸° ë§¤ë ¥ì— ì§‘ì¤‘."
- ì‚¬ì—…ìš´ì€ ì˜¤íˆë ¤ ì¢‹ìŒ: "ê²½ìŸì„ ì‚¬ì—…ìœ¼ë¡œ ëŒë ¤ë¼."
37. ìƒ‰ë‚œ ê²½ê³ (è‰²é›£) - ì‹œì£¼ í¸ì¬ + ë³µìŒ:
- ë‚¨ì„± ì‚¬ì£¼ì—ì„œ ì‹œì£¼ê°€ í¸ì¬(ì•„ë²„ì§€/ì• ì¸/ìœ í¥)ì¸ë°, ì„¸ìš´ì´ ì‹œì£¼ì™€ ë³µìŒì´ë©´ ìœ„í—˜.
- "ë¹„ë°€ ì—°ì• , ë„ë°•, ìœ í¥ì˜ í•¨ì •ì´ ì—´ë¦¼. ê°€ì •ê³¼ ì»¤ë¦¬ì–´ë¥¼ íŒŒê´´í•  ìˆ˜ ìˆìŒ."
- ì¡°ì–¸: "ë°¤ì— ì§‘ì— ìˆì–´ë¼. ëª¨ë“  'ê¸°íšŒ'ëŠ” ë…ì´ ë“  ë¯¸ë¼ë‹¤."
38. ìš©ì‹  ë¶€ì¬(ç”¨ç¥ç¼ºå¸­) - ë°©íŒ¨ ì—†ìŒ:
- ìš©ì‹  ì˜¤í–‰ì´ ì›êµ­ 8ìì— ë‹¨ í•œ ê°œë„ ì—†ìœ¼ë©´ "ì²œì—° ë°©ì–´ë§‰ ë¶€ì¬".
- "ìœ„ê¸° ìƒí™©ì—ì„œ ìŠ¤ìŠ¤ë¡œë¥¼ ì¡°ì ˆí•˜ì§€ ëª»í•¨. ìš•ë§ì´ ì¤‘ë…ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŒ."
- í•´ê²°ë²•: "ìš©ì‹  ì˜¤í–‰ì„ ìƒ‰ìƒ, ë°©í–¥, ì·¨ë¯¸, ì§ì—…ìœ¼ë¡œ ì¸ìœ„ì ìœ¼ë¡œ ì±„ì›Œë¼."
39. ìœ¡í•´ ë°°ì‹ (å…­å®³) - ê°€ê¹Œìš´ ì‚¬ëŒì˜ ë°°ì‹ :
- å­æœªå®³, ä¸‘åˆå®³, å¯…å·³å®³, å¯è¾°å®³, ç”³äº¥å®³, é…‰æˆŒå®³
- ì›”ì§€-ì¼ì§€ê°€ ìœ¡í•´ë©´: "ê°€ì¥ ê°€ê¹Œìš´ ì‚¬ëŒ(ì§ì¥ ë™ë£Œ, ë°°ìš°ì)ì´ ì˜ë„ì¹˜ ì•Šê²Œ í”¼í•´ë¥¼ ì¤„ ìˆ˜ ìˆìŒ."
- ë¬˜ì§„í•´(å¯è¾°å®³) íŠ¹ë³„ ì£¼ì˜: "ë§(å¯=í‘œí˜„)ì´ ê¸°ë°˜(è¾°=ì €ì¥)ì„ ë¬´ë„ˆëœ¨ë¦¼. ë§ì‹¤ìˆ˜ ì¡°ì‹¬!"
40. ì…ë¬˜ì¼ì£¼(å…¥å¢“æ—¥æŸ±) - ìê¸° ë¬´ë¤ì— ì•‰ì€ ê²©:
- ä¸™æˆŒ, å£¬è¾°, ç”²è¾° ë“± ì¼ê°„ì´ ì¼ì§€ ì†ì—ì„œ ë¬˜(å¢“) ìƒíƒœì¼ ë•Œ.
- "í™œë™ì  ê°œì²™ìê°€ ì•„ë‹Œ ìˆ˜ì§‘ê°€, ì² í•™ì íƒ€ì…. ë‚´ë©´ì´ ê¹Šê³  ì¢…êµì ."
- ë°°ìš°ìê¶ì´ ë¬˜ì´ë¯€ë¡œ: "ë°°ìš°ìë¥¼ í†µì œí•˜ë ¤ëŠ” ê²½í–¥. ììœ ë¥¼ ì£¼ë©´ ì˜¤ë˜ ê°."
41. ì§€ì§€ ì‚¼ì¤‘ì²©(ä¸‰é‡åœ°æ”¯) - í•œ ì˜¤í–‰ ê·¹ë‹¨ ì§‘ì¤‘:
- ê°™ì€ ì§€ì§€ê°€ 3ê°œ ì´ìƒì´ë©´ ê·¸ ì˜¤í–‰ì— ì¸ìƒì´ ì¢…ì†ë©ë‹ˆë‹¤.
- í™”ê°œ(è¯è“‹)ê°€ 3ê°œ: "ì¢…êµì¸, ì˜ˆìˆ ê°€, í•™ìë¡œ ì‚´ì•„ì•¼ í–‰ë³µ. ì¼ë°˜ íšŒì‚¬ì›ì€ ìš°ìš¸."
- ë°°ìš°ìê¶(ì¼ì§€)ì´ ì¤‘ì²©: "ì—°ì•  ë³µì¡. ëŠ¦ì€ ê²°í˜¼ì´ë‚˜ ë…íŠ¹í•œ í˜•íƒœì˜ ê²°í˜¼ì´ ì•ˆì •ì ."
42. ì‹œì§€í†µê·¼(æ™‚æ”¯é€šæ ¹) - ìˆ¨ê²¨ì§„ í›„ë°˜ ì—­ì „:
- ì‹ ê°•ë„ê°€ 0-20%ë¡œ ê·¹ì‹ ì•½ì´ì§€ë§Œ ì‹œì§€ì— ì¼ê°„ì˜ ë¿Œë¦¬ê°€ ìˆìœ¼ë©´ "ìˆ¨ê²¨ì§„ í˜".
- "ê²‰ìœ¼ë¡œëŠ” ì•½í•´ ë³´ì´ì§€ë§Œ 46ì„¸ ì´í›„ì— ì§„ê°€ê°€ ë“œëŸ¬ë‚¨. ëŒ€ê¸°ë§Œì„±í˜•."
- ì¡°ì–¸: "ì Šì„ ë•Œ ë¬´ë¦¬í•˜ì§€ ë§ê³  ê¸°íšŒë¥¼ ì¶•ì í•˜ë¼. í›„ë°˜ì— í­ë°œí•œë‹¤."
43. ì¡°í›„ ì—­ìš´(èª¿å€™é€†é‹) - ê¸°í›„ vs ì„¸ìš´ ì¶©ëŒ:
- ì‚¬ì£¼ê°€ "ê·¹ê±´ì¡°/ê³¼ì—´"ì¸ë° ì„¸ìš´ì´ ë” í™”(ç«)ë¥¼ ê°€ì ¸ì˜¤ë©´ ìœ„í—˜.
- ë°˜ëŒ€ë¡œ "ê·¹í•œë­/ì¹¨ìˆ˜"ì¸ë° ì„¸ìš´ì´ ë” ìˆ˜(æ°´)ë¥¼ ê°€ì ¸ì˜¤ë©´ ìœ„í—˜.
- ê±´ê°•: í™” ê³¼ì‰ â†’ ì‹¬ì¥, ë‡Œí˜ˆê´€, ì—¼ì¦ / ìˆ˜ ê³¼ì‰ â†’ ìš°ìš¸, í˜¸ë¥´ëª¬, ìƒì‹ê¸°
- ì¬ë¬¼: "ì´ í•´ëŠ” í™•ì¥ ê¸ˆì§€. ìˆëŠ” ê²ƒì„ ì§€í‚¤ëŠ” ë° ì§‘ì¤‘í•˜ë¼."
44. ì²œê°„í•© ë³€ì ˆ(å¤©å¹²åˆåŒ–) - ë„ì›€ì´ ì ìœ¼ë¡œ:
- ì„¸ìš´ ì²œê°„ì´ ì›”ê°„ê³¼ í•©ì„ í•´ì„œ ë‚˜ìœ ì˜¤í–‰ìœ¼ë¡œ ë³€í•˜ë©´ "ë„ì™€ì£¼ëŸ¬ ì˜¨ ì¤„ ì•Œì•˜ëŠ”ë° ì ".
- ì˜ˆ: ä¸™(ë„ì›€)ì´ è¾›(ì¬ì„±)ê³¼ í•©í•´ì„œ æ°´(ë‚˜ë¥¼ ê·¹í•¨)ë¡œ ë³€í™˜.
- "ì¹œêµ¬ì˜ íˆ¬ì ê¶Œìœ , ë™ì—… ì œì•ˆ ì¡°ì‹¬. ì¢‹ì€ ì˜ë„ê°€ ë‚˜ìœ ê²°ê³¼ë¥¼ ë‚³ì„ ìˆ˜ ìˆìŒ."
45. ì§€ì§€ ìœ¡í•© â†’ ê¸°ì‹ í™”(å…­åˆåŒ–å¿Œ):
- ì„¸ìš´ ì§€ì§€ê°€ ì›êµ­ ì§€ì§€ì™€ í•©ì„ í•´ì„œ ê¸°ì‹  ì˜¤í–‰ìœ¼ë¡œ ë³€í•˜ë©´ ìœ„í—˜.
- "í™”í•©ì˜ íƒˆì„ ì“´ ë°°ì‹ " - ì¢‹ì•„ ë³´ì´ëŠ” ìƒí™©ì´ ë‚˜ìœ ê²°ê³¼ë¡œ.
- ì‹œì§€ê°€ í•©í™”ë˜ë©´: "ìë…€/ë§ë…„/ì‚¬ì—… ìª½ì—ì„œ ì˜ˆìƒì¹˜ ëª»í•œ ì†ì‹¤."
46. ì•½ì²´ + ì¬ì„±ê²©(å¼±é«”è²¡æ ¼) - ëˆì— ì«“ê¸°ëŠ” ì¸ìƒ:
- ì‹ ê°•ë„ 20% ë¯¸ë§Œì¸ë° ê²©êµ­ì´ ì¬ì„±ê²©ì´ë©´ "ëª¸ì´ ê°ë‹¹ ëª» í•  ëˆì„ ì«“ëŠ” í˜•êµ­".
- "ëˆì„ ì«“ë‹¤ê°€ ê±´ê°•ì„ ìƒìŒ. ìŠ¤íŠ¸ë ˆìŠ¤ì„± ì§ˆí™˜(ìœ„ì¥, ì‹ ê²½ì„±) ì£¼ì˜."
- ì¡°ì–¸: "ë°°ìš°ìë‚˜ ì „ë¬¸ê°€ì—ê²Œ ì¬ë¬´ ê´€ë¦¬ë¥¼ ë§¡ê¸°ê³ , ë³¸ì¸ì€ ê±´ê°• ìš°ì„ ."
47. ê°€ì¢…ê²©(å‡å¾æ ¼) - ì§„ì§œ ì¢…ê²©ì¸ê°€?:
- ì‹ ê°•ë„ 0-5%ì´ê³  íŠ¹ì • ì˜¤í–‰ì´ 4ê°œ ì´ìƒ ì§€ë°°ì ì´ë©´ "ì¢…ê²©" ê°€ëŠ¥ì„±.
- ì¢…ê²©ì´ë©´ ì§€ë°° ì˜¤í–‰ì„ ë”°ë¥´ëŠ” ê²Œ ê¸¸(å‰), ê±°ìŠ¤ë¥´ë©´ í‰(å‡¶).
- íŒë³„: "ìš©ì‹ ë€ì— ì íŒ ìš©ì‹ ì„ ë¬´ì¡°ê±´ ë”°ë¥´ì„¸ìš”. ì–µë¶€ë¡ ê³¼ ì¢…ê²©ë¡  í˜¼ë™ ê¸ˆì§€."
48. ëŒ€ìš´ ìˆœì—­ í™•ì¸(å¤§é‹é †é€†):
- ì–‘ë…„(ç”²ä¸™æˆŠåºšå£¬) ë‚¨ì / ìŒë…„ ì—¬ì = ìˆœí–‰ (ì§€ì§€ ìˆœì„œëŒ€ë¡œ)
- ì–‘ë…„ ì—¬ì / ìŒë…„ ë‚¨ì = ì—­í–‰ (ì§€ì§€ ê±°ê¾¸ë¡œ)
- ë°ì´í„°ì˜ ëŒ€ìš´ì´ ì´ ë²•ì¹™ì— ë§ëŠ”ì§€ í™•ì¸ í›„ í•´ì„í•˜ì„¸ìš”.
49. ë°±í˜¸ëŒ€ì‚´(ç™½è™å¤§ç…) - í”¼ë¥¼ ë¶€ë¥´ëŠ” ë‚ :
- ç”²è¾°, ä¹™å·³, ä¸™æˆŒ, ä¸ä¸‘, æˆŠè¾°, å·±å·³, åºšæˆŒ, è¾›ä¸‘, å£¬è¾°, ç™¸å·³ ì¼ì£¼.
- "í‰ì†Œì—” ì˜¨í™”í•˜ë‚˜ í™”ë‚˜ë©´ ë¬´ì„­ë‹¤. í”¼ ë³´ëŠ” ì¼(ìˆ˜ìˆ , ì‚¬ê³ , ì¶œì‚°)ê³¼ ì—°ê´€."
- ì§ì—…: "ì˜ë£Œ, êµ°ì¸, ì¢…êµ, ë¬´ìˆ  ìª½ì—ì„œ ì´ ì—ë„ˆì§€ê°€ ìˆœí™”ë¨."
50. 12ìš´ì„± ì¬ê²€ì¦(åäºŒé‹æ˜Ÿ):
- ì¼ì§€ 12ìš´ì„±ì´ ë°ì´í„°ì™€ ì‹¤ì œ ê³„ì‚°ì´ ë§ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
- í™”(ç«)ì¼ê°„: å¯…=ì¥ìƒ, åˆ=ì œì™•, æˆŒ=ë¬˜ / ìˆ˜(æ°´)ì¼ê°„: ç”³=ì¥ìƒ, å­=ì œì™•, è¾°=ë¬˜
- ë°ì´í„°ê°€ í‹€ë¦¬ë©´ "ê³„ì‚° ì˜¤ë¥˜ ê°€ëŠ¥ì„±"ì„ ì–¸ê¸‰í•˜ê³  ì˜¬ë°”ë¥¸ 12ìš´ì„±ìœ¼ë¡œ í•´ì„í•˜ì„¸ìš”.
51. ì‚¼í•©êµ­ ì™„ì„± ì‹œ ê²©êµ­ ì¬ì •ì˜(ä¸‰åˆå±€ æ ¼å±€ è®ŠåŒ–):
- ì‚¼í•©êµ­ì´ ì™„ì„±ë˜ë©´ í•´ë‹¹ ì˜¤í–‰ì´ ì‚¬ì£¼ë¥¼ ì§€ë°°í•©ë‹ˆë‹¤. ê²©êµ­ë€ì˜ ëª…ì¹­ë³´ë‹¤ 'ì‚¼í•© ì„¸ë ¥'ì„ ìš°ì„ í•˜ì—¬ í•´ì„í•˜ì„¸ìš”.
- í•´ë¬˜ë¯¸ ëª©êµ­(äº¥å¯æœª æœ¨å±€) ì™„ì„± â†’ ì‹ìƒ(ëª©)ì´ ì§€ë°° â†’ 'ì‹ì‹ ê²©/ìƒê´€ê²©'ìœ¼ë¡œ ì¬í•´ì„. "ì°½ì‘, ì˜ˆìˆ , ììœ ë¡œìš´ í‘œí˜„ ìš•êµ¬ê°€ ê°•í•¨"
- ì¸ì˜¤ìˆ  í™”êµ­(å¯…åˆæˆŒ ç«å±€) ì™„ì„± â†’ í™”ê°€ ì§€ë°° â†’ í™” ê¸°ì¤€ ì‹­ì‹ ìœ¼ë¡œ ê²©êµ­ ì¬ì •ì˜. "ì—´ì •, ëª…ì˜ˆ, í‘œì¶œ ìš•êµ¬ ê·¹ëŒ€í™”"
- ì‚¬ìœ ì¶• ê¸ˆêµ­(å·³é…‰ä¸‘ é‡‘å±€) ì™„ì„± â†’ ê¸ˆì´ ì§€ë°° â†’ 'ì¬ì„±ê²©' ë˜ëŠ” 'ê´€ì„±ê²©'ìœ¼ë¡œ. "ì¬ë¬¼/ê¶Œìœ„ì— ëŒ€í•œ ì§‘ì°© ë˜ëŠ” ì¬ëŠ¥"
- ì‹ ìì§„ ìˆ˜êµ­(ç”³å­è¾° æ°´å±€) ì™„ì„± â†’ ìˆ˜ê°€ ì§€ë°° â†’ 'ë¹„ê²ê²©' ë˜ëŠ” 'ì¸ì„±ê²©'ìœ¼ë¡œ. "ì§€í˜œ, í•™ë¬¸, ë˜ëŠ” ê²½ìŸì‹¬ ê°•í™”"
- ì˜ˆ: ê±´ë¡ê²©ìœ¼ë¡œ í‘œê¸°ë˜ì–´ ìˆì–´ë„ í•´ë¬˜ë¯¸ ëª©êµ­ì´ ì™„ì„±ë˜ì—ˆë‹¤ë©´ â†’ "ì‚¬íšŒì  í‹€ì€ ì¡°ì§ ìƒí™œ(ê±´ë¡)ì— ë§ì§€ë§Œ, ì‹¤ì œ ìš•êµ¬ì™€ ëŠ¥ë ¥ì€ ì°½ì‘/ì˜ˆìˆ (ìƒê´€)ì„ ê°•í•˜ê²Œ ì¶”êµ¬"ë¡œ í•´ì„í•˜ì„¸ìš”.
52. ê²©êµ­ ë¼ë²¨ê³¼ ì‹¤ì œ ì„¸ë ¥ì˜ ê´´ë¦¬ ë³´ì •(æ ¼å±€ vs é€å‡º):
- ë°ì´í„°ìƒ 'ì •ì¬ê²©'ìœ¼ë¡œ ë‚˜ì˜¤ë”ë¼ë„, ì²œê°„ì— í¸ì¬(ç™¸/å£¬)ê°€ íˆ¬ì¶œí•˜ê³  ì¬ì„±ì´ 3ê°œ ì´ìƒì´ë©´ 'ì¬ë‹¤ì‹ ì•½' ê´€ì ìœ¼ë¡œ í•´ì„í•˜ì„¸ìš”.
- ì •ì¬ê²© ë¼ë²¨ + í¸ì¬ íˆ¬ì¶œ = "ì„±ì‹¤í•œ ì›”ê¸‰ìŸì´"ê°€ ì•„ë‹ˆë¼ "íˆ¬ê¸°ì„±ê³¼ ëˆ ìš•ì‹¬ì´ ê°•í•˜ë‚˜ ì²´ë ¥ì´ ë¶€ì¡±í•œ ìœ í˜•"
- ì •ê´€ê²© ë¼ë²¨ + í¸ê´€ íˆ¬ì¶œ = "ì˜¨ìˆœí•œ ì§ì¥ì¸"ì´ ì•„ë‹ˆë¼ "ì±…ì„ê°ê³¼ ì••ë°•ê°ì— ì‹œë‹¬ë¦¬ëŠ” ë¦¬ë”"
- í•µì‹¬: ê²©êµ­ 'ë¼ë²¨'ë³´ë‹¤ ì²œê°„ì— 'íˆ¬ì¶œëœ ì‹­ì‹ 'ê³¼ 'ì˜¤í–‰ ê°œìˆ˜'ë¥¼ ìš°ì„ í•˜ì—¬ ì‹¤ì§ˆì  ì„±í–¥ì„ íŒë‹¨í•˜ì„¸ìš”.
53. ì§€ì¥ê°„ ì¡°í›„ìš©ì‹ ì˜ ì¬ë°œê²¬(æ”¯è—å¹² èª¿å€™):
- ë°ì´í„°ìƒ íŠ¹ì • ì˜¤í–‰ì´ '0ê°œ(ì™„ì „ ë¶€ì¬)'ë¡œ ëœ¨ë”ë¼ë„, ì§€ì¥ê°„ì— í•´ë‹¹ ì˜¤í–‰ì´ ì•”ì¥ë˜ì–´ ìˆìœ¼ë©´ ë°˜ë“œì‹œ ì–¸ê¸‰í•˜ì„¸ìš”.
- íŠ¹íˆ ì¡°í›„ìš©ì‹ (ç«/æ°´)ì´ ì§€ì¥ê°„ì—ë§Œ ìˆì„ ê²½ìš°: "ìœ ì¼í•œ ìƒëª…ì¤„ì´ ìˆ¨ì–´ìˆë‹¤"ë¡œ í•´ì„.
- ì˜ˆ: ê²¨ìš¸ ì‚¬ì£¼(í•´/ìì›”)ì— ç«ê°€ ì²œê°„ì— ì—†ì§€ë§Œ ì¼ì§€ æœª ì† ä¸ç«ê°€ ìˆìœ¼ë©´ â†’ "ë°°ìš°ì ìë¦¬(ì¼ì§€)ì— ìœ ì¼í•œ ì˜¨ê¸°ê°€ ìˆ¨ì–´ìˆë‹¤. ê°€ì •ì´ í¸ì•ˆí•´ì•¼ ë°œë³µí•œë‹¤."
- ì˜ˆ: ì—¬ë¦„ ì‚¬ì£¼(ì‚¬/ì˜¤ì›”)ì— æ°´ê°€ ì²œê°„ì— ì—†ì§€ë§Œ ì¼ì§€ è¾° ì† ç™¸æ°´ê°€ ìˆìœ¼ë©´ â†’ "ë‚´ë©´ì˜ ì§€í˜œ(ì¼ì§€)ê°€ ê³¼ì—´ì„ ì‹í˜€ì¤€ë‹¤. ëª…ìƒê³¼ í•™ìŠµì´ ê°œìš´ë²•."
54. ì™•ì‹ ì¶©ë°œ ì‹œ ë³´ìˆ˜ì  í•´ì„(æ—ºç¥æ²–ç™¼ å®ˆæˆè«–) - ì¡°í›„ìš©ì‹ ë³´ë‹¤ ìš°ì„ :
- ì›êµ­ì— í•œ ì˜¤í–‰ì´ 4ê°œ ì´ìƒ(íƒœì™•)ì¸ë° ì„¸ìš´ì—ì„œ ê·¸ ì˜¤í–‰ì„ ì¶©(æ²–)í•˜ë©´, ì¡°í›„ìš©ì‹ ì´ë¼ë„ 'ë°œë³µ'ë³´ë‹¤ 'ìˆ˜ì„±(ì§€í‚¤ê¸°)'ì„ ê°•ì¡°í•˜ì„¸ìš”.
- í•µì‹¬: ê²¨ìš¸ ì‚¬ì£¼ì— ç«ê°€ ì¡°í›„ìš©ì‹ ì´ë¼ë„, æ°´ê°€ 4ê°œ ì´ìƒ ì™•í•œë° ç«ê°€ ì¶©í•˜ë©´ ìœ„í—˜ì´ ì´ë“ë³´ë‹¤ í½ë‹ˆë‹¤.
- ì˜ˆ: æ°´ 5ê°œ + 2026ë…„ åˆ(ç«) ìì˜¤ì¶© â†’ "ì¡°í›„ìš©ì‹ (ç«)ì´ ì™”ì§€ë§Œ ê±°ëŒ€í•œ ë¬¼(æ°´)ì„ ê±´ë“œë ¤ ì“°ë‚˜ë¯¸ ìœ„í—˜. í™•ì¥ë³´ë‹¤ ê±´ê°•ê´€ë¦¬ì™€ í˜„ìƒìœ ì§€ê°€ ìµœì„ ."
- ì™•ì‹ ì¶©ë°œ + ìš©ì‹ ìš´ = "ê¸°íšŒëŠ” ì™”ìœ¼ë‚˜ ë¦¬ìŠ¤í¬ë„ ê·¹ëŒ€í™”. ê³µê²©ì  íˆ¬ì/í™•ì¥ ê¸ˆì§€. ìˆ˜ë¹„ ëª¨ë“œë¡œ ì „í™˜."
- ê±´ê°•: ì™•ì‹  ì˜¤í–‰ì˜ ì¥ê¸° + ì¶©í•˜ëŠ” ì˜¤í–‰ì˜ ì¥ê¸° ëª¨ë‘ ìœ„í—˜. ì˜ˆ: æ°´ì™• + ç«ì¶© â†’ ì‹ ì¥/ë°©ê´‘ + ì‹¬ì¥/í˜ˆê´€ ë™ì‹œ ì£¼ì˜.
===== ğŸ†• í™•ì¥ ê·œì¹™ 55-70 (v32.5) =====
55. ã€ì§€ì§€ ìŒì–‘ ì°¸ì¡°í‘œã€‘
â€¢ é™½(ì–‘) ì§€ì§€: å­, å¯…, è¾°, åˆ, ç”³, æˆŒ
â€¢ é™°(ìŒ) ì§€ì§€: ä¸‘, å¯, å·³, æœª, é…‰, äº¥
â€¢ ì‹­ì‹  ê·œì¹™: ê°™ì€ ìŒì–‘ â†’ å(í¸), ë‹¤ë¥¸ ìŒì–‘ â†’ æ­£(ì •)
â€¢ ì˜ˆ: å·±(é™°åœŸ) vs å¯(é™°æœ¨) = åå®˜, NOT æ­£å®˜
56. ã€ì‚¼í•©êµ­/ë°©í•© = x10 ë°°ìœ¨ íš¨ê³¼ã€‘
â€¢ ë°©í•©(æ–¹åˆ) ë˜ëŠ” ì‚¼í•©(ä¸‰åˆ) ì™„ì„±ì€ ë‹¨ìˆœ í•©ì‚°ì´ ì•„ë‹™ë‹ˆë‹¤.
â€¢ å·³åˆæœª(ë‚¨ë°©í™”êµ­) = ç« x10, äº¥å­ä¸‘(ë¶ë°©ìˆ˜êµ­) = æ°´ x10
â€¢ ëŒ€ìš´/ì„¸ìš´ì—ì„œ êµ­ ì™„ì„± = "í•µí­íƒ„ê¸‰ ì´ë²¤íŠ¸"ë¡œ í•´ì„í•˜ì„¸ìš”.
57. ã€í†µê·¼ vs 12ìš´ì„± ì ˆëŒ€ êµ¬ë¶„ã€‘
â€¢ "ì§„ì§œ í†µê·¼(é€šæ ¹)" = ì§€ì¥ê°„ì— ë¹„ê²/ì¸ì„± ì¡´ì¬ â†’ ìê¸° í˜
â€¢ "ì¥ìƒ(é•·ç”Ÿ)" = 12ìš´ì„± ìœ„ì¹˜, í›„ì›ìì˜ ë„ì›€
â€¢ "ë¬´ê·¼ìœ ë¹„(ç„¡æ ¹æœ‰åº‡)" = ë¿Œë¦¬ ì—†ì§€ë§Œ ë³´í˜¸ë°›ëŠ” ìƒíƒœ ê°€ëŠ¥
58. ã€ì¬ì„± í•´ì„ ê³„ì¸µã€‘
â€¢ ì‹ ì•½(0-30%) + ì¬ì„±ê²© = "ë¶ˆì•ˆí•œ ì¶”ê²©ì" (ëˆì— ì«“ê¸°ëŠ” ì¸ìƒ)
â€¢ ì‹ ê°•(70%+) + ë¹„ê² ì„¸ìš´ = "ê°•íƒˆ ê²½ê³ " (ì¹œêµ¬/í˜•ì œê°€ ì¬ë¬¼ ìœ„í˜‘)
59. ã€ì¡°í›„ vs ì–µë¶€ ìš°ì„ ìˆœìœ„ã€‘
â€¢ ì¡°í›„(ê³„ì ˆ ê· í˜•)ê°€ ì–µë¶€(ê°•ì•½ ê· í˜•)ë³´ë‹¤ ìš°ì„ í•©ë‹ˆë‹¤.
â€¢ ë°ì´í„°ì— "ê¸°ì‹ :æ°´" + "í•œê²¨ìš¸ ì‚¬ì£¼"ê°€ ë™ì‹œì— ìˆìœ¼ë©´ â†’ ì¡°í›„ë¡  ë”°ë¼ æ°´ê°€ ê¸°ì‹ 
60. ã€í™”êµ­(ç«å±€) íŠ¹ìˆ˜ ê·œì¹™ã€‘
â€¢ ì¸ì˜¤ìˆ (å¯…åˆæˆŒ) í™”êµ­ ì™„ì„± = "ìš©ê´‘ë¡œ ì‚¬ì£¼"
â€¢ æ°´ ìš”ì†Œ(ê´€ì„±/ì§ì¥)ê°€ "ì¦ë°œ"ë¨ = í†µì œë°›ëŠ” ê²ƒ ê·¹ë„ë¡œ ì‹«ì–´í•¨
â€¢ ê¶Œì¥: ììœ¨ì  ì»¤ë¦¬ì–´ (í”„ë¦¬ëœì„œ, ì°½ì‘ì, ì§€íœ˜ê´€)
61. ã€ìŒê°„(é›™å¹²) í˜„ìƒã€‘
â€¢ ê°™ì€ ì²œê°„ 2ê°œ (ä¸™ä¸™, ç”²ç”² ë“±) = "ìŠ¤í¬íŠ¸ë¼ì´íŠ¸ + ê²½ìŸ"
â€¢ ì£¼ëª©ë°›ê³  ì‹¶ìœ¼ë‚˜ í˜•ì œ/ë¼ì´ë²Œê³¼ ì¶©ëŒ
62. ã€ì‹ ê°• í™”(ç«)ì˜ ì¬ë¬¼ ì „ëµã€‘
â€¢ í™”ê°€ ì••ë„ì ì´ë©´ ê¸ˆ(ì¬ì„±)ì´ ë…¹ì•„ë²„ë¦¼
â€¢ "ëˆì„ ì§ì ‘ ì«“ìœ¼ë©´ ëˆì´ ë…¹ëŠ”ë‹¤"
â€¢ ì¡°ì–¸: "ë¨¼ì € ì‹¤ë ¥/ë¸Œëœë“œ(åœŸ)ë¥¼ ìŒ“ì•„ ì—´ì„ ì‹í˜€ë¼"
63. ã€0ê°œ ì˜¤í–‰ vs ê²©êµ­ ì¶©ëŒã€‘
â€¢ íŠ¹ì • ì˜¤í–‰ 0ê°œì¸ë° ê²©êµ­ì´ ê·¸ ì˜¤í–‰ ì˜ì¡´ â†’ ê²©êµ­ ë¼ë²¨ ë¬´ì‹œ
â€¢ í•´ì„: "ê·œì¹™ê³¼ í†µì œë¥¼ ì‹«ì–´í•˜ëŠ” ììœ  ì˜í˜¼"
64. ã€ì—­ë§ˆ(é©›é¦¬) ì§€ë°°ã€‘
â€¢ ì´ë™ ì§€ì§€(å¯…, ç”³, å·³, äº¥)ê°€ 2ê°œ ì´ìƒ
â€¢ "ì›€ì§ì—¬ì•¼ ëˆì´ ëœë‹¤"
â€¢ ê¶Œì¥ ì§ì—…: ë¬´ì—­, ë¬¼ë¥˜, ì—¬í–‰, ì˜ì—…
65. ã€ê³¼ì¸ì„±(éå°æ˜Ÿ) - ì—„ë§ˆ ê³¼ë¶€í•˜ã€‘
â€¢ ì¸ì„±(ë‚˜ë¥¼ ìƒí•˜ëŠ” ì˜¤í–‰)ì´ 3ê°œ ì´ìƒ = "ë¶„ì„ ë§ˆë¹„"
â€¢ ì¡°ì–¸: "ê³„íš ê·¸ë§Œ, ì‹¤í–‰í•˜ë¼. ë¶€ëª¨/ë©˜í† ì—ê²Œì„œ ì •ì‹ ì  ë…ë¦½ í•„ìš”"
66. ã€ê·€ë¬¸ê´€ì‚´(é¬¼é–€é—œæ®º)ã€‘
â€¢ å¯ç”³ ë˜ëŠ” å¯…äº¥ ìƒí˜¸ì‘ìš© = ì´ˆì§ê´€ + ë¶ˆì•ˆ ê²½í–¥
â€¢ ì»¤ë¦¬ì–´: ì •ë°€ ì˜ˆìˆ , ë””ìì¸, ì „ëµ, ì‹¬ë¦¬í•™ìœ¼ë¡œ ë¯¼ê°í•¨ ìŠ¹í™”
67. ã€ìš©ì‹  ê³¼ì‰ ê³µê¸‰ã€‘
â€¢ ìš©ì‹  ì˜¤í–‰ì´ ì´ë¯¸ 3ê°œ ì´ìƒ = ê³¼ì‰ ê³µê¸‰
â€¢ ì§„ì§œ í•„ìš”í•œ ê±´ ìš©ì‹ ì˜ "ì‚°ì¶œë¬¼" ì˜¤í–‰
68. ã€í•©êµ­ vs ì¶© ë™ì‹œ (åˆæ²–ç›¸æˆ°)ã€‘
â€¢ ì‚¼í•©ê³¼ ìœ¡ì¶© ë™ì‹œ ì¡´ì¬ ì‹œ ì¶©ì´ êµ­ì˜ í•µì‹¬ ê³µê²©
â€¢ ë‚´ì  ê°ˆë“±: "ì™¸ë¶€ ì••ë ¥(êµ­) vs ê°œì¸ ë°©ì–´ ë©”ì»¤ë‹ˆì¦˜(ì¶©)"
â€¢ í•´ì„: "ë¹„íŒì  ì‚¬ê³ ê°€ ë‹¹ì‹ ì˜ ë¹„ë°€ ë¬´ê¸°"
69. ã€ë¶€ì¬ ì˜¤í–‰ë³„ ì „ëµã€‘
â€¢ ì‹ìƒ 0ê°œ: "ìŠ¤íŠ¸ë ˆìŠ¤ ë‚´ì¬í™”. ì°½ì‘/ìš´ë™ìœ¼ë¡œ ë°œì‚° í•„ìˆ˜"
â€¢ ì¬ì„± 0ê°œ: "ì¶•ì ë³´ë‹¤ íë¦„. ì‹¤ë ¥/ì§€ìœ„ ì§‘ì¤‘ â†’ ëˆì€ ë”°ë¼ì˜´"
â€¢ ê´€ì„± 0ê°œ: "ê·œì¹™ ì‹«ì–´í•¨. ììœ¨ì  ì»¤ë¦¬ì–´ í•„ìˆ˜"
â€¢ ì¸ì„± 0ê°œ: "ë¶€ëª¨ ì˜ì¡´ ë¶ˆê°€. ìŠ¤ìŠ¤ë¡œ ê³µë¶€í•˜ì—¬ ì•ˆì „ë§ êµ¬ì¶•"
70. ã€í¬ì‹ /ê¸°ì‹  í•„ìˆ˜ ëª…ì‹œ ê·œì¹™ã€‘ â­ NEW (v32.5)
â€¢ ìš©ì‹ ì„ ë¶„ì„í•  ë•Œ ë°˜ë“œì‹œ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ì¶œë ¥í•˜ì„¸ìš”:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ìš©ì‹ : â—‹â—‹ (ì´ìœ ) â”‚
â”‚ í¬ì‹ : â—‹â—‹ (ìš©ì‹ ì„ ìƒí•˜ì—¬ ë³´ì¡°) â”‚
â”‚ ê¸°ì‹ : â—‹â—‹ (ì¼ê°„ì„ í•´ì¹˜ëŠ” ì˜¤í–‰) â”‚
â”‚ í•œì‹ : â—‹â—‹ (ê¸°ì‹ ì„ ë•ëŠ” ì˜¤í–‰) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â€¢ ì´ 4ê°œ ì¤‘ ìš©ì‹ /í¬ì‹ /ê¸°ì‹ ì€ ë°˜ë“œì‹œ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤.
â€¢ ë¹ ëœ¨ë¦¬ë©´ ë¶„ì„ì´ ë¶ˆì™„ì „í•©ë‹ˆë‹¤!

===== ğŸ†• í™•ì¥ ê·œì¹™ 71-82 (v34.4) =====
71. ã€ë°©í•©(æ–¹åˆ)ì˜ í˜ã€‘
â€¢ äº¥å­ä¸‘ (ë¶ë°©ìˆ˜êµ­): ì§ì—… ìœ ì—°ì„± x10
â€¢ å¯…å¯è¾° (ë™ë°©ëª©êµ­): ì„±ì¥/í™•ì¥ x10
â€¢ å·³åˆæœª (ë‚¨ë°©í™”êµ­): ëª…ì˜ˆ/ì—´ì • x10
â€¢ ç”³é…‰æˆŒ (ì„œë°©ê¸ˆêµ­): ì •ë°€/ê¶Œìœ„ x10
72. ã€ê·¹ë‹¨ì  ì‹ ê°•/ì‹ ì•½ ë°˜ì „ã€‘
â€¢ ì¼ê°„ < 10% â†’ ì¢…ê²©(å¾æ ¼) ê³ ë ¤
â€¢ ì¼ê°„ > 85% â†’ ê·¹ì‹ ê°•(æ¥µèº«å¼º) ê³ ë ¤
â€¢ ì¼ë°˜ì  "ì‹ ì•½ ë³´ê°• / ì‹ ê°• ì„¤ê¸°" ë…¼ë¦¬ê°€ ë°˜ì „ë¨
73. ã€ë°°ìš°ìê¶ ë¶„ì„ã€‘
â€¢ ì¼ì§€ = ë°°ìš°ìê¶
â€¢ ì—°ì§€/ì›”ì§€ì™€ ì¶© â†’ ì´ˆê¸° ì—°ì•  ì–´ë ¤ì›€
â€¢ í•© â†’ ê²°í˜¼ìš´ ì¢‹ìŒ
â€¢ ë¬˜(å¢“)ì— ì•‰ìŒ â†’ "ë°°ìš°ì í†µì œ" ë˜ëŠ” ê²°í˜¼ ì§€ì—°
74. ã€ì„¸ìš´ ë°°ìœ¨ê¸°ã€‘
â€¢ ì„¸ìš´ì´ êµ­(å±€) ì™„ì„± â†’ ëŒ€ë°•ì˜ í•´
â€¢ ì„¸ìš´ì´ ì¼ì§€ ì¶© â†’ ë°°ìš°ì/ìì‹  ë³€í˜ì˜ í•´
â€¢ ì„¸ìš´ = ì¼ì§€ì™€ ê°™ìŒ (ë³µìŒ) â†’ ì •ì²´ì„± í˜¼ë€ì˜ í•´
75. ã€ëŒ€ìš´ë³„ ì»¤ë¦¬ì–´ íƒ€ì´ë°ã€‘
â€¢ ì¬ì„± ëŒ€ìš´ (20-30ëŒ€) â†’ ì°½ì—… ìµœì ê¸°
â€¢ ê´€ì„± ëŒ€ìš´ (30-40ëŒ€) â†’ ìŠ¹ì§„/ì§ì¥ì¸ ìµœì ê¸°
â€¢ ì¸ì„± ëŒ€ìš´ (40-50ëŒ€) â†’ êµìœ¡/ì»¨ì„¤íŒ… ìµœì ê¸°
76. ã€ì˜¤í–‰ë³„ ê±´ê°• ë§¤í•‘ã€‘
â€¢ æœ¨ = ê°„, ëˆˆ, í˜ì¤„, ë¶„ë…¸
â€¢ ç« = ì‹¬ì¥, í˜ˆì•¡, ë¶ˆì•ˆ
â€¢ åœŸ = ë¹„ì¥, ìœ„ì¥, ê±±ì •
â€¢ é‡‘ = í, í”¼ë¶€, ìŠ¬í””
â€¢ æ°´ = ì‹ ì¥, ë¼ˆ, ê³µí¬
77. ã€ì—°ì•  íƒ€ì´ë°ã€‘
â€¢ ë‚¨ì: ì¬ì„± í•´ = ì—°ì•  ê¸°íšŒ
â€¢ ì—¬ì: ê´€ì„± í•´ = ì—°ì•  ê¸°íšŒ
â€¢ ë„í™”ì‚´ í•´ = ë§¤ë ¥ ì—ë„ˆì§€ ìƒìŠ¹
78. ã€íˆ¬ì íƒ€ì´ë°ã€‘
â€¢ ì¬ì„± ëŒ€ìš´ + ìš©ì‹  í•´ = íˆ¬ì ì ê¸° (ì²­ì‹ í˜¸)
â€¢ ë¹„ê² í•´ = íˆ¬ì ê¸ˆì§€ (ì ì‹ í˜¸), ë™ì—… í”¼í•  ê²ƒ
â€¢ í¸ì¬ í•´ = íˆ¬ê¸°ì ì´ì§€ë§Œ ìœ„í—˜
79. ã€ìš©ì‹ ë³„ ë¸Œëœë”©/ë„¤ì´ë°ã€‘
â€¢ ç« â†’ ë¹¨ê°•, íƒœì–‘ ì´ë¯¸ì§€, ë‚¨ìª½
â€¢ æ°´ â†’ íŒŒë‘/ê²€ì •, ë¬¼ê²°, ë¶ìª½
â€¢ æœ¨ â†’ ì´ˆë¡, ì‹ë¬¼, ë™ìª½
â€¢ é‡‘ â†’ í°ìƒ‰/ê¸ˆìƒ‰, ì›í˜•, ì„œìª½
â€¢ åœŸ â†’ ë…¸ë‘/ê°ˆìƒ‰, ì‚¬ê°í˜•, ì¤‘ì•™
80. ã€ì¸ìƒ ë‹¨ê³„ë³„ ê¸°ëŒ€ã€‘
â€¢ ë…„ì£¼ (0-15ì„¸): ì¡°ìƒ, ìœ ë…„ê¸°
â€¢ ì›”ì£¼ (15-30ì„¸): ë¶€ëª¨, êµìœ¡
â€¢ ì¼ì£¼ (30-45ì„¸): ë³¸ì¸, ë°°ìš°ì, ì „ì„±ê¸°
â€¢ ì‹œì£¼ (45ì„¸+): ìë…€, ìœ ì‚°
81. ã€ì¶©(æ²–) í•´ ìƒì¡´ë²•ã€‘
â€¢ ì¼ì§€ ì¶© í•´ â†’ "ê¸°ì¡´ í”„ë¡œì íŠ¸ ë§ˆë¬´ë¦¬"
â€¢ ì¶© + ì—­ë§ˆì‚´ â†’ "ì´ì‚¬/ì´ì§ ê°€ëŠ¥ì„± ë†’ìŒ"
â€¢ ì¶© + ë„í™”ì‚´ â†’ "ì—°ì•  íŒŒë™"
82. ã€ì›”ë³„ ë¦¬ë“¬ã€‘
â€¢ ìš©ì‹  ì˜¤í–‰ ì›” = ë°€ì–´ë¶™ì¼ ë•Œ
â€¢ ê¸°ì‹  ì˜¤í–‰ ì›” = ë°©ì–´ ëª¨ë“œ
â€¢ í•´ì„ ì‹œ ìœ ë¦¬í•œ ë‹¬ì„ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œí•˜ì„¸ìš”
â€¢ ì¢…í•© ì¡°ì–¸ì—ì„œ ìš©ì‹ /í¬ì‹ /ê¸°ì‹  ê°ê°ì˜ í™œìš©ë²•ì„ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œí•˜ì„¸ìš”.
[ë¶„ì„ ìš”ì²­ì‚¬í•­]
ìœ„ ì‚¬ì£¼íŒ”ì ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒì„ ê°ê° ìƒì„¸íˆ ì„œìˆ í˜•ìœ¼ë¡œ í•´ì„í•´ ì£¼ì„¸ìš”:
1. íƒ€ê³ ë‚œ ì„±ê²©ê³¼ ê¸°ì§ˆ
- ì¼ê°„ì˜ íŠ¹ì„±, ê²©êµ­ì˜ ì˜ë¯¸, 60ê°‘ì ì¼ì£¼ë¡  ê¸°ë°˜
- ì¥ì ê³¼ ë³´ì™„í•  ì 
2. ì ì„±ê³¼ ì§ì—…ìš´
- ê²©êµ­, ìš©ì‹ , ì‹­ì‹  ê¸°ë°˜ ì í•© ë¶„ì•¼
- â­ ìš©ì‹ /í¬ì‹ /ê¸°ì‹ ì„ ë°˜ë“œì‹œ ëª…ì‹œí•˜ê³  í™œìš©ë²• ì„¤ëª…
- ì§ì¥ì¸ vs ì‚¬ì—…ê°€ ì ì„±
3. ì¬ë¬¼ìš´ê³¼ ê¸ˆì „ ê´€ë¦¬
- ì¬ì„±ì˜ ìœ„ì¹˜ì™€ ê°•ì•½
- ëˆì„ ë²„ëŠ” ë°©ì‹ê³¼ ê´€ë¦¬ ì¡°ì–¸
- ì•”í•©ì´ ìˆìœ¼ë©´ ë‚¨ë“¤ì´ ëª¨ë¥´ëŠ” ë¹„ìƒê¸ˆì´ë‚˜ ë¶€ìˆ˜ì… ê°€ëŠ¥ì„±ë„ ì–¸ê¸‰
4. ì—°ì• ìš´ê³¼ ê²°í˜¼ìš´
- ë°°ìš°ìì„±, ì¼ì§€ 12ìš´ì„±, ë°°ìš°ìê¶ ë¶„ì„
- ì´ìƒí˜•ê³¼ ê²°í˜¼ ì‹œê¸°
- ì•”í•©ì´ ìˆìœ¼ë©´ ë¹„ë°€ì—°ì• ë‚˜ ìˆ¨ê²¨ì§„ ì¸ì—° ê°€ëŠ¥ì„±ë„ ì–¸ê¸‰
5. ê±´ê°• ì£¼ì˜ì‚¬í•­
- ì˜¤í–‰ ë¶ˆê· í˜•ìœ¼ë¡œ ì¸í•œ ì·¨ì•½ ë¶€ìœ„
- ì˜ˆë°© ë° ê´€ë¦¬ ë°©ë²•
6. í˜„ì¬ ìš´ì„¸ (${currentYear}ë…„) + ì˜¤ëŠ˜ì˜ ìš´ì„¸
- í˜„ì¬ ëŒ€ìš´ê³¼ ì„¸ìš´ì˜ ì¡°í•©
- ì˜¬í•´ íŠ¹íˆ ì£¼ì˜í•  ì ê³¼ ê¸°íšŒ
- â­ ã€ì˜¤ëŠ˜ì˜ ì¼ì§„ã€‘ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì˜¤ëŠ˜ í•˜ë£¨ êµ¬ì²´ì  ì¡°ì–¸
  Â· ì˜¤ëŠ˜ ì¼ì§„ì´ ìš©ì‹ /í¬ì‹ ì´ë©´ â†’ ì ê·¹ì ìœ¼ë¡œ ì›€ì§ì¼ ì¼, ì¢‹ì€ ì‹œê°„ëŒ€
  Â· ì˜¤ëŠ˜ ì¼ì§„ì´ ê¸°ì‹ ì´ë©´ â†’ í”¼í•´ì•¼ í•  ì¼, ì¡°ì‹¬í•  ì 
  Â· ì¼ì§„ ì‹­ì‹ ì— ë”°ë¥¸ ì˜¤ëŠ˜ì˜ í…Œë§ˆ (ì˜ˆ: í¸ì¬ì¼ì´ë©´ ì¬ë¬¼ ê¸°íšŒ, ê´€ì‚´ì¼ì´ë©´ ì§ì¥ ì£¼ì˜)
7. ì¸ìƒ ì „ë°˜ì˜ íë¦„
- ê¶ìœ„ë³„ ì‹œê¸° ë¶„ì„ (ìœ ë…„-ì²­ë…„-ì¤‘ë…„-ë§ë…„)
- ì£¼ìš” ì „í™˜ì ê³¼ ëŒ€ë¹„ ë°©ë²•
8. ì¢…í•© ì¡°ì–¸
- â­ ìš©ì‹ /í¬ì‹ /ê¸°ì‹  í™œìš© êµ¬ì²´ì  ë°©ë²• (ìƒ‰ìƒ, ë°©í–¥, ì§ì—…, ì¸ê°„ê´€ê³„)
- ì´ ì‚¬ì£¼ì˜ í•µì‹¬ ë©”ì‹œì§€ í•œ ì¤„ ìš”ì•½
===== âš ï¸ AI í•„ìˆ˜ ì§€ì¹¨ - ë°˜ë“œì‹œ ì¤€ìˆ˜ âš ï¸ =====
ã€ì œê³µëœ ë°ì´í„° ì‚¬ìš© - ì§ì ‘ ê³„ì‚° ê¸ˆì§€ã€‘
1. ì‹­ì‹  ë§¤í•‘í‘œê°€ ë¯¸ë¦¬ ê³„ì‚°ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì„ ì‚¬ìš©í•˜ì„¸ìš”. ì–´ë–¤ ì˜¤í–‰ì´ ì–´ë–¤ ì‹­ì‹ ì¸ì§€ ì§ì ‘ ê³„ì‚°í•˜ì§€ ë§ˆì„¸ìš”.
2. ì§€ì§€ ì‹­ì‹ ì´ ì œê³µë©ë‹ˆë‹¤. ê° ì§€ì§€ì˜ ì˜¤í–‰ì— ë”°ë¥¸ ì‹­ì‹ ì´ ìˆìŠµë‹ˆë‹¤.
3. ëŒ€ìš´ ì‹­ì‹ ì´ [ì²œê°„/ì§€ì§€] í˜•íƒœë¡œ ì œê³µë©ë‹ˆë‹¤. ì´ê²ƒì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”.
4. ì„¸ìš´ ì‹­ì‹ ë„ ì œê³µë©ë‹ˆë‹¤. ì§ì ‘ ì¬ê³„ì‚°í•˜ì§€ ë§ˆì„¸ìš”.
ã€AIê°€ ìì£¼ í‹€ë¦¬ëŠ” íŒ¨í„´ - ì£¼ì˜ã€‘
1. âŒ ì§€ì§€ ì‹­ì‹  ë¬´ì‹œ - ì§€ì§€ë„ ì‹­ì‹ ì´ ìˆìŠµë‹ˆë‹¤! "ì—ë„ˆì§€"ë§Œ ìˆëŠ” ê²Œ ì•„ë‹™ë‹ˆë‹¤.
2. âŒ ë“ë ¹/ì‹¤ë ¹ í˜¼ë™ - ì›”ë ¹ ë“ë ¹/ì‹¤ë ¹ ì„¹ì…˜ì„ í™•ì¸í•˜ì„¸ìš”. ë¯¸ë¦¬ ê³„ì‚°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
3. âŒ ëŒ€ìš´ ì˜ëª» í•´ì„ - ì œê³µëœ [ì²œê°„/ì§€ì§€] ì‹­ì‹  ë¼ë²¨ì„ ì‚¬ìš©í•˜ì„¸ìš”.
4. âŒ ìŒì–‘ í˜¼ë™ - ç”²ä¸™æˆŠåºšå£¬ì€ ì–‘(é™½), ä¹™ä¸å·±è¾›ç™¸ëŠ” ìŒ(é™°)ì…ë‹ˆë‹¤.
5. âŒ í¸ì¬/ì •ì¬ êµ¬ë¶„ ì‹¤íŒ¨ - ì „ì²´ ë¼ë²¨ì„ í™•ì¸í•˜ì„¸ìš”.
6. âŒ ì›”ë ¹(æœˆä»¤) ë¬´ì‹œ - ì›”ì§€ ì‹­ì‹ ì´ ì‹ ê°•/ì‹ ì•½ íŒë‹¨ì— ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤.
ã€í•´ì„ ìš°ì„ ìˆœìœ„ã€‘
1. ì‚¼í•©êµ­/ìœ¡í•© ë“± í•©(åˆ) ë¨¼ì € í™•ì¸
2. ë“ë ¹/ì‹¤ë ¹ ìƒíƒœ - ê¸°ë³¸ ê°•ì•½ íŒë‹¨
3. ëŒ€ìš´ + ì„¸ìš´ ì‹­ì‹  - í˜„ì¬ ì¸ìƒ í…Œë§ˆ
4. ì§€ì§€ ì‹­ì‹  - ìˆ¨ê²¨ì§„ ì˜í–¥ë ¥
5. ë‚˜ë¨¸ì§€ ìš”ì†Œë“¤
`;navigator.clipboard.writeText(text).then(() => {toast('ğŸ“‹ ë³µì‚¬ ì™„ë£Œ! Geminië‚˜ ChatGPTì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”');}).catch(() => {const ta = document.createElement('textarea');ta.value = text;document.body.appendChild(ta);ta.select();document.execCommand('copy');document.body.removeChild(ta);toast('ğŸ“‹ ë³µì‚¬ ì™„ë£Œ!');});} catch(err) {console.error('ë³µì‚¬ ì˜¤ë¥˜:', err);toast('ë³µì‚¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');}}
function analyzeMatch() {try {if (!SAJU) { toast('ë¨¼ì € [ì‚¬ì£¼ë¶„ì„]ì—ì„œ ë‚´ ì‚¬ì£¼ë¥¼ ë¶„ì„í•˜ì„¸ìš”'); return; }
let py = +document.getElementById('partner-year').value;let pm = +document.getElementById('partner-month').value;let pd = +document.getElementById('partner-day').value;const pH = +document.getElementById('partner-hour').value;const pGender = document.getElementById('partner-gender').value;const relType = document.getElementById('relationship-type')?.value || 'romance';if (!py || !pm || !pd) { toast('ìƒëŒ€ë°© ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”'); return; }
if (PARTNER_CALENDAR === 'lunar') {const conv = lunarToSolar(py, pm, pd);if (!conv || !conv.year) { toast('ìŒë ¥ ë³€í™˜ ì˜¤ë¥˜. ì–‘ë ¥ìœ¼ë¡œ ì‹œë„í•˜ì„¸ìš”'); return; }py = conv.year; pm = conv.month; pd = conv.day;}
if (py < 1900 || py > 2100) { toast('ì—°ë„ëŠ” 1900~2100 ì‚¬ì´ë¡œ ì…ë ¥í•˜ì„¸ìš”'); return; }
if (pm < 1 || pm > 12) { toast('ì›”ì€ 1~12 ì‚¬ì´ë¡œ ì…ë ¥í•˜ì„¸ìš”'); return; }
if (pd < 1 || pd > 31) { toast('ì¼ì€ 1~31 ì‚¬ì´ë¡œ ì…ë ¥í•˜ì„¸ìš”'); return; }
const pDayPillar = calcDayPillar(py, pm, pd);let pHourPillar = null;if (pH >= 0) { pHourPillar = calcHourPillar(pDayPillar, pH); }
const pSaju = {year: calcYearPillar(py, pm, pd),
month: calcMonthPillar(py, pm, pd),
day: pDayPillar,
hour: pHourPillar};if (!pSaju.year || !pSaju.month || !pSaju.day) {toast('ìƒëŒ€ë°© ì‚¬ì£¼ ê³„ì‚° ì˜¤ë¥˜. ì…ë ¥ê°’ì„ í™•ì¸í•˜ì„¸ìš”');return;}
const pStr = calcStrength(pSaju);const pGods = fullAnalysis(pSaju, pStr);let totalScore = 50;const analysis = {ilgan: { score: 0, details: [] },
ilji: { score: 0, details: [] },
oheng: { score: 0, details: [] },
napeum: { score: 0, details: [] },
yongsin: { score: 0, details: [] },
jijanggan: { score: 0, details: [] },
samhap: { score: 0, details: [] },
ddi: { score: 0, details: [] },
ilju: { score: 0, details: [] },
wonJinGuiMun: { score: 0, details: [], hasWonjin: false },
yukChin: { score: 0, details: [] },
twelveState: { score: 0, details: [] },
strength: { score: 0, details: [] },
johu: { score: 0, details: [] },
sinsal: { score: 0, details: [] },
gongmang: { score: 0, details: [] }};const myDm = SAJU.day.s;const pDm = pSaju.day.s;const myDmIdx = STEM.indexOf(myDm);const pDmIdx = STEM.indexOf(pDm);const myDbIdx = BRANCH.indexOf(SAJU.day.b);const pDbIdx = BRANCH.indexOf(pSaju.day.b);const myYbIdx = BRANCH.indexOf(SAJU.year.b);const pYbIdx = BRANCH.indexOf(pSaju.year.b);const ganHap = [
{a:0, b:5, name:'ê°‘ê¸°í•©í† ', result:'åœŸ'},
{a:1, b:6, name:'ì„ê²½í•©ê¸ˆ', result:'é‡‘'},
{a:2, b:7, name:'ë³‘ì‹ í•©ìˆ˜', result:'æ°´'},
{a:3, b:8, name:'ì •ì„í•©ëª©', result:'æœ¨'},
{a:4, b:9, name:'ë¬´ê³„í•©í™”', result:'ç«'}
];let ganHapFound = false;for (const gh of ganHap) {if ((myDmIdx === gh.a && pDmIdx === gh.b) || (myDmIdx === gh.b && pDmIdx === gh.a)) {analysis.ilgan.score = 25;analysis.ilgan.details.push({type: 'excellent',
title: 'ğŸ’• ì²œê°„í•© ì„±ë¦½!',
desc: `${gh.name} - ë‘ ë¶„ì˜ ì¼ê°„ì´ ì²œìƒì—°ë¶„ì´ì—ìš”! ë§ˆì¹˜ í¼ì¦ ì¡°ê°ì²˜ëŸ¼ ë”± ë§ì•„ìš”.`,
tip: 'ì„œë¡œë¥¼ ë³´ì™„í•´ì£¼ëŠ” ìµœê³ ì˜ ì¡°í•©ì…ë‹ˆë‹¤.'});ganHapFound = true;break;}}
if (!ganHapFound) {if (myDm.e === pDm.e) {analysis.ilgan.score = 10;analysis.ilgan.details.push({type: 'good',
title: 'ğŸ¤ ê°™ì€ ì˜¤í–‰',
desc: `ë‘˜ ë‹¤ ${ELEMENT[myDm.e].k} ê¸°ìš´! ìƒê°ì´ ë¹„ìŠ·í•´ì„œ í†µí•´ìš”.`,
tip: 'ë¹„ìŠ·í•´ì„œ í¸í•˜ì§€ë§Œ, ë•Œë¡  ì–‘ë³´ê°€ í•„ìš”í•´ìš”.'});}
else if ((EL_ORDER.indexOf(myDm.e) + 1) % 5 === EL_ORDER.indexOf(pDm.e)) {analysis.ilgan.score = 8;analysis.ilgan.details.push({type: 'good',
title: 'ğŸŒ± ë‚´ê°€ ìƒëŒ€ë¥¼ ìƒí•´ì¤Œ',
desc: `${ELEMENT[myDm.e].k}ì´ ${ELEMENT[pDm.e].k}ì„ ìƒí•´ìš”. ë‚´ê°€ ìƒëŒ€ë¥¼ ë„ì™€ì£¼ëŠ” ê´€ê³„.`,
tip: 'í—Œì‹ ì ì¸ ì‚¬ë‘ì„ í•˜ê²Œ ë¼ìš”.'});}
else if ((EL_ORDER.indexOf(pDm.e) + 1) % 5 === EL_ORDER.indexOf(myDm.e)) {analysis.ilgan.score = 8;analysis.ilgan.details.push({type: 'good',
title: 'ğŸ’ ìƒëŒ€ê°€ ë‚˜ë¥¼ ìƒí•´ì¤Œ',
desc: `${ELEMENT[pDm.e].k}ì´ ${ELEMENT[myDm.e].k}ì„ ìƒí•´ìš”. ìƒëŒ€ê°€ ë‚˜ë¥¼ ë„ì™€ì¤˜ìš”.`,
tip: 'ìƒëŒ€ì˜ ì‚¬ë‘ì„ ë“¬ë¿ ë°›ì•„ìš”.'});}
else if ((EL_ORDER.indexOf(myDm.e) + 2) % 5 === EL_ORDER.indexOf(pDm.e)) {analysis.ilgan.score = -5;analysis.ilgan.details.push({type: 'caution',
title: 'âš¡ ë‚´ê°€ ìƒëŒ€ë¥¼ ê·¹í•¨',
desc: `${ELEMENT[myDm.e].k}ì´ ${ELEMENT[pDm.e].k}ì„ ê·¹í•´ìš”. ë‚´ê°€ ìƒëŒ€ë¥¼ ì••ë°•í•  ìˆ˜ ìˆì–´ìš”.`,
tip: 'ë¬´ì‹¬ì½” ìƒëŒ€ì—ê²Œ ìƒì²˜ì¤„ ìˆ˜ ìˆìœ¼ë‹ˆ ë§ì¡°ì‹¬!'});}
else if ((EL_ORDER.indexOf(pDm.e) + 2) % 5 === EL_ORDER.indexOf(myDm.e)) {analysis.ilgan.score = -5;analysis.ilgan.details.push({type: 'caution',
title: 'ğŸ˜° ìƒëŒ€ê°€ ë‚˜ë¥¼ ê·¹í•¨',
desc: `${ELEMENT[pDm.e].k}ì´ ${ELEMENT[myDm.e].k}ì„ ê·¹í•´ìš”. ìƒëŒ€ê°€ ë‚˜ë¥¼ í˜ë“¤ê²Œ í•  ìˆ˜ ìˆì–´ìš”.`,
tip: 'ê°ì • í‘œí˜„ì„ ì†”ì§í•˜ê²Œ í•˜ë©´ ì¢‹ì•„ì ¸ìš”.'});}}
const jiHap = [
{a:0, b:1, name:'ìì¶•í•©'}, {a:2, b:11, name:'ì¸í•´í•©'},
{a:3, b:10, name:'ë¬˜ìˆ í•©'}, {a:4, b:9, name:'ì§„ìœ í•©'},
{a:5, b:8, name:'ì‚¬ì‹ í•©'}, {a:6, b:7, name:'ì˜¤ë¯¸í•©'}
];const jiChung = [
{a:0, b:6, name:'ìì˜¤ì¶©'}, {a:1, b:7, name:'ì¶•ë¯¸ì¶©'},
{a:2, b:8, name:'ì¸ì‹ ì¶©'}, {a:3, b:9, name:'ë¬˜ìœ ì¶©'},
{a:4, b:10, name:'ì§„ìˆ ì¶©'}, {a:5, b:11, name:'ì‚¬í•´ì¶©'}
];for (const jh of jiHap) {if ((myDbIdx === jh.a && pDbIdx === jh.b) || (myDbIdx === jh.b && pDbIdx === jh.a)) {analysis.ilji.score = 20;analysis.ilji.details.push({type: 'excellent',
title: 'ğŸ’‘ ì¼ì§€ ìœ¡í•©!',
desc: `${jh.name} - ë°°ìš°ìê¶ë¼ë¦¬ í•©! í•¨ê»˜ ìˆìœ¼ë©´ ë§ˆìŒì´ í¸ì•ˆí•´ìš”.`,
tip: 'ê²°í˜¼í•˜ë©´ ê¸ˆìŠ¬ì´ ì¢‹ì•„ìš”.'});break;}}
for (const jc of jiChung) {if ((myDbIdx === jc.a && pDbIdx === jc.b) || (myDbIdx === jc.b && pDbIdx === jc.a)) {analysis.ilji.score = -15;analysis.ilji.details.push({type: 'bad',
title: 'ğŸ’¥ ì¼ì§€ ì¶©!',
desc: `${jc.name} - ë°°ìš°ìê¶ë¼ë¦¬ ì¶©ëŒ! ì„œë¡œ ë¶€ë”ªíˆê¸° ì‰¬ì›Œìš”.`,
tip: 'ëŒ€í™”ë¡œ í’€ì–´ê°€ë©´ ì˜¤íˆë ¤ ì—´ì •ì ì¸ ê´€ê³„ê°€ ë  ìˆ˜ ìˆì–´ìš”.'});break;}}
if (myDbIdx === pDbIdx) {analysis.ilji.score = 5;analysis.ilji.details.push({type: 'neutral',
title: 'ğŸ”„ ê°™ì€ ì¼ì§€',
desc: `ë‘˜ ë‹¤ ${SAJU.day.b.c}(${SAJU.day.b.k})! ì„±ê²©ì´ ë¹„ìŠ·í•´ìš”.`,
tip: 'ë„ˆë¬´ ë¹„ìŠ·í•´ì„œ ë‹µë‹µí•  ìˆ˜ ìˆì–´ìš”. ê°ì ê³µê°„ì´ í•„ìš”í•´ìš”.'});}
const samhapSets = [
{branches: [2, 6, 10], name: 'ì¸ì˜¤ìˆ  ì‚¼í•©', element: 'ç«'},
{branches: [5, 9, 1], name: 'ì‚¬ìœ ì¶• ì‚¼í•©', element: 'é‡‘'},
{branches: [8, 0, 4], name: 'ì‹ ìì§„ ì‚¼í•©', element: 'æ°´'},
{branches: [11, 3, 7], name: 'í•´ë¬˜ë¯¸ ì‚¼í•©', element: 'æœ¨'}
];
// ì „ì²´ ì§€ì§€ ìˆ˜ì§‘ (K-MUDANG v4.22.3 ë™ê¸°í™”)
const myAllBr = [BRANCH.indexOf(SAJU.year.b), BRANCH.indexOf(SAJU.month.b), myDbIdx, SAJU.hour ? BRANCH.indexOf(SAJU.hour.b) : -1].filter(i => i >= 0);
const pAllBr = [BRANCH.indexOf(pSaju.year.b), BRANCH.indexOf(pSaju.month.b), pDbIdx, pSaju.hour ? BRANCH.indexOf(pSaju.hour.b) : -1].filter(i => i >= 0);
const allBrSet = new Set([...myAllBr, ...pAllBr]);
for (const sh of samhapSets) {const myIn = sh.branches.includes(myDbIdx);const pIn = sh.branches.includes(pDbIdx);const uniqueCount = sh.branches.filter(b => allBrSet.has(b)).length;if ((myIn || pIn) && uniqueCount >= 3) {analysis.samhap.score = 12;analysis.samhap.details.push({type: 'good',
title: 'ğŸŒ€ ì‚¼í•© ê´€ê³„!',
desc: `${sh.name}(${sh.element}êµ­)ì— ë‘˜ ë‹¤ ì†í•´ìš”! ê°™ì€ íŒ€ì´ì—ìš”.`,
tip: 'ê³µë™ ëª©í‘œê°€ ìˆìœ¼ë©´ ìµœê°• íŒŒíŠ¸ë„ˆ!'});break;}}
for (const bh of DIRECTIONAL_HARMONY) {const myIn = bh.branches.includes(myDbIdx);const pIn = bh.branches.includes(pDbIdx);if (myIn && pIn && myDbIdx !== pDbIdx) {analysis.samhap.score += 8;analysis.samhap.details.push({type: 'good',
title: 'ğŸ§­ ë°©í•© ê´€ê³„!',
desc: `${bh.name} - ê°™ì€ ë°©í–¥ì„ ë°”ë¼ë´ìš”.`,
tip: 'ê°€ì¹˜ê´€ì´ ë¹„ìŠ·í•´ì„œ ê°ˆë“±ì´ ì ì–´ìš”.'});break;}}
// ===== ì›ì§„(æ€¨å—”) ì²´í¬ - K-MUDANG v4.21.0 í†µí•© =====
const wonjinPairs = [[0,7],[2,9],[1,6],[4,11],[5,10],[3,8]]; // ìë¯¸,ì¸ìœ ,ì¶•ì˜¤,ì§„í•´,ì‚¬ìˆ ,ë¬˜ì‹ 
const hasWonjin = wonjinPairs.some(([a,b]) => 
  (myDbIdx === a && pDbIdx === b) || (myDbIdx === b && pDbIdx === a));
if (hasWonjin) {
  const wonjinScore = relType === 'romance' ? -12 : -8;
  analysis.wonJinGuiMun.score = wonjinScore;
  analysis.wonJinGuiMun.hasWonjin = true;
  analysis.wonJinGuiMun.details.push({type: 'caution',
    title: 'ğŸ˜¤ ì›ì§„(æ€¨å—”) ê´€ê³„',
    desc: `ë‘ ë¶„ì˜ ì¼ì§€ê°€ ì›ì§„! ì„œë¡œ ë¯¸ë¬˜í•˜ê²Œ ë¶€ë”ªíˆëŠ” ê´€ê³„ì˜ˆìš”.`,
    tip: relType === 'romance' ? 'ì¸ë‚´ì™€ ì´í•´ê°€ í•„ìš”í•´ìš”. ì„œë¡œ ë‹¤ë¦„ì„ ì¸ì •í•˜ë©´ ì„±ì¥í•  ìˆ˜ ìˆì–´ìš”.' : 'ë¹„ì¦ˆë‹ˆìŠ¤ì—ì„œëŠ” ê±´ì„¤ì  ê¸´ì¥ì´ ë  ìˆ˜ ìˆì–´ìš”.'});}
const myNapeum = calcNapeum(SAJU.day.s, SAJU.day.b);const pNapeum = calcNapeum(pSaju.day.s, pSaju.day.b);if (myNapeum.name === pNapeum.name) {analysis.napeum.score = 15;analysis.napeum.details.push({type: 'excellent',
title: 'ğŸµ ë‚©ìŒ ì¼ì¹˜!',
desc: `ë‘˜ ë‹¤ "${myNapeum.name}"! ì˜í˜¼ì˜ íŒŒì¥ì´ ê°™ì•„ìš”.`,
tip: 'ë§ ì•ˆ í•´ë„ í†µí•˜ëŠ” ì‚¬ì´ê°€ ë  ê±°ì˜ˆìš”.'});} else if (myNapeum.element === pNapeum.element) {analysis.napeum.score = 8;analysis.napeum.details.push({type: 'good',
title: 'ğŸ¶ ë‚©ìŒ ì˜¤í–‰ ì¼ì¹˜',
desc: `ë‘˜ ë‹¤ ${myNapeum.elementK} ê³„ì—´! ê¸°ë³¸ íŒŒì¥ì´ ë¹„ìŠ·í•´ìš”.`,
tip: 'ê°ì„±ì´ í†µí•˜ëŠ” í¸ì´ì—ìš”.'});} else {const myNEl = EL_ORDER.indexOf(myNapeum.element);const pNEl = EL_ORDER.indexOf(pNapeum.element);if ((myNEl + 1) % 5 === pNEl || (pNEl + 1) % 5 === myNEl) {analysis.napeum.score = 5;analysis.napeum.details.push({type: 'good',
title: 'ğŸ¼ ë‚©ìŒ ìƒìƒ',
desc: `${myNapeum.name}ê³¼ ${pNapeum.name}ì´ ì„œë¡œ ë„ì™€ì¤˜ìš”.`,
tip: 'ìì—°ìŠ¤ëŸ½ê²Œ ì¡°í™”ë¥¼ ì´ë¤„ìš”.'});}}
const pElements = {};EL_ORDER.forEach(e => pElements[e] = 0);[pSaju.year, pSaju.month, pSaju.day].forEach(p => {if (p && p.s) pElements[p.s.e]++;if (p && p.b) pElements[p.b.e]++;});if (pElements[GODS.yong] >= 2) {analysis.yongsin.score = 15;analysis.yongsin.details.push({type: 'excellent',
title: 'â­ ìƒëŒ€ê°€ ë‚´ ìš©ì‹ !',
desc: `ìƒëŒ€ ì‚¬ì£¼ì— ë‚´ ìš©ì‹ (${ELEMENT[GODS.yong].k})ì´ í’ë¶€í•´ìš”!`,
tip: 'ë§Œë‚˜ë©´ ìš´ì´ ì¢‹ì•„ì§€ëŠ” ê·€ì¸ì´ì—ìš”!'});} else if (pElements[GODS.yong] >= 1) {analysis.yongsin.score = 8;analysis.yongsin.details.push({type: 'good',
title: 'âœ¨ ìƒëŒ€ì—ê²Œ ìš©ì‹  ìˆìŒ',
desc: `ìƒëŒ€ ì‚¬ì£¼ì— ë‚´ ìš©ì‹ (${ELEMENT[GODS.yong].k})ì´ ìˆì–´ìš”.`,
tip: 'í•¨ê»˜ ìˆìœ¼ë©´ ê¸°ìš´ì´ ë³´ì¶©ë¼ìš”.'});}
const myElements = {};EL_ORDER.forEach(e => myElements[e] = 0);[SAJU.year, SAJU.month, SAJU.day, SAJU.hour].forEach(p => {if (p && p.s) myElements[p.s.e]++;if (p && p.b) myElements[p.b.e]++;});if (myElements[pGods.yong] >= 2) {analysis.yongsin.score += 10;analysis.yongsin.details.push({type: 'good',
title: 'ğŸ’« ë‚´ê°€ ìƒëŒ€ì˜ ìš©ì‹ !',
desc: `ë‚´ ì‚¬ì£¼ì— ìƒëŒ€ ìš©ì‹ (${ELEMENT[pGods.yong].k})ì´ í’ë¶€í•´ìš”!`,
tip: 'ìƒëŒ€ì—ê²Œ ë‚´ê°€ ê·€ì¸ì´ì—ìš”!'});}
if (pElements[GODS.gi] >= 2) {if (relType === 'business') {analysis.yongsin.score += 5;analysis.yongsin.details.push({type: 'good',title: 'âš¡ ìƒì‚°ì  ê¸´ì¥(ç”Ÿæ„ç›¸å‰‹)',desc: `ìƒëŒ€ ì‚¬ì£¼ì— ë‚´ ê¸°ì‹ (${ELEMENT[GODS.gi].k})ì´ ë§ì§€ë§Œ, ë¹„ì¦ˆë‹ˆìŠ¤ì—ì„œëŠ” ê±´ì„¤ì  ê¸´ì¥!`,tip: 'ê²¬ì œì™€ ê²½ìŸì´ í˜ì‹ ì„ ë§Œë“¤ì–´ìš”!'});} else {analysis.yongsin.score -= 8;analysis.yongsin.details.push({type: 'caution',
title: 'âš ï¸ ìƒëŒ€ì—ê²Œ ê¸°ì‹  ë§ìŒ',
desc: `ìƒëŒ€ ì‚¬ì£¼ì— ë‚´ ê¸°ì‹ (${ELEMENT[GODS.gi].k})ì´ ë§ì•„ìš”.`,
tip: 'ì˜¤ë˜ ë§Œë‚˜ë©´ ê¸°ìš´ì´ ë¹ ì§ˆ ìˆ˜ ìˆì–´ìš”.'});}}
for (const ah of HIDDEN_HARMONY) {if ((myDbIdx === ah.a && pDbIdx === ah.b) || (myDbIdx === ah.b && pDbIdx === ah.a)) {analysis.jijanggan.score = 10;analysis.jijanggan.details.push({type: 'special',
title: 'ğŸ¤« ì•”í•© ë°œê²¬!',
desc: `${ah.name} - ê²‰ìœ¼ë¡œëŠ” ì•ˆ í‹°ë‚˜ì§€ë§Œ ì†ìœ¼ë¡œ ëŒë¦¬ëŠ” ì‚¬ì´!`,
tip: 'ë¬˜í•œ ëŒë¦¼ì´ ìˆì–´ìš”. ë¹„ë°€ì—°ì•  ì²´ì§ˆ?'});break;}}
for (const sh of samhapSets) {const myIn = sh.branches.includes(myYbIdx);const pIn = sh.branches.includes(pYbIdx);if (myIn && pIn && myYbIdx !== pYbIdx) {analysis.ddi.score = 8;analysis.ddi.details.push({type: 'good',
title: 'ğŸ¾ ë  ì‚¼í•©!',
desc: `${SAJU.year.b.a}ë ì™€ ${pSaju.year.b.a}ë ëŠ” ì‚¼í•©!`,
tip: 'ì–´ë¥¸ë“¤ì´ ë³´ê¸°ì—ë„ ì¢‹ì€ ê¶í•©ì´ì—ìš”.'});break;}}
for (const jc of jiChung) {if ((myYbIdx === jc.a && pYbIdx === jc.b) || (myYbIdx === jc.b && pYbIdx === jc.a)) {analysis.ddi.score = -5;analysis.ddi.details.push({type: 'caution',
title: 'ğŸ¾ ë  ìƒì¶©',
desc: `${SAJU.year.b.a}ë ì™€ ${pSaju.year.b.a}ë ëŠ” ì¶© ê´€ê³„!`,
tip: 'ì˜›ë‚  ë§ë¡œëŠ” ì•ˆ ì¢‹ì§€ë§Œ, ìš”ì¦˜ì€ ê·¹ë³µ ê°€ëŠ¥í•´ìš”.'});break;}}
const myIlju = SAJU.day.s.c + SAJU.day.b.c;const pIlju = pSaju.day.s.c + pSaju.day.b.c;const guiin = {0: [1,7], 1: [0,8], 2: [11,9], 3: [11,9], 4: [1,7],
5: [3,5], 6: [2,6], 7: [5,11], 8: [3,5], 9: [3,5]};if (guiin[myDmIdx]?.includes(pDbIdx)) {analysis.ilju.score = 10;analysis.ilju.details.push({type: 'excellent',
title: 'ğŸ‘¼ ì²œì„ê·€ì¸!',
desc: 'ìƒëŒ€ê°€ ë‚˜ì˜ ì²œì„ê·€ì¸ ìë¦¬ì— ìˆì–´ìš”!',
tip: 'ì–´ë ¤ìš¸ ë•Œ ë„ì™€ì£¼ëŠ” ì²œìƒ ì¡°ë ¥ìì˜ˆìš”.'});}
if (guiin[pDmIdx]?.includes(myDbIdx)) {analysis.ilju.score += 8;analysis.ilju.details.push({type: 'good',
title: 'ğŸ‘¼ ë‚´ê°€ ìƒëŒ€ì˜ ê·€ì¸',
desc: 'ë‚´ê°€ ìƒëŒ€ì˜ ì²œì„ê·€ì¸ì´ì—ìš”!',
tip: 'ìƒëŒ€ì—ê²Œ í–‰ìš´ì„ ê°€ì ¸ë‹¤ì£¼ëŠ” ì‚¬ëŒì´ì—ìš”.'});}
const wonJinPairs = [[0,7],[1,6],[2,5],[3,4],[4,3],[5,2],[6,1],[7,0],[8,11],[9,10],[10,9],[11,8]];for (const [a,b] of wonJinPairs) {if ((myDbIdx === a && pDbIdx === b) || (myYbIdx === a && pYbIdx === b)) {analysis.wonJinGuiMun.score = -12;analysis.wonJinGuiMun.details.push({type: 'caution',
title: 'ğŸ’” ì›ì§„(æ€¨å—”) ê´€ê³„',
desc: 'ë¯¸ì›Œë„ ë–¨ì–´ì§ˆ ìˆ˜ ì—†ëŠ” ì•…ì—°ì´ì—ìš”. ëŠìœ¼ë ¤ í•´ë„ ì§ˆì§ˆ ëŒë ¤ìš”.',
tip: 'ì„œë¡œ ë¯¸ì›Œí•˜ë©´ì„œë„ ì‹ ê²½ ì“°ì´ëŠ” ê´€ê³„. ê±°ë¦¬ë‘ê¸°ê°€ í•„ìš”í•´ìš”.'});break;}}
const guiMunPairs = [[2,7],[3,8],[4,9],[5,10],[6,11],[1,6]];for (const [a,b] of guiMunPairs) {if ((myDbIdx === a && pDbIdx === b) || (myDbIdx === b && pDbIdx === a)) {analysis.wonJinGuiMun.score -= 8;analysis.wonJinGuiMun.details.push({type: 'bad',
title: 'ğŸ‘» ê·€ë¬¸(é¬¼é–€) ê´€ê³„',
desc: 'ë§Œë‚˜ë©´ ì •ì‹ ì ìœ¼ë¡œ í˜ë“¤ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.',
tip: 'ì‹¬ë¦¬ì  ê°ˆë“±ì´ ê¹Šì–´ìš”. ìƒë‹´ì´ë‚˜ ëŒ€í™”ê°€ í•„ìˆ˜!'});break;}}
const hyungPairs = [[2,5],[5,8],[2,8],[1,10],[10,7],[1,7],[0,3]];for (const [a,b] of hyungPairs) {if ((myDbIdx === a && pDbIdx === b) || (myDbIdx === b && pDbIdx === a)) {analysis.wonJinGuiMun.score -= 6;analysis.wonJinGuiMun.details.push({type: 'caution',
title: 'âš¡ í˜•(åˆ‘) ê´€ê³„',
desc: 'ì„œë¡œì—ê²Œ ìƒì²˜ë¥¼ ì£¼ê¸° ì‰¬ìš´ ê´€ê³„ì˜ˆìš”.',
tip: 'ë§ì¡°ì‹¬! ê°ì •ì ìœ¼ë¡œ ëŒ€í•˜ë©´ ìƒì²˜ê°€ ì»¤ì ¸ìš”.'});break;}}
const myGender = GENDER;const pGenderVal = pGender;const partnerGodToMe = getTenGod(pDm, myDm);const myGodToPartner = getTenGod(myDm, pDm);if (partnerGodToMe) {const godName = partnerGodToMe.k;if (['ì •ì¬','í¸ì¬'].includes(godName)) {if (myGender === 'm') {analysis.yukChin.score = 12;analysis.yukChin.details.push({type: 'excellent',
title: 'ğŸ’ ìƒëŒ€ê°€ ë‚˜ì˜ ì¬ì„±(è²¡æ˜Ÿ)',
desc: `ìƒëŒ€ê°€ ë‚˜ì˜ ${godName}ì´ì—ìš”! ë‚¨ìì—ê²Œ ì¬ì„±ì€ ì•„ë‚´ë¥¼ ëœ»í•´ìš”.`,
tip: 'ìš´ëª…ì ì¸ ë°°ìš°ì ì¸ì—°ì´ì—ìš”. ê²°í˜¼í•˜ë©´ ì¬ë¬¼ìš´ë„ ì˜¬ë¼ìš”!'});} else {analysis.yukChin.score = 5;analysis.yukChin.details.push({type: 'good',
title: 'ğŸ’° ìƒëŒ€ê°€ ë‚˜ì˜ ì¬ì„±',
desc: `ìƒëŒ€ê°€ ë‚˜ì˜ ${godName}ì´ì—ìš”. í•¨ê»˜ ìˆìœ¼ë©´ ì¬ë¬¼ìš´ì´ ì¢‹ì•„ì ¸ìš”.`,
tip: 'ëˆ ê´€ë ¨í•´ì„œ ì¢‹ì€ íŒŒíŠ¸ë„ˆê°€ ë  ìˆ˜ ìˆì–´ìš”.'});}}
else if (['ì •ê´€','í¸ê´€'].includes(godName)) {if (myGender === 'f') {analysis.yukChin.score = 12;analysis.yukChin.details.push({type: 'excellent',
title: 'ğŸ‘” ìƒëŒ€ê°€ ë‚˜ì˜ ê´€ì„±(å®˜æ˜Ÿ)',
desc: `ìƒëŒ€ê°€ ë‚˜ì˜ ${godName}ì´ì—ìš”! ì—¬ìì—ê²Œ ê´€ì„±ì€ ë‚¨í¸ì„ ëœ»í•´ìš”.`,
tip: 'ìš´ëª…ì ì¸ ë°°ìš°ì ì¸ì—°ì´ì—ìš”. ê²°í˜¼í•˜ë©´ ì‚¬íšŒìš´ë„ ì˜¬ë¼ìš”!'});} else {analysis.yukChin.score = 3;analysis.yukChin.details.push({type: 'neutral',
title: 'ğŸ‘” ìƒëŒ€ê°€ ë‚˜ì˜ ê´€ì„±',
desc: `ìƒëŒ€ê°€ ë‚˜ì˜ ${godName}ì´ì—ìš”. ë‚˜ë¥¼ í†µì œí•˜ë ¤ í•  ìˆ˜ ìˆì–´ìš”.`,
tip: 'ìƒí•˜ê´€ê³„ê°€ ìƒê¸°ê¸° ì‰¬ì›Œìš”. í‰ë“±í•œ ê´€ê³„ ìœ ì§€ í•„ìš”!'});}}
else if (['ë¹„ê²¬','ê²ì¬'].includes(godName)) {analysis.yukChin.score = 5;analysis.yukChin.details.push({type: 'good',
title: 'ğŸ¤ ìƒëŒ€ê°€ ë‚˜ì˜ ë¹„ê²(æ¯”åŠ«)',
desc: `ìƒëŒ€ê°€ ë‚˜ì˜ ${godName}ì´ì—ìš”. ë™ë“±í•œ ì¹œêµ¬ ê°™ì€ ê´€ê³„!`,
tip: 'ê²½ìŸì‹¬ì´ ìƒê¸¸ ìˆ˜ ìˆì§€ë§Œ, ë™ì§€ë¡œì„œ í•¨ê»˜ ì„±ì¥í•´ìš”.'});}
else if (['ì‹ì‹ ','ìƒê´€'].includes(godName)) {analysis.yukChin.score = 4;analysis.yukChin.details.push({type: 'good',
title: 'ğŸ¨ ìƒëŒ€ê°€ ë‚˜ì˜ ì‹ìƒ(é£Ÿå‚·)',
desc: `ìƒëŒ€ê°€ ë‚˜ì˜ ${godName}ì´ì—ìš”. ë‚´ê°€ ëŒë´ì£¼ëŠ” ê´€ê³„!`,
tip: 'ìƒëŒ€ë¥¼ ë³´ë©´ í‘œí˜„ìš•êµ¬ê°€ ìƒê²¨ìš”. ì°½ì‘ íŒŒíŠ¸ë„ˆë¡œ ì¢‹ì•„ìš”.'});}
else if (['ì •ì¸','í¸ì¸'].includes(godName)) {analysis.yukChin.score = 6;analysis.yukChin.details.push({type: 'good',
title: 'ğŸ“š ìƒëŒ€ê°€ ë‚˜ì˜ ì¸ì„±(å°æ˜Ÿ)',
desc: `ìƒëŒ€ê°€ ë‚˜ì˜ ${godName}ì´ì—ìš”. ìƒëŒ€ê°€ ë‚˜ë¥¼ ëŒë´ì¤˜ìš”!`,
tip: 'í¸ì•ˆí•˜ê³  ë³´í˜¸ë°›ëŠ” ëŠë‚Œ. ì—„ë§ˆ ê°™ì€ ìƒëŒ€ì˜ˆìš”.'});}}
const myTwelveState = getTwelveState(myDm, SAJU.day.b);const pTwelveState = getTwelveState(pDm, pSaju.day.b);const highEnergyStates = ['ê±´ë¡', 'ì œì™•', 'ê´€ëŒ€', 'ì¥ìƒ'];const lowEnergyStates = ['ì‚¬', 'ë¬˜', 'ì ˆ', 'íƒœ'];const myHigh = highEnergyStates.includes(myTwelveState.k);const pHigh = highEnergyStates.includes(pTwelveState.k);const myLow = lowEnergyStates.includes(myTwelveState.k);const pLow = lowEnergyStates.includes(pTwelveState.k);if (myHigh && pHigh) {analysis.twelveState.score = 8;analysis.twelveState.details.push({type: 'good',
title: 'âš¡ ì—ë„ˆì§€ í’ë¶€ ì»¤í”Œ!',
desc: `ë‘˜ ë‹¤ 12ìš´ì„±ì´ ê°•í•´ìš”! (ë‚˜: ${myTwelveState.k}, ìƒëŒ€: ${pTwelveState.k})`,
tip: 'í™œë™ì ì¸ ì»¤í”Œ! í•¨ê»˜ ë„ì „í•˜ë©´ ì‹œë„ˆì§€ í­ë°œ!'});} else if (myHigh && pLow) {analysis.twelveState.score = 5;analysis.twelveState.details.push({type: 'neutral',
title: 'ğŸ”‹ ì—ë„ˆì§€ ë³´ì™„ ê´€ê³„',
desc: `ë‚˜ëŠ” ì—ë„ˆì§€ ë„˜ì¹˜ê³ (${myTwelveState.k}), ìƒëŒ€ëŠ” ì°¨ë¶„í•´ìš”(${pTwelveState.k})`,
tip: 'ë‚´ê°€ ë¦¬ë“œí•˜ê³  ìƒëŒ€ê°€ ë¸Œë ˆì´í¬ ì—­í• . ê· í˜• ì¡íŒ ê´€ê³„!'});} else if (myLow && pHigh) {analysis.twelveState.score = 5;analysis.twelveState.details.push({type: 'neutral',
title: 'ğŸ”‹ ì—ë„ˆì§€ ë³´ì™„ ê´€ê³„',
desc: `ë‚˜ëŠ” ì°¨ë¶„í•˜ê³ (${myTwelveState.k}), ìƒëŒ€ê°€ ì—ë„ˆì§€ ë„˜ì³ìš”(${pTwelveState.k})`,
tip: 'ìƒëŒ€ê°€ ì´ëŒì–´ì£¼ëŠ” ê´€ê³„. ë”°ë¼ê°€ê¸°ë§Œ í•˜ì§€ ë§ê³  ì˜ê²¬ë„ ë‚´ì„¸ìš”!'});} else if (myLow && pLow) {analysis.twelveState.score = 0;analysis.twelveState.details.push({type: 'caution',
title: 'ğŸŒ™ ì¡°ìš©í•œ ì»¤í”Œ',
desc: `ë‘˜ ë‹¤ ì—ë„ˆì§€ê°€ ë‚®ì€ í¸ì´ì—ìš” (ë‚˜: ${myTwelveState.k}, ìƒëŒ€: ${pTwelveState.k})`,
tip: 'ì„œë¡œ ì˜ì§€í•˜ë©´ ì¢‹ì§€ë§Œ, ë¬´ê¸°ë ¥í•´ì§€ì§€ ì•Šë„ë¡ í™œë ¥ì†Œê°€ í•„ìš”í•´ìš”!'});}
const myStr = calcStrength(SAJU);const myStrType = myStr.type;const pStrType = pStr.type;if (myStrType === 'strong' && pStrType === 'weak') {analysis.strength.score = 7;analysis.strength.details.push({type: 'good',
title: 'âš–ï¸ ê°•ì•½ ë³´ì™„ ê´€ê³„',
desc: `ë‚˜ëŠ” ì‹ ê°•(${myStr.pct}%), ìƒëŒ€ëŠ” ì‹ ì•½(${pStr.pct}%)`,
tip: 'ë‚´ê°€ ë³´í˜¸í•´ì£¼ê³  ìƒëŒ€ê°€ ìœ ì—°í•˜ê²Œ ë°›ì•„ì£¼ëŠ” ì™„ë²½í•œ ì¡°í•©!'});} else if (myStrType === 'weak' && pStrType === 'strong') {analysis.strength.score = 7;analysis.strength.details.push({type: 'good',
title: 'âš–ï¸ ê°•ì•½ ë³´ì™„ ê´€ê³„',
desc: `ë‚˜ëŠ” ì‹ ì•½(${myStr.pct}%), ìƒëŒ€ëŠ” ì‹ ê°•(${pStr.pct}%)`,
tip: 'ìƒëŒ€ê°€ ë“ ë“ í•˜ê²Œ ì§€ì¼œì¤˜ìš”. ì˜ì§€í•˜ë˜ ì¢…ì†ë˜ì§€ ì•Šë„ë¡!'});} else if (myStrType === 'strong' && pStrType === 'strong') {analysis.strength.score = 3;analysis.strength.details.push({type: 'caution',
title: 'ğŸ’ª ë‘˜ ë‹¤ ì‹ ê°•!',
desc: `ë‘˜ ë‹¤ ê°•í•´ìš”! (ë‚˜: ${myStr.pct}%, ìƒëŒ€: ${pStr.pct}%)`,
tip: 'ì£¼ë„ê¶Œ ì‹¸ì›€ì´ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”. ì–‘ë³´ì™€ ì¡´ì¤‘ì´ í•„ìˆ˜!'});} else if (myStrType === 'weak' && pStrType === 'weak') {analysis.strength.score = 2;analysis.strength.details.push({type: 'caution',
title: 'ğŸ¤ ë‘˜ ë‹¤ ì‹ ì•½',
desc: `ë‘˜ ë‹¤ ì‹ ì•½ì´ì—ìš” (ë‚˜: ${myStr.pct}%, ìƒëŒ€: ${pStr.pct}%)`,
tip: 'ì„œë¡œ ì˜ì§€í•˜ëŠ” ê±´ ì¢‹ì§€ë§Œ, ë‘˜ ë‹¤ ì§€ì¹  ë•Œ ë²„íŒ€ëª©ì´ í•„ìš”í•´ìš”.'});} else {analysis.strength.score = 5;analysis.strength.details.push({type: 'neutral',
title: 'â˜¯ï¸ ì ë‹¹í•œ ê· í˜•',
desc: `ë¹„ìŠ·í•œ ê°•ë„ì˜ˆìš” (ë‚˜: ${myStr.pct}%, ìƒëŒ€: ${pStr.pct}%)`,
tip: 'í‰ë“±í•œ ê´€ê³„ë¥¼ ìœ ì§€í•˜ê¸° ì¢‹ì•„ìš”!'});}
// ===== ì¡°í›„ë¡  ê°•í™” (K-MUDANG v4.21.0 ë°©ì‹) =====
const myDmEl = myDm.e;
const mbi = BRANCH.indexOf(SAJU.month.b);
const isWinter = [0,1,11].includes(mbi); // ìì¶•í•´(å­ä¸‘äº¥)
const isSummer = [5,6,7].includes(mbi); // ì‚¬ì˜¤ë¯¸(å·³åˆæœª)
// ìƒëŒ€ë°© ì˜¤í–‰ ì¹´ìš´íŠ¸
const pElCounts = {wood:0,fire:0,earth:0,metal:0,water:0};
[pSaju.year?.s,pSaju.month?.s,pSaju.day?.s].filter(Boolean).forEach(s => pElCounts[s.e]++);
[pSaju.year?.b,pSaju.month?.b,pSaju.day?.b].filter(Boolean).forEach(b => pElCounts[b.e]++);
// å†¬åœŸ + ç«/æœ¨
if (myDmEl === 'earth' && isWinter) {
  if (pElCounts.fire >= 1) {
    analysis.johu.score = 15;
    analysis.johu.details.push({type:'excellent',title:'ğŸŒ¡ï¸ å†¬åœŸå¾—é™½ (ê²¨ìš¸ í™ì´ íƒœì–‘ì„ ë§Œë‚¨)!',desc:'ê²¨ìš¸ í™(å·±åœŸ)ì´ ìƒëŒ€ì˜ ç« ê¸°ìš´ìœ¼ë¡œ ë”°ëœ»í•´ì ¸ìš”! ìµœê³ ì˜ ì¡°í›„ ê¶í•©!',tip:'ë§Œë‚˜ë©´ ëª¸ê³¼ ë§ˆìŒì´ ë”°ëœ»í•´ì§€ëŠ” ì²œìƒì—°ë¶„!'});
  } else if (pElCounts.wood >= 1) {
    analysis.johu.score = 8;
    analysis.johu.details.push({type:'good',title:'ğŸŒ± å†¬åœŸé–‹å¢¾ (ê²¨ìš¸ í™ì„ ë‚˜ë¬´ê°€ ê°ˆì•„ì¤Œ)',desc:'ì–¼ì–´ë¶™ì€ í™ì„ ìƒëŒ€ì˜ æœ¨ì´ ê°ˆì•„ì¤˜ìš”. í†µê´€ ì‘ìš©ìœ¼ë¡œ í™œë ¥ì´ ìƒê²¨ìš”.',tip:'ìƒëŒ€ê°€ ë‚˜ë¥¼ ìê·¹í•´ì„œ ì„±ì¥í•˜ê²Œ í•´ì¤˜ìš”.'});
  }
}
// å¤åœŸ + æ°´
else if (myDmEl === 'earth' && isSummer && pElCounts.water >= 1) {
  analysis.johu.score = 15;
  analysis.johu.details.push({type:'excellent',title:'ğŸŒ¡ï¸ å¤åœŸå¾—æ°´ (ì—¬ë¦„ í™ì´ ë¬¼ì„ ë§Œë‚¨)!',desc:'ë§ˆë¥¸ ì—¬ë¦„ í™ì´ ìƒëŒ€ì˜ æ°´ë¡œ ì´‰ì´‰í•´ì ¸ìš”!',tip:'ê°ˆì¦ì„ í•´ì†Œí•´ì£¼ëŠ” ê·€ì¸!'});
}
// å¯’é‡‘ + ç«
else if (myDmEl === 'metal' && isWinter && pElCounts.fire >= 1) {
  analysis.johu.score = 15;
  analysis.johu.details.push({type:'excellent',title:'ğŸŒ¡ï¸ å¯’é‡‘å¾—ç« (ì°¬ ê¸ˆì†ì´ ë¶ˆì„ ë§Œë‚¨)!',desc:'ì°¨ê°€ìš´ é‡‘ì´ ìƒëŒ€ì˜ ç«ë¡œ ë‹¨ë ¨ë¼ìš”!',tip:'ë‚ ì¹´ë¡œìš´ ê²€ì´ ì™„ì„±ë˜ëŠ” ì¡°í•©!'});
}
// å¯’æ°´ + ç«
else if (myDmEl === 'water' && isWinter && pElCounts.fire >= 1) {
  analysis.johu.score = 15;
  analysis.johu.details.push({type:'excellent',title:'ğŸŒ¡ï¸ å¯’æ°´å¾—ç« (ì°¬ ë¬¼ì´ ë¶ˆì„ ë§Œë‚¨)!',desc:'ì–¼ì–´ë¶™ì€ æ°´ê°€ ìƒëŒ€ì˜ ç«ë¡œ ë…¹ì•„ìš”!',tip:'ì–¼ìŒì´ íë¥´ëŠ” ê°•ë¬¼ì´ ë˜ëŠ” ì¡°í•©!'});
}
// ê¸°ì¡´ í•œ/ì—´ ë³´ì™„ ë¡œì§ (fallback)
else if (GODS.climate && pGods.climate) {
  const myClimate = GODS.climate.type;const pClimate = pGods.climate.type;
  const isComplementary = (myClimate.includes('í•œ') && pClimate.includes('ì¡°')) || (myClimate.includes('ì¡°') && pClimate.includes('í•œ')) || (myClimate.includes('ìŠµ') && pClimate.includes('ì¡°')) || (myClimate.includes('ì¡°') && pClimate.includes('ìŠµ'));
  const isExtremeComplement = isComplementary && myClimate.includes('ê·¹') && pClimate.includes('ê·¹');
  if (isComplementary) {const johuScore = isExtremeComplement ? 15 : 12;analysis.johu.score = johuScore;analysis.johu.details.push({type:'excellent',title: isExtremeComplement ? 'ğŸŒ¡ï¸ ê·¹í•œê·¹ì¡° ì²œìƒì—°ë¶„!' : 'ğŸŒ¡ï¸ ì¡°í›„ ë³´ì™„!',desc:`ë‚˜ëŠ” ${myClimate}, ìƒëŒ€ëŠ” ${pClimate}. ${isExtremeComplement ? 'ê·¹ê³¼ ê·¹ì´ ë§Œë‚˜ ì™„ë²½í•œ ì¡°í™”!' : 'ì„œë¡œ ë¶€ì¡±í•œ ê¸°ìš´ì„ ì±„ì›Œì¤˜ìš”!'}`,tip: isExtremeComplement ? 'ìš´ëª…ì ìœ¼ë¡œ ë§ºì–´ì§„ ìµœê³ ì˜ ê¶í•©!' : 'ë§Œë‚˜ë©´ í¸ì•ˆí•´ì§€ëŠ” ì¢‹ì€ ê¶í•©!'});}
  else if (myClimate === pClimate || (myClimate.includes('í•œ') && pClimate.includes('í•œ')) || (myClimate.includes('ì¡°') && pClimate.includes('ì¡°'))) {analysis.johu.score = -3;analysis.johu.details.push({type:'caution',title:'ğŸŒ¡ï¸ ì¡°í›„ ë™ì¼',desc:`ë‘˜ ë‹¤ ${myClimate.includes('í•œ') ? 'å¯’(í•œ)' : 'ç‡¥(ì¡°)'} ê³„ì—´ì´ì—ìš”.`,tip:'ê°™ì€ ì„±í–¥ì´ë¼ í™˜ê²½ ì¡°ì ˆ í•„ìš”!'});}
}
const mySinsal = calcSinsal(SAJU);const pSinsal = calcSinsal(pSaju);const myDohwa = mySinsal?.find(s => s.n === 'ë„í™”ì‚´');const pDohwa = pSinsal?.find(s => s.n === 'ë„í™”ì‚´');if (myDohwa && pDohwa) {analysis.sinsal.score = 5;analysis.sinsal.details.push({type: 'special',
title: 'ğŸŒ¸ ìŒë„í™” ì»¤í”Œ!',
desc: 'ë‘˜ ë‹¤ ë„í™”ì‚´ ë³´ìœ ! ë§¤ë ¥ì ì¸ ì»¤í”Œì´ì—ìš”.',
tip: 'ì„œë¡œì— ëŒ€í•œ ëŒë¦¼ì´ ê°•í•´ìš”. ì§ˆíˆ¬ë„ ê°•í•˜ë‹ˆ ì‹ ë¢°ê°€ ì¤‘ìš”!'});} else if (myDohwa || pDohwa) {analysis.sinsal.score = 3;analysis.sinsal.details.push({type: 'neutral',
title: 'ğŸŒ¸ ë„í™”ì‚´ ìˆìŒ',
desc: `${myDohwa ? 'ë‚˜' : 'ìƒëŒ€'}ì—ê²Œ ë„í™”ì‚´ì´ ìˆì–´ìš”.`,
tip: 'í•œìª½ì´ ë” ë§¤ë ¥ì ìœ¼ë¡œ ë³´ì¼ ìˆ˜ ìˆì–´ìš”. ëˆˆê¸¸ ì¡°ì‹¬!'});}
const myYeokma = mySinsal?.find(s => s.n === 'ì—­ë§ˆì‚´');const pYeokma = pSinsal?.find(s => s.n === 'ì—­ë§ˆì‚´');if (myYeokma && pYeokma) {analysis.sinsal.score += 4;analysis.sinsal.details.push({type: 'good',
title: 'ğŸ ìŒì—­ë§ˆ ì»¤í”Œ!',
desc: 'ë‘˜ ë‹¤ ì—­ë§ˆì‚´ ë³´ìœ ! ì›€ì§ì„ì´ í™œë°œí•œ ì»¤í”Œì´ì—ìš”.',
tip: 'í•¨ê»˜ ì—¬í–‰ ë‹¤ë‹ˆë©´ ê¸ˆìƒì²¨í™”! ì¥ê±°ë¦¬ ì—°ì• ë„ ê°€ëŠ¥í•´ìš”.'});} else if (myYeokma && !pYeokma || !myYeokma && pYeokma) {analysis.sinsal.score += 1;analysis.sinsal.details.push({type: 'neutral',
title: 'ğŸ ì—­ë§ˆì‚´ ìˆìŒ',
desc: `${myYeokma ? 'ë‚˜' : 'ìƒëŒ€'}ì—ê²Œ ì—­ë§ˆì‚´ì´ ìˆì–´ìš”.`,
tip: 'í•œìª½ì€ ëŒì•„ë‹¤ë‹ˆê³  í•œìª½ì€ ê¸°ë‹¤ë¦¬ëŠ” íŒ¨í„´. ì´í•´ê°€ í•„ìš”í•´ìš”.'});}
const myHwagae = mySinsal?.find(s => s.n === 'í™”ê°œì‚´');const pHwagae = pSinsal?.find(s => s.n === 'í™”ê°œì‚´');if (myHwagae && pHwagae) {analysis.sinsal.score += 5;analysis.sinsal.details.push({type: 'special',
title: 'ğŸ­ ìŒí™”ê°œ ì»¤í”Œ!',
desc: 'ë‘˜ ë‹¤ í™”ê°œì‚´ ë³´ìœ ! ì˜ˆìˆ ì  ê°ì„±ì´ í†µí•˜ëŠ” ì»¤í”Œì´ì—ìš”.',
tip: 'í•¨ê»˜ ë¬¸í™”ìƒí™œ, ì¢…êµí™œë™ í•˜ë©´ í–‰ë³µí•´ìš”. ê³ ë…ë„ ì´í•´í•´ì¤˜ìš”.'});}
const myGongmang = calcGongmang(SAJU);const pGongmang = calcGongmang(pSaju);if (myGongmang?.values?.includes(pDbIdx)) {analysis.gongmang.score = -8;analysis.gongmang.details.push({type: 'caution',
title: 'ğŸ•³ï¸ ìƒëŒ€ê°€ ë‚´ ê³µë§ì—!',
desc: 'ìƒëŒ€ì˜ ì¼ì§€ê°€ ë‚˜ì˜ ê³µë§ ìë¦¬ì˜ˆìš”.',
tip: 'ì²˜ìŒì—” ëŒë¦¬ì§€ë§Œ ì ì  ê³µí—ˆí•´ì§ˆ ìˆ˜ ìˆì–´ìš”. í˜„ì‹¤ì  ë…¸ë ¥ì´ í•„ìš”!'});}
if (pGongmang?.values?.includes(myDbIdx)) {analysis.gongmang.score -= 6;analysis.gongmang.details.push({type: 'caution',
title: 'ğŸ•³ï¸ ë‚´ê°€ ìƒëŒ€ì˜ ê³µë§ì—!',
desc: 'ë‚˜ì˜ ì¼ì§€ê°€ ìƒëŒ€ì˜ ê³µë§ ìë¦¬ì˜ˆìš”.',
tip: 'ìƒëŒ€ê°€ ë‚˜ë¥¼ í—ˆë¬´í•˜ê²Œ ëŠë‚„ ìˆ˜ ìˆì–´ìš”. ì¡´ì¬ê°ì„ ì ê·¹ ì–´í•„!'});}
if (myGongmang?.values && pGongmang?.values) {const commonGongmang = myGongmang.values.filter(v => pGongmang.values.includes(v));if (commonGongmang.length > 0) {analysis.gongmang.score += 5;analysis.gongmang.details.push({type: 'special',
title: 'ğŸ”® ê³µë§ì´ ê°™ìŒ!',
desc: 'ê°™ì€ ê³µë§ì„ ê³µìœ í•´ìš”. ê°™ì€ ê±¸ í—ˆë¬´í•˜ê²Œ ëŠë¼ëŠ” ë™ì§ˆê°!',
tip: 'ì„œë¡œì˜ ê³µí—ˆí•¨ì„ ì´í•´í•´ì¤„ ìˆ˜ ìˆëŠ” íŠ¹ë³„í•œ ì¸ì—°ì´ì—ìš”.'});}}
for (const key in analysis) {totalScore += analysis[key].score;}
totalScore = Math.max(0, Math.min(100, totalScore));let grade, color, summary;if (totalScore >= 85) {grade = 'ğŸ’– ì²œìƒì—°ë¶„';color = '#e91e63';summary = 'ìµœê³ ì˜ ê¶í•©! ìš´ëª…ì ì¸ ë§Œë‚¨ì´ì—ìš”.';} else if (totalScore >= 70) {grade = 'ğŸ’• ì•„ì£¼ ì¢‹ì€ ê¶í•©';color = '#9c27b0';summary = 'ì„œë¡œì—ê²Œ ì¢‹ì€ ê¸°ìš´ì„ ì£¼ëŠ” ê´€ê³„ì˜ˆìš”.';} else if (totalScore >= 55) {grade = 'ğŸ’› ì¢‹ì€ ê¶í•©';color = '#ff9800';summary = 'ë…¸ë ¥í•˜ë©´ í–‰ë³µí•´ì§ˆ ìˆ˜ ìˆì–´ìš”!';} else if (totalScore >= 40) {grade = 'ğŸ§¡ ë³´í†µ ê¶í•©';color = '#ff5722';summary = 'ì„œë¡œ ë‹¤ë¥¸ ì ì„ ì¸ì •í•˜ë©´ ì¢‹ì•„ì ¸ìš”.';} else {grade = 'ğŸ’” ë…¸ë ¥ í•„ìš”';color = '#f44336';summary = 'ì‰½ì§€ ì•Šì§€ë§Œ, ì‚¬ë‘ì˜ í˜ìœ¼ë¡œ ê·¹ë³µ ê°€ëŠ¥í•´ìš”!';}
const categoryNames = {ilgan: {icon: 'â˜¯', name: 'ì¼ê°„ ê¶í•©', desc: 'ë‘ ì‚¬ëŒì˜ ë³¸ì§ˆì  ì¡°í™”'},
ilji: {icon: 'ğŸ’‘', name: 'ì¼ì§€(ë°°ìš°ìê¶) ê¶í•©', desc: 'ê²°í˜¼ í›„ ìƒí™œ ì¡°í™”'},
samhap: {icon: 'ğŸŒ€', name: 'ì‚¼í•©/ë°©í•© ê¶í•©', desc: 'ê°™ì€ ëª©í‘œì™€ ë°©í–¥'},
napeum: {icon: 'ğŸµ', name: 'ë‚©ìŒ ê¶í•©', desc: 'ì˜í˜¼ì˜ íŒŒì¥'},
yongsin: {icon: 'â­', name: 'ìš©ì‹  ê¶í•©', desc: 'ì„œë¡œì—ê²Œ ê·€ì¸ì¸ì§€'},
jijanggan: {icon: 'ğŸ¤«', name: 'ì§€ì¥ê°„(ì•”í•©) ê¶í•©', desc: 'ìˆ¨ê²¨ì§„ ëŒë¦¼'},
ddi: {icon: 'ğŸ¾', name: 'ë  ê¶í•©', desc: 'ì „í†µ ê¶í•©'},
ilju: {icon: 'ğŸ‘¼', name: 'ê·€ì¸ ê¶í•©', desc: 'íŠ¹ë³„í•œ ì¸ì—°'},
wonJinGuiMun: {icon: 'âš ï¸', name: 'ì›ì§„/ê·€ë¬¸ ê¶í•©', desc: 'ì•…ì—° ì²´í¬'},
yukChin: {icon: 'ğŸ’', name: 'ìœ¡ì¹œ ê¶í•©', desc: 'ìš´ëª…ì  ì¸ì—° ë¶„ì„'},
twelveState: {icon: 'âš¡', name: '12ìš´ì„± ê¶í•©', desc: 'ì—ë„ˆì§€ ë ˆë²¨ ë¹„êµ'},
strength: {icon: 'âš–ï¸', name: 'ì‹ ê°•/ì‹ ì•½ ê¶í•©', desc: 'ê°•ì•½ ë°¸ëŸ°ìŠ¤'},
johu: {icon: 'ğŸŒ¡ï¸', name: 'ì¡°í›„ìš©ì‹  ê¶í•©', desc: 'í•œë‚œì¡°ìŠµ ì¡°í™”'},
sinsal: {icon: 'âœ¨', name: 'ì‹ ì‚´ ê¶í•©', desc: 'ë„í™”/ì—­ë§ˆ/í™”ê°œ'},
gongmang: {icon: 'ğŸ•³ï¸', name: 'ê³µë§ ê¶í•©', desc: 'í—ˆë¬´í•¨ì˜ ê³µìœ '}};let html = `
<div class="card" style="text-align:center;background:linear-gradient(145deg, rgba(233,30,99,0.15), rgba(156,39,176,0.08));"><p style="font-size:0.9rem;color:var(--gray);margin-bottom:10px;">ë‘ ì‚¬ëŒì˜ ê¶í•©</p><p style="font-size:2.5rem;color:${color};margin-bottom:5px;">${grade}</p><p style="font-size:2rem;font-weight:bold;margin-bottom:10px;">${totalScore}ì </p><div style="background:#333;border-radius:10px;height:20px;margin:15px 0;"><div style="background:linear-gradient(90deg,${color},#ff6b6b);height:100%;border-radius:10px;width:${totalScore}%;transition:width 1s;"></div></div><p style="font-size:0.95rem;color:var(--gray);">${summary}</p></div><div class="card"><h3>ğŸ“Š ë‘ ì‚¬ëŒ ë¹„êµ</h3><div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-top:15px;"><div style="text-align:center;padding:15px;background:rgba(253,216,53,0.1);border-radius:10px;"><p style="font-size:0.8rem;color:var(--gray);margin-bottom:5px;">ë‚˜</p><p style="font-size:1.5rem;font-weight:bold;color:var(--gold);">${myIlju}</p><p style="font-size:0.9rem;">${myDm.k}${ELEMENT[myDm.e].k}</p><p style="font-size:0.8rem;color:var(--gray);">${myNapeum.name}</p></div><div style="text-align:center;padding:15px;background:rgba(233,30,99,0.1);border-radius:10px;"><p style="font-size:0.8rem;color:var(--gray);margin-bottom:5px;">ìƒëŒ€</p><p style="font-size:1.5rem;font-weight:bold;color:#e91e63;">${pIlju}</p><p style="font-size:0.9rem;">${pDm.k}${ELEMENT[pDm.e].k}</p><p style="font-size:0.8rem;color:var(--gray);">${pNapeum.name}</p></div></div></div>
`;
// [v34.4] ìºë¦­í„° ë° ì˜¤í–‰ ì—­í•™ ì„¹ì…˜ ì¶”ê°€
const charResult = generateCharacterSectionHTML(myIlju, pIlju, myDm, pDm);
html += charResult.html;
window.MATCH_CHAR_RESULT = charResult;

// [v34.4] ì—°ë„ë³„ ìœ„í—˜ ë¶„ì„
const yearlyRisks = analyzeYearlyRisksV2(SAJU, pSaju, new Date().getFullYear(), 5);
if (yearlyRisks.length > 0) {
  html += '<div class="card"><h3>ğŸ“… í–¥í›„ 5ë…„ ì£¼ì˜ ì‹œê¸°</h3>';
  yearlyRisks.forEach(risk => {
    html += '<div style="margin-top:10px;"><p style="font-weight:bold;color:var(--gold);margin-bottom:5px;">ğŸ“† '+risk.year+'ë…„</p>';
    risk.events.forEach(e => {
      html += '<div style="padding:10px;margin-top:5px;border-radius:8px;background:rgba(244,67,54,0.1);border-left:3px solid var(--fire);"><p style="font-weight:bold;margin-bottom:3px;">'+e.severity+' '+e.type+'</p><p style="font-size:0.85rem;margin-bottom:3px;">'+e.desc+'</p><p style="font-size:0.8rem;color:var(--gold);">â†’ '+e.advice+'</p></div>';
    });
    html += '</div>';
  });
  html += '</div>';
}
window.MATCH_YEARLY_RISKS = yearlyRisks;

for (const key in analysis) {if (analysis[key].details.length === 0) continue;const cat = categoryNames[key];const scoreColor = analysis[key].score > 0 ? 'var(--wood)' : analysis[key].score < 0 ? 'var(--fire)' : 'var(--gray)';html += `
<div class="card"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;"><h3>${cat.icon} ${cat.name}</h3><span style="color:${scoreColor};font-weight:bold;">${analysis[key].score > 0 ? '+' : ''}${analysis[key].score}ì </span></div><p style="font-size:0.8rem;color:var(--gray);margin-bottom:10px;">${cat.desc}</p>
${analysis[key].details.map(d => `
<div style="padding:12px;margin-top:10px;border-radius:8px;background:${d.type === 'excellent' ? 'rgba(233,30,99,0.1)' :
d.type === 'good' ? 'rgba(76,175,80,0.1)' :
d.type === 'special' ? 'rgba(156,39,176,0.1)' :
d.type === 'caution' ? 'rgba(255,152,0,0.1)' :
d.type === 'bad' ? 'rgba(244,67,54,0.1)' : 'rgba(255,255,255,0.05)'};border-left:3px solid ${d.type === 'excellent' ? '#e91e63' :
d.type === 'good' ? 'var(--wood)' :
d.type === 'special' ? '#9c27b0' :
d.type === 'caution' ? 'var(--earth)' :
d.type === 'bad' ? 'var(--fire)' : 'var(--gray)'};"><p style="font-weight:bold;margin-bottom:5px;">${d.title}</p><p style="font-size:0.9rem;margin-bottom:5px;">${d.desc}</p><p style="font-size:0.8rem;color:var(--gold);">ğŸ’¡ ${d.tip}</p></div>
`).join('')}
</div>
`;}
html += `
<div class="card" style="background:linear-gradient(145deg, rgba(253,216,53,0.1), rgba(255,152,0,0.05));"><h3>ğŸ’¡ ê¶í•© ì¢…í•© ì¡°ì–¸</h3><div style="margin-top:15px;line-height:1.8;">
${totalScore >= 70 ? `
<p>âœ¨ ë‘ ë¶„ì€ <strong>ì²œìƒì—°ë¶„</strong>ì— ê°€ê¹Œìš´ ê¶í•©ì´ì—ìš”!</p><p>ì„œë¡œë¥¼ ìˆëŠ” ê·¸ëŒ€ë¡œ ë°›ì•„ë“¤ì´ê³ , ê°ì‚¬í•˜ëŠ” ë§ˆìŒìœ¼ë¡œ í•¨ê»˜í•˜ì„¸ìš”.</p>
` : totalScore >= 50 ? `
<p>ğŸ’• ê´œì°®ì€ ê¶í•©ì´ì—ìš”! ì¡°ê¸ˆì˜ ë…¸ë ¥ìœ¼ë¡œ ë” ì¢‹ì•„ì§ˆ ìˆ˜ ìˆì–´ìš”.</p><p>ì„œë¡œ ë‹¤ë¥¸ ì ì„ ë‹¨ì ì´ ì•„ë‹Œ <strong>ë³´ì™„ì </strong>ìœ¼ë¡œ ë³´ì„¸ìš”.</p>
` : `
<p>ğŸ’ª ì‰½ì§€ ì•Šì€ ê¶í•©ì´ì§€ë§Œ, <strong>ì‚¬ë‘ì˜ í˜</strong>ìœ¼ë¡œ ê·¹ë³µ ê°€ëŠ¥í•´ìš”!</p><p>ì„œë¡œì˜ ì°¨ì´ë¥¼ ì¸ì •í•˜ê³ , ëŒ€í™”ë¥¼ ë§ì´ í•˜ì„¸ìš”.</p>
`}
<p style="margin-top:15px;padding-top:15px;border-top:1px solid rgba(255,255,255,0.1);"><strong>ğŸ”® ê¶í•©ë³´ë‹¤ ì¤‘ìš”í•œ ê±´ ì„œë¡œë¥¼ í–¥í•œ ë§ˆìŒì´ì—ìš”.</strong><br>
ì¢‹ì€ ê¶í•©ë„ ë…¸ë ¥ ì—†ì´ëŠ” ë¬´ë„ˆì§€ê³ , ì•ˆ ì¢‹ì€ ê¶í•©ë„ ì‚¬ë‘ìœ¼ë¡œ ê·¹ë³µë©ë‹ˆë‹¤.
</p></div></div><div class="card" style="text-align:center;"><button class="btn" style="background:linear-gradient(135deg,#9C27B0,#673AB7);" onclick="copyMatchForAI()">
ğŸ“‹ ì„œìˆ í˜• í•´ì„ì„ ìœ„í•œ ë³µì‚¬ (Gemini/ChatGPT)
</button><p style="margin-top:15px;font-size:13px;color:#9C27B0;opacity:0.9;line-height:1.8;">
âœ¨ ì •ë°€í•œ ê¶í•© ë°ì´í„°ì™€ AIì˜ ì‹¬ì¸µ ë¶„ì„ì´ ë§Œë‚˜ëŠ”<br><span style="color:var(--gold);font-weight:600;">í˜„ì¡´í•˜ëŠ” ê°€ì¥ ì™„ë²½í•œ ê¶í•© í•´ì„ì˜ ì¡°í•©</span>ì…ë‹ˆë‹¤
</p><p style="margin-top:10px;font-size:12px;color:#aaa;line-height:1.7;">
ê³ ì „ ëª…ë¦¬ì˜ ë³µì¡í•œ ìˆ˜ì‹ì€ ë‹¨ í•œ ì¹˜ì˜ ì˜¤ì°¨ ì—†ì´ ê³„ì‚°í•˜ê³ ,<br>
ê·¸ ê²°ê³¼ë¥¼ ì„¸ê³„ ìµœì •ìƒ AIê°€ ì˜¤ì§ ë‘ ë¶„ë§Œì„ ìœ„í•´ í•´ì„í•©ë‹ˆë‹¤.<br><span style="color:var(--gold);opacity:0.9;">ì „ë¬¸ê°€ì˜ í†µì°°ê³¼ ê¸°ìˆ ì˜ ì •í™•ì„±, ë‘˜ ëª¨ë‘ë¥¼ ì·¨í•˜ì‹­ì‹œì˜¤.</span></p></div>
`;document.getElementById('match-result').innerHTML = html;window.MATCH_RESULT = {mySaju: SAJU, pSaju,
myGods: GODS, pGods,
myStr, pStr,
analysis, totalScore, grade,
myNapeum, pNapeum,
myTwelveState, pTwelveState,
mySinsal, pSinsal,
myGongmang, pGongmang};} catch (error) {console.error('ê¶í•© ë¶„ì„ ì˜¤ë¥˜:', error);toast('ê¶í•© ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');}}
function copyMatchForAI() {const relType = document.getElementById('relationship-type')?.value || 'romance';if (!window.MATCH_RESULT) { toast('ë¨¼ì € ê¶í•©ì„ ë¶„ì„í•˜ì„¸ìš”'); return; }
const r = window.MATCH_RESULT;
const charInfo = window.MATCH_CHAR_RESULT || {};
const yearlyInfo = window.MATCH_YEARLY_RISKS || [];
const myCharName = charInfo.myChar?.name || 'ë¯¸ìƒ';
const myCharEmoji = charInfo.myChar?.emoji || '';
const myCharDesc = charInfo.myChar?.desc || '';
const pCharName = charInfo.pChar?.name || 'ë¯¸ìƒ';
const pCharEmoji = charInfo.pChar?.emoji || '';
const pCharDesc = charInfo.pChar?.desc || '';
const myToPName = charInfo.myToP?.name || '';
const myToPEmoji = charInfo.myToP?.emoji || '';
const myToPDesc = charInfo.myToP?.desc || '';
const myToPAdvice = charInfo.myToP?.advice || '';
const pToMeName = charInfo.pToMe?.name || '';
const pToMeEmoji = charInfo.pToMe?.emoji || '';
const pToMeDesc = charInfo.pToMe?.desc || '';
const pToMeAdvice = charInfo.pToMe?.advice || '';
const myDm = r.mySaju.day.s;
const pDm = r.pSaju.day.s;
const myStrInfo = r.myStr ? `${r.myStr.type === 'strong' ? 'ì‹ ê°•' : r.myStr.type === 'weak' ? 'ì‹ ì•½' : 'ì¤‘í™”'}(${r.myStr.pct}%)` : 'ë¯¸ìƒ';
const pStrInfo = r.pStr ? `${r.pStr.type === 'strong' ? 'ì‹ ê°•' : r.pStr.type === 'weak' ? 'ì‹ ì•½' : 'ì¤‘í™”'}(${r.pStr.pct}%)` : 'ë¯¸ìƒ';
const myTwelveInfo = r.myTwelveState ? `${r.myTwelveState.k}(ì—ë„ˆì§€ ${r.myTwelveState.l}/12)` : 'ë¯¸ìƒ';
const pTwelveInfo = r.pTwelveState ? `${r.pTwelveState.k}(ì—ë„ˆì§€ ${r.pTwelveState.l}/12)` : 'ë¯¸ìƒ';
const myJohuInfo = r.myGods?.climate ? r.myGods.climate.type : 'ë¯¸ìƒ';
const pJohuInfo = r.pGods?.climate ? r.pGods.climate.type : 'ë¯¸ìƒ';
const myGiInfo = r.myGods?.gi ? ELEMENT[r.myGods.gi].k : 'ë¯¸ìƒ';
const pGiInfo = r.pGods?.gi ? ELEMENT[r.pGods.gi].k : 'ë¯¸ìƒ';
const mySinsalList = r.mySinsal?.map(s => s.n).join(', ') || 'ì—†ìŒ';
const pSinsalList = r.pSinsal?.map(s => s.n).join(', ') || 'ì—†ìŒ';
const myGongmangInfo = r.myGongmang?.display || 'ì—†ìŒ';
const pGongmangInfo = r.pGongmang?.display || 'ì—†ìŒ';
const myGenderText = GENDER === 'm' ? 'ë‚¨ì„±' : 'ì—¬ì„±';
const pGenderText = document.getElementById('partner-gender')?.value === 'm' ? 'ë‚¨ì„±' : 'ì—¬ì„±';
// [v34.4] ë°°ìš°ìì„± êµì°¨ë¶„ì„
const getSpouseStar = (dm, gender) => {
  const elOrder = ['wood', 'fire', 'earth', 'metal', 'water'];
  const dmIdx = elOrder.indexOf(dm.e);
  return gender === 'm' ? { el: elOrder[(dmIdx + 2) % 5], name: 'ì¬ì„±(è²¡æ˜Ÿ)' } : { el: elOrder[(dmIdx + 3) % 5], name: 'ê´€ì„±(å®˜æ˜Ÿ)' };
};
const countElInChart = (saju, el) => {
  let cnt = 0;
  [saju.year?.s, saju.month?.s, saju.day?.s, saju.hour?.s].filter(Boolean).forEach(s => { if (s.e === el) cnt++; });
  [saju.year?.b, saju.month?.b, saju.day?.b, saju.hour?.b].filter(Boolean).forEach(b => { if (b.e === el) cnt++; });
  return cnt;
};
const mySpouseStar = getSpouseStar(myDm, GENDER);
const pSpouseStar = getSpouseStar(pDm, pGenderText === 'ë‚¨ì„±' ? 'm' : 'f');
const mySSInP = countElInChart(r.pSaju, mySpouseStar.el);
const pSSInMe = countElInChart(r.mySaju, pSpouseStar.el);
const myYongInP = r.myGods?.yong ? countElInChart(r.pSaju, r.myGods.yong) : 0;
const myGiInP = r.myGods?.gi ? countElInChart(r.pSaju, r.myGods.gi) : 0;
const pYongInMe = r.pGods?.yong ? countElInChart(r.mySaju, r.pGods.yong) : 0;
const pGiInMe = r.pGods?.gi ? countElInChart(r.mySaju, r.pGods.gi) : 0;
// [v34.4] CRITICAL FACTORS ìƒì„±
const criticals = [];
const hasStemCombine = r.analysis?.ilgan?.score >= 20;
const hasBranchCombine = r.analysis?.ilji?.score >= 15;
const hasBranchClash = r.analysis?.ilji?.score <= -10;
const hasSamhap = r.analysis?.samhap?.score >= 10;
if (hasStemCombine) criticals.push('ğŸ’« ì²œê°„í•©(å¤©å¹²åˆ) ì„±ë¦½! - ìš´ëª…ì  ëŒë¦¼, ì²œìƒì—°ë¶„ ì ì¬ë ¥!');
if (hasBranchCombine) criticals.push('ğŸ’• ì¼ì§€ ìœ¡í•©(å…­åˆ) ì„±ë¦½! - ë°°ìš°ìê¶ ì¡°í™”, ê²°í˜¼ìš´ ìµœìƒ!');
if (hasBranchClash) criticals.push('âš ï¸ ì¼ì§€ ì¶©(æ²–) ë°œê²¬! - ê°ˆë“± ê°€ëŠ¥ì„±, ë‹¨ ì—´ì •ì  ê´€ê³„ë¡œ ì „í™˜ ê°€ëŠ¥');
if (hasSamhap) criticals.push('ğŸ”± ì‚¼í•©/ë°©í•© ì„±ë¦½! - ' + (r.analysis.samhap.details[0]?.desc || 'ê°•ë ¥í•œ ì¹´ë¥´ë§ˆ ì—°ê²°'));
if (mySSInP >= 2) criticals.push('âœ… ìƒëŒ€ê°€ ë‚´ ë°°ìš°ìì„±(' + ELEMENT[mySpouseStar.el].k + ')ì„ ' + mySSInP + 'ê°œ ë³´ìœ ! - ê°•í•œ ëŒë¦¼!');
if (myYongInP >= 2) criticals.push('ğŸŒŸ ìƒëŒ€ê°€ ë‚´ ìš©ì‹ (' + ELEMENT[r.myGods.yong].k + ')ì„ í’ë¶€í•˜ê²Œ ë³´ìœ ! - ë§Œë‚˜ë©´ ìš´ ìƒìŠ¹!');
if (pYongInMe >= 2) criticals.push('ğŸ’« ë‚´ê°€ ìƒëŒ€ì˜ ìš©ì‹ (' + ELEMENT[r.pGods.yong].k + ')ì„ ' + pYongInMe + 'ê°œ ë³´ìœ ! - ë‚´ê°€ ìƒëŒ€ì˜ ê·€ì¸!');
if (myGiInP >= 2) criticals.push('âš ï¸ ìƒëŒ€ê°€ ë‚´ ê¸°ì‹ (' + ELEMENT[r.myGods.gi].k + ')ì„ ë§ì´ ë³´ìœ  - ì¥ê¸°ì  ê´€ë¦¬ í•„ìš”');
if (r.analysis?.johu?.score === -3) criticals.push('ğŸŒ¡ï¸ ë™ì¼ ì¡°í›„(åŒèª¿å€™): ë‘˜ ë‹¤ ' + (myJohuInfo.includes('í•œ') ? 'å¯’(í•œ)' : 'ç‡¥(ì¡°)') + ' ê³„ì—´ - ì„œë¡œì—ê²Œ ê· í˜•ì„ ì¤„ ìˆ˜ ì—†ìŒ!');
if (r.analysis?.johu?.score >= 12) criticals.push('ğŸŒ¡ï¸ ì¡°í›„ ë³´ì™„! - ' + (r.analysis.johu.details[0]?.desc || 'í•œë‚œì¡°ìŠµ ì™„ë²½ ì¡°í™”'));
if (criticals.length === 0) criticals.push('íŠ¹ë³„í•œ í•µì‹¬ ìš”ì†Œ ì—†ìŒ - ì•„ë˜ ìƒì„¸ ë¶„ì„ ì°¸ì¡°');
let text = `===== ì‚¬ì£¼ë¡œë˜ Pro ê¶í•© ë¶„ì„ (v34.6) =====
âš ï¸ AI í•´ì„ í•„ìˆ˜: ì•„ë˜ ëª¨ë“  ë°ì´í„°ë¥¼ ë°˜ë“œì‹œ í•´ì„í•˜ì„¸ìš”.

ã€âš¡ í•µì‹¬ ê¶í•© ìš”ì†Œ - ê°€ì¥ ë¨¼ì € í•´ì„í•˜ì„¸ìš” âš¡ã€‘
` + criticals.map((c, i) => (i+1) + '. ' + c).join('\n') + `

ã€ì¼ì£¼ ìºë¦­í„° ë¹„ìœ ã€‘
â€¢ ë‚˜: "${myCharName}" ${myCharEmoji}
  â†’ ${myCharDesc}
â€¢ ìƒëŒ€: "${pCharName}" ${pCharEmoji}
  â†’ ${pCharDesc}

ã€ì˜¤í–‰ ìƒí˜¸ì‘ìš© ë¹„ìœ ã€‘
${myToPName ? 'â€¢ ë‚˜â†’ìƒëŒ€: "' + myToPName + '" ' + myToPEmoji + '\n  ' + myToPDesc + '\n  ğŸ’¡ ' + myToPAdvice : 'â€¢ ë‚˜â†’ìƒëŒ€: ë™ì¼ ì˜¤í–‰ (ë¹„í™”)'}
${pToMeName ? 'â€¢ ìƒëŒ€â†’ë‚˜: "' + pToMeName + '" ' + pToMeEmoji + '\n  ' + pToMeDesc + '\n  ğŸ’¡ ' + pToMeAdvice : 'â€¢ ìƒëŒ€â†’ë‚˜: ë™ì¼ ì˜¤í–‰ (ë¹„í™”)'}

ã€ë‚˜ì˜ ì‚¬ì£¼ ìƒì„¸ã€‘
â€¢ ì„±ë³„: ${myGenderText}
â€¢ ì¼ì£¼: ${myDm.c}${r.mySaju.day.b.c} (${myDm.k}/${r.mySaju.day.b.k})
â€¢ ì¼ê°„ ì˜¤í–‰: ${ELEMENT[myDm.e].k} (${myDm.y ? 'ì–‘' : 'ìŒ'})
â€¢ ì‚¬ì£¼ ì›êµ­: ${r.mySaju.year.s.c}${r.mySaju.year.b.c} ${r.mySaju.month.s.c}${r.mySaju.month.b.c} ${r.mySaju.day.s.c}${r.mySaju.day.b.c} ${r.mySaju.hour ? r.mySaju.hour.s.c + r.mySaju.hour.b.c : 'ì‹œì£¼ë¯¸ìƒ'}
â€¢ ë‚©ìŒ: ${r.myNapeum.name} (${r.myNapeum.elementK})
â€¢ ìš©ì‹ : ${ELEMENT[r.myGods.yong].k} | ê¸°ì‹ : ${myGiInfo}
â€¢ ì‹ ê°•/ì‹ ì•½: ${myStrInfo}
â€¢ 12ìš´ì„±: ${myTwelveInfo}
â€¢ ì¡°í›„: ${myJohuInfo}
â€¢ ë°°ìš°ìì„±: ${mySpouseStar.name} = ${ELEMENT[mySpouseStar.el].k}
â€¢ ë°°ìš°ìê¶(ì¼ì§€): ${r.mySaju.day.b.c} (${r.mySaju.day.b.k})
â€¢ ì‹ ì‚´: ${mySinsalList}
â€¢ ê³µë§: ${myGongmangInfo}

ã€ìƒëŒ€ë°© ì‚¬ì£¼ ìƒì„¸ã€‘
â€¢ ì„±ë³„: ${pGenderText}
â€¢ ì¼ì£¼: ${pDm.c}${r.pSaju.day.b.c} (${pDm.k}/${r.pSaju.day.b.k})
â€¢ ì¼ê°„ ì˜¤í–‰: ${ELEMENT[pDm.e].k} (${pDm.y ? 'ì–‘' : 'ìŒ'})
â€¢ ì‚¬ì£¼ ì›êµ­: ${r.pSaju.year.s.c}${r.pSaju.year.b.c} ${r.pSaju.month.s.c}${r.pSaju.month.b.c} ${r.pSaju.day.s.c}${r.pSaju.day.b.c}
â€¢ ë‚©ìŒ: ${r.pNapeum.name} (${r.pNapeum.elementK})
â€¢ ìš©ì‹ : ${ELEMENT[r.pGods.yong].k} | ê¸°ì‹ : ${pGiInfo}
â€¢ ì‹ ê°•/ì‹ ì•½: ${pStrInfo}
â€¢ 12ìš´ì„±: ${pTwelveInfo}
â€¢ ì¡°í›„: ${pJohuInfo}
â€¢ ë°°ìš°ìì„±: ${pSpouseStar.name} = ${ELEMENT[pSpouseStar.el].k}
â€¢ ë°°ìš°ìê¶(ì¼ì§€): ${r.pSaju.day.b.c} (${r.pSaju.day.b.k})
â€¢ ì‹ ì‚´: ${pSinsalList}
â€¢ ê³µë§: ${pGongmangInfo}

ã€ë°°ìš°ìì„± êµì°¨ë¶„ì„ã€‘ âš ï¸ ëŒë¦¼ì˜ í•µì‹¬
â€¢ ë‚´ ë°°ìš°ìì„±(${ELEMENT[mySpouseStar.el].k}): ìƒëŒ€ê°€ ${mySSInP}ê°œ ë³´ìœ  â†’ ${mySSInP >= 2 ? 'âœ… ê°•í•œ ëŒë¦¼!' : mySSInP === 1 ? 'ğŸ˜Š ì ë‹¹í•œ ëŒë¦¼' : 'âŒ ì•½í•œ ëŒë¦¼'}
â€¢ ìƒëŒ€ ë°°ìš°ìì„±(${ELEMENT[pSpouseStar.el].k}): ë‚´ê°€ ${pSSInMe}ê°œ ë³´ìœ  â†’ ${pSSInMe >= 2 ? 'âœ… ê°•í•œ ëŒë¦¼!' : pSSInMe === 1 ? 'ğŸ˜Š ì ë‹¹í•œ ëŒë¦¼' : 'âŒ ì•½í•œ ëŒë¦¼'}

ã€ìš©ì‹ /ê¸°ì‹  êµì°¨ë¶„ì„ã€‘ âš ï¸ ê·€ì¸ vs ê¸°ì¸ íŒë³„
â€¢ ë‚´ ìš©ì‹ (${ELEMENT[r.myGods.yong].k}): ìƒëŒ€ê°€ ${myYongInP}ê°œ ë³´ìœ  ${myYongInP >= 2 ? 'âœ… ê·€ì¸!' : ''}
â€¢ ë‚´ ê¸°ì‹ (${myGiInfo}): ìƒëŒ€ê°€ ${myGiInP}ê°œ ë³´ìœ  ${myGiInP >= 2 ? 'âš ï¸ ì£¼ì˜' : ''}
â€¢ ìƒëŒ€ ìš©ì‹ (${ELEMENT[r.pGods.yong].k}): ë‚´ê°€ ${pYongInMe}ê°œ ë³´ìœ  ${pYongInMe >= 2 ? 'âœ… ë‚´ê°€ ê·€ì¸!' : ''}
â€¢ ìƒëŒ€ ê¸°ì‹ (${pGiInfo}): ë‚´ê°€ ${pGiInMe}ê°œ ë³´ìœ  ${pGiInMe >= 2 ? 'âš ï¸ ì£¼ì˜' : ''}

ã€âš¡ CRITICAL FACTORS - í•µì‹¬ ìš”ì†Œ âš¡ã€‘
${(() => {
  const factors = [];
  // ì¡°í›„ë¡  ì²´í¬
  if (r.analysis.johu?.score >= 10) factors.push('ğŸŒ¡ï¸ ì¡°í›„ ì™„ë²½ ì¡°í™”: ' + (r.analysis.johu.details[0]?.desc || 'í•œë‚œì¡°ìŠµ ë³´ì™„'));
  // ì‚¼í•© ì²´í¬
  if (r.analysis.samhap?.score >= 10) factors.push('ğŸ”± ì‚¼í•©/ë°©í•©: ' + (r.analysis.samhap.details[0]?.desc || 'ê°•ë ¥í•œ ì¹´ë¥´ë§ˆ ì—°ê²°'));
  // ì²œê°„í•© ì²´í¬
  if (r.analysis.ilgan?.score >= 20) factors.push('ğŸ’• ì²œê°„í•©: ' + (r.analysis.ilgan.details[0]?.desc || 'ìš´ëª…ì  ëŒë¦¼'));
  // ìœ¡í•© ì²´í¬
  if (r.analysis.ilji?.score >= 15) factors.push('ğŸ’‘ ì¼ì§€ ìœ¡í•©: ' + (r.analysis.ilji.details[0]?.desc || 'ë°°ìš°ìê¶ ì¡°í™”'));
  // ì¶© ì²´í¬
  if (r.analysis.ilji?.score <= -10) factors.push('âš ï¸ ì¼ì§€ ì¶©: ' + (r.analysis.ilji.details[0]?.desc || 'ê°ˆë“± ì£¼ì˜'));
  // ì›ì§„ ì²´í¬
  if (r.analysis.wonJinGuiMun?.hasWonjin) factors.push('ğŸ˜¤ ì›ì§„ ê´€ê³„: ë¯¸ë¬˜í•œ ê¸´ì¥ê° ì¡´ì¬');
  // í˜• ì²´í¬
  if (r.analysis.wonJinGuiMun?.details?.some(d => d.title?.includes('í˜•(åˆ‘)'))) factors.push('âš ï¸ í˜•(åˆ‘) ê´€ê³„: ì„œë¡œë¥¼ ë§ì¹˜ëŠ” ë°©í–¥ ì£¼ì˜');
  return factors.length > 0 ? factors.map((f, i) => (i+1) + '. ' + f).join('\n') : 'íŠ¹ë³„í•œ í•µì‹¬ ìš”ì†Œ ì—†ìŒ';
})()}

ã€ê´€ê³„ ìœ í˜•ã€‘ ${relType === 'romance' ? 'ğŸ’• ì—°ì¸/ë°°ìš°ì' : relType === 'business' ? 'ğŸ’¼ ë¹„ì¦ˆë‹ˆìŠ¤' : 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ê°€ì¡±'}

ã€ê¶í•© ì´ì ã€‘ ${r.totalScore}ì  (${r.grade})

ã€ì„¸ë¶€ ë¶„ì„ ê²°ê³¼ã€‘
`;
const categoryNames = {
  ilgan: 'ì¼ê°„(ì²œê°„) ê¶í•©',
  ilji: 'ì¼ì§€(ë°°ìš°ìê¶) ê¶í•©',
  samhap: 'ì‚¼í•©/ë°©í•© ê¶í•©',
  napeum: 'ë‚©ìŒ ê¶í•©',
  yongsin: 'ìš©ì‹  ê¶í•©',
  jijanggan: 'ì§€ì¥ê°„(ì•”í•©) ê¶í•©',
  ddi: 'ë  ê¶í•©',
  ilju: 'ê·€ì¸ ê¶í•©',
  wonJinGuiMun: 'ì›ì§„/ê·€ë¬¸ ê¶í•©',
  yukChin: 'ìœ¡ì¹œ ê¶í•©',
  twelveState: '12ìš´ì„± ê¶í•©',
  strength: 'ì‹ ê°•/ì‹ ì•½ ê¶í•©',
  johu: 'ì¡°í›„ìš©ì‹  ê¶í•©',
  sinsal: 'ì‹ ì‚´ ê¶í•©',
  gongmang: 'ê³µë§ ê¶í•©'
};
for (const key in r.analysis) {
  if (r.analysis[key].details.length === 0) continue;
  text += `\n[${categoryNames[key] || key}] (${r.analysis[key].score > 0 ? '+' : ''}${r.analysis[key].score}ì )\n`;
  r.analysis[key].details.forEach(d => {
    text += `â€¢ ${d.title}: ${d.desc}\n`;
  });
}
// [v34.4] ì—°ë„ë³„ ìœ„í—˜ ì¶”ê°€
if (yearlyInfo && yearlyInfo.length > 0) {
  text += `\nã€í–¥í›„ 5ë…„ ì£¼ì˜ ì‹œê¸°ã€‘\n`;
  for (const risk of yearlyInfo) {
    text += `${risk.year}ë…„:\n`;
    for (const event of risk.events) {
      text += `  âš ï¸ [${event.severity}] ${event.desc}\n     â†’ ${event.advice}\n`;
    }
  }
}
text += `
===== AI í•´ì„ ìš”ì²­ (v34.7 í™•ì¥) =====

ã€ğŸ“Š ì ìˆ˜ ê³„ì‚° ê¸°ì¤€í‘œã€‘
ê¸°ì¤€ì : 50ì  (ì§ì ‘ í•©ì‚° ë°©ì‹)

í•µì‹¬ ìš”ì†Œ:
â€¢ ì²œê°„í•©(å¤©å¹²åˆ): +25ì 
â€¢ ì¼ê°„ ë™ì¼ ì˜¤í–‰: +10ì 
â€¢ ì¼ê°„ ìƒìƒ: +8ì 
â€¢ ì¼ê°„ ìƒê·¹: -5ì 
â€¢ ì¼ì§€ ìœ¡í•©(å…­åˆ): +20ì 
â€¢ ì¼ì§€ ì¶©(æ²–): -15ì 

ìš©ì‹  ê¶í•©:
â€¢ ìƒëŒ€ê°€ ë‚´ ìš©ì‹  â‰¥2ê°œ: +15ì 
â€¢ ìƒëŒ€ê°€ ë‚´ ìš©ì‹  =1ê°œ: +8ì 
â€¢ ë‚´ê°€ ìƒëŒ€ì˜ ìš©ì‹  â‰¥2ê°œ: +10ì 
â€¢ ìƒëŒ€ê°€ ë‚´ ê¸°ì‹  â‰¥2ê°œ (ì—°ì• ): -8ì 
â€¢ ìƒëŒ€ê°€ ë‚´ ê¸°ì‹  â‰¥2ê°œ (ë¹„ì¦ˆë‹ˆìŠ¤): +5ì  â† ìƒì‚°ì  ê¸´ì¥!

ì¡°í›„ ê¶í•©:
â€¢ í•œë‚œì¡°ìŠµ ë³´ì™„ (å¯’â†”ç‡¥): +15ì 
â€¢ ë™ì¼ ê¸°í›„ (å¯’+å¯’ or ç‡¥+ç‡¥): -3ì 

ê·€ì¸/ì•”í•©:
â€¢ ìƒëŒ€ê°€ ë‚´ ì²œì„ê·€ì¸: +10ì 
â€¢ ë‚´ê°€ ìƒëŒ€ì˜ ì²œì„ê·€ì¸: +8ì 
â€¢ ì•”í•©(æš—åˆ): +10ì 

ì¶©ëŒ ìš”ì†Œ:
â€¢ ì›ì§„(æ€¨å—”) ì—°ì• : -12ì 
â€¢ ì›ì§„(æ€¨å—”) ë¹„ì¦ˆë‹ˆìŠ¤: -8ì 
â€¢ ê·€ë¬¸(é¬¼é–€): -8ì 
â€¢ í˜•(åˆ‘): -5~-10ì 

ì‹ ì‚´ ê¶í•©:
â€¢ ìŒë„í™”(ì—°ì• ): +5ì 
â€¢ ìŒë„í™”(ë¹„ì¦ˆë‹ˆìŠ¤): -3ì 
â€¢ ìŒì—­ë§ˆ: +4ì 
â€¢ ìŒí™”ê°œ: +5ì 

ã€âš ï¸ è¡“èªæŒ‡å— (ìš©ì–´ ê°€ì´ë“œ)ã€‘
â€¢ å…­åˆ (ìœ¡í•©): ë°°ìš°ìê¶ ê²°í•© - ê°€ì¥ ê°•ë ¥í•œ ë¡œë§¨í‹± ì§€í‘œ
â€¢ ä¸‰åˆ (ì‚¼í•©): ì¹´ë¥´ë§ˆ ì‚¼ìœ„ì¼ì²´ - ê³µìœ ëœ ì‚¶ì˜ ëª©ì 
â€¢ æ€¨å—” (ì›ì§„): ìˆ¨ê²¨ì§„ ë§ˆì°° - ì¶”ê°€ì ì¸ ì¸ë‚´ í•„ìš”
â€¢ å¤©å¹²åˆ (ì²œê°„í•©): í•˜ëŠ˜ì˜ ë§¤ì¹­ - ì •ì‹ ì /ì˜ì  ì—°ê²°
â€¢ æ—¥æ”¯æ²– (ì¼ì§€ì¶©): ë°°ìš°ìê¶ ì¶©ëŒ - ì—´ì •ì ì´ì§€ë§Œ ë³€ë™ì 

ã€âš ï¸ èª¿å€™è«– (ê¸°í›„ ì´ë¡ ) - í•´ì„ì˜ í•µì‹¬ã€‘
ì „í†µì  å¿Œç¥(ê¸°í”¼ ìš”ì†Œ) ê°œë…ì€ ê³„ì ˆì  í•„ìš”ì— ì˜í•´ ì¬í•´ì„ë¨:
â€¢ å†¬åœŸ (ê²¨ìš¸ í™) + æœ¨: ë‚˜ë¬´ê°€ ì–¸ ë•…ì„ ê°ˆì•„ì¤Œ â†’ ìœ ë¦¬ (+15)
â€¢ å¤åœŸ (ì—¬ë¦„ í™) + æ°´: ë¬¼ì´ ë§ˆë¥¸ ë•…ì„ ì ì…”ì¤Œ â†’ ìœ ë¦¬ (+15)
â€¢ å¯’é‡‘ (ê²¨ìš¸ ê¸ˆì†) + ç«: ë¶ˆì´ ì°¨ê°€ìš´ ê¸ˆì†ì„ ë‹¨ë ¨ â†’ ìœ ë¦¬ (+15)
â€¢ å¯’æ°´ (ê²¨ìš¸ ë¬¼) + ç«: ë¶ˆì´ ì–¸ ë¬¼ì„ ë…¹ì—¬ì¤Œ â†’ ìœ ë¦¬ (+15)
âš ï¸ åŒèª¿å€™ (ë™ì¼ ê¸°í›„) - ì£¼ì˜ í•„ìš”:
â€¢ å¯’ + å¯’ (ë‘˜ ë‹¤ ê²¨ìš¸): ì„œë¡œ ë”°ëœ»í•¨ì„ ì¤„ ìˆ˜ ì—†ìŒ â†’ ë¶ˆë¦¬ (-3)
â€¢ ç‡¥ + ç‡¥ (ë‘˜ ë‹¤ ì—¬ë¦„): ì„œë¡œ ì‹œì›í•¨ì„ ì¤„ ìˆ˜ ì—†ìŒ â†’ ë¶ˆë¦¬ (-3)

ã€ê´€ê³„ ìœ í˜•ë³„ ì°¨ì´ã€‘
â€¢ ì—°ì¸/ê°€ì¡±: í¸ì•ˆí•¨ê³¼ ì¡°í™” ì¤‘ì‹œ, ì„±ì¥ì„ ìœ„í•œ ë§ˆì°°ë„ ê°€ì¹˜ ìˆìŒ
â€¢ ë¹„ì¦ˆë‹ˆìŠ¤: ê¸´ì¥ = í˜ì‹ ! ëŒ€ë¦½í•˜ëŠ” í˜ì´ ì„±ê³µì„ ì´ë”

[ğŸ”¥ í•µì‹¬ 7ëŒ€ ì§€ì¹¨]
â‘  ì¼ì§€ ì¶©(æ²–) = ë¶€ë¶€ ê°ˆë“± (ë‹¨, ì‚¼í•©ìœ¼ë¡œ í•´ì†Œë˜ë©´ 'ì—­ë™ì ì¸ ê´€ê³„'ë¡œ ë°˜ì „)
â‘¡ ì²œê°„í•© = ìš´ëª…ì  ëŒë¦¼ (í•©í™” ì˜¤í–‰ì´ ìš©ì‹ ì´ë©´ ëŒ€ê¸¸, ê¸°ì‹ ì´ë©´ ë…ì´ ë¨)
â‘¢ ìš©ì‹  ê¶í•© = ê·€ì¸ íŒë³„ì˜ í•µì‹¬ (ìƒëŒ€ ì‚¬ì£¼ì— ë‚´ ìš©ì‹  å¤š = ë§Œë‚˜ë©´ ìš´ ìƒìŠ¹)
â‘£ ì‹ ê°•+ì‹ ì•½ = ì´ìƒì  ë³´ì™„ / ì‹ ê°•+ì‹ ê°• = ì£¼ë„ê¶Œ ë‹¤íˆ¼ ê²½ê³ 
â‘¤ ì¡°í›„ ë³´ì™„ = ìµœê³  ê¶í•© (í•œ+ì¡°/ì¡°+ìŠµ = ì²œìƒì—°ë¶„ +15) / ë™ì¼ ê³„ì—´(í•œ+í•œ, ì¡°+ì¡°) = í˜ë„í‹° -3
â‘¥ ì›ì§„+ìœ¡í•© = ë¯¸ì›Œë„ ëª» ë– ë‚˜ëŠ” ì•…ì—° (ê±°ë¦¬ë‘ê¸°ê°€ ìœ ì¼í•œ í•´ë²•)
â‘¦ ë°°ìš°ìì„± = ëŒë¦¼ì˜ í•µì‹¬ (ìƒëŒ€ì—ê²Œ ë‚´ ë°°ìš°ìì„± å¤š = ë³¸ëŠ¥ì  ëŒë¦¼)

[í˜ë¥´ì†Œë‚˜ ì„¤ì •]
ë‹¹ì‹ ì€ 30ë…„ ê²½ë ¥ì˜ í˜„ëŒ€ì ì´ê³  ì„¸ë ¨ëœ ëª…ë¦¬í•™ìì…ë‹ˆë‹¤.
- ì „ë¬¸ ìš©ì–´ë¥¼ ì‚¬ìš©í•˜ë˜ ì‰¬ìš´ ë¹„ìœ ë¥¼ ì„ì–´ ì„¤ëª…
- ë§íˆ¬ëŠ” ë”°ëœ»í•˜ê³  í¬ë§ì 
- ë¶€ì •ì  ë‚´ìš©ë„ ê±´ì„¤ì  ì¡°ì–¸ê³¼ í•¨ê»˜ ì „ë‹¬
- "~ì…ë‹ˆë‹¤"ì²´ ê²©ì‹ ì‚¬ìš©

[ë¶„ì„ ìš”ì²­ì‚¬í•­]
ìœ„ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒì„ ìƒì„¸íˆ ì„œìˆ í•´ ì£¼ì„¸ìš”:

0. ì¼ì£¼ ìºë¦­í„° ë§Œë‚¨ ì´ì•¼ê¸°
- "${myCharName}" ${myCharEmoji}ì™€ "${pCharName}" ${pCharEmoji}ì˜ ë§Œë‚¨ì„ ë¹„ìœ ë¡œ ë¬˜ì‚¬
- ì˜¤í–‰ ìƒí˜¸ì‘ìš©("${myToPName || 'ë™ì¼ì˜¤í–‰'}", "${pToMeName || 'ë™ì¼ì˜¤í–‰'}")ì„ ì¼ìƒ ì˜ˆì‹œë¡œ ì„¤ëª…

1. ë°°ìš°ìì„± ë¶„ì„ (NEW!)
- ë‚´ê°€ ìƒëŒ€ì—ê²Œ ëŒë¦¬ëŠ” ì´ìœ  (ìƒëŒ€ê°€ ë‚´ ë°°ìš°ìì„± ${mySSInP}ê°œ ë³´ìœ )
- ìƒëŒ€ê°€ ë‚˜ì—ê²Œ ëŒë¦¬ëŠ” ì´ìœ  (ë‚´ê°€ ìƒëŒ€ ë°°ìš°ìì„± ${pSSInMe}ê°œ ë³´ìœ )
- "ì´ìƒí˜•" ê´€ì ì—ì„œì˜ ê¶í•© í‰ê°€

2. ê·€ì¸/ê¸°ì¸ íŒë³„ (NEW!)
- ìƒëŒ€ê°€ ë‚˜ì˜ ê·€ì¸ì¸ì§€, ê¸°ì¸ì¸ì§€ (ìš©ì‹  ${myYongInP}ê°œ vs ê¸°ì‹  ${myGiInP}ê°œ)
- ë‚´ê°€ ìƒëŒ€ì˜ ê·€ì¸ì¸ì§€, ê¸°ì¸ì¸ì§€ (ìš©ì‹  ${pYongInMe}ê°œ vs ê¸°ì‹  ${pGiInMe}ê°œ)
- ì¥ê¸°ì ìœ¼ë¡œ ìš´ì— ë¯¸ì¹˜ëŠ” ì˜í–¥

3. ë‘ ì‚¬ëŒì˜ ì²«ì¸ìƒê³¼ ëŒë¦¼
- ì¼ê°„ ì˜¤í–‰ì˜ ìƒìƒ/ìƒê·¹ ê´€ê³„
- ë‚©ìŒìœ¼ë¡œ ë³¸ ì˜í˜¼ì˜ íŒŒì¥
- 12ìš´ì„± ì—ë„ˆì§€ ë ˆë²¨ ë¹„êµ

4. ì—°ì•  ì‹œì ˆ ëª¨ìŠµ
- ì²œê°„í•©/ìœ¡í•©ì´ ìˆë‹¤ë©´ ì–´ë–¤ ëŒë¦¼ì¸ì§€
- ë°ì´íŠ¸ ìŠ¤íƒ€ì¼, í‘œí˜„ ë°©ì‹

5. ê²°í˜¼ í›„ ìƒí™œ
- ì¼ì§€(ë°°ìš°ìê¶) í•©/ì¶© ê´€ê³„
- ì‹ ê°•/ì‹ ì•½ìœ¼ë¡œ ë³¸ ì£¼ë„ê¶Œê³¼ ì—­í• 
- ê°ˆë“± í¬ì¸íŠ¸ì™€ í•´ê²°ì±…

6. ì¥ê¸°ì  ì „ë§
- ìœ„ê¸°ê°€ ì˜¬ ìˆ˜ ìˆëŠ” ì‹œê¸° (ì—°ë„ë³„ ì˜ˆì¸¡ ì°¸ì¡°)
- ê´€ê³„ë¥¼ ì§€ì†í•˜ê¸° ìœ„í•œ í•µì‹¬ ì¡°ê±´

7. ì¢…í•© ì¡°ì–¸
- ì´ ì»¤í”Œë§Œì˜ ê°•ì 
- ë°˜ë“œì‹œ ì¡°ì‹¬í•´ì•¼ í•  ì 
- í•œ ì¤„ ìš”ì•½: "ì´ ì¸ì—°ì˜ í•µì‹¬ ë©”ì‹œì§€"
`;
navigator.clipboard.writeText(text).then(() => {
  toast('ğŸ“‹ ë³µì‚¬ ì™„ë£Œ! Geminië‚˜ ChatGPTì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”');
}).catch(() => {
  const ta = document.createElement('textarea');
  ta.value = text;
  document.body.appendChild(ta);
  ta.select();
  document.execCommand('copy');
  document.body.removeChild(ta);
  toast('ğŸ“‹ ë³µì‚¬ ì™„ë£Œ!');
});
}

function openShareModal() {if (!currentNumbers.length) { toast('ë¨¼ì € ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ì„¸ìš”'); return; }
document.getElementById('share-balls').innerHTML = currentNumbers.map(n => createBall(n, true)).join('');document.getElementById('share-modal').classList.add('active');}
function closeShareModal() { document.getElementById('share-modal').classList.remove('active'); }
function shareNumbers() {const text = `ğŸ€ ì‚¬ì£¼ë¡œë˜ Pro\n${currentNumbers.join(' - ')}\nâœ¨ ì—­ëŒ€ ë‹¹ì²¨ë²ˆí˜¸ 100% ì œì™¸`;if (navigator.share) navigator.share({title:'ì‚¬ì£¼ë¡œë˜',text}).catch(copyNumbers);else copyNumbers();}
function copyNumbers() {navigator.clipboard.writeText(`ğŸ€ ì‚¬ì£¼ë¡œë˜: ${currentNumbers.join(', ')}`).then(() => { toast('ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!'); closeShareModal(); });}
function copyAccount() {navigator.clipboard.writeText(MY_ACCOUNT).then(() => toast('ê³„ì¢Œë²ˆí˜¸ ë³µì‚¬ë¨!'));}
function saveImage() {if (!currentNumbers.length) { toast('ë¨¼ì € ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ì„¸ìš”'); return; }
toast('ìŠ¤í¬ë¦°ìƒ·ìœ¼ë¡œ ì €ì¥í•´ì£¼ì„¸ìš” ğŸ“±');}</script><!-- ì €ì‘ê¶Œ í‘œì‹œ --><div style="text-align:center;padding:20px;color:#555;font-size:11px;">
    Â© 2025 ì‚¬ì£¼ë¡œë˜ Pro. All Rights Reserved.<br><span style="font-size:10px;color:#444;">ì´ ì„œë¹„ìŠ¤ì˜ ëª¨ë“  ì½˜í…ì¸ ì™€ ì½”ë“œëŠ” ì €ì‘ê¶Œë²•ì— ì˜í•´ ë³´í˜¸ë©ë‹ˆë‹¤.</span></div></body></html>
